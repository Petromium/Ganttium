var wce=Object.defineProperty;var mR=e=>{throw TypeError(e)};var Nce=(e,t,n)=>t in e?wce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>Nce(e,typeof t!="symbol"?t+"":t,n),dC=(e,t,n)=>t.has(e)||mR("Cannot "+n);var se=(e,t,n)=>(dC(e,t,"read from private field"),n?n.call(e):t.get(e)),Pt=(e,t,n)=>t.has(e)?mR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ot=(e,t,n,r)=>(dC(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Zt=(e,t,n)=>(dC(e,t,"access private method"),n);var yb=(e,t,n,r)=>({set _(i){ot(e,t,i,n)},get _(){return se(e,t,r)}});function Sce(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Cce="modulepreload",kce=function(e){return"/"+e},pR={},BP=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=kce(c),c in pR)return;pR[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Cce,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s9={exports:{}},RN={},i9={exports:{}},un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=Symbol.for("react.element"),Pce=Symbol.for("react.portal"),Ece=Symbol.for("react.fragment"),_ce=Symbol.for("react.strict_mode"),Ace=Symbol.for("react.profiler"),Tce=Symbol.for("react.provider"),Dce=Symbol.for("react.context"),Oce=Symbol.for("react.forward_ref"),Ice=Symbol.for("react.suspense"),Mce=Symbol.for("react.memo"),Rce=Symbol.for("react.lazy"),gR=Symbol.iterator;function $ce(e){return e===null||typeof e!="object"?null:(e=gR&&e[gR]||e["@@iterator"],typeof e=="function"?e:null)}var a9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o9=Object.assign,l9={};function Dp(e,t,n){this.props=e,this.context=t,this.refs=l9,this.updater=n||a9}Dp.prototype.isReactComponent={};Dp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c9(){}c9.prototype=Dp.prototype;function KA(e,t,n){this.props=e,this.context=t,this.refs=l9,this.updater=n||a9}var GA=KA.prototype=new c9;GA.constructor=KA;o9(GA,Dp.prototype);GA.isPureReactComponent=!0;var xR=Array.isArray,u9=Object.prototype.hasOwnProperty,QA={current:null},d9={key:!0,ref:!0,__self:!0,__source:!0};function f9(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)u9.call(t,r)&&!d9.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ny,type:e,key:a,ref:o,props:i,_owner:QA.current}}function Fce(e,t){return{$$typeof:Ny,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function YA(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ny}function Lce(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vR=/\/+/g;function fC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lce(""+e.key):t.toString(36)}function Dj(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ny:case Pce:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+fC(o,0):r,xR(i)?(n="",e!=null&&(n=e.replace(vR,"$&/")+"/"),Dj(i,t,n,"",function(u){return u})):i!=null&&(YA(i)&&(i=Fce(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vR,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",xR(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+fC(a,l);o+=Dj(a,t,n,c,i)}else if(c=$ce(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+fC(a,l++),o+=Dj(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bb(e,t,n){if(e==null)return e;var r=[],i=0;return Dj(e,r,"","",function(a){return t.call(n,a,i++)}),r}function zce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ci={current:null},Oj={transition:null},Bce={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:Oj,ReactCurrentOwner:QA};function h9(){throw Error("act(...) is not supported in production builds of React.")}un.Children={map:bb,forEach:function(e,t,n){bb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bb(e,function(){t++}),t},toArray:function(e){return bb(e,function(t){return t})||[]},only:function(e){if(!YA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};un.Component=Dp;un.Fragment=Ece;un.Profiler=Ace;un.PureComponent=KA;un.StrictMode=_ce;un.Suspense=Ice;un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bce;un.act=h9;un.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=o9({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=QA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)u9.call(t,c)&&!d9.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ny,type:e.type,key:i,ref:a,props:r,_owner:o}};un.createContext=function(e){return e={$$typeof:Dce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tce,_context:e},e.Consumer=e};un.createElement=f9;un.createFactory=function(e){var t=f9.bind(null,e);return t.type=e,t};un.createRef=function(){return{current:null}};un.forwardRef=function(e){return{$$typeof:Oce,render:e}};un.isValidElement=YA;un.lazy=function(e){return{$$typeof:Rce,_payload:{_status:-1,_result:e},_init:zce}};un.memo=function(e,t){return{$$typeof:Mce,type:e,compare:t===void 0?null:t}};un.startTransition=function(e){var t=Oj.transition;Oj.transition={};try{e()}finally{Oj.transition=t}};un.unstable_act=h9;un.useCallback=function(e,t){return Ci.current.useCallback(e,t)};un.useContext=function(e){return Ci.current.useContext(e)};un.useDebugValue=function(){};un.useDeferredValue=function(e){return Ci.current.useDeferredValue(e)};un.useEffect=function(e,t){return Ci.current.useEffect(e,t)};un.useId=function(){return Ci.current.useId()};un.useImperativeHandle=function(e,t,n){return Ci.current.useImperativeHandle(e,t,n)};un.useInsertionEffect=function(e,t){return Ci.current.useInsertionEffect(e,t)};un.useLayoutEffect=function(e,t){return Ci.current.useLayoutEffect(e,t)};un.useMemo=function(e,t){return Ci.current.useMemo(e,t)};un.useReducer=function(e,t,n){return Ci.current.useReducer(e,t,n)};un.useRef=function(e){return Ci.current.useRef(e)};un.useState=function(e){return Ci.current.useState(e)};un.useSyncExternalStore=function(e,t,n){return Ci.current.useSyncExternalStore(e,t,n)};un.useTransition=function(){return Ci.current.useTransition()};un.version="18.3.1";i9.exports=un;var x=i9.exports;const Q=yn(x),$N=Sce({__proto__:null,default:Q},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vce=x,qce=Symbol.for("react.element"),Uce=Symbol.for("react.fragment"),Wce=Object.prototype.hasOwnProperty,Hce=Vce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kce={key:!0,ref:!0,__self:!0,__source:!0};function m9(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Wce.call(t,r)&&!Kce.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:qce,type:e,key:a,ref:o,props:i,_owner:Hce.current}}RN.Fragment=Uce;RN.jsx=m9;RN.jsxs=m9;s9.exports=RN;var s=s9.exports,p9={exports:{}},ja={},g9={exports:{}},x9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,B){var L=E.length;E.push(B);e:for(;0<L;){var I=L-1>>>1,q=E[I];if(0<i(q,B))E[I]=B,E[L]=q,L=I;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var B=E[0],L=E.pop();if(L!==B){E[0]=L;e:for(var I=0,q=E.length,$=q>>>1;I<$;){var z=2*(I+1)-1,Y=E[z],ne=z+1,te=E[ne];if(0>i(Y,L))ne<q&&0>i(te,Y)?(E[I]=te,E[ne]=L,I=ne):(E[I]=Y,E[z]=L,I=z);else if(ne<q&&0>i(te,L))E[I]=te,E[ne]=L,I=ne;else break e}}return B}function i(E,B){var L=E.sortIndex-B.sortIndex;return L!==0?L:E.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(E){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=E)r(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(u)}}function N(E){if(p=!1,j(E),!g)if(n(c)!==null)g=!0,R(w);else{var B=n(u);B!==null&&F(N,B.startTime-E)}}function w(E,B){g=!1,p&&(p=!1,b(C),C=-1),m=!0;var L=h;try{for(j(B),f=n(c);f!==null&&(!(f.expirationTime>B)||E&&!P());){var I=f.callback;if(typeof I=="function"){f.callback=null,h=f.priorityLevel;var q=I(f.expirationTime<=B);B=e.unstable_now(),typeof q=="function"?f.callback=q:f===n(c)&&r(c),j(B)}else r(c);f=n(c)}if(f!==null)var $=!0;else{var z=n(u);z!==null&&F(N,z.startTime-B),$=!1}return $}finally{f=null,h=L,m=!1}}var S=!1,k=null,C=-1,A=5,D=-1;function P(){return!(e.unstable_now()-D<A)}function _(){if(k!==null){var E=e.unstable_now();D=E;var B=!0;try{B=k(!0,E)}finally{B?O():(S=!1,k=null)}}else S=!1}var O;if(typeof y=="function")O=function(){y(_)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,T=M.port2;M.port1.onmessage=_,O=function(){T.postMessage(null)}}else O=function(){v(_,0)};function R(E){k=E,S||(S=!0,O())}function F(E,B){C=v(function(){E(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,R(w))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var L=h;h=B;try{return E()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,B){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var L=h;h=E;try{return B()}finally{h=L}},e.unstable_scheduleCallback=function(E,B,L){var I=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,E){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,E={id:d++,callback:B,priorityLevel:E,startTime:L,expirationTime:q,sortIndex:-1},L>I?(E.sortIndex=L,t(u,E),n(c)===null&&E===n(u)&&(p?(b(C),C=-1):p=!0,F(N,L-I))):(E.sortIndex=q,t(c,E),g||m||(g=!0,R(w))),E},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(E){var B=h;return function(){var L=h;h=B;try{return E.apply(this,arguments)}finally{h=L}}}})(x9);g9.exports=x9;var Gce=g9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qce=x,va=Gce;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v9=new Set,Wx={};function Ff(e,t){km(e,t),km(e+"Capture",t)}function km(e,t){for(Wx[e]=t,e=0;e<t.length;e++)v9.add(t[e])}var nc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VP=Object.prototype.hasOwnProperty,Yce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yR={},bR={};function Xce(e){return VP.call(bR,e)?!0:VP.call(yR,e)?!1:Yce.test(e)?bR[e]=!0:(yR[e]=!0,!1)}function Zce(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jce(e,t,n,r){if(t===null||typeof t>"u"||Zce(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ki(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fs[e]=new ki(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fs[t]=new ki(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fs[e]=new ki(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fs[e]=new ki(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fs[e]=new ki(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fs[e]=new ki(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fs[e]=new ki(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fs[e]=new ki(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fs[e]=new ki(e,5,!1,e.toLowerCase(),null,!1,!1)});var XA=/[\-:]([a-z])/g;function ZA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XA,ZA);Fs[t]=new ki(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XA,ZA);Fs[t]=new ki(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XA,ZA);Fs[t]=new ki(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fs[e]=new ki(e,1,!1,e.toLowerCase(),null,!1,!1)});Fs.xlinkHref=new ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fs[e]=new ki(e,1,!1,e.toLowerCase(),null,!0,!0)});function JA(e,t,n,r){var i=Fs.hasOwnProperty(t)?Fs[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jce(t,n,i,r)&&(n=null),r||i===null?Xce(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xc=Qce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jb=Symbol.for("react.element"),jh=Symbol.for("react.portal"),wh=Symbol.for("react.fragment"),eT=Symbol.for("react.strict_mode"),qP=Symbol.for("react.profiler"),y9=Symbol.for("react.provider"),b9=Symbol.for("react.context"),tT=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),WP=Symbol.for("react.suspense_list"),nT=Symbol.for("react.memo"),Bc=Symbol.for("react.lazy"),j9=Symbol.for("react.offscreen"),jR=Symbol.iterator;function Pg(e){return e===null||typeof e!="object"?null:(e=jR&&e[jR]||e["@@iterator"],typeof e=="function"?e:null)}var vr=Object.assign,hC;function sx(e){if(hC===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);hC=t&&t[1]||""}return`
`+hC+e}var mC=!1;function pC(e,t){if(!e||mC)return"";mC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{mC=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sx(e):""}function eue(e){switch(e.tag){case 5:return sx(e.type);case 16:return sx("Lazy");case 13:return sx("Suspense");case 19:return sx("SuspenseList");case 0:case 2:case 15:return e=pC(e.type,!1),e;case 11:return e=pC(e.type.render,!1),e;case 1:return e=pC(e.type,!0),e;default:return""}}function HP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wh:return"Fragment";case jh:return"Portal";case qP:return"Profiler";case eT:return"StrictMode";case UP:return"Suspense";case WP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case b9:return(e.displayName||"Context")+".Consumer";case y9:return(e._context.displayName||"Context")+".Provider";case tT:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nT:return t=e.displayName||null,t!==null?t:HP(e.type)||"Memo";case Bc:t=e._payload,e=e._init;try{return HP(e(t))}catch{}}return null}function tue(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HP(t);case 8:return t===eT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function w9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nue(e){var t=w9(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wb(e){e._valueTracker||(e._valueTracker=nue(e))}function N9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=w9(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function u0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function KP(e,t){var n=t.checked;return vr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wR(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function S9(e,t){t=t.checked,t!=null&&JA(e,"checked",t,!1)}function GP(e,t){S9(e,t);var n=Cu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?QP(e,t.type,n):t.hasOwnProperty("defaultValue")&&QP(e,t.type,Cu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function NR(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function QP(e,t,n){(t!=="number"||u0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ix=Array.isArray;function Kh(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cu(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function YP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return vr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SR(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ue(92));if(ix(n)){if(1<n.length)throw Error(Ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cu(n)}}function C9(e,t){var n=Cu(t.value),r=Cu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function CR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function k9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?k9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nb,P9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nb=Nb||document.createElement("div"),Nb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hx(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rue=["Webkit","ms","Moz","O"];Object.keys(gx).forEach(function(e){rue.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gx[t]=gx[e]})});function E9(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gx.hasOwnProperty(e)&&gx[e]?(""+t).trim():t+"px"}function _9(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=E9(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var sue=vr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZP(e,t){if(t){if(sue[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function JP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e2=null;function rT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var t2=null,Gh=null,Qh=null;function kR(e){if(e=ky(e)){if(typeof t2!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=VN(t),t2(e.stateNode,e.type,t))}}function A9(e){Gh?Qh?Qh.push(e):Qh=[e]:Gh=e}function T9(){if(Gh){var e=Gh,t=Qh;if(Qh=Gh=null,kR(e),t)for(e=0;e<t.length;e++)kR(t[e])}}function D9(e,t){return e(t)}function O9(){}var gC=!1;function I9(e,t,n){if(gC)return e(t,n);gC=!0;try{return D9(e,t,n)}finally{gC=!1,(Gh!==null||Qh!==null)&&(O9(),T9())}}function Kx(e,t){var n=e.stateNode;if(n===null)return null;var r=VN(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ue(231,t,typeof n));return n}var n2=!1;if(nc)try{var Eg={};Object.defineProperty(Eg,"passive",{get:function(){n2=!0}}),window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,Eg)}catch{n2=!1}function iue(e,t,n,r,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var xx=!1,d0=null,f0=!1,r2=null,aue={onError:function(e){xx=!0,d0=e}};function oue(e,t,n,r,i,a,o,l,c){xx=!1,d0=null,iue.apply(aue,arguments)}function lue(e,t,n,r,i,a,o,l,c){if(oue.apply(this,arguments),xx){if(xx){var u=d0;xx=!1,d0=null}else throw Error(Ue(198));f0||(f0=!0,r2=u)}}function Lf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function M9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PR(e){if(Lf(e)!==e)throw Error(Ue(188))}function cue(e){var t=e.alternate;if(!t){if(t=Lf(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return PR(i),e;if(a===r)return PR(i),t;a=a.sibling}throw Error(Ue(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(Ue(189))}}if(n.alternate!==r)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?e:t}function R9(e){return e=cue(e),e!==null?$9(e):null}function $9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$9(e);if(t!==null)return t;e=e.sibling}return null}var F9=va.unstable_scheduleCallback,ER=va.unstable_cancelCallback,uue=va.unstable_shouldYield,due=va.unstable_requestPaint,Rr=va.unstable_now,fue=va.unstable_getCurrentPriorityLevel,sT=va.unstable_ImmediatePriority,L9=va.unstable_UserBlockingPriority,h0=va.unstable_NormalPriority,hue=va.unstable_LowPriority,z9=va.unstable_IdlePriority,FN=null,Jo=null;function mue(e){if(Jo&&typeof Jo.onCommitFiberRoot=="function")try{Jo.onCommitFiberRoot(FN,e,void 0,(e.current.flags&128)===128)}catch{}}var wo=Math.clz32?Math.clz32:xue,pue=Math.log,gue=Math.LN2;function xue(e){return e>>>=0,e===0?32:31-(pue(e)/gue|0)|0}var Sb=64,Cb=4194304;function ax(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function m0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ax(l):(a&=o,a!==0&&(r=ax(a)))}else o=n&~i,o!==0?r=ax(o):a!==0&&(r=ax(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-wo(t),i=1<<n,r|=e[n],t&=~i;return r}function vue(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yue(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-wo(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=vue(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function s2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function B9(){var e=Sb;return Sb<<=1,!(Sb&4194240)&&(Sb=64),e}function xC(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sy(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wo(t),e[t]=n}function bue(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-wo(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function iT(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-wo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var In=0;function V9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var q9,aT,U9,W9,H9,i2=!1,kb=[],uu=null,du=null,fu=null,Gx=new Map,Qx=new Map,Uc=[],jue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _R(e,t){switch(e){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":du=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":Gx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qx.delete(t.pointerId)}}function _g(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ky(t),t!==null&&aT(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function wue(e,t,n,r,i){switch(t){case"focusin":return uu=_g(uu,e,t,n,r,i),!0;case"dragenter":return du=_g(du,e,t,n,r,i),!0;case"mouseover":return fu=_g(fu,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Gx.set(a,_g(Gx.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Qx.set(a,_g(Qx.get(a)||null,e,t,n,r,i)),!0}return!1}function K9(e){var t=Dd(e.target);if(t!==null){var n=Lf(t);if(n!==null){if(t=n.tag,t===13){if(t=M9(n),t!==null){e.blockedOn=t,H9(e.priority,function(){U9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ij(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=a2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);e2=r,n.target.dispatchEvent(r),e2=null}else return t=ky(n),t!==null&&aT(t),e.blockedOn=n,!1;t.shift()}return!0}function AR(e,t,n){Ij(e)&&n.delete(t)}function Nue(){i2=!1,uu!==null&&Ij(uu)&&(uu=null),du!==null&&Ij(du)&&(du=null),fu!==null&&Ij(fu)&&(fu=null),Gx.forEach(AR),Qx.forEach(AR)}function Ag(e,t){e.blockedOn===t&&(e.blockedOn=null,i2||(i2=!0,va.unstable_scheduleCallback(va.unstable_NormalPriority,Nue)))}function Yx(e){function t(i){return Ag(i,e)}if(0<kb.length){Ag(kb[0],e);for(var n=1;n<kb.length;n++){var r=kb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(uu!==null&&Ag(uu,e),du!==null&&Ag(du,e),fu!==null&&Ag(fu,e),Gx.forEach(t),Qx.forEach(t),n=0;n<Uc.length;n++)r=Uc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Uc.length&&(n=Uc[0],n.blockedOn===null);)K9(n),n.blockedOn===null&&Uc.shift()}var Yh=xc.ReactCurrentBatchConfig,p0=!0;function Sue(e,t,n,r){var i=In,a=Yh.transition;Yh.transition=null;try{In=1,oT(e,t,n,r)}finally{In=i,Yh.transition=a}}function Cue(e,t,n,r){var i=In,a=Yh.transition;Yh.transition=null;try{In=4,oT(e,t,n,r)}finally{In=i,Yh.transition=a}}function oT(e,t,n,r){if(p0){var i=a2(e,t,n,r);if(i===null)PC(e,t,r,g0,n),_R(e,r);else if(wue(i,e,t,n,r))r.stopPropagation();else if(_R(e,r),t&4&&-1<jue.indexOf(e)){for(;i!==null;){var a=ky(i);if(a!==null&&q9(a),a=a2(e,t,n,r),a===null&&PC(e,t,r,g0,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else PC(e,t,r,null,n)}}var g0=null;function a2(e,t,n,r){if(g0=null,e=rT(r),e=Dd(e),e!==null)if(t=Lf(e),t===null)e=null;else if(n=t.tag,n===13){if(e=M9(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return g0=e,null}function G9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fue()){case sT:return 1;case L9:return 4;case h0:case hue:return 16;case z9:return 536870912;default:return 16}default:return 16}}var iu=null,lT=null,Mj=null;function Q9(){if(Mj)return Mj;var e,t=lT,n=t.length,r,i="value"in iu?iu.value:iu.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Mj=i.slice(e,1<r?1-r:void 0)}function Rj(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pb(){return!0}function TR(){return!1}function wa(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pb:TR,this.isPropagationStopped=TR,this}return vr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pb)},persist:function(){},isPersistent:Pb}),t}var Op={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cT=wa(Op),Cy=vr({},Op,{view:0,detail:0}),kue=wa(Cy),vC,yC,Tg,LN=vr({},Cy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tg&&(Tg&&e.type==="mousemove"?(vC=e.screenX-Tg.screenX,yC=e.screenY-Tg.screenY):yC=vC=0,Tg=e),vC)},movementY:function(e){return"movementY"in e?e.movementY:yC}}),DR=wa(LN),Pue=vr({},LN,{dataTransfer:0}),Eue=wa(Pue),_ue=vr({},Cy,{relatedTarget:0}),bC=wa(_ue),Aue=vr({},Op,{animationName:0,elapsedTime:0,pseudoElement:0}),Tue=wa(Aue),Due=vr({},Op,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Oue=wa(Due),Iue=vr({},Op,{data:0}),OR=wa(Iue),Mue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fue(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$ue[e])?!!t[e]:!1}function uT(){return Fue}var Lue=vr({},Cy,{key:function(e){if(e.key){var t=Mue[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rj(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rue[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uT,charCode:function(e){return e.type==="keypress"?Rj(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rj(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zue=wa(Lue),Bue=vr({},LN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IR=wa(Bue),Vue=vr({},Cy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uT}),que=wa(Vue),Uue=vr({},Op,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wue=wa(Uue),Hue=vr({},LN,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kue=wa(Hue),Gue=[9,13,27,32],dT=nc&&"CompositionEvent"in window,vx=null;nc&&"documentMode"in document&&(vx=document.documentMode);var Que=nc&&"TextEvent"in window&&!vx,Y9=nc&&(!dT||vx&&8<vx&&11>=vx),MR=" ",RR=!1;function X9(e,t){switch(e){case"keyup":return Gue.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nh=!1;function Yue(e,t){switch(e){case"compositionend":return Z9(t);case"keypress":return t.which!==32?null:(RR=!0,MR);case"textInput":return e=t.data,e===MR&&RR?null:e;default:return null}}function Xue(e,t){if(Nh)return e==="compositionend"||!dT&&X9(e,t)?(e=Q9(),Mj=lT=iu=null,Nh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y9&&t.locale!=="ko"?null:t.data;default:return null}}var Zue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $R(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zue[e.type]:t==="textarea"}function J9(e,t,n,r){A9(r),t=x0(t,"onChange"),0<t.length&&(n=new cT("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yx=null,Xx=null;function Jue(e){uW(e,0)}function zN(e){var t=kh(e);if(N9(t))return e}function ede(e,t){if(e==="change")return t}var eW=!1;if(nc){var jC;if(nc){var wC="oninput"in document;if(!wC){var FR=document.createElement("div");FR.setAttribute("oninput","return;"),wC=typeof FR.oninput=="function"}jC=wC}else jC=!1;eW=jC&&(!document.documentMode||9<document.documentMode)}function LR(){yx&&(yx.detachEvent("onpropertychange",tW),Xx=yx=null)}function tW(e){if(e.propertyName==="value"&&zN(Xx)){var t=[];J9(t,Xx,e,rT(e)),I9(Jue,t)}}function tde(e,t,n){e==="focusin"?(LR(),yx=t,Xx=n,yx.attachEvent("onpropertychange",tW)):e==="focusout"&&LR()}function nde(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zN(Xx)}function rde(e,t){if(e==="click")return zN(t)}function sde(e,t){if(e==="input"||e==="change")return zN(t)}function ide(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ao=typeof Object.is=="function"?Object.is:ide;function Zx(e,t){if(Ao(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!VP.call(t,i)||!Ao(e[i],t[i]))return!1}return!0}function zR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BR(e,t){var n=zR(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zR(n)}}function nW(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nW(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rW(){for(var e=window,t=u0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=u0(e.document)}return t}function fT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ade(e){var t=rW(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nW(n.ownerDocument.documentElement,n)){if(r!==null&&fT(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=BR(n,a);var o=BR(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ode=nc&&"documentMode"in document&&11>=document.documentMode,Sh=null,o2=null,bx=null,l2=!1;function VR(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;l2||Sh==null||Sh!==u0(r)||(r=Sh,"selectionStart"in r&&fT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bx&&Zx(bx,r)||(bx=r,r=x0(o2,"onSelect"),0<r.length&&(t=new cT("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Sh)))}function Eb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ch={animationend:Eb("Animation","AnimationEnd"),animationiteration:Eb("Animation","AnimationIteration"),animationstart:Eb("Animation","AnimationStart"),transitionend:Eb("Transition","TransitionEnd")},NC={},sW={};nc&&(sW=document.createElement("div").style,"AnimationEvent"in window||(delete Ch.animationend.animation,delete Ch.animationiteration.animation,delete Ch.animationstart.animation),"TransitionEvent"in window||delete Ch.transitionend.transition);function BN(e){if(NC[e])return NC[e];if(!Ch[e])return e;var t=Ch[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sW)return NC[e]=t[n];return e}var iW=BN("animationend"),aW=BN("animationiteration"),oW=BN("animationstart"),lW=BN("transitionend"),cW=new Map,qR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wu(e,t){cW.set(e,t),Ff(t,[e])}for(var SC=0;SC<qR.length;SC++){var CC=qR[SC],lde=CC.toLowerCase(),cde=CC[0].toUpperCase()+CC.slice(1);Wu(lde,"on"+cde)}Wu(iW,"onAnimationEnd");Wu(aW,"onAnimationIteration");Wu(oW,"onAnimationStart");Wu("dblclick","onDoubleClick");Wu("focusin","onFocus");Wu("focusout","onBlur");Wu(lW,"onTransitionEnd");km("onMouseEnter",["mouseout","mouseover"]);km("onMouseLeave",["mouseout","mouseover"]);km("onPointerEnter",["pointerout","pointerover"]);km("onPointerLeave",["pointerout","pointerover"]);Ff("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ff("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ff("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ff("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ff("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ox="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ude=new Set("cancel close invalid load scroll toggle".split(" ").concat(ox));function UR(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lue(r,t,void 0,e),e.currentTarget=null}function uW(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;UR(i,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;UR(i,l,u),a=c}}}if(f0)throw e=r2,f0=!1,r2=null,e}function tr(e,t){var n=t[h2];n===void 0&&(n=t[h2]=new Set);var r=e+"__bubble";n.has(r)||(dW(t,e,2,!1),n.add(r))}function kC(e,t,n){var r=0;t&&(r|=4),dW(n,e,r,t)}var _b="_reactListening"+Math.random().toString(36).slice(2);function Jx(e){if(!e[_b]){e[_b]=!0,v9.forEach(function(n){n!=="selectionchange"&&(ude.has(n)||kC(n,!1,e),kC(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_b]||(t[_b]=!0,kC("selectionchange",!1,t))}}function dW(e,t,n,r){switch(G9(t)){case 1:var i=Sue;break;case 4:i=Cue;break;default:i=oT}n=i.bind(null,t,n,e),i=void 0,!n2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function PC(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Dd(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}I9(function(){var u=a,d=rT(n),f=[];e:{var h=cW.get(e);if(h!==void 0){var m=cT,g=e;switch(e){case"keypress":if(Rj(n)===0)break e;case"keydown":case"keyup":m=zue;break;case"focusin":g="focus",m=bC;break;case"focusout":g="blur",m=bC;break;case"beforeblur":case"afterblur":m=bC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=DR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Eue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=que;break;case iW:case aW:case oW:m=Tue;break;case lW:m=Wue;break;case"scroll":m=kue;break;case"wheel":m=Kue;break;case"copy":case"cut":case"paste":m=Oue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=IR}var p=(t&4)!==0,v=!p&&e==="scroll",b=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,j;y!==null;){j=y;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,b!==null&&(N=Kx(y,b),N!=null&&p.push(ev(y,N,j)))),v)break;y=y.return}0<p.length&&(h=new m(h,g,null,n,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==e2&&(g=n.relatedTarget||n.fromElement)&&(Dd(g)||g[rc]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Dd(g):null,g!==null&&(v=Lf(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=DR,N="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=IR,N="onPointerLeave",b="onPointerEnter",y="pointer"),v=m==null?h:kh(m),j=g==null?h:kh(g),h=new p(N,y+"leave",m,n,d),h.target=v,h.relatedTarget=j,N=null,Dd(d)===u&&(p=new p(b,y+"enter",g,n,d),p.target=j,p.relatedTarget=v,N=p),v=N,m&&g)t:{for(p=m,b=g,y=0,j=p;j;j=nh(j))y++;for(j=0,N=b;N;N=nh(N))j++;for(;0<y-j;)p=nh(p),y--;for(;0<j-y;)b=nh(b),j--;for(;y--;){if(p===b||b!==null&&p===b.alternate)break t;p=nh(p),b=nh(b)}p=null}else p=null;m!==null&&WR(f,h,m,p,!1),g!==null&&v!==null&&WR(f,v,g,p,!0)}}e:{if(h=u?kh(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var w=ede;else if($R(h))if(eW)w=sde;else{w=nde;var S=tde}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=rde);if(w&&(w=w(e,u))){J9(f,w,n,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&QP(h,"number",h.value)}switch(S=u?kh(u):window,e){case"focusin":($R(S)||S.contentEditable==="true")&&(Sh=S,o2=u,bx=null);break;case"focusout":bx=o2=Sh=null;break;case"mousedown":l2=!0;break;case"contextmenu":case"mouseup":case"dragend":l2=!1,VR(f,n,d);break;case"selectionchange":if(ode)break;case"keydown":case"keyup":VR(f,n,d)}var k;if(dT)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Nh?X9(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Y9&&n.locale!=="ko"&&(Nh||C!=="onCompositionStart"?C==="onCompositionEnd"&&Nh&&(k=Q9()):(iu=d,lT="value"in iu?iu.value:iu.textContent,Nh=!0)),S=x0(u,C),0<S.length&&(C=new OR(C,e,null,n,d),f.push({event:C,listeners:S}),k?C.data=k:(k=Z9(n),k!==null&&(C.data=k)))),(k=Que?Yue(e,n):Xue(e,n))&&(u=x0(u,"onBeforeInput"),0<u.length&&(d=new OR("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}uW(f,t)})}function ev(e,t,n){return{instance:e,listener:t,currentTarget:n}}function x0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Kx(e,n),a!=null&&r.unshift(ev(e,a,i)),a=Kx(e,t),a!=null&&r.push(ev(e,a,i))),e=e.return}return r}function nh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function WR(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Kx(n,a),c!=null&&o.unshift(ev(n,c,l))):i||(c=Kx(n,a),c!=null&&o.push(ev(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dde=/\r\n?/g,fde=/\u0000|\uFFFD/g;function HR(e){return(typeof e=="string"?e:""+e).replace(dde,`
`).replace(fde,"")}function Ab(e,t,n){if(t=HR(t),HR(e)!==t&&n)throw Error(Ue(425))}function v0(){}var c2=null,u2=null;function d2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var f2=typeof setTimeout=="function"?setTimeout:void 0,hde=typeof clearTimeout=="function"?clearTimeout:void 0,KR=typeof Promise=="function"?Promise:void 0,mde=typeof queueMicrotask=="function"?queueMicrotask:typeof KR<"u"?function(e){return KR.resolve(null).then(e).catch(pde)}:f2;function pde(e){setTimeout(function(){throw e})}function EC(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Yx(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yx(t)}function hu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function GR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ip=Math.random().toString(36).slice(2),Go="__reactFiber$"+Ip,tv="__reactProps$"+Ip,rc="__reactContainer$"+Ip,h2="__reactEvents$"+Ip,gde="__reactListeners$"+Ip,xde="__reactHandles$"+Ip;function Dd(e){var t=e[Go];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rc]||n[Go]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=GR(e);e!==null;){if(n=e[Go])return n;e=GR(e)}return t}e=n,n=e.parentNode}return null}function ky(e){return e=e[Go]||e[rc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function VN(e){return e[tv]||null}var m2=[],Ph=-1;function Hu(e){return{current:e}}function sr(e){0>Ph||(e.current=m2[Ph],m2[Ph]=null,Ph--)}function Yn(e,t){Ph++,m2[Ph]=e.current,e.current=t}var ku={},ti=Hu(ku),Vi=Hu(!1),df=ku;function Pm(e,t){var n=e.type.contextTypes;if(!n)return ku;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function qi(e){return e=e.childContextTypes,e!=null}function y0(){sr(Vi),sr(ti)}function QR(e,t,n){if(ti.current!==ku)throw Error(Ue(168));Yn(ti,t),Yn(Vi,n)}function fW(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ue(108,tue(e)||"Unknown",i));return vr({},n,r)}function b0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ku,df=ti.current,Yn(ti,e),Yn(Vi,Vi.current),!0}function YR(e,t,n){var r=e.stateNode;if(!r)throw Error(Ue(169));n?(e=fW(e,t,df),r.__reactInternalMemoizedMergedChildContext=e,sr(Vi),sr(ti),Yn(ti,e)):sr(Vi),Yn(Vi,n)}var Fl=null,qN=!1,_C=!1;function hW(e){Fl===null?Fl=[e]:Fl.push(e)}function vde(e){qN=!0,hW(e)}function Ku(){if(!_C&&Fl!==null){_C=!0;var e=0,t=In;try{var n=Fl;for(In=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fl=null,qN=!1}catch(i){throw Fl!==null&&(Fl=Fl.slice(e+1)),F9(sT,Ku),i}finally{In=t,_C=!1}}return null}var Eh=[],_h=0,j0=null,w0=0,Ma=[],Ra=0,ff=null,ql=1,Ul="";function vd(e,t){Eh[_h++]=w0,Eh[_h++]=j0,j0=e,w0=t}function mW(e,t,n){Ma[Ra++]=ql,Ma[Ra++]=Ul,Ma[Ra++]=ff,ff=e;var r=ql;e=Ul;var i=32-wo(r)-1;r&=~(1<<i),n+=1;var a=32-wo(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ql=1<<32-wo(t)+i|n<<i|r,Ul=a+e}else ql=1<<a|n<<i|r,Ul=e}function hT(e){e.return!==null&&(vd(e,1),mW(e,1,0))}function mT(e){for(;e===j0;)j0=Eh[--_h],Eh[_h]=null,w0=Eh[--_h],Eh[_h]=null;for(;e===ff;)ff=Ma[--Ra],Ma[Ra]=null,Ul=Ma[--Ra],Ma[Ra]=null,ql=Ma[--Ra],Ma[Ra]=null}var da=null,ua=null,or=!1,po=null;function pW(e,t){var n=La(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function XR(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,da=e,ua=hu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,da=e,ua=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ff!==null?{id:ql,overflow:Ul}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=La(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,da=e,ua=null,!0):!1;default:return!1}}function p2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function g2(e){if(or){var t=ua;if(t){var n=t;if(!XR(e,t)){if(p2(e))throw Error(Ue(418));t=hu(n.nextSibling);var r=da;t&&XR(e,t)?pW(r,n):(e.flags=e.flags&-4097|2,or=!1,da=e)}}else{if(p2(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,or=!1,da=e}}}function ZR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;da=e}function Tb(e){if(e!==da)return!1;if(!or)return ZR(e),or=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!d2(e.type,e.memoizedProps)),t&&(t=ua)){if(p2(e))throw gW(),Error(Ue(418));for(;t;)pW(e,t),t=hu(t.nextSibling)}if(ZR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ua=hu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ua=null}}else ua=da?hu(e.stateNode.nextSibling):null;return!0}function gW(){for(var e=ua;e;)e=hu(e.nextSibling)}function Em(){ua=da=null,or=!1}function pT(e){po===null?po=[e]:po.push(e)}var yde=xc.ReactCurrentBatchConfig;function Dg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var r=n.stateNode}if(!r)throw Error(Ue(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,e))}return e}function Db(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function JR(e){var t=e._init;return t(e._payload)}function xW(e){function t(b,y){if(e){var j=b.deletions;j===null?(b.deletions=[y],b.flags|=16):j.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function i(b,y){return b=xu(b,y),b.index=0,b.sibling=null,b}function a(b,y,j){return b.index=j,e?(j=b.alternate,j!==null?(j=j.index,j<y?(b.flags|=2,y):j):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,j,N){return y===null||y.tag!==6?(y=RC(j,b.mode,N),y.return=b,y):(y=i(y,j),y.return=b,y)}function c(b,y,j,N){var w=j.type;return w===wh?d(b,y,j.props.children,N,j.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bc&&JR(w)===y.type)?(N=i(y,j.props),N.ref=Dg(b,y,j),N.return=b,N):(N=qj(j.type,j.key,j.props,null,b.mode,N),N.ref=Dg(b,y,j),N.return=b,N)}function u(b,y,j,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=$C(j,b.mode,N),y.return=b,y):(y=i(y,j.children||[]),y.return=b,y)}function d(b,y,j,N,w){return y===null||y.tag!==7?(y=Xd(j,b.mode,N,w),y.return=b,y):(y=i(y,j),y.return=b,y)}function f(b,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=RC(""+y,b.mode,j),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jb:return j=qj(y.type,y.key,y.props,null,b.mode,j),j.ref=Dg(b,null,y),j.return=b,j;case jh:return y=$C(y,b.mode,j),y.return=b,y;case Bc:var N=y._init;return f(b,N(y._payload),j)}if(ix(y)||Pg(y))return y=Xd(y,b.mode,j,null),y.return=b,y;Db(b,y)}return null}function h(b,y,j,N){var w=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return w!==null?null:l(b,y,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case jb:return j.key===w?c(b,y,j,N):null;case jh:return j.key===w?u(b,y,j,N):null;case Bc:return w=j._init,h(b,y,w(j._payload),N)}if(ix(j)||Pg(j))return w!==null?null:d(b,y,j,N,null);Db(b,j)}return null}function m(b,y,j,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(j)||null,l(y,b,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jb:return b=b.get(N.key===null?j:N.key)||null,c(y,b,N,w);case jh:return b=b.get(N.key===null?j:N.key)||null,u(y,b,N,w);case Bc:var S=N._init;return m(b,y,j,S(N._payload),w)}if(ix(N)||Pg(N))return b=b.get(j)||null,d(y,b,N,w,null);Db(y,N)}return null}function g(b,y,j,N){for(var w=null,S=null,k=y,C=y=0,A=null;k!==null&&C<j.length;C++){k.index>C?(A=k,k=null):A=k.sibling;var D=h(b,k,j[C],N);if(D===null){k===null&&(k=A);break}e&&k&&D.alternate===null&&t(b,k),y=a(D,y,C),S===null?w=D:S.sibling=D,S=D,k=A}if(C===j.length)return n(b,k),or&&vd(b,C),w;if(k===null){for(;C<j.length;C++)k=f(b,j[C],N),k!==null&&(y=a(k,y,C),S===null?w=k:S.sibling=k,S=k);return or&&vd(b,C),w}for(k=r(b,k);C<j.length;C++)A=m(k,b,C,j[C],N),A!==null&&(e&&A.alternate!==null&&k.delete(A.key===null?C:A.key),y=a(A,y,C),S===null?w=A:S.sibling=A,S=A);return e&&k.forEach(function(P){return t(b,P)}),or&&vd(b,C),w}function p(b,y,j,N){var w=Pg(j);if(typeof w!="function")throw Error(Ue(150));if(j=w.call(j),j==null)throw Error(Ue(151));for(var S=w=null,k=y,C=y=0,A=null,D=j.next();k!==null&&!D.done;C++,D=j.next()){k.index>C?(A=k,k=null):A=k.sibling;var P=h(b,k,D.value,N);if(P===null){k===null&&(k=A);break}e&&k&&P.alternate===null&&t(b,k),y=a(P,y,C),S===null?w=P:S.sibling=P,S=P,k=A}if(D.done)return n(b,k),or&&vd(b,C),w;if(k===null){for(;!D.done;C++,D=j.next())D=f(b,D.value,N),D!==null&&(y=a(D,y,C),S===null?w=D:S.sibling=D,S=D);return or&&vd(b,C),w}for(k=r(b,k);!D.done;C++,D=j.next())D=m(k,b,C,D.value,N),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?C:D.key),y=a(D,y,C),S===null?w=D:S.sibling=D,S=D);return e&&k.forEach(function(_){return t(b,_)}),or&&vd(b,C),w}function v(b,y,j,N){if(typeof j=="object"&&j!==null&&j.type===wh&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case jb:e:{for(var w=j.key,S=y;S!==null;){if(S.key===w){if(w=j.type,w===wh){if(S.tag===7){n(b,S.sibling),y=i(S,j.props.children),y.return=b,b=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bc&&JR(w)===S.type){n(b,S.sibling),y=i(S,j.props),y.ref=Dg(b,S,j),y.return=b,b=y;break e}n(b,S);break}else t(b,S);S=S.sibling}j.type===wh?(y=Xd(j.props.children,b.mode,N,j.key),y.return=b,b=y):(N=qj(j.type,j.key,j.props,null,b.mode,N),N.ref=Dg(b,y,j),N.return=b,b=N)}return o(b);case jh:e:{for(S=j.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){n(b,y.sibling),y=i(y,j.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=$C(j,b.mode,N),y.return=b,b=y}return o(b);case Bc:return S=j._init,v(b,y,S(j._payload),N)}if(ix(j))return g(b,y,j,N);if(Pg(j))return p(b,y,j,N);Db(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(n(b,y.sibling),y=i(y,j),y.return=b,b=y):(n(b,y),y=RC(j,b.mode,N),y.return=b,b=y),o(b)):n(b,y)}return v}var _m=xW(!0),vW=xW(!1),N0=Hu(null),S0=null,Ah=null,gT=null;function xT(){gT=Ah=S0=null}function vT(e){var t=N0.current;sr(N0),e._currentValue=t}function x2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xh(e,t){S0=e,gT=Ah=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zi=!0),e.firstContext=null)}function Wa(e){var t=e._currentValue;if(gT!==e)if(e={context:e,memoizedValue:t,next:null},Ah===null){if(S0===null)throw Error(Ue(308));Ah=e,S0.dependencies={lanes:0,firstContext:e}}else Ah=Ah.next=e;return t}var Od=null;function yT(e){Od===null?Od=[e]:Od.push(e)}function yW(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,yT(t)):(n.next=i.next,i.next=n),t.interleaved=n,sc(e,r)}function sc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vc=!1;function bT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bW(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ql(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,sc(e,n)}return i=r.interleaved,i===null?(t.next=t,yT(r)):(t.next=i.next,i.next=t),r.interleaved=t,sc(e,n)}function $j(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iT(e,n)}}function e4(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function C0(e,t,n,r){var i=e.updateQueue;Vc=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,d=u=c=null,l=a;do{var h=l.lane,m=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=vr({},f,h);break e;case 2:Vc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);mf|=o,e.lanes=o,e.memoizedState=f}}function t4(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ue(191,i));i.call(r)}}}var Py={},el=Hu(Py),nv=Hu(Py),rv=Hu(Py);function Id(e){if(e===Py)throw Error(Ue(174));return e}function jT(e,t){switch(Yn(rv,t),Yn(nv,e),Yn(el,Py),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:XP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=XP(t,e)}sr(el),Yn(el,t)}function Am(){sr(el),sr(nv),sr(rv)}function jW(e){Id(rv.current);var t=Id(el.current),n=XP(t,e.type);t!==n&&(Yn(nv,e),Yn(el,n))}function wT(e){nv.current===e&&(sr(el),sr(nv))}var mr=Hu(0);function k0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var AC=[];function NT(){for(var e=0;e<AC.length;e++)AC[e]._workInProgressVersionPrimary=null;AC.length=0}var Fj=xc.ReactCurrentDispatcher,TC=xc.ReactCurrentBatchConfig,hf=0,xr=null,ts=null,us=null,P0=!1,jx=!1,sv=0,bde=0;function qs(){throw Error(Ue(321))}function ST(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ao(e[n],t[n]))return!1;return!0}function CT(e,t,n,r,i,a){if(hf=a,xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fj.current=e===null||e.memoizedState===null?Sde:Cde,e=n(r,i),jx){a=0;do{if(jx=!1,sv=0,25<=a)throw Error(Ue(301));a+=1,us=ts=null,t.updateQueue=null,Fj.current=kde,e=n(r,i)}while(jx)}if(Fj.current=E0,t=ts!==null&&ts.next!==null,hf=0,us=ts=xr=null,P0=!1,t)throw Error(Ue(300));return e}function kT(){var e=sv!==0;return sv=0,e}function Vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?xr.memoizedState=us=e:us=us.next=e,us}function Ha(){if(ts===null){var e=xr.alternate;e=e!==null?e.memoizedState:null}else e=ts.next;var t=us===null?xr.memoizedState:us.next;if(t!==null)us=t,ts=e;else{if(e===null)throw Error(Ue(310));ts=e,e={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},us===null?xr.memoizedState=us=e:us=us.next=e}return us}function iv(e,t){return typeof t=="function"?t(e):t}function DC(e){var t=Ha(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var r=ts,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((hf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,xr.lanes|=d,mf|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Ao(r,t.memoizedState)||(zi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,xr.lanes|=a,mf|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function OC(e){var t=Ha(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Ao(a,t.memoizedState)||(zi=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function wW(){}function NW(e,t){var n=xr,r=Ha(),i=t(),a=!Ao(r.memoizedState,i);if(a&&(r.memoizedState=i,zi=!0),r=r.queue,PT(kW.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||us!==null&&us.memoizedState.tag&1){if(n.flags|=2048,av(9,CW.bind(null,n,r,i,t),void 0,null),ms===null)throw Error(Ue(349));hf&30||SW(n,t,i)}return i}function SW(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function CW(e,t,n,r){t.value=n,t.getSnapshot=r,PW(t)&&EW(e)}function kW(e,t,n){return n(function(){PW(t)&&EW(e)})}function PW(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ao(e,n)}catch{return!0}}function EW(e){var t=sc(e,1);t!==null&&No(t,e,1,-1)}function n4(e){var t=Vo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:e},t.queue=e,e=e.dispatch=Nde.bind(null,xr,e),[t.memoizedState,e]}function av(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function _W(){return Ha().memoizedState}function Lj(e,t,n,r){var i=Vo();xr.flags|=e,i.memoizedState=av(1|t,n,void 0,r===void 0?null:r)}function UN(e,t,n,r){var i=Ha();r=r===void 0?null:r;var a=void 0;if(ts!==null){var o=ts.memoizedState;if(a=o.destroy,r!==null&&ST(r,o.deps)){i.memoizedState=av(t,n,a,r);return}}xr.flags|=e,i.memoizedState=av(1|t,n,a,r)}function r4(e,t){return Lj(8390656,8,e,t)}function PT(e,t){return UN(2048,8,e,t)}function AW(e,t){return UN(4,2,e,t)}function TW(e,t){return UN(4,4,e,t)}function DW(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OW(e,t,n){return n=n!=null?n.concat([e]):null,UN(4,4,DW.bind(null,t,e),n)}function ET(){}function IW(e,t){var n=Ha();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ST(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function MW(e,t){var n=Ha();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ST(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function RW(e,t,n){return hf&21?(Ao(n,t)||(n=B9(),xr.lanes|=n,mf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zi=!0),e.memoizedState=n)}function jde(e,t){var n=In;In=n!==0&&4>n?n:4,e(!0);var r=TC.transition;TC.transition={};try{e(!1),t()}finally{In=n,TC.transition=r}}function $W(){return Ha().memoizedState}function wde(e,t,n){var r=gu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FW(e))LW(t,n);else if(n=yW(e,t,n,r),n!==null){var i=vi();No(n,e,r,i),zW(n,t,r)}}function Nde(e,t,n){var r=gu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FW(e))LW(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ao(l,o)){var c=t.interleaved;c===null?(i.next=i,yT(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=yW(e,t,i,r),n!==null&&(i=vi(),No(n,e,r,i),zW(n,t,r))}}function FW(e){var t=e.alternate;return e===xr||t!==null&&t===xr}function LW(e,t){jx=P0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zW(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iT(e,n)}}var E0={readContext:Wa,useCallback:qs,useContext:qs,useEffect:qs,useImperativeHandle:qs,useInsertionEffect:qs,useLayoutEffect:qs,useMemo:qs,useReducer:qs,useRef:qs,useState:qs,useDebugValue:qs,useDeferredValue:qs,useTransition:qs,useMutableSource:qs,useSyncExternalStore:qs,useId:qs,unstable_isNewReconciler:!1},Sde={readContext:Wa,useCallback:function(e,t){return Vo().memoizedState=[e,t===void 0?null:t],e},useContext:Wa,useEffect:r4,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lj(4194308,4,DW.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lj(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lj(4,2,e,t)},useMemo:function(e,t){var n=Vo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=wde.bind(null,xr,e),[r.memoizedState,e]},useRef:function(e){var t=Vo();return e={current:e},t.memoizedState=e},useState:n4,useDebugValue:ET,useDeferredValue:function(e){return Vo().memoizedState=e},useTransition:function(){var e=n4(!1),t=e[0];return e=jde.bind(null,e[1]),Vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xr,i=Vo();if(or){if(n===void 0)throw Error(Ue(407));n=n()}else{if(n=t(),ms===null)throw Error(Ue(349));hf&30||SW(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,r4(kW.bind(null,r,a,e),[e]),r.flags|=2048,av(9,CW.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Vo(),t=ms.identifierPrefix;if(or){var n=Ul,r=ql;n=(r&~(1<<32-wo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sv++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bde++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cde={readContext:Wa,useCallback:IW,useContext:Wa,useEffect:PT,useImperativeHandle:OW,useInsertionEffect:AW,useLayoutEffect:TW,useMemo:MW,useReducer:DC,useRef:_W,useState:function(){return DC(iv)},useDebugValue:ET,useDeferredValue:function(e){var t=Ha();return RW(t,ts.memoizedState,e)},useTransition:function(){var e=DC(iv)[0],t=Ha().memoizedState;return[e,t]},useMutableSource:wW,useSyncExternalStore:NW,useId:$W,unstable_isNewReconciler:!1},kde={readContext:Wa,useCallback:IW,useContext:Wa,useEffect:PT,useImperativeHandle:OW,useInsertionEffect:AW,useLayoutEffect:TW,useMemo:MW,useReducer:OC,useRef:_W,useState:function(){return OC(iv)},useDebugValue:ET,useDeferredValue:function(e){var t=Ha();return ts===null?t.memoizedState=e:RW(t,ts.memoizedState,e)},useTransition:function(){var e=OC(iv)[0],t=Ha().memoizedState;return[e,t]},useMutableSource:wW,useSyncExternalStore:NW,useId:$W,unstable_isNewReconciler:!1};function co(e,t){if(e&&e.defaultProps){t=vr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function v2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:vr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var WN={isMounted:function(e){return(e=e._reactInternals)?Lf(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vi(),i=gu(e),a=Ql(r,i);a.payload=t,n!=null&&(a.callback=n),t=mu(e,a,i),t!==null&&(No(t,e,i,r),$j(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vi(),i=gu(e),a=Ql(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=mu(e,a,i),t!==null&&(No(t,e,i,r),$j(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vi(),r=gu(e),i=Ql(n,r);i.tag=2,t!=null&&(i.callback=t),t=mu(e,i,r),t!==null&&(No(t,e,r,n),$j(t,e,r))}};function s4(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Zx(n,r)||!Zx(i,a):!0}function BW(e,t,n){var r=!1,i=ku,a=t.contextType;return typeof a=="object"&&a!==null?a=Wa(a):(i=qi(t)?df:ti.current,r=t.contextTypes,a=(r=r!=null)?Pm(e,i):ku),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WN,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function i4(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&WN.enqueueReplaceState(t,t.state,null)}function y2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},bT(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wa(a):(a=qi(t)?df:ti.current,i.context=Pm(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(v2(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&WN.enqueueReplaceState(i,i.state,null),C0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Tm(e,t){try{var n="",r=t;do n+=eue(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function IC(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function b2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Pde=typeof WeakMap=="function"?WeakMap:Map;function VW(e,t,n){n=Ql(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){A0||(A0=!0,A2=r),b2(e,t)},n}function qW(e,t,n){n=Ql(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){b2(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){b2(e,t),typeof r!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function a4(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Pde;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Bde.bind(null,e,t,n),t.then(e,e))}function o4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function l4(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ql(-1,1),t.tag=2,mu(n,t,1))),n.lanes|=1),e)}var Ede=xc.ReactCurrentOwner,zi=!1;function di(e,t,n,r){t.child=e===null?vW(t,null,n,r):_m(t,e.child,n,r)}function c4(e,t,n,r,i){n=n.render;var a=t.ref;return Xh(t,i),r=CT(e,t,n,r,a,i),n=kT(),e!==null&&!zi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ic(e,t,i)):(or&&n&&hT(t),t.flags|=1,di(e,t,r,i),t.child)}function u4(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!RT(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,UW(e,t,a,r,i)):(e=qj(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Zx,n(o,r)&&e.ref===t.ref)return ic(e,t,i)}return t.flags|=1,e=xu(a,r),e.ref=t.ref,e.return=t,t.child=e}function UW(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Zx(a,r)&&e.ref===t.ref)if(zi=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(zi=!0);else return t.lanes=e.lanes,ic(e,t,i)}return j2(e,t,n,r,i)}function WW(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(Dh,na),na|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yn(Dh,na),na|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Yn(Dh,na),na|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Yn(Dh,na),na|=r;return di(e,t,i,n),t.child}function HW(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function j2(e,t,n,r,i){var a=qi(n)?df:ti.current;return a=Pm(t,a),Xh(t,i),n=CT(e,t,n,r,a,i),r=kT(),e!==null&&!zi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ic(e,t,i)):(or&&r&&hT(t),t.flags|=1,di(e,t,n,i),t.child)}function d4(e,t,n,r,i){if(qi(n)){var a=!0;b0(t)}else a=!1;if(Xh(t,i),t.stateNode===null)zj(e,t),BW(t,n,r),y2(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wa(u):(u=qi(n)?df:ti.current,u=Pm(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&i4(t,o,r,u),Vc=!1;var h=t.memoizedState;o.state=h,C0(t,r,o,i),c=t.memoizedState,l!==r||h!==c||Vi.current||Vc?(typeof d=="function"&&(v2(t,n,d,r),c=t.memoizedState),(l=Vc||s4(t,n,l,r,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,bW(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:co(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wa(c):(c=qi(n)?df:ti.current,c=Pm(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&i4(t,o,r,c),Vc=!1,h=t.memoizedState,o.state=h,C0(t,r,o,i);var g=t.memoizedState;l!==f||h!==g||Vi.current||Vc?(typeof m=="function"&&(v2(t,n,m,r),g=t.memoizedState),(u=Vc||s4(t,n,u,r,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return w2(e,t,n,r,a,i)}function w2(e,t,n,r,i,a){HW(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&YR(t,n,!1),ic(e,t,a);r=t.stateNode,Ede.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=_m(t,e.child,null,a),t.child=_m(t,null,l,a)):di(e,t,l,a),t.memoizedState=r.state,i&&YR(t,n,!0),t.child}function KW(e){var t=e.stateNode;t.pendingContext?QR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&QR(e,t.context,!1),jT(e,t.containerInfo)}function f4(e,t,n,r,i){return Em(),pT(i),t.flags|=256,di(e,t,n,r),t.child}var N2={dehydrated:null,treeContext:null,retryLane:0};function S2(e){return{baseLanes:e,cachePool:null,transitions:null}}function GW(e,t,n){var r=t.pendingProps,i=mr.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Yn(mr,i&1),e===null)return g2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=GN(o,r,0,null),e=Xd(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=S2(n),t.memoizedState=N2,e):_T(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return _de(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=xu(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=xu(l,a):(a=Xd(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?S2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=N2,r}return a=e.child,e=a.sibling,r=xu(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _T(e,t){return t=GN({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ob(e,t,n,r){return r!==null&&pT(r),_m(t,e.child,null,n),e=_T(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _de(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=IC(Error(Ue(422))),Ob(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=GN({mode:"visible",children:r.children},i,0,null),a=Xd(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&_m(t,e.child,null,o),t.child.memoizedState=S2(o),t.memoizedState=N2,a);if(!(t.mode&1))return Ob(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ue(419)),r=IC(a,r,void 0),Ob(e,t,o,r)}if(l=(o&e.childLanes)!==0,zi||l){if(r=ms,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,sc(e,i),No(r,e,i,-1))}return MT(),r=IC(Error(Ue(421))),Ob(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vde.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ua=hu(i.nextSibling),da=t,or=!0,po=null,e!==null&&(Ma[Ra++]=ql,Ma[Ra++]=Ul,Ma[Ra++]=ff,ql=e.id,Ul=e.overflow,ff=t),t=_T(t,r.children),t.flags|=4096,t)}function h4(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),x2(e.return,t,n)}function MC(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function QW(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(di(e,t,r.children,n),r=mr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h4(e,n,t);else if(e.tag===19)h4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Yn(mr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&k0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),MC(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&k0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}MC(t,!0,n,null,a);break;case"together":MC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zj(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ic(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,n=xu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ade(e,t,n){switch(t.tag){case 3:KW(t),Em();break;case 5:jW(t);break;case 1:qi(t.type)&&b0(t);break;case 4:jT(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Yn(N0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Yn(mr,mr.current&1),t.flags|=128,null):n&t.child.childLanes?GW(e,t,n):(Yn(mr,mr.current&1),e=ic(e,t,n),e!==null?e.sibling:null);Yn(mr,mr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return QW(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yn(mr,mr.current),r)break;return null;case 22:case 23:return t.lanes=0,WW(e,t,n)}return ic(e,t,n)}var YW,C2,XW,ZW;YW=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};C2=function(){};XW=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Id(el.current);var a=null;switch(n){case"input":i=KP(e,i),r=KP(e,r),a=[];break;case"select":i=vr({},i,{value:void 0}),r=vr({},r,{value:void 0}),a=[];break;case"textarea":i=YP(e,i),r=YP(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=v0)}ZP(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wx.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wx.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};ZW=function(e,t,n,r){n!==r&&(t.flags|=4)};function Og(e,t){if(!or)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Us(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tde(e,t,n){var r=t.pendingProps;switch(mT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:return qi(t.type)&&y0(),Us(t),null;case 3:return r=t.stateNode,Am(),sr(Vi),sr(ti),NT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,po!==null&&(O2(po),po=null))),C2(e,t),Us(t),null;case 5:wT(t);var i=Id(rv.current);if(n=t.type,e!==null&&t.stateNode!=null)XW(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ue(166));return Us(t),null}if(e=Id(el.current),Tb(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Go]=t,r[tv]=a,e=(t.mode&1)!==0,n){case"dialog":tr("cancel",r),tr("close",r);break;case"iframe":case"object":case"embed":tr("load",r);break;case"video":case"audio":for(i=0;i<ox.length;i++)tr(ox[i],r);break;case"source":tr("error",r);break;case"img":case"image":case"link":tr("error",r),tr("load",r);break;case"details":tr("toggle",r);break;case"input":wR(r,a),tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},tr("invalid",r);break;case"textarea":SR(r,a),tr("invalid",r)}ZP(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ab(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ab(r.textContent,l,e),i=["children",""+l]):Wx.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tr("scroll",r)}switch(n){case"input":wb(r),NR(r,a,!0);break;case"textarea":wb(r),CR(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=v0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=k9(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Go]=t,e[tv]=r,YW(e,t,!1,!1),t.stateNode=e;e:{switch(o=JP(n,r),n){case"dialog":tr("cancel",e),tr("close",e),i=r;break;case"iframe":case"object":case"embed":tr("load",e),i=r;break;case"video":case"audio":for(i=0;i<ox.length;i++)tr(ox[i],e);i=r;break;case"source":tr("error",e),i=r;break;case"img":case"image":case"link":tr("error",e),tr("load",e),i=r;break;case"details":tr("toggle",e),i=r;break;case"input":wR(e,r),i=KP(e,r),tr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=vr({},r,{value:void 0}),tr("invalid",e);break;case"textarea":SR(e,r),i=YP(e,r),tr("invalid",e);break;default:i=r}ZP(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?_9(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P9(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Hx(e,c):typeof c=="number"&&Hx(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wx.hasOwnProperty(a)?c!=null&&a==="onScroll"&&tr("scroll",e):c!=null&&JA(e,a,c,o))}switch(n){case"input":wb(e),NR(e,r,!1);break;case"textarea":wb(e),CR(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cu(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Kh(e,!!r.multiple,a,!1):r.defaultValue!=null&&Kh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=v0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&t.stateNode!=null)ZW(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ue(166));if(n=Id(rv.current),Id(el.current),Tb(t)){if(r=t.stateNode,n=t.memoizedProps,r[Go]=t,(a=r.nodeValue!==n)&&(e=da,e!==null))switch(e.tag){case 3:Ab(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ab(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Go]=t,t.stateNode=r}return Us(t),null;case 13:if(sr(mr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(or&&ua!==null&&t.mode&1&&!(t.flags&128))gW(),Em(),t.flags|=98560,a=!1;else if(a=Tb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Ue(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ue(317));a[Go]=t}else Em(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Us(t),a=!1}else po!==null&&(O2(po),po=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||mr.current&1?is===0&&(is=3):MT())),t.updateQueue!==null&&(t.flags|=4),Us(t),null);case 4:return Am(),C2(e,t),e===null&&Jx(t.stateNode.containerInfo),Us(t),null;case 10:return vT(t.type._context),Us(t),null;case 17:return qi(t.type)&&y0(),Us(t),null;case 19:if(sr(mr),a=t.memoizedState,a===null)return Us(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Og(a,!1);else{if(is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=k0(e),o!==null){for(t.flags|=128,Og(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Yn(mr,mr.current&1|2),t.child}e=e.sibling}a.tail!==null&&Rr()>Dm&&(t.flags|=128,r=!0,Og(a,!1),t.lanes=4194304)}else{if(!r)if(e=k0(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Og(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!or)return Us(t),null}else 2*Rr()-a.renderingStartTime>Dm&&n!==1073741824&&(t.flags|=128,r=!0,Og(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Rr(),t.sibling=null,n=mr.current,Yn(mr,r?n&1|2:n&1),t):(Us(t),null);case 22:case 23:return IT(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?na&1073741824&&(Us(t),t.subtreeFlags&6&&(t.flags|=8192)):Us(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function Dde(e,t){switch(mT(t),t.tag){case 1:return qi(t.type)&&y0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Am(),sr(Vi),sr(ti),NT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wT(t),null;case 13:if(sr(mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));Em()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return sr(mr),null;case 4:return Am(),null;case 10:return vT(t.type._context),null;case 22:case 23:return IT(),null;case 24:return null;default:return null}}var Ib=!1,Ys=!1,Ode=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Th(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nr(e,t,r)}else n.current=null}function k2(e,t,n){try{n()}catch(r){Nr(e,t,r)}}var m4=!1;function Ide(e,t){if(c2=p0,e=rW(),fT(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=o),h===a&&++d===r&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(u2={focusedElem:e,selectionRange:n},p0=!1,ut=t;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){t=ut;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?p:co(t.type,p),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(N){Nr(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}return g=m4,m4=!1,g}function wx(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&k2(t,n,a)}i=i.next}while(i!==r)}}function HN(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function P2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function JW(e){var t=e.alternate;t!==null&&(e.alternate=null,JW(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Go],delete t[tv],delete t[h2],delete t[gde],delete t[xde])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eH(e){return e.tag===5||e.tag===3||e.tag===4}function p4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eH(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function E2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=v0));else if(r!==4&&(e=e.child,e!==null))for(E2(e,t,n),e=e.sibling;e!==null;)E2(e,t,n),e=e.sibling}function _2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(_2(e,t,n),e=e.sibling;e!==null;)_2(e,t,n),e=e.sibling}var _s=null,fo=!1;function Ac(e,t,n){for(n=n.child;n!==null;)tH(e,t,n),n=n.sibling}function tH(e,t,n){if(Jo&&typeof Jo.onCommitFiberUnmount=="function")try{Jo.onCommitFiberUnmount(FN,n)}catch{}switch(n.tag){case 5:Ys||Th(n,t);case 6:var r=_s,i=fo;_s=null,Ac(e,t,n),_s=r,fo=i,_s!==null&&(fo?(e=_s,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_s.removeChild(n.stateNode));break;case 18:_s!==null&&(fo?(e=_s,n=n.stateNode,e.nodeType===8?EC(e.parentNode,n):e.nodeType===1&&EC(e,n),Yx(e)):EC(_s,n.stateNode));break;case 4:r=_s,i=fo,_s=n.stateNode.containerInfo,fo=!0,Ac(e,t,n),_s=r,fo=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&k2(n,t,o),i=i.next}while(i!==r)}Ac(e,t,n);break;case 1:if(!Ys&&(Th(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Nr(n,t,l)}Ac(e,t,n);break;case 21:Ac(e,t,n);break;case 22:n.mode&1?(Ys=(r=Ys)||n.memoizedState!==null,Ac(e,t,n),Ys=r):Ac(e,t,n);break;default:Ac(e,t,n)}}function g4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ode),t.forEach(function(r){var i=qde.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function io(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:_s=l.stateNode,fo=!1;break e;case 3:_s=l.stateNode.containerInfo,fo=!0;break e;case 4:_s=l.stateNode.containerInfo,fo=!0;break e}l=l.return}if(_s===null)throw Error(Ue(160));tH(a,o,i),_s=null,fo=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Nr(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nH(t,e),t=t.sibling}function nH(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(io(t,e),Bo(e),r&4){try{wx(3,e,e.return),HN(3,e)}catch(p){Nr(e,e.return,p)}try{wx(5,e,e.return)}catch(p){Nr(e,e.return,p)}}break;case 1:io(t,e),Bo(e),r&512&&n!==null&&Th(n,n.return);break;case 5:if(io(t,e),Bo(e),r&512&&n!==null&&Th(n,n.return),e.flags&32){var i=e.stateNode;try{Hx(i,"")}catch(p){Nr(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&S9(i,a),JP(l,o);var u=JP(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?_9(i,f):d==="dangerouslySetInnerHTML"?P9(i,f):d==="children"?Hx(i,f):JA(i,d,f,u)}switch(l){case"input":GP(i,a);break;case"textarea":C9(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Kh(i,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?Kh(i,!!a.multiple,a.defaultValue,!0):Kh(i,!!a.multiple,a.multiple?[]:"",!1))}i[tv]=a}catch(p){Nr(e,e.return,p)}}break;case 6:if(io(t,e),Bo(e),r&4){if(e.stateNode===null)throw Error(Ue(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Nr(e,e.return,p)}}break;case 3:if(io(t,e),Bo(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yx(t.containerInfo)}catch(p){Nr(e,e.return,p)}break;case 4:io(t,e),Bo(e);break;case 13:io(t,e),Bo(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(DT=Rr())),r&4&&g4(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ys=(u=Ys)||d,io(t,e),Ys=u):io(t,e),Bo(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ut=e,d=e.child;d!==null;){for(f=ut=d;ut!==null;){switch(h=ut,m=h.child,h.tag){case 0:case 11:case 14:case 15:wx(4,h,h.return);break;case 1:Th(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Nr(r,n,p)}}break;case 5:Th(h,h.return);break;case 22:if(h.memoizedState!==null){v4(f);continue}}m!==null?(m.return=h,ut=m):v4(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=E9("display",o))}catch(p){Nr(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Nr(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:io(t,e),Bo(e),r&4&&g4(e);break;case 21:break;default:io(t,e),Bo(e)}}function Bo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(eH(n)){var r=n;break e}n=n.return}throw Error(Ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hx(i,""),r.flags&=-33);var a=p4(e);_2(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=p4(e);E2(e,l,o);break;default:throw Error(Ue(161))}}catch(c){Nr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mde(e,t,n){ut=e,rH(e)}function rH(e,t,n){for(var r=(e.mode&1)!==0;ut!==null;){var i=ut,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ib;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ys;l=Ib;var u=Ys;if(Ib=o,(Ys=c)&&!u)for(ut=i;ut!==null;)o=ut,c=o.child,o.tag===22&&o.memoizedState!==null?y4(i):c!==null?(c.return=o,ut=c):y4(i);for(;a!==null;)ut=a,rH(a),a=a.sibling;ut=i,Ib=l,Ys=u}x4(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ut=a):x4(e)}}function x4(e){for(;ut!==null;){var t=ut;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ys||HN(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ys)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:co(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&t4(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}t4(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Yx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Ys||t.flags&512&&P2(t)}catch(h){Nr(t,t.return,h)}}if(t===e){ut=null;break}if(n=t.sibling,n!==null){n.return=t.return,ut=n;break}ut=t.return}}function v4(e){for(;ut!==null;){var t=ut;if(t===e){ut=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ut=n;break}ut=t.return}}function y4(e){for(;ut!==null;){var t=ut;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{HN(4,t)}catch(c){Nr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Nr(t,i,c)}}var a=t.return;try{P2(t)}catch(c){Nr(t,a,c)}break;case 5:var o=t.return;try{P2(t)}catch(c){Nr(t,o,c)}}}catch(c){Nr(t,t.return,c)}if(t===e){ut=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ut=l;break}ut=t.return}}var Rde=Math.ceil,_0=xc.ReactCurrentDispatcher,AT=xc.ReactCurrentOwner,Va=xc.ReactCurrentBatchConfig,vn=0,ms=null,Hr=null,Os=0,na=0,Dh=Hu(0),is=0,ov=null,mf=0,KN=0,TT=0,Nx=null,Li=null,DT=0,Dm=1/0,Ml=null,A0=!1,A2=null,pu=null,Mb=!1,au=null,T0=0,Sx=0,T2=null,Bj=-1,Vj=0;function vi(){return vn&6?Rr():Bj!==-1?Bj:Bj=Rr()}function gu(e){return e.mode&1?vn&2&&Os!==0?Os&-Os:yde.transition!==null?(Vj===0&&(Vj=B9()),Vj):(e=In,e!==0||(e=window.event,e=e===void 0?16:G9(e.type)),e):1}function No(e,t,n,r){if(50<Sx)throw Sx=0,T2=null,Error(Ue(185));Sy(e,n,r),(!(vn&2)||e!==ms)&&(e===ms&&(!(vn&2)&&(KN|=n),is===4&&Wc(e,Os)),Ui(e,r),n===1&&vn===0&&!(t.mode&1)&&(Dm=Rr()+500,qN&&Ku()))}function Ui(e,t){var n=e.callbackNode;yue(e,t);var r=m0(e,e===ms?Os:0);if(r===0)n!==null&&ER(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ER(n),t===1)e.tag===0?vde(b4.bind(null,e)):hW(b4.bind(null,e)),mde(function(){!(vn&6)&&Ku()}),n=null;else{switch(V9(r)){case 1:n=sT;break;case 4:n=L9;break;case 16:n=h0;break;case 536870912:n=z9;break;default:n=h0}n=dH(n,sH.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sH(e,t){if(Bj=-1,Vj=0,vn&6)throw Error(Ue(327));var n=e.callbackNode;if(Zh()&&e.callbackNode!==n)return null;var r=m0(e,e===ms?Os:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=D0(e,r);else{t=r;var i=vn;vn|=2;var a=aH();(ms!==e||Os!==t)&&(Ml=null,Dm=Rr()+500,Yd(e,t));do try{Lde();break}catch(l){iH(e,l)}while(!0);xT(),_0.current=a,vn=i,Hr!==null?t=0:(ms=null,Os=0,t=is)}if(t!==0){if(t===2&&(i=s2(e),i!==0&&(r=i,t=D2(e,i))),t===1)throw n=ov,Yd(e,0),Wc(e,r),Ui(e,Rr()),n;if(t===6)Wc(e,r);else{if(i=e.current.alternate,!(r&30)&&!$de(i)&&(t=D0(e,r),t===2&&(a=s2(e),a!==0&&(r=a,t=D2(e,a))),t===1))throw n=ov,Yd(e,0),Wc(e,r),Ui(e,Rr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ue(345));case 2:yd(e,Li,Ml);break;case 3:if(Wc(e,r),(r&130023424)===r&&(t=DT+500-Rr(),10<t)){if(m0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){vi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=f2(yd.bind(null,e,Li,Ml),t);break}yd(e,Li,Ml);break;case 4:if(Wc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-wo(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=Rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rde(r/1960))-r,10<r){e.timeoutHandle=f2(yd.bind(null,e,Li,Ml),r);break}yd(e,Li,Ml);break;case 5:yd(e,Li,Ml);break;default:throw Error(Ue(329))}}}return Ui(e,Rr()),e.callbackNode===n?sH.bind(null,e):null}function D2(e,t){var n=Nx;return e.current.memoizedState.isDehydrated&&(Yd(e,t).flags|=256),e=D0(e,t),e!==2&&(t=Li,Li=n,t!==null&&O2(t)),e}function O2(e){Li===null?Li=e:Li.push.apply(Li,e)}function $de(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ao(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wc(e,t){for(t&=~TT,t&=~KN,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wo(t),r=1<<n;e[n]=-1,t&=~r}}function b4(e){if(vn&6)throw Error(Ue(327));Zh();var t=m0(e,0);if(!(t&1))return Ui(e,Rr()),null;var n=D0(e,t);if(e.tag!==0&&n===2){var r=s2(e);r!==0&&(t=r,n=D2(e,r))}if(n===1)throw n=ov,Yd(e,0),Wc(e,t),Ui(e,Rr()),n;if(n===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yd(e,Li,Ml),Ui(e,Rr()),null}function OT(e,t){var n=vn;vn|=1;try{return e(t)}finally{vn=n,vn===0&&(Dm=Rr()+500,qN&&Ku())}}function pf(e){au!==null&&au.tag===0&&!(vn&6)&&Zh();var t=vn;vn|=1;var n=Va.transition,r=In;try{if(Va.transition=null,In=1,e)return e()}finally{In=r,Va.transition=n,vn=t,!(vn&6)&&Ku()}}function IT(){na=Dh.current,sr(Dh)}function Yd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hde(n)),Hr!==null)for(n=Hr.return;n!==null;){var r=n;switch(mT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&y0();break;case 3:Am(),sr(Vi),sr(ti),NT();break;case 5:wT(r);break;case 4:Am();break;case 13:sr(mr);break;case 19:sr(mr);break;case 10:vT(r.type._context);break;case 22:case 23:IT()}n=n.return}if(ms=e,Hr=e=xu(e.current,null),Os=na=t,is=0,ov=null,TT=KN=mf=0,Li=Nx=null,Od!==null){for(t=0;t<Od.length;t++)if(n=Od[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Od=null}return e}function iH(e,t){do{var n=Hr;try{if(xT(),Fj.current=E0,P0){for(var r=xr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}P0=!1}if(hf=0,us=ts=xr=null,jx=!1,sv=0,AT.current=null,n===null||n.return===null){is=1,ov=t,Hr=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Os,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=o4(o);if(m!==null){m.flags&=-257,l4(m,o,l,a,t),m.mode&1&&a4(a,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){a4(a,u,t),MT();break e}c=Error(Ue(426))}}else if(or&&l.mode&1){var v=o4(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),l4(v,o,l,a,t),pT(Tm(c,l));break e}}a=c=Tm(c,l),is!==4&&(is=2),Nx===null?Nx=[a]:Nx.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=VW(a,c,t);e4(a,b);break e;case 1:l=c;var y=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(pu===null||!pu.has(j)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=qW(a,l,t);e4(a,N);break e}}a=a.return}while(a!==null)}lH(n)}catch(w){t=w,Hr===n&&n!==null&&(Hr=n=n.return);continue}break}while(!0)}function aH(){var e=_0.current;return _0.current=E0,e===null?E0:e}function MT(){(is===0||is===3||is===2)&&(is=4),ms===null||!(mf&268435455)&&!(KN&268435455)||Wc(ms,Os)}function D0(e,t){var n=vn;vn|=2;var r=aH();(ms!==e||Os!==t)&&(Ml=null,Yd(e,t));do try{Fde();break}catch(i){iH(e,i)}while(!0);if(xT(),vn=n,_0.current=r,Hr!==null)throw Error(Ue(261));return ms=null,Os=0,is}function Fde(){for(;Hr!==null;)oH(Hr)}function Lde(){for(;Hr!==null&&!uue();)oH(Hr)}function oH(e){var t=uH(e.alternate,e,na);e.memoizedProps=e.pendingProps,t===null?lH(e):Hr=t,AT.current=null}function lH(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Dde(n,t),n!==null){n.flags&=32767,Hr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{is=6,Hr=null;return}}else if(n=Tde(n,t,na),n!==null){Hr=n;return}if(t=t.sibling,t!==null){Hr=t;return}Hr=t=e}while(t!==null);is===0&&(is=5)}function yd(e,t,n){var r=In,i=Va.transition;try{Va.transition=null,In=1,zde(e,t,n,r)}finally{Va.transition=i,In=r}return null}function zde(e,t,n,r){do Zh();while(au!==null);if(vn&6)throw Error(Ue(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(bue(e,a),e===ms&&(Hr=ms=null,Os=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mb||(Mb=!0,dH(h0,function(){return Zh(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Va.transition,Va.transition=null;var o=In;In=1;var l=vn;vn|=4,AT.current=null,Ide(e,n),nH(n,e),ade(u2),p0=!!c2,u2=c2=null,e.current=n,Mde(n),due(),vn=l,In=o,Va.transition=a}else e.current=n;if(Mb&&(Mb=!1,au=e,T0=i),a=e.pendingLanes,a===0&&(pu=null),mue(n.stateNode),Ui(e,Rr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(A0)throw A0=!1,e=A2,A2=null,e;return T0&1&&e.tag!==0&&Zh(),a=e.pendingLanes,a&1?e===T2?Sx++:(Sx=0,T2=e):Sx=0,Ku(),null}function Zh(){if(au!==null){var e=V9(T0),t=Va.transition,n=In;try{if(Va.transition=null,In=16>e?16:e,au===null)var r=!1;else{if(e=au,au=null,T0=0,vn&6)throw Error(Ue(331));var i=vn;for(vn|=4,ut=e.current;ut!==null;){var a=ut,o=a.child;if(ut.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ut=u;ut!==null;){var d=ut;switch(d.tag){case 0:case 11:case 15:wx(8,d,a)}var f=d.child;if(f!==null)f.return=d,ut=f;else for(;ut!==null;){d=ut;var h=d.sibling,m=d.return;if(JW(d),d===u){ut=null;break}if(h!==null){h.return=m,ut=h;break}ut=m}}}var g=a.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}ut=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ut=o;else e:for(;ut!==null;){if(a=ut,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wx(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ut=b;break e}ut=a.return}}var y=e.current;for(ut=y;ut!==null;){o=ut;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ut=j;else e:for(o=y;ut!==null;){if(l=ut,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:HN(9,l)}}catch(w){Nr(l,l.return,w)}if(l===o){ut=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ut=N;break e}ut=l.return}}if(vn=i,Ku(),Jo&&typeof Jo.onPostCommitFiberRoot=="function")try{Jo.onPostCommitFiberRoot(FN,e)}catch{}r=!0}return r}finally{In=n,Va.transition=t}}return!1}function j4(e,t,n){t=Tm(n,t),t=VW(e,t,1),e=mu(e,t,1),t=vi(),e!==null&&(Sy(e,1,t),Ui(e,t))}function Nr(e,t,n){if(e.tag===3)j4(e,e,n);else for(;t!==null;){if(t.tag===3){j4(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pu===null||!pu.has(r))){e=Tm(n,e),e=qW(t,e,1),t=mu(t,e,1),e=vi(),t!==null&&(Sy(t,1,e),Ui(t,e));break}}t=t.return}}function Bde(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vi(),e.pingedLanes|=e.suspendedLanes&n,ms===e&&(Os&n)===n&&(is===4||is===3&&(Os&130023424)===Os&&500>Rr()-DT?Yd(e,0):TT|=n),Ui(e,t)}function cH(e,t){t===0&&(e.mode&1?(t=Cb,Cb<<=1,!(Cb&130023424)&&(Cb=4194304)):t=1);var n=vi();e=sc(e,t),e!==null&&(Sy(e,t,n),Ui(e,n))}function Vde(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cH(e,n)}function qde(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ue(314))}r!==null&&r.delete(t),cH(e,n)}var uH;uH=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vi.current)zi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zi=!1,Ade(e,t,n);zi=!!(e.flags&131072)}else zi=!1,or&&t.flags&1048576&&mW(t,w0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zj(e,t),e=t.pendingProps;var i=Pm(t,ti.current);Xh(t,n),i=CT(null,t,r,e,i,n);var a=kT();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qi(r)?(a=!0,b0(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bT(t),i.updater=WN,t.stateNode=i,i._reactInternals=t,y2(t,r,e,n),t=w2(null,t,r,!0,a,n)):(t.tag=0,or&&a&&hT(t),di(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zj(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Wde(r),e=co(r,e),i){case 0:t=j2(null,t,r,e,n);break e;case 1:t=d4(null,t,r,e,n);break e;case 11:t=c4(null,t,r,e,n);break e;case 14:t=u4(null,t,r,co(r.type,e),n);break e}throw Error(Ue(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),j2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),d4(e,t,r,i,n);case 3:e:{if(KW(t),e===null)throw Error(Ue(387));r=t.pendingProps,a=t.memoizedState,i=a.element,bW(e,t),C0(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Tm(Error(Ue(423)),t),t=f4(e,t,r,n,i);break e}else if(r!==i){i=Tm(Error(Ue(424)),t),t=f4(e,t,r,n,i);break e}else for(ua=hu(t.stateNode.containerInfo.firstChild),da=t,or=!0,po=null,n=vW(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Em(),r===i){t=ic(e,t,n);break e}di(e,t,r,n)}t=t.child}return t;case 5:return jW(t),e===null&&g2(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,d2(r,i)?o=null:a!==null&&d2(r,a)&&(t.flags|=32),HW(e,t),di(e,t,o,n),t.child;case 6:return e===null&&g2(t),null;case 13:return GW(e,t,n);case 4:return jT(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_m(t,null,r,n):di(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),c4(e,t,r,i,n);case 7:return di(e,t,t.pendingProps,n),t.child;case 8:return di(e,t,t.pendingProps.children,n),t.child;case 12:return di(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Yn(N0,r._currentValue),r._currentValue=o,a!==null)if(Ao(a.value,o)){if(a.children===i.children&&!Vi.current){t=ic(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Ql(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),x2(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ue(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),x2(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}di(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xh(t,n),i=Wa(i),r=r(i),t.flags|=1,di(e,t,r,n),t.child;case 14:return r=t.type,i=co(r,t.pendingProps),i=co(r.type,i),u4(e,t,r,i,n);case 15:return UW(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),zj(e,t),t.tag=1,qi(r)?(e=!0,b0(t)):e=!1,Xh(t,n),BW(t,r,i),y2(t,r,i,n),w2(null,t,r,!0,e,n);case 19:return QW(e,t,n);case 22:return WW(e,t,n)}throw Error(Ue(156,t.tag))};function dH(e,t){return F9(e,t)}function Ude(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function La(e,t,n,r){return new Ude(e,t,n,r)}function RT(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wde(e){if(typeof e=="function")return RT(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tT)return 11;if(e===nT)return 14}return 2}function xu(e,t){var n=e.alternate;return n===null?(n=La(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qj(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")RT(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wh:return Xd(n.children,i,a,t);case eT:o=8,i|=8;break;case qP:return e=La(12,n,t,i|2),e.elementType=qP,e.lanes=a,e;case UP:return e=La(13,n,t,i),e.elementType=UP,e.lanes=a,e;case WP:return e=La(19,n,t,i),e.elementType=WP,e.lanes=a,e;case j9:return GN(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y9:o=10;break e;case b9:o=9;break e;case tT:o=11;break e;case nT:o=14;break e;case Bc:o=16,r=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=La(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Xd(e,t,n,r){return e=La(7,e,r,t),e.lanes=n,e}function GN(e,t,n,r){return e=La(22,e,r,t),e.elementType=j9,e.lanes=n,e.stateNode={isHidden:!1},e}function RC(e,t,n){return e=La(6,e,null,t),e.lanes=n,e}function $C(e,t,n){return t=La(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hde(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xC(0),this.expirationTimes=xC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xC(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $T(e,t,n,r,i,a,o,l,c){return e=new Hde(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=La(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bT(a),e}function Kde(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fH(e){if(!e)return ku;e=e._reactInternals;e:{if(Lf(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var n=e.type;if(qi(n))return fW(e,n,t)}return t}function hH(e,t,n,r,i,a,o,l,c){return e=$T(n,r,!0,e,i,a,o,l,c),e.context=fH(null),n=e.current,r=vi(),i=gu(n),a=Ql(r,i),a.callback=t??null,mu(n,a,i),e.current.lanes=i,Sy(e,i,r),Ui(e,r),e}function QN(e,t,n,r){var i=t.current,a=vi(),o=gu(i);return n=fH(n),t.context===null?t.context=n:t.pendingContext=n,t=Ql(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mu(i,t,o),e!==null&&(No(e,i,o,a),$j(e,i,o)),o}function O0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function w4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function FT(e,t){w4(e,t),(e=e.alternate)&&w4(e,t)}function Gde(){return null}var mH=typeof reportError=="function"?reportError:function(e){console.error(e)};function LT(e){this._internalRoot=e}YN.prototype.render=LT.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));QN(e,t,null,null)};YN.prototype.unmount=LT.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pf(function(){QN(null,e,null,null)}),t[rc]=null}};function YN(e){this._internalRoot=e}YN.prototype.unstable_scheduleHydration=function(e){if(e){var t=W9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Uc.length&&t!==0&&t<Uc[n].priority;n++);Uc.splice(n,0,e),n===0&&K9(e)}};function zT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function XN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function N4(){}function Qde(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=O0(o);a.call(u)}}var o=hH(t,r,e,0,null,!1,!1,"",N4);return e._reactRootContainer=o,e[rc]=o.current,Jx(e.nodeType===8?e.parentNode:e),pf(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=O0(c);l.call(u)}}var c=$T(e,0,!1,null,null,!1,!1,"",N4);return e._reactRootContainer=c,e[rc]=c.current,Jx(e.nodeType===8?e.parentNode:e),pf(function(){QN(t,c,n,r)}),c}function ZN(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=O0(o);l.call(c)}}QN(t,o,e,i)}else o=Qde(n,t,e,i,r);return O0(o)}q9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ax(t.pendingLanes);n!==0&&(iT(t,n|1),Ui(t,Rr()),!(vn&6)&&(Dm=Rr()+500,Ku()))}break;case 13:pf(function(){var r=sc(e,1);if(r!==null){var i=vi();No(r,e,1,i)}}),FT(e,1)}};aT=function(e){if(e.tag===13){var t=sc(e,134217728);if(t!==null){var n=vi();No(t,e,134217728,n)}FT(e,134217728)}};U9=function(e){if(e.tag===13){var t=gu(e),n=sc(e,t);if(n!==null){var r=vi();No(n,e,t,r)}FT(e,t)}};W9=function(){return In};H9=function(e,t){var n=In;try{return In=e,t()}finally{In=n}};t2=function(e,t,n){switch(t){case"input":if(GP(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=VN(r);if(!i)throw Error(Ue(90));N9(r),GP(r,i)}}}break;case"textarea":C9(e,n);break;case"select":t=n.value,t!=null&&Kh(e,!!n.multiple,t,!1)}};D9=OT;O9=pf;var Yde={usingClientEntryPoint:!1,Events:[ky,kh,VN,A9,T9,OT]},Ig={findFiberByHostInstance:Dd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xde={bundleType:Ig.bundleType,version:Ig.version,rendererPackageName:Ig.rendererPackageName,rendererConfig:Ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=R9(e),e===null?null:e.stateNode},findFiberByHostInstance:Ig.findFiberByHostInstance||Gde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rb.isDisabled&&Rb.supportsFiber)try{FN=Rb.inject(Xde),Jo=Rb}catch{}}ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yde;ja.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zT(t))throw Error(Ue(200));return Kde(e,t,null,n)};ja.createRoot=function(e,t){if(!zT(e))throw Error(Ue(299));var n=!1,r="",i=mH;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$T(e,1,!1,null,null,n,!1,r,i),e[rc]=t.current,Jx(e.nodeType===8?e.parentNode:e),new LT(t)};ja.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=R9(t),e=e===null?null:e.stateNode,e};ja.flushSync=function(e){return pf(e)};ja.hydrate=function(e,t,n){if(!XN(t))throw Error(Ue(200));return ZN(null,e,t,!0,n)};ja.hydrateRoot=function(e,t,n){if(!zT(e))throw Error(Ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=mH;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=hH(t,null,e,1,n??null,i,!1,a,o),e[rc]=t.current,Jx(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new YN(t)};ja.render=function(e,t,n){if(!XN(t))throw Error(Ue(200));return ZN(null,e,t,!1,n)};ja.unmountComponentAtNode=function(e){if(!XN(e))throw Error(Ue(40));return e._reactRootContainer?(pf(function(){ZN(null,null,e,!1,function(){e._reactRootContainer=null,e[rc]=null})}),!0):!1};ja.unstable_batchedUpdates=OT;ja.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!XN(n))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return ZN(e,t,n,!1,r)};ja.version="18.3.1-next-f1338f8080-20240426";function pH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pH)}catch(e){console.error(e)}}pH(),p9.exports=ja;var zf=p9.exports;const Zde=yn(zf);var gH,S4=zf;gH=S4.createRoot,S4.hydrateRoot;function Jde(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~r?r:~a?a:i.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var xH={exports:{}},vH={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=x;function efe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tfe=typeof Object.is=="function"?Object.is:efe,nfe=Om.useState,rfe=Om.useEffect,sfe=Om.useLayoutEffect,ife=Om.useDebugValue;function afe(e,t){var n=t(),r=nfe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return sfe(function(){i.value=n,i.getSnapshot=t,FC(i)&&a({inst:i})},[e,n,t]),rfe(function(){return FC(i)&&a({inst:i}),e(function(){FC(i)&&a({inst:i})})},[e]),ife(n),n}function FC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tfe(e,n)}catch{return!0}}function ofe(e,t){return t()}var lfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ofe:afe;vH.useSyncExternalStore=Om.useSyncExternalStore!==void 0?Om.useSyncExternalStore:lfe;xH.exports=vH;var cfe=xH.exports;const ufe=$N.useInsertionEffect,dfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yH=dfe?x.useLayoutEffect:x.useEffect,ffe=ufe||yH,BT=e=>{const t=x.useRef([e,(...n)=>t[0](...n)]).current;return ffe(()=>{t[0]=e}),t[1]},hfe="popstate",VT="pushState",qT="replaceState",mfe="hashchange",C4=[hfe,VT,qT,mfe],pfe=e=>{for(const t of C4)addEventListener(t,e);return()=>{for(const t of C4)removeEventListener(t,e)}},bH=(e,t)=>cfe.useSyncExternalStore(pfe,e,t),gfe=()=>location.search,xfe=({ssrSearch:e=""}={})=>bH(gfe,()=>e),k4=()=>location.pathname,vfe=({ssrPath:e}={})=>bH(k4,e?()=>e:k4),yfe=(e,{replace:t=!1,state:n=null}={})=>history[t?qT:VT](n,"",e),bfe=(e={})=>[vfe(e),yfe],P4=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[P4]>"u"){for(const e of[VT,qT]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,P4,{value:!0})}const jfe=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",jH=(e="")=>e==="/"?"":e,wfe=(e,t)=>e[0]==="~"?e.slice(1):jH(t)+e,Nfe=(e="",t)=>jfe(E4(jH(e)),E4(t)),E4=e=>{try{return decodeURI(e)}catch{return e}},wH={hook:bfe,searchHook:xfe,parser:Jde,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},NH=x.createContext(wH),Mp=()=>x.useContext(NH),SH={},CH=x.createContext(SH),Sfe=()=>x.useContext(CH),JN=e=>{const[t,n]=e.hook(e);return[Nfe(e.base,t),BT((r,i)=>n(wfe(r,e.base),i))]},yr=()=>JN(Mp()),UT=(e,t,n,r)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,h)=>[f,c[h]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[l]:[]]:[!1,null]},kH=e=>UT(Mp().parser,e,yr()[0]),Cfe=({children:e,...t})=>{var d,f;const n=Mp(),r=t.hook?wH:n;let i=r;const[a,o]=((d=t.ssrPath)==null?void 0:d.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=x.useRef({}),c=l.current,u=c;for(let h in r){const m=h==="base"?r[h]+(t[h]||""):t[h]||r[h];c===u&&m!==u[h]&&(l.current=u={...u}),u[h]=m,m!==r[h]&&(i=u)}return x.createElement(NH.Provider,{value:i,children:e})},_4=({children:e,component:t},n)=>t?x.createElement(t,{params:n}):typeof e=="function"?e(n):e,kfe=e=>{let t=x.useRef(SH),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},rn=({path:e,nest:t,match:n,...r})=>{const i=Mp(),[a]=JN(i),[o,l,c]=n??UT(i.parser,e,a,t),u=kfe({...Sfe(),...l});if(!o)return null;const d=c?x.createElement(Cfe,{base:c},_4(r,u)):_4(r,u);return x.createElement(CH.Provider,{value:u,children:d})},vu=x.forwardRef((e,t)=>{const n=Mp(),[r,i]=JN(n),{to:a="",href:o=a,onClick:l,asChild:c,children:u,className:d,replace:f,state:h,...m}=e,g=BT(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l==null||l(v),v.defaultPrevented||(v.preventDefault(),i(o,e)))}),p=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&x.isValidElement(u)?x.cloneElement(u,{onClick:g,href:p}):x.createElement("a",{...m,onClick:g,href:p,className:d!=null&&d.call?d(r===o):d,children:u,ref:t})}),PH=e=>Array.isArray(e)?e.flatMap(t=>PH(t&&t.type===x.Fragment?t.props.children:t)):[e],EH=({children:e,location:t})=>{const n=Mp(),[r]=JN(n);for(const i of PH(e)){let a=0;if(x.isValidElement(i)&&(a=UT(n.parser,i.props.path,t||r,i.props.nest))[0])return x.cloneElement(i,{match:a})}return null},Pfe=e=>{const{to:t,href:n=t}=e,[,r]=yr(),i=BT(()=>r(t||n,e));return yH(()=>{i()},[]),null};var Rp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gf=typeof window>"u"||"Deno"in globalThis;function Oa(){}function Efe(e,t){return typeof e=="function"?e(t):e}function I2(e){return typeof e=="number"&&e>=0&&e!==1/0}function _H(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jh(e,t){return typeof e=="function"?e(t):e}function go(e,t){return typeof e=="function"?e(t):e}function A4(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==WT(o,t.options))return!1}else if(!lv(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function T4(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(xf(t.options.mutationKey)!==xf(a))return!1}else if(!lv(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function WT(e,t){return((t==null?void 0:t.queryKeyHashFn)||xf)(e)}function xf(e){return JSON.stringify(e,(t,n)=>M2(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function lv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!lv(e[n],t[n])):!1}function AH(e,t){if(e===t)return e;const n=D4(e)&&D4(t);if(n||M2(e)&&M2(t)){const r=n?e:Object.keys(e),i=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const d=n?u:a[u];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=AH(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function I0(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function D4(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function M2(e){if(!O4(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!O4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function O4(e){return Object.prototype.toString.call(e)==="[object Object]"}function _fe(e){return new Promise(t=>{setTimeout(t,e)})}function R2(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?AH(e,t):t}function Afe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Tfe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var HT=Symbol();function TH(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===HT?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var qd,Yc,hm,tV,Dfe=(tV=class extends Rp{constructor(){super();Pt(this,qd);Pt(this,Yc);Pt(this,hm);ot(this,hm,t=>{if(!gf&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){se(this,Yc)||this.setEventListener(se(this,hm))}onUnsubscribe(){var t;this.hasListeners()||((t=se(this,Yc))==null||t.call(this),ot(this,Yc,void 0))}setEventListener(t){var n;ot(this,hm,t),(n=se(this,Yc))==null||n.call(this),ot(this,Yc,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){se(this,qd)!==t&&(ot(this,qd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof se(this,qd)=="boolean"?se(this,qd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qd=new WeakMap,Yc=new WeakMap,hm=new WeakMap,tV),KT=new Dfe,mm,Xc,pm,nV,Ofe=(nV=class extends Rp{constructor(){super();Pt(this,mm,!0);Pt(this,Xc);Pt(this,pm);ot(this,pm,t=>{if(!gf&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){se(this,Xc)||this.setEventListener(se(this,pm))}onUnsubscribe(){var t;this.hasListeners()||((t=se(this,Xc))==null||t.call(this),ot(this,Xc,void 0))}setEventListener(t){var n;ot(this,pm,t),(n=se(this,Xc))==null||n.call(this),ot(this,Xc,t(this.setOnline.bind(this)))}setOnline(t){se(this,mm)!==t&&(ot(this,mm,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return se(this,mm)}},mm=new WeakMap,Xc=new WeakMap,pm=new WeakMap,nV),M0=new Ofe;function $2(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function Ife(e){return Math.min(1e3*2**e,3e4)}function DH(e){return(e??"online")==="online"?M0.isOnline():!0}var OH=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function LC(e){return e instanceof OH}function IH(e){let t=!1,n=0,r=!1,i;const a=$2(),o=p=>{var v;r||(h(new OH(p)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>KT.isFocused()&&(e.networkMode==="always"||M0.isOnline())&&e.canRun(),d=()=>DH(e.networkMode)&&e.canRun(),f=p=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,p),i==null||i(),a.resolve(p))},h=p=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,p),i==null||i(),a.reject(p))},m=()=>new Promise(p=>{var v;i=b=>{(r||u())&&p(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;i=void 0,r||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(r)return;let p;const v=n===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(f).catch(b=>{var S;if(r)return;const y=e.retry??(gf?0:3),j=e.retryDelay??Ife,N=typeof j=="function"?j(n,b):j,w=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,b);if(t||!w){h(b);return}n++,(S=e.onFail)==null||S.call(e,n,b),_fe(N).then(()=>u()?void 0:m()).then(()=>{t?h(b):g()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),a)}}function Mfe(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var rs=Mfe(),Ud,rV,MH=(rV=class{constructor(){Pt(this,Ud)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),I2(this.gcTime)&&ot(this,Ud,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gf?1/0:5*60*1e3))}clearGcTimeout(){se(this,Ud)&&(clearTimeout(se(this,Ud)),ot(this,Ud,void 0))}},Ud=new WeakMap,rV),gm,xm,Da,Hs,yy,Wd,uo,_l,sV,Rfe=(sV=class extends MH{constructor(t){super();Pt(this,uo);Pt(this,gm);Pt(this,xm);Pt(this,Da);Pt(this,Hs);Pt(this,yy);Pt(this,Wd);ot(this,Wd,!1),ot(this,yy,t.defaultOptions),this.setOptions(t.options),this.observers=[],ot(this,Da,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ot(this,gm,$fe(this.options)),this.state=t.state??se(this,gm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=se(this,Hs))==null?void 0:t.promise}setOptions(t){this.options={...se(this,yy),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&se(this,Da).remove(this)}setData(t,n){const r=R2(this.state.data,t,this.options);return Zt(this,uo,_l).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Zt(this,uo,_l).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=se(this,Hs))==null?void 0:r.promise;return(i=se(this,Hs))==null||i.cancel(t),n?n.then(Oa).catch(Oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(se(this,gm))}isActive(){return this.observers.some(t=>go(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===HT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!_H(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=se(this,Hs))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=se(this,Hs))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),se(this,Da).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(se(this,Hs)&&(se(this,Wd)?se(this,Hs).cancel({revert:!0}):se(this,Hs).cancelRetry()),this.scheduleGc()),se(this,Da).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zt(this,uo,_l).call(this,{type:"invalidate"})}fetch(t,n){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(se(this,Hs))return se(this,Hs).continueRetry(),se(this,Hs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ot(this,Wd,!0),r.signal)})},a=()=>{const f=TH(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return i(h),ot(this,Wd,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),ot(this,xm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Zt(this,uo,_l).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,m,g,p;LC(f)&&f.silent||Zt(this,uo,_l).call(this,{type:"error",error:f}),LC(f)||((m=(h=se(this,Da).config).onError)==null||m.call(h,f,this),(p=(g=se(this,Da).config).onSettled)==null||p.call(g,this.state.data,f,this)),this.scheduleGc()};return ot(this,Hs,IH({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,m,g,p;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){l(v);return}(m=(h=se(this,Da).config).onSuccess)==null||m.call(h,f,this),(p=(g=se(this,Da).config).onSettled)==null||p.call(g,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{Zt(this,uo,_l).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{Zt(this,uo,_l).call(this,{type:"pause"})},onContinue:()=>{Zt(this,uo,_l).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),se(this,Hs).start()}},gm=new WeakMap,xm=new WeakMap,Da=new WeakMap,Hs=new WeakMap,yy=new WeakMap,Wd=new WeakMap,uo=new WeakSet,_l=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...RH(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return LC(i)&&i.revert&&se(this,xm)?{...se(this,xm),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),rs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),se(this,Da).notify({query:this,type:"updated",action:t})})},sV);function RH(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DH(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $fe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Uo,iV,Ffe=(iV=class extends Rp{constructor(t={}){super();Pt(this,Uo);this.config=t,ot(this,Uo,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??WT(i,n);let o=this.get(a);return o||(o=new Rfe({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){se(this,Uo).has(t.queryHash)||(se(this,Uo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=se(this,Uo).get(t.queryHash);n&&(t.destroy(),n===t&&se(this,Uo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return se(this,Uo).get(t)}getAll(){return[...se(this,Uo).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>A4(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>A4(t,r)):n}notify(t){rs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Uo=new WeakMap,iV),Wo,li,Hd,Ho,$c,aV,Lfe=(aV=class extends MH{constructor(t){super();Pt(this,Ho);Pt(this,Wo);Pt(this,li);Pt(this,Hd);this.mutationId=t.mutationId,ot(this,li,t.mutationCache),ot(this,Wo,[]),this.state=t.state||$H(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){se(this,Wo).includes(t)||(se(this,Wo).push(t),this.clearGcTimeout(),se(this,li).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ot(this,Wo,se(this,Wo).filter(n=>n!==t)),this.scheduleGc(),se(this,li).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){se(this,Wo).length||(this.state.status==="pending"?this.scheduleGc():se(this,li).remove(this))}continue(){var t;return((t=se(this,Hd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,u,d,f,h,m,g,p,v,b,y,j,N,w,S,k;ot(this,Hd,IH({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,A)=>{Zt(this,Ho,$c).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{Zt(this,Ho,$c).call(this,{type:"pause"})},onContinue:()=>{Zt(this,Ho,$c).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>se(this,li).canRun(this)}));const n=this.state.status==="pending",r=!se(this,Hd).canStart();try{if(!n){Zt(this,Ho,$c).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(i=se(this,li).config).onMutate)==null?void 0:a.call(i,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&Zt(this,Ho,$c).call(this,{type:"pending",context:A,variables:t,isPaused:r})}const C=await se(this,Hd).start();return await((u=(c=se(this,li).config).onSuccess)==null?void 0:u.call(c,C,t,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,C,t,this.state.context)),await((m=(h=se(this,li).config).onSettled)==null?void 0:m.call(h,C,null,this.state.variables,this.state.context,this)),await((p=(g=this.options).onSettled)==null?void 0:p.call(g,C,null,t,this.state.context)),Zt(this,Ho,$c).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(v=se(this,li).config).onError)==null?void 0:b.call(v,C,t,this.state.context,this)),await((j=(y=this.options).onError)==null?void 0:j.call(y,C,t,this.state.context)),await((w=(N=se(this,li).config).onSettled)==null?void 0:w.call(N,void 0,C,this.state.variables,this.state.context,this)),await((k=(S=this.options).onSettled)==null?void 0:k.call(S,void 0,C,t,this.state.context)),C}finally{Zt(this,Ho,$c).call(this,{type:"error",error:C})}}finally{se(this,li).runNext(this)}}},Wo=new WeakMap,li=new WeakMap,Hd=new WeakMap,Ho=new WeakSet,$c=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rs.batch(()=>{se(this,Wo).forEach(r=>{r.onMutationUpdate(t)}),se(this,li).notify({mutation:this,type:"updated",action:t})})},aV);function $H(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ta,by,oV,zfe=(oV=class extends Rp{constructor(t={}){super();Pt(this,ta);Pt(this,by);this.config=t,ot(this,ta,new Map),ot(this,by,Date.now())}build(t,n,r){const i=new Lfe({mutationCache:this,mutationId:++yb(this,by)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=$b(t),r=se(this,ta).get(n)??[];r.push(t),se(this,ta).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=$b(t);if(se(this,ta).has(n)){const i=(r=se(this,ta).get(n))==null?void 0:r.filter(a=>a!==t);i&&(i.length===0?se(this,ta).delete(n):se(this,ta).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=se(this,ta).get($b(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=se(this,ta).get($b(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){rs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...se(this,ta).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>T4(n,r))}findAll(t={}){return this.getAll().filter(n=>T4(t,n))}notify(t){rs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return rs.batch(()=>Promise.all(t.map(n=>n.continue().catch(Oa))))}},ta=new WeakMap,by=new WeakMap,oV);function $b(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function R0(e){return{onFetch:(t,n)=>{var d,f,h,m,g;const r=t.options,i=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},b=TH(t.options,t.fetchOptions),y=async(j,N,w)=>{if(p)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const S={queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};v(S);const k=await b(S),{maxPages:C}=t.options,A=w?Tfe:Afe;return{pages:A(j.pages,k,C),pageParams:A(j.pageParams,N,C)}};if(i&&a.length){const j=i==="backward",N=j?FH:F2,w={pages:a,pageParams:o},S=N(r,w);l=await y(w,S,j)}else{const j=e??a.length;do{const N=c===0?o[0]??r.initialPageParam:F2(r,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<j)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function F2(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function FH(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}function Bfe(e,t){return t?F2(e,t)!=null:!1}function Vfe(e,t){return!t||!e.getPreviousPageParam?!1:FH(e,t)!=null}var jr,Zc,Jc,vm,ym,eu,bm,jm,lV,qfe=(lV=class{constructor(e={}){Pt(this,jr);Pt(this,Zc);Pt(this,Jc);Pt(this,vm);Pt(this,ym);Pt(this,eu);Pt(this,bm);Pt(this,jm);ot(this,jr,e.queryCache||new Ffe),ot(this,Zc,e.mutationCache||new zfe),ot(this,Jc,e.defaultOptions||{}),ot(this,vm,new Map),ot(this,ym,new Map),ot(this,eu,0)}mount(){yb(this,eu)._++,se(this,eu)===1&&(ot(this,bm,KT.subscribe(async e=>{e&&(await this.resumePausedMutations(),se(this,jr).onFocus())})),ot(this,jm,M0.subscribe(async e=>{e&&(await this.resumePausedMutations(),se(this,jr).onOnline())})))}unmount(){var e,t;yb(this,eu)._--,se(this,eu)===0&&((e=se(this,bm))==null||e.call(this),ot(this,bm,void 0),(t=se(this,jm))==null||t.call(this),ot(this,jm,void 0))}isFetching(e){return se(this,jr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return se(this,Zc).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=se(this,jr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=se(this,jr).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Jh(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return se(this,jr).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=se(this,jr).get(r.queryHash),a=i==null?void 0:i.state.data,o=Efe(t,a);if(o!==void 0)return se(this,jr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return rs.batch(()=>se(this,jr).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=se(this,jr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=se(this,jr);rs.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=se(this,jr),r={type:"active",...e};return rs.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=rs.batch(()=>se(this,jr).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Oa).catch(Oa)}invalidateQueries(e={},t={}){return rs.batch(()=>{if(se(this,jr).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=rs.batch(()=>se(this,jr).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Oa)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Oa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=se(this,jr).build(this,t);return n.isStaleByTime(Jh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Oa).catch(Oa)}fetchInfiniteQuery(e){return e.behavior=R0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Oa).catch(Oa)}ensureInfiniteQueryData(e){return e.behavior=R0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return M0.isOnline()?se(this,Zc).resumePausedMutations():Promise.resolve()}getQueryCache(){return se(this,jr)}getMutationCache(){return se(this,Zc)}getDefaultOptions(){return se(this,Jc)}setDefaultOptions(e){ot(this,Jc,e)}setQueryDefaults(e,t){se(this,vm).set(xf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...se(this,vm).values()];let n={};return t.forEach(r=>{lv(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){se(this,ym).set(xf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...se(this,ym).values()];let n={};return t.forEach(r=>{lv(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...se(this,Jc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WT(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===HT&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...se(this,Jc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){se(this,jr).clear(),se(this,Zc).clear()}},jr=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,vm=new WeakMap,ym=new WeakMap,eu=new WeakMap,bm=new WeakMap,jm=new WeakMap,lV),Mi,dn,jy,ci,Kd,wm,tu,Ko,wy,Nm,Sm,Gd,Qd,nu,Cm,Tn,lx,L2,z2,B2,V2,q2,U2,W2,zH,cV,LH=(cV=class extends Rp{constructor(t,n){super();Pt(this,Tn);Pt(this,Mi);Pt(this,dn);Pt(this,jy);Pt(this,ci);Pt(this,Kd);Pt(this,wm);Pt(this,tu);Pt(this,Ko);Pt(this,wy);Pt(this,Nm);Pt(this,Sm);Pt(this,Gd);Pt(this,Qd);Pt(this,nu);Pt(this,Cm,new Set);this.options=n,ot(this,Mi,t),ot(this,Ko,null),ot(this,tu,$2()),this.options.experimental_prefetchInRender||se(this,tu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(se(this,dn).addObserver(this),I4(se(this,dn),this.options)?Zt(this,Tn,lx).call(this):this.updateResult(),Zt(this,Tn,V2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return H2(se(this,dn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return H2(se(this,dn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Zt(this,Tn,q2).call(this),Zt(this,Tn,U2).call(this),se(this,dn).removeObserver(this)}setOptions(t,n){const r=this.options,i=se(this,dn);if(this.options=se(this,Mi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof go(this.options.enabled,se(this,dn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Zt(this,Tn,W2).call(this),se(this,dn).setOptions(this.options),r._defaulted&&!I0(this.options,r)&&se(this,Mi).getQueryCache().notify({type:"observerOptionsUpdated",query:se(this,dn),observer:this});const a=this.hasListeners();a&&M4(se(this,dn),i,this.options,r)&&Zt(this,Tn,lx).call(this),this.updateResult(n),a&&(se(this,dn)!==i||go(this.options.enabled,se(this,dn))!==go(r.enabled,se(this,dn))||Jh(this.options.staleTime,se(this,dn))!==Jh(r.staleTime,se(this,dn)))&&Zt(this,Tn,L2).call(this);const o=Zt(this,Tn,z2).call(this);a&&(se(this,dn)!==i||go(this.options.enabled,se(this,dn))!==go(r.enabled,se(this,dn))||o!==se(this,nu))&&Zt(this,Tn,B2).call(this,o)}getOptimisticResult(t){const n=se(this,Mi).getQueryCache().build(se(this,Mi),t),r=this.createResult(n,t);return Wfe(this,r)&&(ot(this,ci,r),ot(this,wm,this.options),ot(this,Kd,se(this,dn).state)),r}getCurrentResult(){return se(this,ci)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){se(this,Cm).add(t)}getCurrentQuery(){return se(this,dn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=se(this,Mi).defaultQueryOptions(t),r=se(this,Mi).getQueryCache().build(se(this,Mi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Zt(this,Tn,lx).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),se(this,ci)))}createResult(t,n){var C;const r=se(this,dn),i=this.options,a=se(this,ci),o=se(this,Kd),l=se(this,wm),u=t!==r?t.state:se(this,jy),{state:d}=t;let f={...d},h=!1,m;if(n._optimisticResults){const A=this.hasListeners(),D=!A&&I4(t,n),P=A&&M4(t,r,n,i);(D||P)&&(f={...f,...RH(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:v}=f;if(n.select&&f.data!==void 0)if(a&&f.data===(o==null?void 0:o.data)&&n.select===se(this,wy))m=se(this,Nm);else try{ot(this,wy,n.select),m=n.select(f.data),m=R2(a==null?void 0:a.data,m,n),ot(this,Nm,m),ot(this,Ko,null)}catch(A){ot(this,Ko,A)}else m=f.data;if(n.placeholderData!==void 0&&m===void 0&&v==="pending"){let A;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))A=a.data;else if(A=typeof n.placeholderData=="function"?n.placeholderData((C=se(this,Sm))==null?void 0:C.state.data,se(this,Sm)):n.placeholderData,n.select&&A!==void 0)try{A=n.select(A),ot(this,Ko,null)}catch(D){ot(this,Ko,D)}A!==void 0&&(v="success",m=R2(a==null?void 0:a.data,A,n),h=!0)}se(this,Ko)&&(g=se(this,Ko),m=se(this,Nm),p=Date.now(),v="error");const b=f.fetchStatus==="fetching",y=v==="pending",j=v==="error",N=y&&b,w=m!==void 0,k={status:v,fetchStatus:f.fetchStatus,isPending:y,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!y,isLoadingError:j&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&w,isStale:GT(t,n),refetch:this.refetch,promise:se(this,tu)};if(this.options.experimental_prefetchInRender){const A=_=>{k.status==="error"?_.reject(k.error):k.data!==void 0&&_.resolve(k.data)},D=()=>{const _=ot(this,tu,k.promise=$2());A(_)},P=se(this,tu);switch(P.status){case"pending":t.queryHash===r.queryHash&&A(P);break;case"fulfilled":(k.status==="error"||k.data!==P.value)&&D();break;case"rejected":(k.status!=="error"||k.error!==P.reason)&&D();break}}return k}updateResult(t){const n=se(this,ci),r=this.createResult(se(this,dn),this.options);if(ot(this,Kd,se(this,dn).state),ot(this,wm,this.options),se(this,Kd).data!==void 0&&ot(this,Sm,se(this,dn)),I0(r,n))return;ot(this,ci,r);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!se(this,Cm).size)return!0;const c=new Set(l??se(this,Cm));return this.options.throwOnError&&c.add("error"),Object.keys(se(this,ci)).some(u=>{const d=u;return se(this,ci)[d]!==n[d]&&c.has(d)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),Zt(this,Tn,zH).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Zt(this,Tn,V2).call(this)}},Mi=new WeakMap,dn=new WeakMap,jy=new WeakMap,ci=new WeakMap,Kd=new WeakMap,wm=new WeakMap,tu=new WeakMap,Ko=new WeakMap,wy=new WeakMap,Nm=new WeakMap,Sm=new WeakMap,Gd=new WeakMap,Qd=new WeakMap,nu=new WeakMap,Cm=new WeakMap,Tn=new WeakSet,lx=function(t){Zt(this,Tn,W2).call(this);let n=se(this,dn).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Oa)),n},L2=function(){Zt(this,Tn,q2).call(this);const t=Jh(this.options.staleTime,se(this,dn));if(gf||se(this,ci).isStale||!I2(t))return;const r=_H(se(this,ci).dataUpdatedAt,t)+1;ot(this,Gd,setTimeout(()=>{se(this,ci).isStale||this.updateResult()},r))},z2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(se(this,dn)):this.options.refetchInterval)??!1},B2=function(t){Zt(this,Tn,U2).call(this),ot(this,nu,t),!(gf||go(this.options.enabled,se(this,dn))===!1||!I2(se(this,nu))||se(this,nu)===0)&&ot(this,Qd,setInterval(()=>{(this.options.refetchIntervalInBackground||KT.isFocused())&&Zt(this,Tn,lx).call(this)},se(this,nu)))},V2=function(){Zt(this,Tn,L2).call(this),Zt(this,Tn,B2).call(this,Zt(this,Tn,z2).call(this))},q2=function(){se(this,Gd)&&(clearTimeout(se(this,Gd)),ot(this,Gd,void 0))},U2=function(){se(this,Qd)&&(clearInterval(se(this,Qd)),ot(this,Qd,void 0))},W2=function(){const t=se(this,Mi).getQueryCache().build(se(this,Mi),this.options);if(t===se(this,dn))return;const n=se(this,dn);ot(this,dn,t),ot(this,jy,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},zH=function(t){rs.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(se(this,ci))}),se(this,Mi).getQueryCache().notify({query:se(this,dn),type:"observerResultsUpdated"})})},cV);function Ufe(e,t){return go(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function I4(e,t){return Ufe(e,t)||e.state.data!==void 0&&H2(e,t,t.refetchOnMount)}function H2(e,t,n){if(go(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&GT(e,t)}return!1}function M4(e,t,n,r){return(e!==t||go(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&GT(e,n)}function GT(e,t){return go(t.enabled,e)!==!1&&e.isStaleByTime(Jh(t.staleTime,e))}function Wfe(e,t){return!I0(e.getCurrentResult(),t)}var Hfe=class extends LH{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:R0()},t)}getOptimisticResult(e){return e.behavior=R0(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var g,p;const{state:n}=e,r=super.createResult(e,t),{isFetching:i,isRefetching:a,isError:o,isRefetchError:l}=r,c=(p=(g=n.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:p.direction,u=o&&c==="forward",d=i&&c==="forward",f=o&&c==="backward",h=i&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Bfe(t,n.data),hasPreviousPage:Vfe(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:f,isFetchingPreviousPage:h,isRefetchError:l&&!u&&!f,isRefetching:a&&!d&&!h}}},ru,su,Ri,zl,tc,Uj,K2,uV,Kfe=(uV=class extends Rp{constructor(n,r){super();Pt(this,tc);Pt(this,ru);Pt(this,su);Pt(this,Ri);Pt(this,zl);ot(this,ru,n),this.setOptions(r),this.bindMethods(),Zt(this,tc,Uj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=se(this,ru).defaultMutationOptions(n),I0(this.options,r)||se(this,ru).getMutationCache().notify({type:"observerOptionsUpdated",mutation:se(this,Ri),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&xf(r.mutationKey)!==xf(this.options.mutationKey)?this.reset():((i=se(this,Ri))==null?void 0:i.state.status)==="pending"&&se(this,Ri).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=se(this,Ri))==null||n.removeObserver(this)}onMutationUpdate(n){Zt(this,tc,Uj).call(this),Zt(this,tc,K2).call(this,n)}getCurrentResult(){return se(this,su)}reset(){var n;(n=se(this,Ri))==null||n.removeObserver(this),ot(this,Ri,void 0),Zt(this,tc,Uj).call(this),Zt(this,tc,K2).call(this)}mutate(n,r){var i;return ot(this,zl,r),(i=se(this,Ri))==null||i.removeObserver(this),ot(this,Ri,se(this,ru).getMutationCache().build(se(this,ru),this.options)),se(this,Ri).addObserver(this),se(this,Ri).execute(n)}},ru=new WeakMap,su=new WeakMap,Ri=new WeakMap,zl=new WeakMap,tc=new WeakSet,Uj=function(){var r;const n=((r=se(this,Ri))==null?void 0:r.state)??$H();ot(this,su,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},K2=function(n){rs.batch(()=>{var r,i,a,o,l,c,u,d;if(se(this,zl)&&this.hasListeners()){const f=se(this,su).variables,h=se(this,su).context;(n==null?void 0:n.type)==="success"?((i=(r=se(this,zl)).onSuccess)==null||i.call(r,n.data,f,h),(o=(a=se(this,zl)).onSettled)==null||o.call(a,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((c=(l=se(this,zl)).onError)==null||c.call(l,n.error,f,h),(d=(u=se(this,zl)).onSettled)==null||d.call(u,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(se(this,su))})})},uV),BH=x.createContext(void 0),Pi=e=>{const t=x.useContext(BH);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Gfe=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(BH.Provider,{value:e,children:t})),VH=x.createContext(!1),Qfe=()=>x.useContext(VH);VH.Provider;function Yfe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Xfe=x.createContext(Yfe()),Zfe=()=>x.useContext(Xfe);function qH(e,t){return typeof e=="function"?e(...t):!!e}function G2(){}var Jfe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ehe=e=>{x.useEffect(()=>{e.clearReset()},[e])},the=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&qH(n,[e.error,r]),nhe=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},rhe=(e,t)=>e.isLoading&&e.isFetching&&!t,she=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,R4=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function UH(e,t,n){var d,f,h,m,g;const r=Pi(),i=Qfe(),a=Zfe(),o=r.defaultQueryOptions(e);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,o),o._optimisticResults=i?"isRestoring":"optimistic",nhe(o),Jfe(o,a),ehe(a);const l=!r.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new t(r,o)),u=c.getOptimisticResult(o);if(x.useSyncExternalStore(x.useCallback(p=>{const v=i?G2:c.subscribe(rs.batchCalls(p));return c.updateResult(),v},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),she(o,u))throw R4(o,c,a);if(the({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((m=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||m.call(h,o,u),o.experimental_prefetchInRender&&!gf&&rhe(u,i)){const p=l?R4(o,c,a):(g=r.getQueryCache().get(o.queryHash))==null?void 0:g.promise;p==null||p.catch(G2).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function je(e,t){return UH(e,LH)}function Pe(e,t){const n=Pi(),[r]=x.useState(()=>new Kfe(n,e));x.useEffect(()=>{r.setOptions(e)},[r,e]);const i=x.useSyncExternalStore(x.useCallback(o=>r.subscribe(rs.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=x.useCallback((o,l)=>{r.mutate(o,l).catch(G2)},[r]);if(i.error&&qH(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function ihe(e,t){return UH(e,Hfe)}const ahe="GanttiumDB",ohe=1,hs={PROJECTS:"projects",TASKS:"tasks",RISKS:"risks",ISSUES:"issues",COST_ITEMS:"costItems",STAKEHOLDERS:"stakeholders",RESOURCES:"resources",OFFLINE_QUEUE:"offlineQueue",CACHE_METADATA:"cacheMetadata"};let Oh=null;async function WH(){return Oh||new Promise((e,t)=>{const n=indexedDB.open(ahe,ohe);n.onerror=()=>{console.error("[IndexedDB] Failed to open database:",n.error),t(n.error)},n.onsuccess=()=>{Oh=n.result,console.log("[IndexedDB] Database opened successfully"),e(Oh)},n.onupgradeneeded=r=>{const i=r.target.result;Object.values(hs).forEach(a=>{if(!i.objectStoreNames.contains(a)){const o=i.createObjectStore(a,{keyPath:"id"});(a===hs.TASKS||a===hs.PROJECTS)&&o.createIndex("projectId","projectId",{unique:!1}),a===hs.OFFLINE_QUEUE&&(o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("entityType","entityType",{unique:!1})),a===hs.CACHE_METADATA&&o.createIndex("expiresAt","expiresAt",{unique:!1})}}),console.log("[IndexedDB] Database schema created/updated")}})}async function $p(){return Oh||await WH(),Oh}async function HH(e,t){try{const r=(await $p()).transaction([e,hs.CACHE_METADATA],"readwrite"),i=r.objectStore(e),a=r.objectStore(hs.CACHE_METADATA);await Promise.all([new Promise((o,l)=>{const c=i.delete(t);c.onsuccess=()=>o(),c.onerror=()=>l(c.error)}),new Promise((o,l)=>{const c=a.delete(`${e}:${t}`);c.onsuccess=()=>o(),c.onerror=()=>l(c.error)})]),console.log(`[IndexedDB] Deleted cached ${e}:${t}`)}catch(n){throw console.error(`[IndexedDB] Failed to delete cached ${e}:`,n),n}}async function KH(e){try{const r=(await $p()).transaction([hs.OFFLINE_QUEUE],"readwrite").objectStore(hs.OFFLINE_QUEUE),i={id:`${e.entityType}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0,...e};return await new Promise((a,o)=>{const l=r.add(i);l.onsuccess=()=>a(),l.onerror=()=>o(l.error)}),console.log("[IndexedDB] Queued offline action:",i.id),i.id}catch(t){throw console.error("[IndexedDB] Failed to queue offline action:",t),t}}async function lhe(){try{const r=(await $p()).transaction([hs.OFFLINE_QUEUE],"readonly").objectStore(hs.OFFLINE_QUEUE).index("timestamp");return new Promise((i,a)=>{const o=r.getAll();o.onsuccess=()=>i(o.result||[]),o.onerror=()=>a(o.error)})}catch(e){return console.error("[IndexedDB] Failed to get queued actions:",e),[]}}async function che(e){try{const r=(await $p()).transaction([hs.OFFLINE_QUEUE],"readwrite").objectStore(hs.OFFLINE_QUEUE);await new Promise((i,a)=>{const o=r.delete(e);o.onsuccess=()=>i(),o.onerror=()=>a(o.error)}),console.log("[IndexedDB] Removed queued action:",e)}catch(t){throw console.error("[IndexedDB] Failed to remove queued action:",t),t}}async function uhe(e,t){try{const i=(await $p()).transaction([hs.OFFLINE_QUEUE],"readwrite").objectStore(hs.OFFLINE_QUEUE),a=await new Promise((o,l)=>{const c=i.get(e);c.onsuccess=()=>o(c.result||null),c.onerror=()=>l(c.error)});a&&(a.retries=t,await new Promise((o,l)=>{const c=i.put(a);c.onsuccess=()=>o(),c.onerror=()=>l(c.error)}))}catch(n){throw console.error("[IndexedDB] Failed to update queued action retry:",n),n}}async function dhe(){try{const r=(await $p()).transaction([hs.CACHE_METADATA],"readwrite").objectStore(hs.CACHE_METADATA).index("expiresAt"),i=Date.now(),a=IDBKeyRange.upperBound(i),o=await new Promise((l,c)=>{const u=r.getAll(a);u.onsuccess=()=>l(u.result||[]),u.onerror=()=>c(u.error)});for(const l of o){const[c,u]=l.key.split(":");await HH(c,u)}console.log(`[IndexedDB] Cleaned up ${o.length} expired cache entries`)}catch(e){console.error("[IndexedDB] Failed to cleanup expired cache:",e)}}const fhe=Object.freeze(Object.defineProperty({__proto__:null,STORES:hs,cleanupExpiredCache:dhe,deleteCachedData:HH,getQueuedActions:lhe,initIndexedDB:WH,queueOfflineAction:KH,removeQueuedAction:che,updateQueuedActionRetry:uhe},Symbol.toStringTag,{value:"Module"}));async function GH(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function fe(e,t,n){var i,a;const r=!navigator.onLine;try{const o=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await GH(o),o}catch(o){if((r||(i=o.message)!=null&&i.includes("Failed to fetch")||(a=o.message)!=null&&a.includes("NetworkError"))&&["POST","PATCH","PUT","DELETE"].includes(e))try{const l=t.split("/").filter(Boolean)[1]||"unknown";return await KH({type:e==="DELETE"?"DELETE":e==="POST"?"CREATE":"UPDATE",entityType:l,endpoint:t,method:e,data:n||{}}),console.log(`[API] Queued offline action: ${e} ${t}`),new Response(JSON.stringify({message:"Action queued for sync when online",queued:!0}),{status:202,headers:{"Content-Type":"application/json"}})}catch(l){throw console.error("[API] Failed to queue offline action:",l),o}throw o}}const hhe=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});if(n.status===401)throw new Error("401: Unauthorized");return await GH(n),await n.json()},we=new qfe({defaultOptions:{queries:{queryFn:hhe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:(e,t)=>{const n=(t==null?void 0:t.message)||"";return n.includes("401")||n.includes("Unauthorized")||n.includes("429")||n.includes("Too many requests")||n.match(/^4\d{2}/)?!1:e<3}},mutations:{retry:!1}}}),mhe=1,phe=1e6;let zC=0;function ghe(){return zC=(zC+1)%Number.MAX_SAFE_INTEGER,zC.toString()}const BC=new Map,$4=e=>{if(BC.has(e))return;const t=setTimeout(()=>{BC.delete(e),Cx({type:"REMOVE_TOAST",toastId:e})},phe);BC.set(e,t)},xhe=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,mhe)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?$4(n):e.toasts.forEach(r=>{$4(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Wj=[];let Hj={toasts:[]};function Cx(e){Hj=xhe(Hj,e),Wj.forEach(t=>{t(Hj)})}function vhe({...e}){const t=ghe(),n=i=>Cx({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Cx({type:"DISMISS_TOAST",toastId:t});return Cx({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function Nt(){const[e,t]=x.useState(Hj);return x.useEffect(()=>(Wj.push(t),()=>{const n=Wj.indexOf(t);n>-1&&Wj.splice(n,1)}),[e]),{...e,toast:vhe,dismiss:n=>Cx({type:"DISMISS_TOAST",toastId:n})}}function Re(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function F4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ac(...e){return t=>{let n=!1;const r=e.map(i=>{const a=F4(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():F4(e[i],null)}}}}function kt(...e){return x.useCallback(ac(...e),e)}function yhe(e,t){const n=x.createContext(t),r=a=>{const{children:o,...l}=a,c=x.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function Er(e,t=[]){let n=[];function r(a,o){const l=x.createContext(o),c=n.length;n=[...n,o];const u=f=>{var b;const{scope:h,children:m,...g}=f,p=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,v=x.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:v,children:m})};u.displayName=a+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[e])==null?void 0:p[c])||l,g=x.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,bhe(i,...t)]}function bhe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Pu(e){const t=jhe(e),n=x.forwardRef((r,i)=>{const{children:a,...o}=r,l=x.Children.toArray(a),c=l.find(whe);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:i,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var e1=Pu("Slot");function jhe(e){const t=x.forwardRef((n,r)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const o=She(i),l=Nhe(a,i.props);return i.type!==x.Fragment&&(l.ref=r?ac(r,o):o),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QH=Symbol("radix.slottable");function YH(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=QH,t}function whe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QH}function Nhe(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function She(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Fp(e){const t=e+"CollectionProvider",[n,r]=Er(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:b}=p,y=Q.useRef(null),j=Q.useRef(new Map).current;return s.jsx(i,{scope:v,itemMap:j,collectionRef:y,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Pu(l),u=Q.forwardRef((p,v)=>{const{scope:b,children:y}=p,j=a(l,b),N=kt(v,j.collectionRef);return s.jsx(c,{ref:N,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Pu(d),m=Q.forwardRef((p,v)=>{const{scope:b,children:y,...j}=p,N=Q.useRef(null),w=kt(v,N),S=a(d,b);return Q.useEffect(()=>(S.itemMap.set(N,{ref:N,...j}),()=>void S.itemMap.delete(N))),s.jsx(h,{[f]:"",ref:w,children:y})});m.displayName=d;function g(p){const v=a(e+"CollectionConsumer",p);return Q.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((S,k)=>j.indexOf(S.ref.current)-j.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var Che=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qe=Che.reduce((e,t)=>{const n=Pu(`Primitive.${t}`),r=x.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function QT(e,t){e&&zf.flushSync(()=>e.dispatchEvent(t))}function lr(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function khe(e,t=globalThis==null?void 0:globalThis.document){const n=lr(e);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Phe="DismissableLayer",Q2="dismissableLayer.update",Ehe="dismissableLayer.pointerDownOutside",_he="dismissableLayer.focusOutside",L4,XH=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bf=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(XH),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=x.useState({}),g=kt(t,k=>f(k)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(v),y=d?p.indexOf(d):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=b,w=The(k=>{const C=k.target,A=[...u.branches].some(D=>D.contains(C));!N||A||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},h),S=Dhe(k=>{const C=k.target;[...u.branches].some(D=>D.contains(C))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},h);return khe(k=>{y===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),x.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(L4=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),z4(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=L4)}},[d,h,n,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),z4())},[d,u]),x.useEffect(()=>{const k=()=>m({});return document.addEventListener(Q2,k),()=>document.removeEventListener(Q2,k)},[]),s.jsx(Qe.div,{...c,ref:g,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,w.onPointerDownCapture)})});Bf.displayName=Phe;var Ahe="DismissableLayerBranch",ZH=x.forwardRef((e,t)=>{const n=x.useContext(XH),r=x.useRef(null),i=kt(t,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Qe.div,{...e,ref:i})});ZH.displayName=Ahe;function The(e,t=globalThis==null?void 0:globalThis.document){const n=lr(e),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){JH(Ehe,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Dhe(e,t=globalThis==null?void 0:globalThis.document){const n=lr(e),r=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!r.current&&JH(_he,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function z4(){const e=new CustomEvent(Q2);document.dispatchEvent(e)}function JH(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?QT(i,a):i.dispatchEvent(a)}var Ohe=Bf,Ihe=ZH,zr=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Mhe="Portal",Lp=x.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[i,a]=x.useState(!1);zr(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Zde.createPortal(s.jsx(Qe.div,{...r,ref:t}),o):null});Lp.displayName=Mhe;function Rhe(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var Yr=e=>{const{present:t,children:n}=e,r=$he(t),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=kt(r.ref,Fhe(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:a}):null};Yr.displayName="Presence";function $he(e){const[t,n]=x.useState(),r=x.useRef({}),i=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Rhe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Fb(r.current);a.current=l==="mounted"?u:"none"},[l]),zr(()=>{const u=r.current,d=i.current;if(d!==e){const h=a.current,m=Fb(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),zr(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=Fb(r.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(a.current=Fb(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Fb(e){return(e==null?void 0:e.animationName)||"none"}function Fhe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ni({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=Lhe({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:r,l=lr(n),c=x.useCallback(u=>{if(a){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else i(u)},[a,e,i,l]);return[o,c]}function Lhe({defaultProp:e,onChange:t}){const n=x.useState(e),[r]=n,i=x.useRef(r),a=lr(t);return x.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var zhe="VisuallyHidden",Ey=x.forwardRef((e,t)=>s.jsx(Qe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Ey.displayName=zhe;var Bhe=Ey,YT="ToastProvider",[XT,Vhe,qhe]=Fp("Toast"),[eK]=Er("Toast",[qhe]),[Uhe,t1]=eK(YT),tK=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${YT}\`. Expected non-empty \`string\`.`),s.jsx(XT.Provider,{scope:t,children:s.jsx(Uhe,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(m=>m+1),[]),onToastRemove:x.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};tK.displayName=YT;var nK="ToastViewport",Whe=["F8"],Y2="toast.viewportPause",X2="toast.viewportResume",rK=x.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Whe,label:i="Notifications ({hotkey})",...a}=e,o=t1(nK,n),l=Vhe(n),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=kt(t,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const v=b=>{var j;r.length!==0&&r.every(N=>b[N]||b.code===N)&&((j=f.current)==null||j.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),x.useEffect(()=>{const v=c.current,b=f.current;if(g&&v&&b){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(Y2);b.dispatchEvent(S),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(X2);b.dispatchEvent(S),o.isClosePausedRef.current=!1}},N=S=>{!v.contains(S.relatedTarget)&&j()},w=()=>{v.contains(document.activeElement)||j()};return v.addEventListener("focusin",y),v.addEventListener("focusout",N),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",w),window.addEventListener("blur",y),window.addEventListener("focus",j),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",N),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",w),window.removeEventListener("blur",y),window.removeEventListener("focus",j)}}},[g,o.isClosePausedRef]);const p=x.useCallback(({tabbingDirection:v})=>{const y=l().map(j=>{const N=j.ref.current,w=[N,...sme(N)];return v==="forwards"?w:w.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const v=f.current;if(v){const b=y=>{var w,S,k;const j=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!j){const C=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(w=u.current)==null||w.focus();return}const _=p({tabbingDirection:A?"backwards":"forwards"}),O=_.findIndex(M=>M===C);VC(_.slice(O+1))?y.preventDefault():A?(S=u.current)==null||S.focus():(k=d.current)==null||k.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[l,p]),s.jsxs(Ihe,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(Z2,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});VC(v)}}),s.jsx(XT.Slot,{scope:n,children:s.jsx(Qe.ol,{tabIndex:-1,...a,ref:h})}),g&&s.jsx(Z2,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});VC(v)}})]})});rK.displayName=nK;var sK="ToastFocusProxy",Z2=x.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=t1(sK,n);return s.jsx(Ey,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Z2.displayName=sK;var n1="Toast",Hhe="toast.swipeStart",Khe="toast.swipeMove",Ghe="toast.swipeCancel",Qhe="toast.swipeEnd",iK=x.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=ni({prop:r,defaultProp:i,onChange:a});return s.jsx(Yr,{present:n||l,children:s.jsx(Zhe,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:lr(e.onPause),onResume:lr(e.onResume),onSwipeStart:Re(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Re(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});iK.displayName=n1;var[Yhe,Xhe]=eK(n1,{onClose(){}}),Zhe=x.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=t1(n1,n),[v,b]=x.useState(null),y=kt(t,M=>b(M)),j=x.useRef(null),N=x.useRef(null),w=i||p.duration,S=x.useRef(0),k=x.useRef(w),C=x.useRef(0),{onToastAdd:A,onToastRemove:D}=p,P=lr(()=>{var T;(v==null?void 0:v.contains(document.activeElement))&&((T=p.viewport)==null||T.focus()),o()}),_=x.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(P,M))},[P]);x.useEffect(()=>{const M=p.viewport;if(M){const T=()=>{_(k.current),u==null||u()},R=()=>{const F=new Date().getTime()-S.current;k.current=k.current-F,window.clearTimeout(C.current),c==null||c()};return M.addEventListener(Y2,R),M.addEventListener(X2,T),()=>{M.removeEventListener(Y2,R),M.removeEventListener(X2,T)}}},[p.viewport,w,c,u,_]),x.useEffect(()=>{a&&!p.isClosePausedRef.current&&_(w)},[a,w,p.isClosePausedRef,_]),x.useEffect(()=>(A(),()=>D()),[A,D]);const O=x.useMemo(()=>v?fK(v):null,[v]);return p.viewport?s.jsxs(s.Fragment,{children:[O&&s.jsx(Jhe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),s.jsx(Yhe,{scope:n,onClose:P,children:zf.createPortal(s.jsx(XT.ItemSlot,{scope:n,children:s.jsx(Ohe,{asChild:!0,onEscapeKeyDown:Re(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||P(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Re(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Re(e.onPointerDown,M=>{M.button===0&&(j.current={x:M.clientX,y:M.clientY})}),onPointerMove:Re(e.onPointerMove,M=>{if(!j.current)return;const T=M.clientX-j.current.x,R=M.clientY-j.current.y,F=!!N.current,E=["left","right"].includes(p.swipeDirection),B=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,L=E?B(0,T):0,I=E?0:B(0,R),q=M.pointerType==="touch"?10:2,$={x:L,y:I},z={originalEvent:M,delta:$};F?(N.current=$,Lb(Khe,f,z,{discrete:!1})):B4($,p.swipeDirection,q)?(N.current=$,Lb(Hhe,d,z,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(T)>q||Math.abs(R)>q)&&(j.current=null)}),onPointerUp:Re(e.onPointerUp,M=>{const T=N.current,R=M.target;if(R.hasPointerCapture(M.pointerId)&&R.releasePointerCapture(M.pointerId),N.current=null,j.current=null,T){const F=M.currentTarget,E={originalEvent:M,delta:T};B4(T,p.swipeDirection,p.swipeThreshold)?Lb(Qhe,m,E,{discrete:!0}):Lb(Ghe,h,E,{discrete:!0}),F.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Jhe=e=>{const{__scopeToast:t,children:n,...r}=e,i=t1(n1,t),[a,o]=x.useState(!1),[l,c]=x.useState(!1);return nme(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Lp,{asChild:!0,children:s.jsx(Ey,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},eme="ToastTitle",aK=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Qe.div,{...r,ref:t})});aK.displayName=eme;var tme="ToastDescription",oK=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Qe.div,{...r,ref:t})});oK.displayName=tme;var lK="ToastAction",cK=x.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(dK,{altText:n,asChild:!0,children:s.jsx(ZT,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${lK}\`. Expected non-empty \`string\`.`),null)});cK.displayName=lK;var uK="ToastClose",ZT=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=Xhe(uK,n);return s.jsx(dK,{asChild:!0,children:s.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Re(e.onClick,i.onClose)})})});ZT.displayName=uK;var dK=x.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return s.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function fK(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),rme(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...fK(r))}}),t}function Lb(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?QT(i,a):i.dispatchEvent(a)}var B4=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function nme(e=()=>{}){const t=lr(e);zr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function rme(e){return e.nodeType===e.ELEMENT_NODE}function sme(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function VC(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var ime=tK,hK=rK,mK=iK,pK=aK,gK=oK,xK=cK,vK=ZT;function yK(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=yK(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=yK(e))&&(r&&(r+=" "),r+=t);return r}const V4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,q4=Ut,Vf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return q4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const h=V4(d)||V4(f);return i[u][h]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...a,...l}[p]):{...a,...l}[p]===v})?[...u,f,h]:u},[]);return q4(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bK=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ome={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...ome,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:bK("lucide",i),...l},[...o.map(([u,d])=>x.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(e,t)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(lme,{ref:a,iconNode:t,className:bK(`lucide-${ame(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=_e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=_e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=_e("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=_e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=_e("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=_e("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=_e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=_e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=_e("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=_e("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=_e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=_e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=_e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=_e("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=_e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=_e("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=_e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=_e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=_e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=_e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=_e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=_e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xme=_e("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=_e("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=_e("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=_e("Contact",[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=_e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=_e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=_e("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=_e("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=_e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=_e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=_e("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=_e("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=_e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=_e("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=_e("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=_e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=_e("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=_e("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=_e("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=_e("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=_e("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jme=_e("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=_e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=_e("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=_e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=_e("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=_e("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=_e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=_e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=_e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=_e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eme=_e("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=_e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=_e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=_e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=_e("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=_e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=_e("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=_e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ome=_e("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ime=_e("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=_e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=_e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=_e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=_e("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=_e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fme=_e("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=_e("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=_e("PanelRight",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=_e("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bme=_e("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=_e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=_e("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=_e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=_e("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vme=_e("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=_e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=_e("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=_e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ume=_e("SquareChartGantt",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 8h7",key:"kbo1nt"}],["path",{d:"M8 12h6",key:"ikassy"}],["path",{d:"M11 16h5",key:"oq65wt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=_e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=_e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=_e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=_e("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=_e("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hme=_e("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=_e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=_e("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=_e("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=_e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=_e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=_e("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yme=_e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=_e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=_e("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=_e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=_e("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=_e("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),rD="-",Zme=e=>{const t=epe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(rD);return l[0]===""&&l.length!==1&&l.shift(),FK(l,t)||Jme(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},FK=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?FK(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(rD);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},J4=/^\[(.+)\]$/,Jme=e=>{if(J4.test(e)){const t=J4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},epe=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return npe(Object.entries(e.classGroups),n).forEach(([a,o])=>{nE(o,r,a,t)}),r},nE=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:e$(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(tpe(i)){nE(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{nE(o,e$(t,a),n,r)})})},e$=(e,t)=>{let n=e;return t.split(rD).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},tpe=e=>e.isThemeGetter,npe=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,rpe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},LK="!",spe=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let b=l[v];if(u===0){if(b===i&&(r||l.slice(v,v+a)===t)){c.push(l.slice(d,v)),d=v+a;continue}if(b==="/"){f=v;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(LK),g=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},ipe=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},ape=e=>({cache:rpe(e.cacheSize),parseClassName:spe(e),...Zme(e)}),ope=/\s+/,lpe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(ope);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,p=r(g?h.substring(0,m):h);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=r(h),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=ipe(d).join(":"),b=f?v+LK:v,y=b+p;if(a.includes(y))continue;a.push(y);const j=i(p,g);for(let N=0;N<j.length;++N){const w=j[N];a.push(b+w)}l=u+(l.length>0?" "+l:l)}return l};function cpe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=zK(t))&&(r&&(r+=" "),r+=n);return r}const zK=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=zK(e[r]))&&(n&&(n+=" "),n+=t);return n};function upe(e,...t){let n,r,i,a=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return n=ape(u),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=lpe(c,n);return i(c,d),d}return function(){return a(cpe.apply(null,arguments))}}const er=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},BK=/^\[(?:([a-z-]+):)?(.+)\]$/i,dpe=/^\d+\/\d+$/,fpe=new Set(["px","full","screen"]),hpe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mpe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ppe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gpe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xpe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sl=e=>em(e)||fpe.has(e)||dpe.test(e),Tc=e=>zp(e,"length",Cpe),em=e=>!!e&&!Number.isNaN(Number(e)),qC=e=>zp(e,"number",em),Mg=e=>!!e&&Number.isInteger(Number(e)),vpe=e=>e.endsWith("%")&&em(e.slice(0,-1)),Yt=e=>BK.test(e),Dc=e=>hpe.test(e),ype=new Set(["length","size","percentage"]),bpe=e=>zp(e,ype,VK),jpe=e=>zp(e,"position",VK),wpe=new Set(["image","url"]),Npe=e=>zp(e,wpe,Ppe),Spe=e=>zp(e,"",kpe),Rg=()=>!0,zp=(e,t,n)=>{const r=BK.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Cpe=e=>mpe.test(e)&&!ppe.test(e),VK=()=>!1,kpe=e=>gpe.test(e),Ppe=e=>xpe.test(e),Epe=()=>{const e=er("colors"),t=er("spacing"),n=er("blur"),r=er("brightness"),i=er("borderColor"),a=er("borderRadius"),o=er("borderSpacing"),l=er("borderWidth"),c=er("contrast"),u=er("grayscale"),d=er("hueRotate"),f=er("invert"),h=er("gap"),m=er("gradientColorStops"),g=er("gradientColorStopPositions"),p=er("inset"),v=er("margin"),b=er("opacity"),y=er("padding"),j=er("saturate"),N=er("scale"),w=er("sepia"),S=er("skew"),k=er("space"),C=er("translate"),A=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Yt,t],_=()=>[Yt,t],O=()=>["",Sl,Tc],M=()=>["auto",em,Yt],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Yt],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[em,Yt];return{cacheSize:500,separator:":",theme:{colors:[Rg],spacing:[Sl,Tc],blur:["none","",Dc,Yt],brightness:I(),borderColor:[e],borderRadius:["none","","full",Dc,Yt],borderSpacing:_(),borderWidth:O(),contrast:I(),grayscale:B(),hueRotate:I(),invert:B(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[vpe,Tc],inset:P(),margin:P(),opacity:I(),padding:_(),saturate:I(),scale:I(),sepia:B(),skew:I(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Yt]}],container:["container"],columns:[{columns:[Dc]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),Yt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mg,Yt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Mg,Yt]}],"grid-cols":[{"grid-cols":[Rg]}],"col-start-end":[{col:["auto",{span:["full",Mg,Yt]},Yt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Rg]}],"row-start-end":[{row:["auto",{span:[Mg,Yt]},Yt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yt,t]}],"min-w":[{"min-w":[Yt,t,"min","max","fit"]}],"max-w":[{"max-w":[Yt,t,"none","full","min","max","fit","prose",{screen:[Dc]},Dc]}],h:[{h:[Yt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Dc,Tc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qC]}],"font-family":[{font:[Rg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yt]}],"line-clamp":[{"line-clamp":["none",em,qC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Sl,Yt]}],"list-image":[{"list-image":["none",Yt]}],"list-style-type":[{list:["none","disc","decimal",Yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Sl,Tc]}],"underline-offset":[{"underline-offset":["auto",Sl,Yt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),jpe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bpe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Npe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:R()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[Sl,Yt]}],"outline-w":[{outline:[Sl,Tc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Sl,Tc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Dc,Spe]}],"shadow-color":[{shadow:[Rg]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Dc,Yt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[j]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yt]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Yt]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Mg,Yt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Sl,Tc,qC]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_pe=upe(Epe);function he(...e){return _pe(Ut(e))}const Ape=ime,qK=x.forwardRef(({className:e,...t},n)=>s.jsx(hK,{ref:n,className:he("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));qK.displayName=hK.displayName;const Tpe=Vf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),UK=x.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(mK,{ref:r,className:he(Tpe({variant:t}),e),...n}));UK.displayName=mK.displayName;const Dpe=x.forwardRef(({className:e,...t},n)=>s.jsx(xK,{ref:n,className:he("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Dpe.displayName=xK.displayName;const WK=x.forwardRef(({className:e,...t},n)=>s.jsx(vK,{ref:n,className:he("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Fn,{className:"h-4 w-4"})}));WK.displayName=vK.displayName;const HK=x.forwardRef(({className:e,...t},n)=>s.jsx(pK,{ref:n,className:he("text-sm font-semibold",e),...t}));HK.displayName=pK.displayName;const KK=x.forwardRef(({className:e,...t},n)=>s.jsx(gK,{ref:n,className:he("text-sm opacity-90",e),...t}));KK.displayName=gK.displayName;function Ope(){const{toasts:e}=Nt();return s.jsxs(Ape,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return s.jsxs(UK,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(HK,{children:n}),r&&s.jsx(KK,{children:r})]}),i,s.jsx(WK,{})]},t)}),s.jsx(qK,{})]})}var Ipe=$N[" useId ".trim().toString()]||(()=>{}),Mpe=0;function Gr(e){const[t,n]=x.useState(Ipe());return zr(()=>{n(r=>r??String(Mpe++))},[e]),t?`radix-${t}`:""}const Rpe=["top","right","bottom","left"],Au=Math.min,aa=Math.max,B0=Math.round,zb=Math.floor,tl=e=>({x:e,y:e}),$pe={left:"right",right:"left",bottom:"top",top:"bottom"},Fpe={start:"end",end:"start"};function rE(e,t,n){return aa(e,Au(t,n))}function cc(e,t){return typeof e=="function"?e(t):e}function uc(e){return e.split("-")[0]}function Bp(e){return e.split("-")[1]}function sD(e){return e==="x"?"y":"x"}function iD(e){return e==="y"?"height":"width"}function Tu(e){return["top","bottom"].includes(uc(e))?"y":"x"}function aD(e){return sD(Tu(e))}function Lpe(e,t,n){n===void 0&&(n=!1);const r=Bp(e),i=aD(e),a=iD(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=V0(o)),[o,V0(o)]}function zpe(e){const t=V0(e);return[sE(e),t,sE(t)]}function sE(e){return e.replace(/start|end/g,t=>Fpe[t])}function Bpe(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}function Vpe(e,t,n,r){const i=Bp(e);let a=Bpe(uc(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(sE)))),a}function V0(e){return e.replace(/left|right|bottom|top/g,t=>$pe[t])}function qpe(e){return{top:0,right:0,bottom:0,left:0,...e}}function GK(e){return typeof e!="number"?qpe(e):{top:e,right:e,bottom:e,left:e}}function q0(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function t$(e,t,n){let{reference:r,floating:i}=e;const a=Tu(t),o=aD(t),l=iD(o),c=uc(t),u=a==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Bp(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const Upe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=t$(u,r,c),h=r,m={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:b}=l[p],{x:y,y:j,data:N,reset:w}=await b({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,f=j??f,m={...m,[v]:{...m[v],...N}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:d,y:f}=t$(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:m}};async function dv(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=cc(t,e),g=GK(m),v=l[h?f==="floating"?"reference":"floating":f],b=q0(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},w=q0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:j,strategy:c}):y);return{top:(b.top-w.top+g.top)/N.y,bottom:(w.bottom-b.bottom+g.bottom)/N.y,left:(b.left-w.left+g.left)/N.x,right:(w.right-b.right+g.right)/N.x}}const Wpe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=cc(e,t)||{};if(u==null)return{};const f=GK(d),h={x:n,y:r},m=aD(i),g=iD(m),p=await o.getDimensions(u),v=m==="y",b=v?"top":"left",y=v?"bottom":"right",j=v?"clientHeight":"clientWidth",N=a.reference[g]+a.reference[m]-h[m]-a.floating[g],w=h[m]-a.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=S?S[j]:0;(!k||!await(o.isElement==null?void 0:o.isElement(S)))&&(k=l.floating[j]||a.floating[g]);const C=N/2-w/2,A=k/2-p[g]/2-1,D=Au(f[b],A),P=Au(f[y],A),_=D,O=k-p[g]-P,M=k/2-p[g]/2+C,T=rE(_,M,O),R=!c.arrow&&Bp(i)!=null&&M!==T&&a.reference[g]/2-(M<_?D:P)-p[g]/2<0,F=R?M<_?M-_:M-O:0;return{[m]:h[m]+F,data:{[m]:T,centerOffset:M-T-F,...R&&{alignmentOffset:F}},reset:R}}}),Hpe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=cc(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=uc(i),y=Tu(l),j=uc(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=h||(j||!p?[V0(l)]:zpe(l)),S=g!=="none";!h&&S&&w.push(...Vpe(l,p,g,N));const k=[l,...w],C=await dv(t,v),A=[];let D=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&A.push(C[b]),f){const M=Lpe(i,o,N);A.push(C[M[0]],C[M[1]])}if(D=[...D,{placement:i,overflows:A}],!A.every(M=>M<=0)){var P,_;const M=(((P=a.flip)==null?void 0:P.index)||0)+1,T=k[M];if(T)return{data:{index:M,overflows:D},reset:{placement:T}};let R=(_=D.filter(F=>F.overflows[0]<=0).sort((F,E)=>F.overflows[1]-E.overflows[1])[0])==null?void 0:_.placement;if(!R)switch(m){case"bestFit":{var O;const F=(O=D.filter(E=>{if(S){const B=Tu(E.placement);return B===y||B==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(B=>B>0).reduce((B,L)=>B+L,0)]).sort((E,B)=>E[1]-B[1])[0])==null?void 0:O[0];F&&(R=F);break}case"initialPlacement":R=l;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function n$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function r$(e){return Rpe.some(t=>e[t]>=0)}const Kpe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=cc(e,t);switch(r){case"referenceHidden":{const a=await dv(t,{...i,elementContext:"reference"}),o=n$(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:r$(o)}}}case"escaped":{const a=await dv(t,{...i,altBoundary:!0}),o=n$(a,n.floating);return{data:{escapedOffsets:o,escaped:r$(o)}}}default:return{}}}}};async function Gpe(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=uc(n),l=Bp(n),c=Tu(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,f=cc(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const Qpe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await Gpe(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Ype=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y}=v;return{x:b,y}}},...c}=cc(e,t),u={x:n,y:r},d=await dv(t,c),f=Tu(uc(i)),h=sD(f);let m=u[h],g=u[f];if(a){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=m+d[v],j=m-d[b];m=rE(y,m,j)}if(o){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=g+d[v],j=g-d[b];g=rE(y,g,j)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:a,[f]:o}}}}}},Xpe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=cc(e,t),d={x:n,y:r},f=Tu(i),h=sD(f);let m=d[h],g=d[f];const p=cc(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const j=h==="y"?"height":"width",N=a.reference[h]-a.floating[j]+v.mainAxis,w=a.reference[h]+a.reference[j]-v.mainAxis;m<N?m=N:m>w&&(m=w)}if(u){var b,y;const j=h==="y"?"width":"height",N=["top","left"].includes(uc(i)),w=a.reference[f]-a.floating[j]+(N&&((b=o.offset)==null?void 0:b[f])||0)+(N?0:v.crossAxis),S=a.reference[f]+a.reference[j]+(N?0:((y=o.offset)==null?void 0:y[f])||0)-(N?v.crossAxis:0);g<w?g=w:g>S&&(g=S)}return{[h]:m,[f]:g}}}},Zpe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=cc(e,t),d=await dv(t,u),f=uc(i),h=Bp(i),m=Tu(i)==="y",{width:g,height:p}=a.floating;let v,b;f==="top"||f==="bottom"?(v=f,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,v=h==="end"?"top":"bottom");const y=p-d.top-d.bottom,j=g-d.left-d.right,N=Au(p-d[v],y),w=Au(g-d[b],j),S=!t.middlewareData.shift;let k=N,C=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=y),S&&!h){const D=aa(d.left,0),P=aa(d.right,0),_=aa(d.top,0),O=aa(d.bottom,0);m?C=g-2*(D!==0||P!==0?D+P:aa(d.left,d.right)):k=p-2*(_!==0||O!==0?_+O:aa(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:k});const A=await o.getDimensions(l.floating);return g!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function f1(){return typeof window<"u"}function Vp(e){return QK(e)?(e.nodeName||"").toLowerCase():"#document"}function ha(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vl(e){var t;return(t=(QK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function QK(e){return f1()?e instanceof Node||e instanceof ha(e).Node:!1}function To(e){return f1()?e instanceof Element||e instanceof ha(e).Element:!1}function dl(e){return f1()?e instanceof HTMLElement||e instanceof ha(e).HTMLElement:!1}function s$(e){return!f1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ha(e).ShadowRoot}function _y(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Do(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Jpe(e){return["table","td","th"].includes(Vp(e))}function h1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function oD(e){const t=lD(),n=To(e)?Do(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ege(e){let t=Du(e);for(;dl(t)&&!$m(t);){if(oD(t))return t;if(h1(t))return null;t=Du(t)}return null}function lD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $m(e){return["html","body","#document"].includes(Vp(e))}function Do(e){return ha(e).getComputedStyle(e)}function m1(e){return To(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Du(e){if(Vp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||s$(e)&&e.host||vl(e);return s$(t)?t.host:t}function YK(e){const t=Du(e);return $m(t)?e.ownerDocument?e.ownerDocument.body:e.body:dl(t)&&_y(t)?t:YK(t)}function fv(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=YK(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=ha(i);if(a){const l=iE(o);return t.concat(o,o.visualViewport||[],_y(i)?i:[],l&&n?fv(l):[])}return t.concat(i,fv(i,[],n))}function iE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XK(e){const t=Do(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=dl(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=B0(n)!==a||B0(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function cD(e){return To(e)?e:e.contextElement}function tm(e){const t=cD(e);if(!dl(t))return tl(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=XK(t);let o=(a?B0(n.width):n.width)/r,l=(a?B0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const tge=tl(0);function ZK(e){const t=ha(e);return!lD()||!t.visualViewport?tge:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nge(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ha(e)?!1:t}function wf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=cD(e);let o=tl(1);t&&(r?To(r)&&(o=tm(r)):o=tm(e));const l=nge(a,n,r)?ZK(a):tl(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(a){const h=ha(a),m=r&&To(r)?ha(r):r;let g=h,p=iE(g);for(;p&&r&&m!==g;){const v=tm(p),b=p.getBoundingClientRect(),y=Do(p),j=b.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,N=b.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=j,u+=N,g=ha(p),p=iE(g)}}return q0({width:d,height:f,x:c,y:u})}function uD(e,t){const n=m1(e).scrollLeft;return t?t.left+n:wf(vl(e)).left+n}function JK(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:uD(e,r)),a=r.top+t.scrollTop;return{x:i,y:a}}function rge(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=vl(r),l=t?h1(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=tl(1);const d=tl(0),f=dl(r);if((f||!f&&!a)&&((Vp(r)!=="body"||_y(o))&&(c=m1(r)),dl(r))){const m=wf(r);u=tm(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const h=o&&!f&&!a?JK(o,c,!0):tl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function sge(e){return Array.from(e.getClientRects())}function ige(e){const t=vl(e),n=m1(e),r=e.ownerDocument.body,i=aa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=aa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uD(e);const l=-n.scrollTop;return Do(r).direction==="rtl"&&(o+=aa(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function age(e,t){const n=ha(e),r=vl(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=lD();(!u||u&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function oge(e,t){const n=wf(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=dl(e)?tm(e):tl(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function i$(e,t,n){let r;if(t==="viewport")r=age(e,n);else if(t==="document")r=ige(vl(e));else if(To(t))r=oge(t,n);else{const i=ZK(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return q0(r)}function e7(e,t){const n=Du(e);return n===t||!To(n)||$m(n)?!1:Do(n).position==="fixed"||e7(n,t)}function lge(e,t){const n=t.get(e);if(n)return n;let r=fv(e,[],!1).filter(l=>To(l)&&Vp(l)!=="body"),i=null;const a=Do(e).position==="fixed";let o=a?Du(e):e;for(;To(o)&&!$m(o);){const l=Do(o),c=oD(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||_y(o)&&!c&&e7(e,o))?r=r.filter(d=>d!==o):i=l,o=Du(o)}return t.set(e,r),r}function cge(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?h1(t)?[]:lge(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=i$(t,d,i);return u.top=aa(f.top,u.top),u.right=Au(f.right,u.right),u.bottom=Au(f.bottom,u.bottom),u.left=aa(f.left,u.left),u},i$(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uge(e){const{width:t,height:n}=XK(e);return{width:t,height:n}}function dge(e,t,n){const r=dl(t),i=vl(t),a=n==="fixed",o=wf(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=tl(0);if(r||!r&&!a)if((Vp(t)!=="body"||_y(i))&&(l=m1(t)),r){const h=wf(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else i&&(c.x=uD(i));const u=i&&!r&&!a?JK(i,l):tl(0),d=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function UC(e){return Do(e).position==="static"}function a$(e,t){if(!dl(e)||Do(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return vl(e)===n&&(n=n.ownerDocument.body),n}function t7(e,t){const n=ha(e);if(h1(e))return n;if(!dl(e)){let i=Du(e);for(;i&&!$m(i);){if(To(i)&&!UC(i))return i;i=Du(i)}return n}let r=a$(e,t);for(;r&&Jpe(r)&&UC(r);)r=a$(r,t);return r&&$m(r)&&UC(r)&&!oD(r)?n:r||ege(e)||n}const fge=async function(e){const t=this.getOffsetParent||t7,n=this.getDimensions,r=await n(e.floating);return{reference:dge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hge(e){return Do(e).direction==="rtl"}const mge={convertOffsetParentRelativeRectToViewportRelativeRect:rge,getDocumentElement:vl,getClippingRect:cge,getOffsetParent:t7,getElementRects:fge,getClientRects:sge,getDimensions:uge,getScale:tm,isElement:To,isRTL:hge};function n7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pge(e,t){let n=null,r;const i=vl(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=zb(f),p=zb(i.clientWidth-(d+h)),v=zb(i.clientHeight-(f+m)),b=zb(d),j={rootMargin:-g+"px "+-p+"px "+-v+"px "+-b+"px",threshold:aa(0,Au(1,c))||1};let N=!0;function w(S){const k=S[0].intersectionRatio;if(k!==c){if(!N)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!n7(u,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(w,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,j)}n.observe(e)}return o(!0),a}function gge(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=cD(e),d=i||a?[...u?fv(u):[],...fv(t)]:[];d.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const f=u&&l?pge(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?wf(e):null;c&&v();function v(){const b=wf(e);p&&!n7(p,b)&&n(),p=b,g=requestAnimationFrame(v)}return n(),()=>{var b;d.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),f==null||f(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const xge=Qpe,vge=Ype,yge=Hpe,bge=Zpe,jge=Kpe,o$=Wpe,wge=Xpe,Nge=(e,t,n)=>{const r=new Map,i={platform:mge,...n},a={...i.platform,_c:r};return Upe(e,t,{...i,platform:a})};var Kj=typeof document<"u"?x.useLayoutEffect:x.useEffect;function U0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!U0(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!U0(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function r7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function l$(e,t){const n=r7(e);return Math.round(t*n)/n}function WC(e){const t=x.useRef(e);return Kj(()=>{t.current=e}),t}function Sge(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=x.useState(r);U0(h,r)||m(r);const[g,p]=x.useState(null),[v,b]=x.useState(null),y=x.useCallback(E=>{E!==S.current&&(S.current=E,p(E))},[]),j=x.useCallback(E=>{E!==k.current&&(k.current=E,b(E))},[]),N=a||g,w=o||v,S=x.useRef(null),k=x.useRef(null),C=x.useRef(d),A=c!=null,D=WC(c),P=WC(i),_=WC(u),O=x.useCallback(()=>{if(!S.current||!k.current)return;const E={placement:t,strategy:n,middleware:h};P.current&&(E.platform=P.current),Nge(S.current,k.current,E).then(B=>{const L={...B,isPositioned:_.current!==!1};M.current&&!U0(C.current,L)&&(C.current=L,zf.flushSync(()=>{f(L)}))})},[h,t,n,P,_]);Kj(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(E=>({...E,isPositioned:!1})))},[u]);const M=x.useRef(!1);Kj(()=>(M.current=!0,()=>{M.current=!1}),[]),Kj(()=>{if(N&&(S.current=N),w&&(k.current=w),N&&w){if(D.current)return D.current(N,w,O);O()}},[N,w,O,D,A]);const T=x.useMemo(()=>({reference:S,floating:k,setReference:y,setFloating:j}),[y,j]),R=x.useMemo(()=>({reference:N,floating:w}),[N,w]),F=x.useMemo(()=>{const E={position:n,left:0,top:0};if(!R.floating)return E;const B=l$(R.floating,d.x),L=l$(R.floating,d.y);return l?{...E,transform:"translate("+B+"px, "+L+"px)",...r7(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:L}},[n,l,R.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:O,refs:T,elements:R,floatingStyles:F}),[d,O,T,R,F])}const Cge=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?o$({element:r.current,padding:i}).fn(n):{}:r?o$({element:r,padding:i}).fn(n):{}}}},kge=(e,t)=>({...xge(e),options:[e,t]}),Pge=(e,t)=>({...vge(e),options:[e,t]}),Ege=(e,t)=>({...wge(e),options:[e,t]}),_ge=(e,t)=>({...yge(e),options:[e,t]}),Age=(e,t)=>({...bge(e),options:[e,t]}),Tge=(e,t)=>({...jge(e),options:[e,t]}),Dge=(e,t)=>({...Cge(e),options:[e,t]});var Oge="Arrow",s7=x.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return s.jsx(Qe.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});s7.displayName=Oge;var Ige=s7;function Ay(e){const[t,n]=x.useState(void 0);return zr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var dD="Popper",[i7,Qu]=Er(dD),[Mge,a7]=i7(dD),o7=e=>{const{__scopePopper:t,children:n}=e,[r,i]=x.useState(null);return s.jsx(Mge,{scope:t,anchor:r,onAnchorChange:i,children:n})};o7.displayName=dD;var l7="PopperAnchor",c7=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=a7(l7,n),o=x.useRef(null),l=kt(t,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Qe.div,{...i,ref:l})});c7.displayName=l7;var fD="PopperContent",[Rge,$ge]=i7(fD),u7=x.forwardRef((e,t)=>{var te,pe,J,xe,ye,re;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,v=a7(fD,n),[b,y]=x.useState(null),j=kt(t,ue=>y(ue)),[N,w]=x.useState(null),S=Ay(N),k=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,A=r+(a!=="center"?"-"+a:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],_=P.length>0,O={padding:D,boundary:P.filter(Lge),altBoundary:_},{refs:M,floatingStyles:T,placement:R,isPositioned:F,middlewareData:E}=Sge({strategy:"fixed",placement:A,whileElementsMounted:(...ue)=>gge(...ue,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[kge({mainAxis:i+C,alignmentAxis:o}),c&&Pge({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Ege():void 0,...O}),c&&_ge({...O}),Age({...O,apply:({elements:ue,rects:ke,availableWidth:$e,availableHeight:Ve})=>{const{width:gt,height:He}=ke.reference,be=ue.floating.style;be.setProperty("--radix-popper-available-width",`${$e}px`),be.setProperty("--radix-popper-available-height",`${Ve}px`),be.setProperty("--radix-popper-anchor-width",`${gt}px`),be.setProperty("--radix-popper-anchor-height",`${He}px`)}}),N&&Dge({element:N,padding:l}),zge({arrowWidth:k,arrowHeight:C}),h&&Tge({strategy:"referenceHidden",...O})]}),[B,L]=h7(R),I=lr(g);zr(()=>{F&&(I==null||I())},[F,I]);const q=(te=E.arrow)==null?void 0:te.x,$=(pe=E.arrow)==null?void 0:pe.y,z=((J=E.arrow)==null?void 0:J.centerOffset)!==0,[Y,ne]=x.useState();return zr(()=>{b&&ne(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:F?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(xe=E.transformOrigin)==null?void 0:xe.x,(ye=E.transformOrigin)==null?void 0:ye.y].join(" "),...((re=E.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Rge,{scope:n,placedSide:B,onArrowChange:w,arrowX:q,arrowY:$,shouldHideArrow:z,children:s.jsx(Qe.div,{"data-side":B,"data-align":L,...p,ref:j,style:{...p.style,animation:F?void 0:"none"}})})})});u7.displayName=fD;var d7="PopperArrow",Fge={top:"bottom",right:"left",bottom:"top",left:"right"},f7=x.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,a=$ge(d7,r),o=Fge[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Ige,{...i,ref:n,style:{...i.style,display:"block"}})})});f7.displayName=d7;function Lge(e){return e!==null}var zge=e=>({name:"transformOrigin",options:e,fn(t){var v,b,y;const{placement:n,rects:r,middlewareData:i}=t,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=h7(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,m=(((y=i.arrow)==null?void 0:y.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function h7(e){const[t,n="center"]=e.split("-");return[t,n]}var p1=o7,Ty=c7,g1=u7,x1=f7,[v1]=Er("Tooltip",[Qu]),y1=Qu(),m7="TooltipProvider",Bge=700,aE="tooltip.open",[Vge,hD]=v1(m7),p7=e=>{const{__scopeTooltip:t,delayDuration:n=Bge,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(Vge,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:a})};p7.displayName=m7;var b1="Tooltip",[qge,j1]=v1(b1),g7=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=hD(b1,e.__scopeTooltip),u=y1(t),[d,f]=x.useState(null),h=Gr(),m=x.useRef(0),g=o??c.disableHoverableContent,p=l??c.delayDuration,v=x.useRef(!1),[b=!1,y]=ni({prop:r,defaultProp:i,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(aE))):c.onClose(),a==null||a(k)}}),j=x.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),N=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,y(!0)},[y]),w=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y(!1)},[y]),S=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,y(!0),m.current=0},p)},[p,y]);return x.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(p1,{...u,children:s.jsx(qge,{scope:t,contentId:h,open:b,stateAttribute:j,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?S():N()},[c.isOpenDelayedRef,S,N]),onTriggerLeave:x.useCallback(()=>{g?w():(window.clearTimeout(m.current),m.current=0)},[w,g]),onOpen:N,onClose:w,disableHoverableContent:g,children:n})})};g7.displayName=b1;var oE="TooltipTrigger",x7=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=j1(oE,n),a=hD(oE,n),o=y1(n),l=x.useRef(null),c=kt(t,l,i.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Ty,{asChild:!0,...o,children:s.jsx(Qe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Re(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Re(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Re(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Re(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:Re(e.onBlur,i.onClose),onClick:Re(e.onClick,i.onClose)})})});x7.displayName=oE;var Uge="TooltipPortal",[ldt,Wge]=v1(Uge,{forceMount:void 0}),Fm="TooltipContent",v7=x.forwardRef((e,t)=>{const n=Wge(Fm,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,o=j1(Fm,e.__scopeTooltip);return s.jsx(Yr,{present:r||o.open,children:o.disableHoverableContent?s.jsx(y7,{side:i,...a,ref:t}):s.jsx(Hge,{side:i,...a,ref:t})})}),Hge=x.forwardRef((e,t)=>{const n=j1(Fm,e.__scopeTooltip),r=hD(Fm,e.__scopeTooltip),i=x.useRef(null),a=kt(t,i),[o,l]=x.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:f}=r,h=x.useCallback(()=>{l(null),f(!1)},[f]),m=x.useCallback((g,p)=>{const v=g.currentTarget,b={x:g.clientX,y:g.clientY},y=Xge(b,v.getBoundingClientRect()),j=Zge(b,y),N=Jge(p.getBoundingClientRect()),w=txe([...j,...N]);l(w),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&d){const g=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,m,h]),x.useEffect(()=>{if(o){const g=p=>{const v=p.target,b={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),j=!exe(b,o);y?h():j&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),s.jsx(y7,{...e,ref:a})}),[Kge,Gge]=v1(b1,{isInside:!1}),Qge=YH("TooltipContent"),y7=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=j1(Fm,n),u=y1(n),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(aE,d),()=>document.removeEventListener(aE,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(g1,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Qge,{children:r}),s.jsx(Kge,{scope:n,isInside:!0,children:s.jsx(Bhe,{id:c.contentId,role:"tooltip",children:i||r})})]})})});v7.displayName=Fm;var b7="TooltipArrow",Yge=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=y1(n);return Gge(b7,n).isInside?null:s.jsx(x1,{...i,...r,ref:t})});Yge.displayName=b7;function Xge(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Zge(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Jge(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function exe(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,u=t[o].x,d=t[o].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}function txe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),nxe(t)}function nxe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var rxe=p7,sxe=g7,ixe=x7,j7=v7;const Ou=rxe,Iu=sxe,Mu=ixe,dc=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(j7,{ref:r,sideOffset:t,className:he("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));dc.displayName=j7.displayName;const HC=640;function axe(){const[e,t]=x.useState(void 0);return x.useEffect(()=>{const n=window.matchMedia(`(max-width: ${HC-1}px)`),r=()=>{t(window.innerWidth<HC)};return n.addEventListener("change",r),t(window.innerWidth<HC),()=>n.removeEventListener("change",r)},[]),!!e}const hv=Vf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),H=x.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const o=r?e1:"button";return s.jsx(o,{className:he(hv({variant:t,size:n,className:e})),ref:a,...i})});H.displayName="Button";const Ce=x.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:he("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ce.displayName="Input";var oxe="Separator",c$="horizontal",lxe=["horizontal","vertical"],w7=x.forwardRef((e,t)=>{const{decorative:n,orientation:r=c$,...i}=e,a=cxe(r)?r:c$,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Qe.div,{"data-orientation":a,...l,...i,ref:t})});w7.displayName=oxe;function cxe(e){return lxe.includes(e)}var N7=w7;const nl=x.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>s.jsx(N7,{ref:i,decorative:n,orientation:t,className:he("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));nl.displayName=N7.displayName;var KC="focusScope.autoFocusOnMount",GC="focusScope.autoFocusOnUnmount",u$={bubbles:!1,cancelable:!0},uxe="FocusScope",Dy=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=x.useState(null),u=lr(i),d=lr(a),f=x.useRef(null),h=kt(t,p=>c(p)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let p=function(j){if(m.paused||!l)return;const N=j.target;l.contains(N)?f.current=N:Fc(f.current,{select:!0})},v=function(j){if(m.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||Fc(f.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const w of j)w.removedNodes.length>0&&Fc(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[r,l,m.paused]),x.useEffect(()=>{if(l){f$.add(m);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(KC,u$);l.addEventListener(KC,u),l.dispatchEvent(b),b.defaultPrevented||(dxe(gxe(S7(l)),{select:!0}),document.activeElement===p&&Fc(l))}return()=>{l.removeEventListener(KC,u),setTimeout(()=>{const b=new CustomEvent(GC,u$);l.addEventListener(GC,d),l.dispatchEvent(b),b.defaultPrevented||Fc(p??document.body,{select:!0}),l.removeEventListener(GC,d),f$.remove(m)},0)}}},[l,u,d,m]);const g=x.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(v&&b){const y=p.currentTarget,[j,N]=fxe(y);j&&N?!p.shiftKey&&b===N?(p.preventDefault(),n&&Fc(j,{select:!0})):p.shiftKey&&b===j&&(p.preventDefault(),n&&Fc(N,{select:!0})):b===y&&p.preventDefault()}},[n,r,m.paused]);return s.jsx(Qe.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Dy.displayName=uxe;function dxe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Fc(r,{select:t}),document.activeElement!==n)return}function fxe(e){const t=S7(e),n=d$(t,e),r=d$(t.reverse(),e);return[n,r]}function S7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function d$(e,t){for(const n of e)if(!hxe(n,{upTo:t}))return n}function hxe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function mxe(e){return e instanceof HTMLInputElement&&"select"in e}function Fc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&mxe(e)&&t&&e.select()}}var f$=pxe();function pxe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=h$(e,t),e.unshift(t)},remove(t){var n;e=h$(e,t),(n=e[0])==null||n.resume()}}}function h$(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function gxe(e){return e.filter(t=>t.tagName!=="A")}var QC=0;function w1(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??m$()),document.body.insertAdjacentElement("beforeend",e[1]??m$()),QC++,()=>{QC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),QC--}},[])}function m$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Qo=function(){return Qo=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Qo.apply(this,arguments)};function C7(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function xxe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Gj="right-scroll-bar-position",Qj="width-before-scroll-bar",vxe="with-scroll-bars-hidden",yxe="--removed-body-scroll-bar-size";function YC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bxe(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var jxe=typeof window<"u"?x.useLayoutEffect:x.useEffect,p$=new WeakMap;function wxe(e,t){var n=bxe(null,function(r){return e.forEach(function(i){return YC(i,r)})});return jxe(function(){var r=p$.get(n);if(r){var i=new Set(r),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||YC(l,null)}),a.forEach(function(l){i.has(l)||YC(l,o)})}p$.set(n,e)},[e]),n}function Nxe(e){return e}function Sxe(e,t){t===void 0&&(t=Nxe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function Cxe(e){e===void 0&&(e={});var t=Sxe(null);return t.options=Qo({async:!0,ssr:!1},e),t}var k7=function(e){var t=e.sideCar,n=C7(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Qo({},n))};k7.isSideCarExport=!0;function kxe(e,t){return e.useMedium(t),k7}var P7=Cxe(),XC=function(){},N1=x.forwardRef(function(e,t){var n=x.useRef(null),r=x.useState({onScrollCapture:XC,onWheelCapture:XC,onTouchMoveCapture:XC}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,p=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,y=e.gapMode,j=C7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,w=wxe([n,t]),S=Qo(Qo({},j),i);return x.createElement(x.Fragment,null,d&&x.createElement(N,{sideCar:P7,removeScrollBar:u,shards:f,noIsolation:m,inert:g,setCallbacks:a,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?x.cloneElement(x.Children.only(l),Qo(Qo({},S),{ref:w})):x.createElement(b,Qo({},S,{className:c,ref:w}),l))});N1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};N1.classNames={fullWidth:Qj,zeroRight:Gj};var Pxe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Exe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Pxe();return t&&e.setAttribute("nonce",t),e}function _xe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Axe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Txe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Exe())&&(_xe(t,n),Axe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Dxe=function(){var e=Txe();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},E7=function(){var e=Dxe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Oxe={left:0,top:0,right:0,gap:0},ZC=function(e){return parseInt(e||"",10)||0},Ixe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[ZC(n),ZC(r),ZC(i)]},Mxe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Oxe;var t=Ixe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Rxe=E7(),nm="data-scroll-locked",$xe=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(vxe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(nm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gj,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Qj,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gj," .").concat(Gj,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Qj," .").concat(Qj,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(nm,`] {
    `).concat(yxe,": ").concat(l,`px;
  }
`)},g$=function(){var e=parseInt(document.body.getAttribute(nm)||"0",10);return isFinite(e)?e:0},Fxe=function(){x.useEffect(function(){return document.body.setAttribute(nm,(g$()+1).toString()),function(){var e=g$()-1;e<=0?document.body.removeAttribute(nm):document.body.setAttribute(nm,e.toString())}},[])},Lxe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Fxe();var a=x.useMemo(function(){return Mxe(i)},[i]);return x.createElement(Rxe,{styles:$xe(a,!t,i,n?"":"!important")})},lE=!1;if(typeof window<"u")try{var Bb=Object.defineProperty({},"passive",{get:function(){return lE=!0,!0}});window.addEventListener("test",Bb,Bb),window.removeEventListener("test",Bb,Bb)}catch{lE=!1}var rh=lE?{passive:!1}:!1,zxe=function(e){return e.tagName==="TEXTAREA"},_7=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zxe(e)&&n[t]==="visible")},Bxe=function(e){return _7(e,"overflowY")},Vxe=function(e){return _7(e,"overflowX")},x$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=A7(e,r);if(i){var a=T7(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},qxe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Uxe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},A7=function(e,t){return e==="v"?Bxe(t):Vxe(t)},T7=function(e,t){return e==="v"?qxe(t):Uxe(t)},Wxe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hxe=function(e,t,n,r,i){var a=Wxe(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var m=T7(e,l),g=m[0],p=m[1],v=m[2],b=p-v-a*g;(g||b)&&A7(e,l)&&(f+=b,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Vb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},v$=function(e){return[e.deltaX,e.deltaY]},y$=function(e){return e&&"current"in e?e.current:e},Kxe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Gxe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Qxe=0,sh=[];function Yxe(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(Qxe++)[0],a=x.useState(E7)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=xxe([e.lockRef.current],(e.shards||[]).map(y$),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=Vb(p),y=n.current,j="deltaX"in p?p.deltaX:y[0]-b[0],N="deltaY"in p?p.deltaY:y[1]-b[1],w,S=p.target,k=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in p&&k==="h"&&S.type==="range")return!1;var C=x$(k,S);if(!C)return!0;if(C?w=k:(w=k==="v"?"h":"v",C=x$(k,S)),!C)return!1;if(!r.current&&"changedTouches"in p&&(j||N)&&(r.current=w),!w)return!0;var A=r.current||w;return Hxe(A,v,p,A==="h"?j:N)},[]),c=x.useCallback(function(p){var v=p;if(!(!sh.length||sh[sh.length-1]!==a)){var b="deltaY"in v?v$(v):Vb(v),y=t.current.filter(function(w){return w.name===v.type&&(w.target===v.target||v.target===w.shadowParent)&&Kxe(w.delta,b)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var j=(o.current.shards||[]).map(y$).filter(Boolean).filter(function(w){return w.contains(v.target)}),N=j.length>0?l(v,j[0]):!o.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(p,v,b,y){var j={name:p,delta:v,target:b,should:y,shadowParent:Xxe(b)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),d=x.useCallback(function(p){n.current=Vb(p),r.current=void 0},[]),f=x.useCallback(function(p){u(p.type,v$(p),p.target,l(p,e.lockRef.current))},[]),h=x.useCallback(function(p){u(p.type,Vb(p),p.target,l(p,e.lockRef.current))},[]);x.useEffect(function(){return sh.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,rh),document.addEventListener("touchmove",c,rh),document.addEventListener("touchstart",d,rh),function(){sh=sh.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,rh),document.removeEventListener("touchmove",c,rh),document.removeEventListener("touchstart",d,rh)}},[]);var m=e.removeScrollBar,g=e.inert;return x.createElement(x.Fragment,null,g?x.createElement(a,{styles:Gxe(i)}):null,m?x.createElement(Lxe,{gapMode:e.gapMode}):null)}function Xxe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Zxe=kxe(P7,Yxe);var Oy=x.forwardRef(function(e,t){return x.createElement(N1,Qo({},e,{ref:t,sideCar:Zxe}))});Oy.classNames=N1.classNames;var Jxe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ih=new WeakMap,qb=new WeakMap,Ub={},JC=0,D7=function(e){return e&&(e.host||D7(e.parentNode))},eve=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=D7(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},tve=function(e,t,n,r){var i=eve(t,Array.isArray(e)?e:[e]);Ub[n]||(Ub[n]=new WeakMap);var a=Ub[n],o=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",p=(ih.get(h)||0)+1,v=(a.get(h)||0)+1;ih.set(h,p),a.set(h,v),o.push(h),p===1&&g&&qb.set(h,!0),v===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),l.clear(),JC++,function(){o.forEach(function(f){var h=ih.get(f)-1,m=a.get(f)-1;ih.set(f,h),a.set(f,m),h||(qb.has(f)||f.removeAttribute(r),qb.delete(f)),m||f.removeAttribute(n)}),JC--,JC||(ih=new WeakMap,ih=new WeakMap,qb=new WeakMap,Ub={})}},S1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=Jxe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),tve(r,i,n,"aria-hidden")):function(){return null}},mD="Dialog",[O7,I7]=Er(mD),[nve,$o]=O7(mD),M7=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u=!1,d]=ni({prop:r,defaultProp:i,onChange:a});return s.jsx(nve,{scope:t,triggerRef:l,contentRef:c,contentId:Gr(),titleId:Gr(),descriptionId:Gr(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};M7.displayName=mD;var R7="DialogTrigger",$7=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=$o(R7,n),a=kt(t,i.triggerRef);return s.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xD(i.open),...r,ref:a,onClick:Re(e.onClick,i.onOpenToggle)})});$7.displayName=R7;var pD="DialogPortal",[rve,F7]=O7(pD,{forceMount:void 0}),L7=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=$o(pD,t);return s.jsx(rve,{scope:t,forceMount:n,children:x.Children.map(r,o=>s.jsx(Yr,{present:n||a.open,children:s.jsx(Lp,{asChild:!0,container:i,children:o})}))})};L7.displayName=pD;var W0="DialogOverlay",z7=x.forwardRef((e,t)=>{const n=F7(W0,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=$o(W0,e.__scopeDialog);return a.modal?s.jsx(Yr,{present:r||a.open,children:s.jsx(ive,{...i,ref:t})}):null});z7.displayName=W0;var sve=Pu("DialogOverlay.RemoveScroll"),ive=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=$o(W0,n);return s.jsx(Oy,{as:sve,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Qe.div,{"data-state":xD(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Nf="DialogContent",B7=x.forwardRef((e,t)=>{const n=F7(Nf,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=$o(Nf,e.__scopeDialog);return s.jsx(Yr,{present:r||a.open,children:a.modal?s.jsx(ave,{...i,ref:t}):s.jsx(ove,{...i,ref:t})})});B7.displayName=Nf;var ave=x.forwardRef((e,t)=>{const n=$o(Nf,e.__scopeDialog),r=x.useRef(null),i=kt(t,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return S1(a)},[]),s.jsx(V7,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Re(e.onFocusOutside,a=>a.preventDefault())})}),ove=x.forwardRef((e,t)=>{const n=$o(Nf,e.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(V7,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),V7=x.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=$o(Nf,n),c=x.useRef(null),u=kt(t,c);return w1(),s.jsxs(s.Fragment,{children:[s.jsx(Dy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Bf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":xD(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(cve,{titleId:l.titleId}),s.jsx(dve,{contentRef:c,descriptionId:l.descriptionId})]})]})}),gD="DialogTitle",q7=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=$o(gD,n);return s.jsx(Qe.h2,{id:i.titleId,...r,ref:t})});q7.displayName=gD;var U7="DialogDescription",W7=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=$o(U7,n);return s.jsx(Qe.p,{id:i.descriptionId,...r,ref:t})});W7.displayName=U7;var H7="DialogClose",K7=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=$o(H7,n);return s.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Re(e.onClick,()=>i.onOpenChange(!1))})});K7.displayName=H7;function xD(e){return e?"open":"closed"}var G7="DialogTitleWarning",[lve,Q7]=yhe(G7,{contentName:Nf,titleName:gD,docsSlug:"dialog"}),cve=({titleId:e})=>{const t=Q7(G7),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},uve="DialogDescriptionWarning",dve=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q7(uve).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},C1=M7,vD=$7,k1=L7,qp=z7,Up=B7,Iy=q7,My=W7,P1=K7;const Y7=C1,fve=vD,hve=k1,X7=x.forwardRef(({className:e,...t},n)=>s.jsx(qp,{className:he("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));X7.displayName=qp.displayName;const mve=Vf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),yD=x.forwardRef(({side:e="right",className:t,children:n,...r},i)=>s.jsxs(hve,{children:[s.jsx(X7,{}),s.jsxs(Up,{ref:i,className:he(mve({side:e}),t),...r,children:[n,s.jsxs(P1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Fn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yD.displayName=Up.displayName;const bD=({className:e,...t})=>s.jsx("div",{className:he("flex flex-col space-y-2 text-center sm:text-left",e),...t});bD.displayName="SheetHeader";const jD=x.forwardRef(({className:e,...t},n)=>s.jsx(Iy,{ref:n,className:he("text-lg font-semibold text-foreground",e),...t}));jD.displayName=Iy.displayName;const Z7=x.forwardRef(({className:e,...t},n)=>s.jsx(My,{ref:n,className:he("text-sm text-muted-foreground",e),...t}));Z7.displayName=My.displayName;function Ke({className:e,...t}){return s.jsx("div",{className:he("animate-pulse rounded-md bg-muted",e),...t})}const pve="sidebar_state",gve=60*60*24*7,xve="16rem",vve="18rem",yve="3rem",bve="b",J7=x.createContext(null);function E1(){const e=x.useContext(J7);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function jve({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:i,children:a,...o}){const l=axe(),[c,u]=x.useState(!1),[d,f]=x.useState(e),h=t??d,m=x.useCallback(b=>{const y=typeof b=="function"?b(h):b;n?n(y):f(y),document.cookie=`${pve}=${y}; path=/; max-age=${gve}`},[n,h]),g=x.useCallback(()=>l?u(b=>!b):m(b=>!b),[l,m,u]);x.useEffect(()=>{const b=y=>{y.key===bve&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),g())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[g]);const p=h?"expanded":"collapsed",v=x.useMemo(()=>({state:p,open:h,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:g}),[p,h,m,l,c,u,g]);return s.jsx(J7.Provider,{value:v,children:s.jsx(Ou,{delayDuration:0,children:s.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":xve,"--sidebar-width-icon":yve,...i},className:he("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...o,children:a})})})}function wve({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:i,...a}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:u}=E1();return n==="none"?s.jsx("div",{"data-slot":"sidebar",className:he("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",r),...a,children:i}):o?s.jsx(Y7,{open:c,onOpenChange:u,...a,children:s.jsxs(yD,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":vve},side:e,children:[s.jsxs(bD,{className:"sr-only",children:[s.jsx(jD,{children:"Sidebar"}),s.jsx(Z7,{children:"Displays the mobile sidebar."})]}),s.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):s.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[s.jsx("div",{"data-slot":"sidebar-gap",className:he("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),s.jsx("div",{"data-slot":"sidebar-container",className:he("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:s.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function Nve({className:e,onClick:t,...n}){const{toggleSidebar:r}=E1();return s.jsxs(H,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:he("h-7 w-7",e),onClick:i=>{t==null||t(i),r()},...n,children:[s.jsx(Fme,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function Sve({className:e,...t}){return s.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:he("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function b$({className:e,...t}){return s.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:he("relative flex w-full min-w-0 flex-col p-2",e),...t})}function j$({className:e,asChild:t=!1,...n}){const r=t?e1:"div";return s.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:he("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})}function w$({className:e,...t}){return s.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:he("w-full text-sm",e),...t})}function N$({className:e,...t}){return s.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:he("flex w-full min-w-0 flex-col gap-1",e),...t})}function S$({className:e,...t}){return s.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:he("group/menu-item relative",e),...t})}const Cve=Vf("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function C$({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:i,className:a,...o}){const l=e?e1:"button",{isMobile:c,state:u}=E1(),d=s.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":t,className:he(Cve({variant:n,size:r}),a),...o});return i?(typeof i=="string"&&(i={children:i}),s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:d}),s.jsx(dc,{side:"right",align:"center",hidden:u!=="collapsed"||c,...i})]})):d}const eG=x.createContext(void 0);function kve({children:e}){const[t,n]=x.useState(null),[r,i]=x.useState(null),[a,o]=x.useState(null),{data:l=[],isLoading:c,error:u,refetch:d}=je({queryKey:["/api/organizations"],retry:1}),{data:f=[],isLoading:h,error:m,refetch:g}=je({queryKey:[`/api/organizations/${t}/programs`],enabled:!!t,retry:1}),{data:p=[],isLoading:v,error:b,refetch:y}=je({queryKey:[`/api/organizations/${t}/projects`],enabled:!!t,retry:1}),j=x.useMemo(()=>r?p.filter(C=>C.programId===r):p,[p,r]),N=x.useMemo(()=>{const C=l.find(P=>P.id===t);if(!C)return{topLevel:"Organization",program:"Program"};const A=C.topLevelEntityLabel==="custom"?C.topLevelEntityLabelCustom||"Organization":C.topLevelEntityLabel||"Organization",D=C.programEntityLabel==="custom"?C.programEntityLabelCustom||"Program":C.programEntityLabel||"Program";return{topLevel:A,program:D}},[l,t]);x.useEffect(()=>{l.length>0&&!t&&n(l[0].id)},[l,t]),x.useEffect(()=>{i(null),o(null)},[t]),x.useEffect(()=>{j.length===0?o(null):a&&j.some(A=>A.id===a)||o(j[0].id)},[j,a]);const w=l.find(C=>C.id===t)||null,S=f.find(C=>C.id===r)||null,k=j.find(C=>C.id===a)||null;return s.jsx(eG.Provider,{value:{selectedOrgId:t,selectedProgramId:r,selectedProjectId:a,setSelectedOrgId:n,setSelectedProgramId:i,setSelectedProjectId:o,organizations:l,programs:f,projects:j,selectedOrg:w,selectedProgram:S,selectedProject:k,terminology:N,isLoadingOrgs:c,isLoadingPrograms:h,isLoadingProjects:v,orgsError:u,programsError:m,projectsError:b,refetchOrgs:d,refetchPrograms:g,refetchProjects:y},children:e})}function jt(){const e=x.useContext(eG);if(e===void 0)throw new Error("useProject must be used within a ProjectProvider");return e}const Pve=[{title:"Overview",icon:EK,path:"/"},{title:"WBS & Tasks",icon:Ime,path:"/wbs"},{title:"Stakeholders",icon:Cn,path:"/stakeholders"},{title:"RACI Matrix",icon:Sme,path:"/raci-matrix"},{title:"Resources",icon:bf,path:"/resources"},{title:"Risks",icon:ft,path:"/risks"},{title:"Issues",icon:bt,path:"/issues"},{title:"Change Requests",icon:eE,path:"/change-requests"},{title:"Cost Management",icon:ur,path:"/cost"},{title:"AI Assistant",icon:Yl,path:"/ai-assistant"},{title:"Chat",icon:fa,path:"/chat"},{title:"Reports",icon:CK,path:"/reports"},{title:"Documents",icon:Sn,path:"/documents"},{title:"Analytics",icon:Ka,path:"/analytics"}],Eve=[{title:"Dashboard",icon:EK,path:"/pmo/dashboard"},{title:"Programs",icon:Is,path:"/pmo/programs"},{title:"Projects",icon:Is,path:"/pmo/projects"},{title:"Contacts",icon:vme,path:"/pmo/contacts"},{title:"Calendar",icon:Br,path:"/pmo/calendar"},{title:"Lessons Learned",icon:$0,path:"/pmo/lessons"},{title:"Inventory",icon:Kr,path:"/pmo/inventory"},{title:"Settings",icon:c1,path:"/settings"}];function _ve(){const[e]=yr(),{terminology:t}=jt(),n=Eve.map(r=>r.path==="/pmo/programs"?{...r,title:t.program+"s"}:r);return s.jsx(wve,{"data-testid":"sidebar-main",children:s.jsxs(Sve,{children:[s.jsxs(b$,{children:[s.jsx(j$,{children:"Project Tabs"}),s.jsx(w$,{children:s.jsx(N$,{children:Pve.map(r=>s.jsx(S$,{children:s.jsx(C$,{asChild:!0,isActive:e===r.path,"data-testid":`sidebar-link-${r.path.slice(1)||"overview"}`,children:s.jsxs(vu,{href:r.path,children:[s.jsx(r.icon,{}),s.jsx("span",{children:r.title})]})})},r.title))})})]}),s.jsxs(b$,{children:[s.jsx(j$,{children:t.topLevel}),s.jsx(w$,{children:s.jsx(N$,{children:n.map(r=>s.jsx(S$,{children:s.jsx(C$,{asChild:!0,isActive:e===r.path,"data-testid":`sidebar-link-pmo-${r.path.split("/").pop()}`,children:s.jsxs(vu,{href:r.path,children:[s.jsx(r.icon,{}),s.jsx("span",{children:r.title})]})})},r.title))})})]})]})})}var Ry=e=>e.type==="checkbox",Md=e=>e instanceof Date,fi=e=>e==null;const tG=e=>typeof e=="object";var Fr=e=>!fi(e)&&!Array.isArray(e)&&tG(e)&&!Md(e),nG=e=>Fr(e)&&e.target?Ry(e.target)?e.target.checked:e.target.value:e,Ave=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rG=(e,t)=>e.has(Ave(t)),Tve=e=>{const t=e.constructor&&e.constructor.prototype;return Fr(t)&&t.hasOwnProperty("isPrototypeOf")},wD=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ps(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(wD&&(e instanceof Blob||r))&&(n||Fr(e)))if(t=n?[]:{},!n&&!Tve(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Ps(e[i]));else return e;return t}var _1=e=>Array.isArray(e)?e.filter(Boolean):[],Or=e=>e===void 0,Xe=(e,t,n)=>{if(!t||!Fr(e))return n;const r=_1(t.split(/[,[\].]+?/)).reduce((i,a)=>fi(i)?i:i[a],e);return Or(r)||r===e?Or(e[t])?n:e[t]:r},ia=e=>typeof e=="boolean",ND=e=>/^\w*$/.test(e),sG=e=>_1(e.replace(/["|']|\]/g,"").split(/\.|\[/)),En=(e,t,n)=>{let r=-1;const i=ND(t)?[t]:sG(t),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=n;if(r!==o){const u=e[l];c=Fr(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const H0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Cl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iG=Q.createContext(null),A1=()=>Q.useContext(iG),Dve=e=>{const{children:t,...n}=e;return Q.createElement(iG.Provider,{value:n},t)};var aG=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==xo.all&&(t._proxyFormState[o]=!r||xo.all),n&&(n[o]=!0),e[o]}});return i};function Ove(e){const t=A1(),{control:n=t.control,disabled:r,name:i,exact:a}=e||{},[o,l]=Q.useState(n._formState),c=Q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=Q.useRef(i);return u.current=i,Q.useEffect(()=>n._subscribe({name:u.current,formState:c.current,exact:a,callback:d=>{!r&&l({...n._formState,...d})}}),[n,r,a]),Q.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Q.useMemo(()=>aG(o,n,c.current,!1),[o,n])}var Yo=e=>typeof e=="string",oG=(e,t,n,r,i)=>Yo(e)?(r&&t.watch.add(e),Xe(n,e,i)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),Xe(n,a))):(r&&(t.watchAll=!0),n);function Ive(e){const t=A1(),{control:n=t.control,name:r,defaultValue:i,disabled:a,exact:o}=e||{},l=Q.useRef(r),c=Q.useRef(i);l.current=r,Q.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:f=>!a&&d(oG(l.current,n._names,f.values||n._formValues,!1,c.current))}),[n,a,o]);const[u,d]=Q.useState(n._getWatch(r,i));return Q.useEffect(()=>n._removeUnmounted()),u}function Mve(e){const t=A1(),{name:n,disabled:r,control:i=t.control,shouldUnregister:a}=e,o=rG(i._names.array,n),l=Ive({control:i,name:n,defaultValue:Xe(i._formValues,n,Xe(i._defaultValues,n,e.defaultValue)),exact:!0}),c=Ove({control:i,name:n,exact:!0}),u=Q.useRef(e),d=Q.useRef(i.register(n,{...e.rules,value:l,...ia(e.disabled)?{disabled:e.disabled}:{}})),f=Q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Xe(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Xe(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Xe(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Xe(c.validatingFields,n)},error:{enumerable:!0,get:()=>Xe(c.errors,n)}}),[c,n]),h=Q.useCallback(v=>d.current.onChange({target:{value:nG(v),name:n},type:H0.CHANGE}),[n]),m=Q.useCallback(()=>d.current.onBlur({target:{value:Xe(i._formValues,n),name:n},type:H0.BLUR}),[n,i._formValues]),g=Q.useCallback(v=>{const b=Xe(i._fields,n);b&&v&&(b._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:y=>v.setCustomValidity(y),reportValidity:()=>v.reportValidity()})},[i._fields,n]),p=Q.useMemo(()=>({name:n,value:l,...ia(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:h,onBlur:m,ref:g}),[n,r,c.disabled,h,m,g,l]);return Q.useEffect(()=>{const v=i._options.shouldUnregister||a;i.register(n,{...u.current.rules,...ia(u.current.disabled)?{disabled:u.current.disabled}:{}});const b=(y,j)=>{const N=Xe(i._fields,y);N&&N._f&&(N._f.mount=j)};if(b(n,!0),v){const y=Ps(Xe(i._options.defaultValues,n));En(i._defaultValues,n,y),Or(Xe(i._formValues,n))&&En(i._formValues,n,y)}return!o&&i.register(n),()=>{(o?v&&!i._state.action:v)?i.unregister(n):b(n,!1)}},[n,i,o,a]),Q.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Q.useMemo(()=>({field:p,formState:c,fieldState:f}),[p,c,f])}const Rve=e=>e.render(Mve(e));var lG=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Px=e=>Array.isArray(e)?e:[e],k$=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},cE=e=>fi(e)||!tG(e);function Kc(e,t){if(cE(e)||cE(t))return e===t;if(Md(e)&&Md(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const a=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Md(a)&&Md(o)||Fr(a)&&Fr(o)||Array.isArray(a)&&Array.isArray(o)?!Kc(a,o):a!==o)return!1}}return!0}var ui=e=>Fr(e)&&!Object.keys(e).length,SD=e=>e.type==="file",vo=e=>typeof e=="function",K0=e=>{if(!wD)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cG=e=>e.type==="select-multiple",CD=e=>e.type==="radio",$ve=e=>CD(e)||Ry(e),ek=e=>K0(e)&&e.isConnected;function Fve(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Or(e)?r++:e[t[r++]];return e}function Lve(e){for(const t in e)if(e.hasOwnProperty(t)&&!Or(e[t]))return!1;return!0}function es(e,t){const n=Array.isArray(t)?t:ND(t)?[t]:sG(t),r=n.length===1?e:Fve(e,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(Fr(r)&&ui(r)||Array.isArray(r)&&Lve(r))&&es(e,n.slice(0,-1)),e}var uG=e=>{for(const t in e)if(vo(e[t]))return!0;return!1};function G0(e,t={}){const n=Array.isArray(e);if(Fr(e)||n)for(const r in e)Array.isArray(e[r])||Fr(e[r])&&!uG(e[r])?(t[r]=Array.isArray(e[r])?[]:{},G0(e[r],t[r])):fi(e[r])||(t[r]=!0);return t}function dG(e,t,n){const r=Array.isArray(e);if(Fr(e)||r)for(const i in e)Array.isArray(e[i])||Fr(e[i])&&!uG(e[i])?Or(t)||cE(n[i])?n[i]=Array.isArray(e[i])?G0(e[i],[]):{...G0(e[i])}:dG(e[i],fi(t)?{}:t[i],n[i]):n[i]=!Kc(e[i],t[i]);return n}var $g=(e,t)=>dG(e,t,G0(t));const P$={value:!1,isValid:!1},E$={value:!0,isValid:!0};var fG=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Or(e[0].attributes.value)?Or(e[0].value)||e[0].value===""?E$:{value:e[0].value,isValid:!0}:E$:P$}return P$},hG=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Or(e)?e:t?e===""?NaN:e&&+e:n&&Yo(e)?new Date(e):r?r(e):e;const _$={isValid:!1,value:null};var mG=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,_$):_$;function A$(e){const t=e.ref;return SD(t)?t.files:CD(t)?mG(e.refs).value:cG(t)?[...t.selectedOptions].map(({value:n})=>n):Ry(t)?fG(e.refs).value:hG(Or(t.value)?e.ref.value:t.value,e)}var zve=(e,t,n,r)=>{const i={};for(const a of e){const o=Xe(t,a);o&&En(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Q0=e=>e instanceof RegExp,Fg=e=>Or(e)?e:Q0(e)?e.source:Fr(e)?Q0(e.value)?e.value.source:e.value:e,T$=e=>({isOnSubmit:!e||e===xo.onSubmit,isOnBlur:e===xo.onBlur,isOnChange:e===xo.onChange,isOnAll:e===xo.all,isOnTouch:e===xo.onTouched});const D$="AsyncFunction";var Bve=e=>!!e&&!!e.validate&&!!(vo(e.validate)&&e.validate.constructor.name===D$||Fr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===D$)),Vve=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),O$=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ex=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const a=Xe(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Ex(l,t))break}else if(Fr(l)&&Ex(l,t))break}}};function I$(e,t,n){const r=Xe(e,n);if(r||ND(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Xe(t,a),l=Xe(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var qve=(e,t,n,r)=>{n(e);const{name:i,...a}=e;return ui(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||xo.all))},Uve=(e,t,n)=>!e||!t||e===t||Px(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),Wve=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,Hve=(e,t)=>!_1(Xe(e,t)).length&&es(e,t),Kve=(e,t,n)=>{const r=Px(Xe(e,n));return En(r,"root",t[n]),En(e,n,r),e},Yj=e=>Yo(e);function M$(e,t,n="validate"){if(Yj(e)||Array.isArray(e)&&e.every(Yj)||ia(e)&&!e)return{type:n,message:Yj(e)?e:"",ref:t}}var ah=e=>Fr(e)&&!Q0(e)?e:{value:e,message:""},R$=async(e,t,n,r,i,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:p,valueAsNumber:v,mount:b}=e._f,y=Xe(n,p);if(!b||t.has(p))return{};const j=l?l[0]:o,N=_=>{i&&j.reportValidity&&(j.setCustomValidity(ia(_)?"":_||""),j.reportValidity())},w={},S=CD(o),k=Ry(o),C=S||k,A=(v||SD(o))&&Or(o.value)&&Or(y)||K0(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,D=lG.bind(null,p,r,w),P=(_,O,M,T=Cl.maxLength,R=Cl.minLength)=>{const F=_?O:M;w[p]={type:_?T:R,message:F,ref:o,...D(_?T:R,F)}};if(a?!Array.isArray(y)||!y.length:c&&(!C&&(A||fi(y))||ia(y)&&!y||k&&!fG(l).isValid||S&&!mG(l).isValid)){const{value:_,message:O}=Yj(c)?{value:!!c,message:c}:ah(c);if(_&&(w[p]={type:Cl.required,message:O,ref:j,...D(Cl.required,O)},!r))return N(O),w}if(!A&&(!fi(f)||!fi(h))){let _,O;const M=ah(h),T=ah(f);if(!fi(y)&&!isNaN(y)){const R=o.valueAsNumber||y&&+y;fi(M.value)||(_=R>M.value),fi(T.value)||(O=R<T.value)}else{const R=o.valueAsDate||new Date(y),F=L=>new Date(new Date().toDateString()+" "+L),E=o.type=="time",B=o.type=="week";Yo(M.value)&&y&&(_=E?F(y)>F(M.value):B?y>M.value:R>new Date(M.value)),Yo(T.value)&&y&&(O=E?F(y)<F(T.value):B?y<T.value:R<new Date(T.value))}if((_||O)&&(P(!!_,M.message,T.message,Cl.max,Cl.min),!r))return N(w[p].message),w}if((u||d)&&!A&&(Yo(y)||a&&Array.isArray(y))){const _=ah(u),O=ah(d),M=!fi(_.value)&&y.length>+_.value,T=!fi(O.value)&&y.length<+O.value;if((M||T)&&(P(M,_.message,O.message),!r))return N(w[p].message),w}if(m&&!A&&Yo(y)){const{value:_,message:O}=ah(m);if(Q0(_)&&!y.match(_)&&(w[p]={type:Cl.pattern,message:O,ref:o,...D(Cl.pattern,O)},!r))return N(O),w}if(g){if(vo(g)){const _=await g(y,n),O=M$(_,j);if(O&&(w[p]={...O,...D(Cl.validate,O.message)},!r))return N(O.message),w}else if(Fr(g)){let _={};for(const O in g){if(!ui(_)&&!r)break;const M=M$(await g[O](y,n),j,O);M&&(_={...M,...D(O,M.message)},N(M.message),r&&(w[p]=_))}if(!ui(_)&&(w[p]={ref:j,..._},!r))return w}}return N(!0),w};const Gve={mode:xo.onSubmit,reValidateMode:xo.onChange,shouldFocusError:!0};function Qve(e={}){let t={...Gve,...e},n={submitCount:0,isDirty:!1,isLoading:vo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const r={};let i=Fr(t.defaultValues)||Fr(t.values)?Ps(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:Ps(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:k$(),state:k$()},m=T$(t.mode),g=T$(t.reValidateMode),p=t.criteriaMode===xo.all,v=K=>de=>{clearTimeout(u),u=setTimeout(K,de)},b=async K=>{if(!t.disabled&&(d.isValid||f.isValid||K)){const de=t.resolver?ui((await A()).errors):await P(r,!0);de!==n.isValid&&h.state.next({isValid:de})}},y=(K,de)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((K||Array.from(l.mount)).forEach(ve=>{ve&&(de?En(n.validatingFields,ve,de):es(n.validatingFields,ve))}),h.state.next({validatingFields:n.validatingFields,isValidating:!ui(n.validatingFields)}))},j=(K,de=[],ve,Oe,Z=!0,W=!0)=>{if(Oe&&ve&&!t.disabled){if(o.action=!0,W&&Array.isArray(Xe(r,K))){const me=ve(Xe(r,K),Oe.argA,Oe.argB);Z&&En(r,K,me)}if(W&&Array.isArray(Xe(n.errors,K))){const me=ve(Xe(n.errors,K),Oe.argA,Oe.argB);Z&&En(n.errors,K,me),Hve(n.errors,K)}if((d.touchedFields||f.touchedFields)&&W&&Array.isArray(Xe(n.touchedFields,K))){const me=ve(Xe(n.touchedFields,K),Oe.argA,Oe.argB);Z&&En(n.touchedFields,K,me)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=$g(i,a)),h.state.next({name:K,isDirty:O(K,de),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else En(a,K,de)},N=(K,de)=>{En(n.errors,K,de),h.state.next({errors:n.errors})},w=K=>{n.errors=K,h.state.next({errors:n.errors,isValid:!1})},S=(K,de,ve,Oe)=>{const Z=Xe(r,K);if(Z){const W=Xe(a,K,Or(ve)?Xe(i,K):ve);Or(W)||Oe&&Oe.defaultChecked||de?En(a,K,de?W:A$(Z._f)):R(K,W),o.mount&&b()}},k=(K,de,ve,Oe,Z)=>{let W=!1,me=!1;const Ae={name:K};if(!t.disabled){if(!ve||Oe){(d.isDirty||f.isDirty)&&(me=n.isDirty,n.isDirty=Ae.isDirty=O(),W=me!==Ae.isDirty);const Je=Kc(Xe(i,K),de);me=!!Xe(n.dirtyFields,K),Je?es(n.dirtyFields,K):En(n.dirtyFields,K,!0),Ae.dirtyFields=n.dirtyFields,W=W||(d.dirtyFields||f.dirtyFields)&&me!==!Je}if(ve){const Je=Xe(n.touchedFields,K);Je||(En(n.touchedFields,K,ve),Ae.touchedFields=n.touchedFields,W=W||(d.touchedFields||f.touchedFields)&&Je!==ve)}W&&Z&&h.state.next(Ae)}return W?Ae:{}},C=(K,de,ve,Oe)=>{const Z=Xe(n.errors,K),W=(d.isValid||f.isValid)&&ia(de)&&n.isValid!==de;if(t.delayError&&ve?(c=v(()=>N(K,ve)),c(t.delayError)):(clearTimeout(u),c=null,ve?En(n.errors,K,ve):es(n.errors,K)),(ve?!Kc(Z,ve):Z)||!ui(Oe)||W){const me={...Oe,...W&&ia(de)?{isValid:de}:{},errors:n.errors,name:K};n={...n,...me},h.state.next(me)}},A=async K=>{y(K,!0);const de=await t.resolver(a,t.context,zve(K||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(K),de},D=async K=>{const{errors:de}=await A(K);if(K)for(const ve of K){const Oe=Xe(de,ve);Oe?En(n.errors,ve,Oe):es(n.errors,ve)}else n.errors=de;return de},P=async(K,de,ve={valid:!0})=>{for(const Oe in K){const Z=K[Oe];if(Z){const{_f:W,...me}=Z;if(W){const Ae=l.array.has(W.name),Je=Z._f&&Bve(Z._f);Je&&d.validatingFields&&y([Oe],!0);const St=await R$(Z,l.disabled,a,p,t.shouldUseNativeValidation&&!de,Ae);if(Je&&d.validatingFields&&y([Oe]),St[W.name]&&(ve.valid=!1,de))break;!de&&(Xe(St,W.name)?Ae?Kve(n.errors,St,W.name):En(n.errors,W.name,St[W.name]):es(n.errors,W.name))}!ui(me)&&await P(me,de,ve)}}return ve.valid},_=()=>{for(const K of l.unMount){const de=Xe(r,K);de&&(de._f.refs?de._f.refs.every(ve=>!ek(ve)):!ek(de._f.ref))&&J(K)}l.unMount=new Set},O=(K,de)=>!t.disabled&&(K&&de&&En(a,K,de),!Kc(q(),i)),M=(K,de,ve)=>oG(K,l,{...o.mount?a:Or(de)?i:Yo(K)?{[K]:de}:de},ve,de),T=K=>_1(Xe(o.mount?a:i,K,t.shouldUnregister?Xe(i,K,[]):[])),R=(K,de,ve={})=>{const Oe=Xe(r,K);let Z=de;if(Oe){const W=Oe._f;W&&(!W.disabled&&En(a,K,hG(de,W)),Z=K0(W.ref)&&fi(de)?"":de,cG(W.ref)?[...W.ref.options].forEach(me=>me.selected=Z.includes(me.value)):W.refs?Ry(W.ref)?W.refs.length>1?W.refs.forEach(me=>(!me.defaultChecked||!me.disabled)&&(me.checked=Array.isArray(Z)?!!Z.find(Ae=>Ae===me.value):Z===me.value)):W.refs[0]&&(W.refs[0].checked=!!Z):W.refs.forEach(me=>me.checked=me.value===Z):SD(W.ref)?W.ref.value="":(W.ref.value=Z,W.ref.type||h.state.next({name:K,values:Ps(a)})))}(ve.shouldDirty||ve.shouldTouch)&&k(K,Z,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&I(K)},F=(K,de,ve)=>{for(const Oe in de){const Z=de[Oe],W=`${K}.${Oe}`,me=Xe(r,W);(l.array.has(K)||Fr(Z)||me&&!me._f)&&!Md(Z)?F(W,Z,ve):R(W,Z,ve)}},E=(K,de,ve={})=>{const Oe=Xe(r,K),Z=l.array.has(K),W=Ps(de);En(a,K,W),Z?(h.array.next({name:K,values:Ps(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ve.shouldDirty&&h.state.next({name:K,dirtyFields:$g(i,a),isDirty:O(K,W)})):Oe&&!Oe._f&&!fi(W)?F(K,W,ve):R(K,W,ve),O$(K,l)&&h.state.next({...n}),h.state.next({name:o.mount?K:void 0,values:Ps(a)})},B=async K=>{o.mount=!0;const de=K.target;let ve=de.name,Oe=!0;const Z=Xe(r,ve),W=me=>{Oe=Number.isNaN(me)||Md(me)&&isNaN(me.getTime())||Kc(me,Xe(a,ve,me))};if(Z){let me,Ae;const Je=de.type?A$(Z._f):nG(K),St=K.type===H0.BLUR||K.type===H0.FOCUS_OUT,Jn=!Vve(Z._f)&&!t.resolver&&!Xe(n.errors,ve)&&!Z._f.deps||Wve(St,Xe(n.touchedFields,ve),n.isSubmitted,g,m),Rn=O$(ve,l,St);En(a,ve,Je),St?(Z._f.onBlur&&Z._f.onBlur(K),c&&c(0)):Z._f.onChange&&Z._f.onChange(K);const Cs=k(ve,Je,St),Vs=!ui(Cs)||Rn;if(!St&&h.state.next({name:ve,type:K.type,values:Ps(a)}),Jn)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?St&&b():St||b()),Vs&&h.state.next({name:ve,...Rn?{}:Cs});if(!St&&Rn&&h.state.next({...n}),t.resolver){const{errors:_r}=await A([ve]);if(W(Je),Oe){const _i=I$(n.errors,r,ve),Xr=I$(_r,r,_i.name||ve);me=Xr.error,ve=Xr.name,Ae=ui(_r)}}else y([ve],!0),me=(await R$(Z,l.disabled,a,p,t.shouldUseNativeValidation))[ve],y([ve]),W(Je),Oe&&(me?Ae=!1:(d.isValid||f.isValid)&&(Ae=await P(r,!0)));Oe&&(Z._f.deps&&I(Z._f.deps),C(ve,Ae,me,Cs))}},L=(K,de)=>{if(Xe(n.errors,de)&&K.focus)return K.focus(),1},I=async(K,de={})=>{let ve,Oe;const Z=Px(K);if(t.resolver){const W=await D(Or(K)?K:Z);ve=ui(W),Oe=K?!Z.some(me=>Xe(W,me)):ve}else K?(Oe=(await Promise.all(Z.map(async W=>{const me=Xe(r,W);return await P(me&&me._f?{[W]:me}:me)}))).every(Boolean),!(!Oe&&!n.isValid)&&b()):Oe=ve=await P(r);return h.state.next({...!Yo(K)||(d.isValid||f.isValid)&&ve!==n.isValid?{}:{name:K},...t.resolver||!K?{isValid:ve}:{},errors:n.errors}),de.shouldFocus&&!Oe&&Ex(r,L,K?Z:l.mount),Oe},q=K=>{const de={...o.mount?a:i};return Or(K)?de:Yo(K)?Xe(de,K):K.map(ve=>Xe(de,ve))},$=(K,de)=>({invalid:!!Xe((de||n).errors,K),isDirty:!!Xe((de||n).dirtyFields,K),error:Xe((de||n).errors,K),isValidating:!!Xe(n.validatingFields,K),isTouched:!!Xe((de||n).touchedFields,K)}),z=K=>{K&&Px(K).forEach(de=>es(n.errors,de)),h.state.next({errors:K?n.errors:{}})},Y=(K,de,ve)=>{const Oe=(Xe(r,K,{_f:{}})._f||{}).ref,Z=Xe(n.errors,K)||{},{ref:W,message:me,type:Ae,...Je}=Z;En(n.errors,K,{...Je,...de,ref:Oe}),h.state.next({name:K,errors:n.errors,isValid:!1}),ve&&ve.shouldFocus&&Oe&&Oe.focus&&Oe.focus()},ne=(K,de)=>vo(K)?h.state.subscribe({next:ve=>K(M(void 0,de),ve)}):M(K,de,!0),te=K=>h.state.subscribe({next:de=>{Uve(K.name,de.name,K.exact)&&qve(de,K.formState||d,be,K.reRenderRoot)&&K.callback({values:{...a},...n,...de})}}).unsubscribe,pe=K=>(o.mount=!0,f={...f,...K.formState},te({...K,formState:f})),J=(K,de={})=>{for(const ve of K?Px(K):l.mount)l.mount.delete(ve),l.array.delete(ve),de.keepValue||(es(r,ve),es(a,ve)),!de.keepError&&es(n.errors,ve),!de.keepDirty&&es(n.dirtyFields,ve),!de.keepTouched&&es(n.touchedFields,ve),!de.keepIsValidating&&es(n.validatingFields,ve),!t.shouldUnregister&&!de.keepDefaultValue&&es(i,ve);h.state.next({values:Ps(a)}),h.state.next({...n,...de.keepDirty?{isDirty:O()}:{}}),!de.keepIsValid&&b()},xe=({disabled:K,name:de})=>{(ia(K)&&o.mount||K||l.disabled.has(de))&&(K?l.disabled.add(de):l.disabled.delete(de))},ye=(K,de={})=>{let ve=Xe(r,K);const Oe=ia(de.disabled)||ia(t.disabled);return En(r,K,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:K}},name:K,mount:!0,...de}}),l.mount.add(K),ve?xe({disabled:ia(de.disabled)?de.disabled:t.disabled,name:K}):S(K,!0,de.value),{...Oe?{disabled:de.disabled||t.disabled}:{},...t.progressive?{required:!!de.required,min:Fg(de.min),max:Fg(de.max),minLength:Fg(de.minLength),maxLength:Fg(de.maxLength),pattern:Fg(de.pattern)}:{},name:K,onChange:B,onBlur:B,ref:Z=>{if(Z){ye(K,de),ve=Xe(r,K);const W=Or(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,me=$ve(W),Ae=ve._f.refs||[];if(me?Ae.find(Je=>Je===W):W===ve._f.ref)return;En(r,K,{_f:{...ve._f,...me?{refs:[...Ae.filter(ek),W,...Array.isArray(Xe(i,K))?[{}]:[]],ref:{type:W.type,name:K}}:{ref:W}}}),S(K,!1,void 0,W)}else ve=Xe(r,K,{}),ve._f&&(ve._f.mount=!1),(t.shouldUnregister||de.shouldUnregister)&&!(rG(l.array,K)&&o.action)&&l.unMount.add(K)}}},re=()=>t.shouldFocusError&&Ex(r,L,l.mount),ue=K=>{ia(K)&&(h.state.next({disabled:K}),Ex(r,(de,ve)=>{const Oe=Xe(r,ve);Oe&&(de.disabled=Oe._f.disabled||K,Array.isArray(Oe._f.refs)&&Oe._f.refs.forEach(Z=>{Z.disabled=Oe._f.disabled||K}))},0,!1))},ke=(K,de)=>async ve=>{let Oe;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let Z=Ps(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:W,values:me}=await A();n.errors=W,Z=me}else await P(r);if(l.disabled.size)for(const W of l.disabled)En(Z,W,void 0);if(es(n.errors,"root"),ui(n.errors)){h.state.next({errors:{}});try{await K(Z,ve)}catch(W){Oe=W}}else de&&await de({...n.errors},ve),re(),setTimeout(re);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ui(n.errors)&&!Oe,submitCount:n.submitCount+1,errors:n.errors}),Oe)throw Oe},$e=(K,de={})=>{Xe(r,K)&&(Or(de.defaultValue)?E(K,Ps(Xe(i,K))):(E(K,de.defaultValue),En(i,K,Ps(de.defaultValue))),de.keepTouched||es(n.touchedFields,K),de.keepDirty||(es(n.dirtyFields,K),n.isDirty=de.defaultValue?O(K,Ps(Xe(i,K))):O()),de.keepError||(es(n.errors,K),d.isValid&&b()),h.state.next({...n}))},Ve=(K,de={})=>{const ve=K?Ps(K):i,Oe=Ps(ve),Z=ui(K),W=Z?i:Oe;if(de.keepDefaultValues||(i=ve),!de.keepValues){if(de.keepDirtyValues){const me=new Set([...l.mount,...Object.keys($g(i,a))]);for(const Ae of Array.from(me))Xe(n.dirtyFields,Ae)?En(W,Ae,Xe(a,Ae)):E(Ae,Xe(W,Ae))}else{if(wD&&Or(K))for(const me of l.mount){const Ae=Xe(r,me);if(Ae&&Ae._f){const Je=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(K0(Je)){const St=Je.closest("form");if(St){St.reset();break}}}}for(const me of l.mount)E(me,Xe(W,me))}a=Ps(W),h.array.next({values:{...W}}),h.state.next({values:{...W}})}l={mount:de.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!de.keepIsValid||!!de.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:de.keepSubmitCount?n.submitCount:0,isDirty:Z?!1:de.keepDirty?n.isDirty:!!(de.keepDefaultValues&&!Kc(K,i)),isSubmitted:de.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Z?{}:de.keepDirtyValues?de.keepDefaultValues&&a?$g(i,a):n.dirtyFields:de.keepDefaultValues&&K?$g(i,K):de.keepDirty?n.dirtyFields:{},touchedFields:de.keepTouched?n.touchedFields:{},errors:de.keepErrors?n.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},gt=(K,de)=>Ve(vo(K)?K(a):K,de),He=(K,de={})=>{const ve=Xe(r,K),Oe=ve&&ve._f;if(Oe){const Z=Oe.refs?Oe.refs[0]:Oe.ref;Z.focus&&(Z.focus(),de.shouldSelect&&vo(Z.select)&&Z.select())}},be=K=>{n={...n,...K}},sn={control:{register:ye,unregister:J,getFieldState:$,handleSubmit:ke,setError:Y,_subscribe:te,_runSchema:A,_getWatch:M,_getDirty:O,_setValid:b,_setFieldArray:j,_setDisabledField:xe,_setErrors:w,_getFieldArray:T,_reset:Ve,_resetDefaultValues:()=>vo(t.defaultValues)&&t.defaultValues().then(K=>{gt(K,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:_,_disableForm:ue,_subjects:h,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(K){o=K},get _defaultValues(){return i},get _names(){return l},set _names(K){l=K},get _formState(){return n},get _options(){return t},set _options(K){t={...t,...K}}},subscribe:pe,trigger:I,register:ye,handleSubmit:ke,watch:ne,setValue:E,getValues:q,reset:gt,resetField:$e,clearErrors:z,unregister:J,setError:Y,setFocus:He,getFieldState:$};return{...sn,formControl:sn}}function Yve(e={}){const t=Q.useRef(void 0),n=Q.useRef(void 0),[r,i]=Q.useState({isDirty:!1,isValidating:!1,isLoading:vo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:vo(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:Qve(e),formState:r},e.formControl&&e.defaultValues&&!vo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,Q.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),Q.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Q.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Q.useEffect(()=>{e.values&&!Kc(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),Q.useEffect(()=>{e.errors&&!ui(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),Q.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Q.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=aG(r,a),t.current}const $$=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Xe(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},pG=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?$$(r.ref,n,e):r.refs&&r.refs.forEach(i=>$$(i,n,e))}},Xve=(e,t)=>{t.shouldUseNativeValidation&&pG(e,t);const n={};for(const r in e){const i=Xe(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(Zve(t.names||Object.keys(e),r)){const o=Object.assign({},Xe(n,r));En(o,"root",a),En(n,r,o)}else En(n,r,a)}return n},Zve=(e,t)=>e.some(n=>n.startsWith(t+"."));var Jve=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=n[o].types,u=c&&c[r.code];n[o]=lG(o,t,n,i,u?[].concat(u,r.message):r.message)}e.shift()}return n},eye=function(e,t,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(u){return a.shouldUseNativeValidation&&pG({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Xve(Jve(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},mn;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(mn||(mn={}));var uE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(uE||(uE={}));const lt=mn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ll=e=>{switch(typeof e){case"undefined":return lt.undefined;case"string":return lt.string;case"number":return Number.isNaN(e)?lt.nan:lt.number;case"boolean":return lt.boolean;case"function":return lt.function;case"bigint":return lt.bigint;case"symbol":return lt.symbol;case"object":return Array.isArray(e)?lt.array:e===null?lt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?lt.promise:typeof Map<"u"&&e instanceof Map?lt.map:typeof Set<"u"&&e instanceof Set?lt.set:typeof Date<"u"&&e instanceof Date?lt.date:lt.object;default:return lt.unknown}},qe=mn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tye=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ma extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(t){if(!(t instanceof ma))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ma.create=e=>new ma(e);const Lm=(e,t)=>{let n;switch(e.code){case qe.invalid_type:e.received===lt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case qe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,mn.jsonStringifyReplacer)}`;break;case qe.unrecognized_keys:n=`Unrecognized key(s) in object: ${mn.joinValues(e.keys,", ")}`;break;case qe.invalid_union:n="Invalid input";break;case qe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mn.joinValues(e.options)}`;break;case qe.invalid_enum_value:n=`Invalid enum value. Expected ${mn.joinValues(e.options)}, received '${e.received}'`;break;case qe.invalid_arguments:n="Invalid function arguments";break;case qe.invalid_return_type:n="Invalid function return type";break;case qe.invalid_date:n="Invalid date";break;case qe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:mn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case qe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case qe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case qe.custom:n="Invalid input";break;case qe.invalid_intersection_types:n="Intersection results could not be merged";break;case qe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case qe.not_finite:n="Number must be finite";break;default:n=t.defaultError,mn.assertNever(e)}return{message:n}};let gG=Lm;function nye(e){gG=e}function Y0(){return gG}const X0=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},rye=[];function Ze(e,t){const n=Y0(),r=X0({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Lm?void 0:Lm].filter(i=>!!i)});e.common.issues.push(r)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return It;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return si.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return It;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:t.value,value:r}}}const It=Object.freeze({status:"aborted"}),Ih=e=>({status:"dirty",value:e}),wi=e=>({status:"valid",value:e}),dE=e=>e.status==="aborted",fE=e=>e.status==="dirty",Sf=e=>e.status==="valid",mv=e=>typeof Promise<"u"&&e instanceof Promise;var vt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(vt||(vt={}));class fl{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const F$=(e,t)=>{if(Sf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ma(e.common.issues);return this._error=n,this._error}}};function Qt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class tn{get description(){return this._def.description}_getType(t){return Ll(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ll(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new si,ctx:{common:t.parent.common,data:t.data,parsedType:Ll(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(mv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ll(t)},i=this._parseSync({data:t,path:r.path,parent:r});return F$(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ll(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return Sf(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>Sf(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ll(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(mv(i)?i:Promise.resolve(i));return F$(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:qe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Oo({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return rl.create(this,this._def)}nullable(){return Lu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return So.create(this)}promise(){return Bm.create(this,this._def)}or(t){return vv.create([this,t],this._def)}and(t){return yv.create(this,t,this._def)}transform(t){return new Oo({...Qt(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Sv({...Qt(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new kD({typeName:Mt.ZodBranded,type:this,...Qt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Cv({...Qt(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return $y.create(this,t)}readonly(){return kv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sye=/^c[^\s-]{8,}$/i,iye=/^[0-9a-z]+$/,aye=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oye=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lye=/^[a-z0-9_-]{21}$/i,cye=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uye=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dye=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fye="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let tk;const hye=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mye=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,pye=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gye=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xye=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vye=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xG="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yye=new RegExp(`^${xG}$`);function vG(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function bye(e){return new RegExp(`^${vG(e)}$`)}function yG(e){let t=`${xG}T${vG(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function jye(e,t){return!!((t==="v4"||!t)&&hye.test(e)||(t==="v6"||!t)&&pye.test(e))}function wye(e,t){if(!cye.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function Nye(e,t){return!!((t==="v4"||!t)&&mye.test(e)||(t==="v6"||!t)&&gye.test(e))}class bo extends tn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==lt.string){const a=this._getOrReturnCtx(t);return Ze(a,{code:qe.invalid_type,expected:lt.string,received:a.parsedType}),It}const r=new si;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Ze(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ze(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")dye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"email",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")tk||(tk=new RegExp(fye,"u")),tk.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"emoji",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")oye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"uuid",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")lye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"nanoid",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")sye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cuid",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")iye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cuid2",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")aye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"ulid",code:qe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ze(i,{validation:"url",code:qe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"regex",code:qe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?yG(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?yye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?bye(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?uye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"duration",code:qe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?jye(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"ip",code:qe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?wye(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"jwt",code:qe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?Nye(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cidr",code:qe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?xye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"base64",code:qe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?vye.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"base64url",code:qe.invalid_string,message:a.message}),r.dirty()):mn.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:qe.invalid_string,...vt.errToObj(r)})}_addCheck(t){return new bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...vt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...vt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...vt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...vt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...vt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...vt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...vt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...vt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...vt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...vt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...vt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...vt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...vt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...vt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...vt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...vt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...vt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...vt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...vt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...vt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...vt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...vt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...vt.errToObj(n)})}nonempty(t){return this.min(1,vt.errToObj(t))}trim(){return new bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}bo.create=e=>new bo({checks:[],typeName:Mt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Qt(e)});function Sye(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Ru extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==lt.number){const a=this._getOrReturnCtx(t);return Ze(a,{code:qe.invalid_type,expected:lt.number,received:a.parsedType}),It}let r;const i=new si;for(const a of this._def.checks)a.kind==="int"?mn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Sye(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.not_finite,message:a.message}),i.dirty()):mn.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,vt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,vt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,vt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,vt.toString(n))}setLimit(t,n,r,i){return new Ru({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:vt.toString(i)}]})}_addCheck(t){return new Ru({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:vt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:vt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:vt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:vt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:vt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:vt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:vt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:vt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:vt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&mn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Ru.create=e=>new Ru({checks:[],typeName:Mt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Qt(e)});class $u extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==lt.bigint)return this._getInvalidInput(t);let r;const i=new si;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ze(r,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):mn.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ze(n,{code:qe.invalid_type,expected:lt.bigint,received:n.parsedType}),It}gte(t,n){return this.setLimit("min",t,!0,vt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,vt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,vt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,vt.toString(n))}setLimit(t,n,r,i){return new $u({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:vt.toString(i)}]})}_addCheck(t){return new $u({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:vt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:vt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:vt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:vt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:vt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}$u.create=e=>new $u({checks:[],typeName:Mt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Qt(e)});class pv extends tn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==lt.boolean){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.boolean,received:r.parsedType}),It}return wi(t.data)}}pv.create=e=>new pv({typeName:Mt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Qt(e)});class Cf extends tn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==lt.date){const a=this._getOrReturnCtx(t);return Ze(a,{code:qe.invalid_type,expected:lt.date,received:a.parsedType}),It}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ze(a,{code:qe.invalid_date}),It}const r=new si;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:qe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):mn.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Cf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:vt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:vt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Cf.create=e=>new Cf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Mt.ZodDate,...Qt(e)});class Z0 extends tn{_parse(t){if(this._getType(t)!==lt.symbol){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.symbol,received:r.parsedType}),It}return wi(t.data)}}Z0.create=e=>new Z0({typeName:Mt.ZodSymbol,...Qt(e)});class gv extends tn{_parse(t){if(this._getType(t)!==lt.undefined){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.undefined,received:r.parsedType}),It}return wi(t.data)}}gv.create=e=>new gv({typeName:Mt.ZodUndefined,...Qt(e)});class xv extends tn{_parse(t){if(this._getType(t)!==lt.null){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.null,received:r.parsedType}),It}return wi(t.data)}}xv.create=e=>new xv({typeName:Mt.ZodNull,...Qt(e)});class zm extends tn{constructor(){super(...arguments),this._any=!0}_parse(t){return wi(t.data)}}zm.create=e=>new zm({typeName:Mt.ZodAny,...Qt(e)});class ef extends tn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return wi(t.data)}}ef.create=e=>new ef({typeName:Mt.ZodUnknown,...Qt(e)});class fc extends tn{_parse(t){const n=this._getOrReturnCtx(t);return Ze(n,{code:qe.invalid_type,expected:lt.never,received:n.parsedType}),It}}fc.create=e=>new fc({typeName:Mt.ZodNever,...Qt(e)});class J0 extends tn{_parse(t){if(this._getType(t)!==lt.undefined){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.void,received:r.parsedType}),It}return wi(t.data)}}J0.create=e=>new J0({typeName:Mt.ZodVoid,...Qt(e)});class So extends tn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==lt.array)return Ze(n,{code:qe.invalid_type,expected:lt.array,received:n.parsedType}),It;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ze(n,{code:o?qe.too_big:qe.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ze(n,{code:qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ze(n,{code:qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new fl(n,o,n.path,l)))).then(o=>si.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new fl(n,o,n.path,l)));return si.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new So({...this._def,minLength:{value:t,message:vt.toString(n)}})}max(t,n){return new So({...this._def,maxLength:{value:t,message:vt.toString(n)}})}length(t,n){return new So({...this._def,exactLength:{value:t,message:vt.toString(n)}})}nonempty(t){return this.min(1,t)}}So.create=(e,t)=>new So({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...Qt(t)});function gh(e){if(e instanceof hr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=rl.create(gh(r))}return new hr({...e._def,shape:()=>t})}else return e instanceof So?new So({...e._def,type:gh(e.element)}):e instanceof rl?rl.create(gh(e.unwrap())):e instanceof Lu?Lu.create(gh(e.unwrap())):e instanceof hl?hl.create(e.items.map(t=>gh(t))):e}class hr extends tn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=mn.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==lt.object){const u=this._getOrReturnCtx(t);return Ze(u,{code:qe.invalid_type,expected:lt.object,received:u.parsedType}),It}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof fc&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new fl(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof fc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Ze(i,{code:qe.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new fl(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>si.mergeObjectSync(r,u)):si.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return vt.errToObj,new hr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:vt.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new hr({...this._def,unknownKeys:"strip"})}passthrough(){return new hr({...this._def,unknownKeys:"passthrough"})}extend(t){return new hr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new hr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Mt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new hr({...this._def,catchall:t})}pick(t){const n={};for(const r of mn.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new hr({...this._def,shape:()=>n})}omit(t){const n={};for(const r of mn.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new hr({...this._def,shape:()=>n})}deepPartial(){return gh(this)}partial(t){const n={};for(const r of mn.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new hr({...this._def,shape:()=>n})}required(t){const n={};for(const r of mn.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof rl;)a=a._def.innerType;n[r]=a}return new hr({...this._def,shape:()=>n})}keyof(){return bG(mn.objectKeys(this.shape))}}hr.create=(e,t)=>new hr({shape:()=>e,unknownKeys:"strip",catchall:fc.create(),typeName:Mt.ZodObject,...Qt(t)});hr.strictCreate=(e,t)=>new hr({shape:()=>e,unknownKeys:"strict",catchall:fc.create(),typeName:Mt.ZodObject,...Qt(t)});hr.lazycreate=(e,t)=>new hr({shape:e,unknownKeys:"strip",catchall:fc.create(),typeName:Mt.ZodObject,...Qt(t)});class vv extends tn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ma(l.ctx.common.issues));return Ze(n,{code:qe.invalid_union,unionErrors:o}),It}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ma(c));return Ze(n,{code:qe.invalid_union,unionErrors:l}),It}}get options(){return this._def.options}}vv.create=(e,t)=>new vv({options:e,typeName:Mt.ZodUnion,...Qt(t)});const Al=e=>e instanceof jv?Al(e.schema):e instanceof Oo?Al(e.innerType()):e instanceof wv?[e.value]:e instanceof Fu?e.options:e instanceof Nv?mn.objectValues(e.enum):e instanceof Sv?Al(e._def.innerType):e instanceof gv?[void 0]:e instanceof xv?[null]:e instanceof rl?[void 0,...Al(e.unwrap())]:e instanceof Lu?[null,...Al(e.unwrap())]:e instanceof kD||e instanceof kv?Al(e.unwrap()):e instanceof Cv?Al(e._def.innerType):[];class T1 extends tn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==lt.object)return Ze(n,{code:qe.invalid_type,expected:lt.object,received:n.parsedType}),It;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Ze(n,{code:qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),It)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const a of n){const o=Al(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new T1({typeName:Mt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Qt(r)})}}function hE(e,t){const n=Ll(e),r=Ll(t);if(e===t)return{valid:!0,data:e};if(n===lt.object&&r===lt.object){const i=mn.objectKeys(t),a=mn.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=hE(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===lt.array&&r===lt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=hE(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===lt.date&&r===lt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class yv extends tn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,o)=>{if(dE(a)||dE(o))return It;const l=hE(a.value,o.value);return l.valid?((fE(a)||fE(o))&&n.dirty(),{status:n.value,value:l.data}):(Ze(r,{code:qe.invalid_intersection_types}),It)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}yv.create=(e,t,n)=>new yv({left:e,right:t,typeName:Mt.ZodIntersection,...Qt(n)});class hl extends tn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==lt.array)return Ze(r,{code:qe.invalid_type,expected:lt.array,received:r.parsedType}),It;if(r.data.length<this._def.items.length)return Ze(r,{code:qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),It;!this._def.rest&&r.data.length>this._def.items.length&&(Ze(r,{code:qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new fl(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>si.mergeArray(n,o)):si.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new hl({...this._def,rest:t})}}hl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hl({items:e,typeName:Mt.ZodTuple,rest:null,...Qt(t)})};class bv extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==lt.object)return Ze(r,{code:qe.invalid_type,expected:lt.object,received:r.parsedType}),It;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:a._parse(new fl(r,l,r.path,l)),value:o._parse(new fl(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?si.mergeObjectAsync(n,i):si.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof tn?new bv({keyType:t,valueType:n,typeName:Mt.ZodRecord,...Qt(r)}):new bv({keyType:bo.create(),valueType:t,typeName:Mt.ZodRecord,...Qt(n)})}}class ew extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==lt.map)return Ze(r,{code:qe.invalid_type,expected:lt.map,received:r.parsedType}),It;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new fl(r,l,r.path,[u,"key"])),value:a._parse(new fl(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return It;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return It;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}ew.create=(e,t,n)=>new ew({valueType:t,keyType:e,typeName:Mt.ZodMap,...Qt(n)});class kf extends tn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==lt.set)return Ze(r,{code:qe.invalid_type,expected:lt.set,received:r.parsedType}),It;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ze(r,{code:qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ze(r,{code:qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return It;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new fl(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new kf({...this._def,minSize:{value:t,message:vt.toString(n)}})}max(t,n){return new kf({...this._def,maxSize:{value:t,message:vt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}kf.create=(e,t)=>new kf({valueType:e,minSize:null,maxSize:null,typeName:Mt.ZodSet,...Qt(t)});class rm extends tn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==lt.function)return Ze(n,{code:qe.invalid_type,expected:lt.function,received:n.parsedType}),It;function r(l,c){return X0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Y0(),Lm].filter(u=>!!u),issueData:{code:qe.invalid_arguments,argumentsError:c}})}function i(l,c){return X0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Y0(),Lm].filter(u=>!!u),issueData:{code:qe.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Bm){const l=this;return wi(async function(...c){const u=new ma([]),d=await l._def.args.parseAsync(c,a).catch(m=>{throw u.addIssue(r(c,m)),u}),f=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(f,a).catch(m=>{throw u.addIssue(i(f,m)),u})})}else{const l=this;return wi(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new ma([r(c,u.error)]);const d=Reflect.apply(o,this,u.data),f=l._def.returns.safeParse(d,a);if(!f.success)throw new ma([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new rm({...this._def,args:hl.create(t).rest(ef.create())})}returns(t){return new rm({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new rm({args:t||hl.create([]).rest(ef.create()),returns:n||ef.create(),typeName:Mt.ZodFunction,...Qt(r)})}}class jv extends tn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jv.create=(e,t)=>new jv({getter:e,typeName:Mt.ZodLazy,...Qt(t)});class wv extends tn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ze(n,{received:n.data,code:qe.invalid_literal,expected:this._def.value}),It}return{status:"valid",value:t.data}}get value(){return this._def.value}}wv.create=(e,t)=>new wv({value:e,typeName:Mt.ZodLiteral,...Qt(t)});function bG(e,t){return new Fu({values:e,typeName:Mt.ZodEnum,...Qt(t)})}class Fu extends tn{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ze(n,{expected:mn.joinValues(r),received:n.parsedType,code:qe.invalid_type}),It}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ze(n,{received:n.data,code:qe.invalid_enum_value,options:r}),It}return wi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Fu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Fu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Fu.create=bG;class Nv extends tn{_parse(t){const n=mn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==lt.string&&r.parsedType!==lt.number){const i=mn.objectValues(n);return Ze(r,{expected:mn.joinValues(i),received:r.parsedType,code:qe.invalid_type}),It}if(this._cache||(this._cache=new Set(mn.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=mn.objectValues(n);return Ze(r,{received:r.data,code:qe.invalid_enum_value,options:i}),It}return wi(t.data)}get enum(){return this._def.values}}Nv.create=(e,t)=>new Nv({values:e,typeName:Mt.ZodNativeEnum,...Qt(t)});class Bm extends tn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==lt.promise&&n.common.async===!1)return Ze(n,{code:qe.invalid_type,expected:lt.promise,received:n.parsedType}),It;const r=n.parsedType===lt.promise?n.data:Promise.resolve(n.data);return wi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bm.create=(e,t)=>new Bm({type:e,typeName:Mt.ZodPromise,...Qt(t)});class Oo extends tn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ze(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return It;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?It:c.status==="dirty"||n.value==="dirty"?Ih(c.value):c});{if(n.value==="aborted")return It;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?It:l.status==="dirty"||n.value==="dirty"?Ih(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?It:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?It:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sf(o))return It;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Sf(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):It);mn.assertNever(i)}}Oo.create=(e,t,n)=>new Oo({schema:e,typeName:Mt.ZodEffects,effect:t,...Qt(n)});Oo.createWithPreprocess=(e,t,n)=>new Oo({schema:t,effect:{type:"preprocess",transform:e},typeName:Mt.ZodEffects,...Qt(n)});class rl extends tn{_parse(t){return this._getType(t)===lt.undefined?wi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}rl.create=(e,t)=>new rl({innerType:e,typeName:Mt.ZodOptional,...Qt(t)});class Lu extends tn{_parse(t){return this._getType(t)===lt.null?wi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Lu.create=(e,t)=>new Lu({innerType:e,typeName:Mt.ZodNullable,...Qt(t)});class Sv extends tn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===lt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sv.create=(e,t)=>new Sv({innerType:e,typeName:Mt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Qt(t)});class Cv extends tn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return mv(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ma(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ma(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Cv.create=(e,t)=>new Cv({innerType:e,typeName:Mt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Qt(t)});class tw extends tn{_parse(t){if(this._getType(t)!==lt.nan){const r=this._getOrReturnCtx(t);return Ze(r,{code:qe.invalid_type,expected:lt.nan,received:r.parsedType}),It}return{status:"valid",value:t.data}}}tw.create=e=>new tw({typeName:Mt.ZodNaN,...Qt(e)});const Cye=Symbol("zod_brand");class kD extends tn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $y extends tn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?It:a.status==="dirty"?(n.dirty(),Ih(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?It:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new $y({in:t,out:n,typeName:Mt.ZodPipeline})}}class kv extends tn{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Sf(i)&&(i.value=Object.freeze(i.value)),i);return mv(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}kv.create=(e,t)=>new kv({innerType:e,typeName:Mt.ZodReadonly,...Qt(t)});function L$(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function PD(e,t={},n){return e?zm.create().superRefine((r,i)=>{const a=e(r);if(a instanceof Promise)return a.then(o=>{if(!o){const l=L$(t,r),c=l.fatal??n??!0;i.addIssue({code:"custom",...l,fatal:c})}});if(!a){const o=L$(t,r),l=o.fatal??n??!0;i.addIssue({code:"custom",...o,fatal:l})}}):zm.create()}const kye={object:hr.lazycreate};var Mt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const Pye=(e,t={message:`Input not instance of ${e.name}`})=>PD(n=>n instanceof e,t),jo=bo.create,ED=Ru.create,Eye=tw.create,_ye=$u.create,_D=pv.create,Aye=Cf.create,Tye=Z0.create,Dye=gv.create,jG=xv.create,nw=zm.create,Oye=ef.create,Iye=fc.create,Mye=J0.create,wG=So.create,NG=hr.create,Rye=hr.strictCreate,AD=vv.create,$ye=T1.create,Fye=yv.create,Lye=hl.create,SG=bv.create,zye=ew.create,Bye=kf.create,Vye=rm.create,qye=jv.create,Uye=wv.create,Wye=Fu.create,Hye=Nv.create,Kye=Bm.create,z$=Oo.create,Gye=rl.create,Qye=Lu.create,Yye=Oo.createWithPreprocess,Xye=$y.create,Zye=()=>jo().optional(),Jye=()=>ED().optional(),ebe=()=>_D().optional(),tbe={string:e=>bo.create({...e,coerce:!0}),number:e=>Ru.create({...e,coerce:!0}),boolean:e=>pv.create({...e,coerce:!0}),bigint:e=>$u.create({...e,coerce:!0}),date:e=>Cf.create({...e,coerce:!0})},nbe=It,rbe=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Cye,DIRTY:Ih,EMPTY_PATH:rye,INVALID:It,NEVER:nbe,OK:wi,ParseStatus:si,Schema:tn,ZodAny:zm,ZodArray:So,ZodBigInt:$u,ZodBoolean:pv,ZodBranded:kD,ZodCatch:Cv,ZodDate:Cf,ZodDefault:Sv,ZodDiscriminatedUnion:T1,ZodEffects:Oo,ZodEnum:Fu,ZodError:ma,get ZodFirstPartyTypeKind(){return Mt},ZodFunction:rm,ZodIntersection:yv,ZodIssueCode:qe,ZodLazy:jv,ZodLiteral:wv,ZodMap:ew,ZodNaN:tw,ZodNativeEnum:Nv,ZodNever:fc,ZodNull:xv,ZodNullable:Lu,ZodNumber:Ru,ZodObject:hr,ZodOptional:rl,ZodParsedType:lt,ZodPipeline:$y,ZodPromise:Bm,ZodReadonly:kv,ZodRecord:bv,ZodSchema:tn,ZodSet:kf,ZodString:bo,ZodSymbol:Z0,ZodTransformer:Oo,ZodTuple:hl,ZodType:tn,ZodUndefined:gv,ZodUnion:vv,ZodUnknown:ef,ZodVoid:J0,addIssueToContext:Ze,any:nw,array:wG,bigint:_ye,boolean:_D,coerce:tbe,custom:PD,date:Aye,datetimeRegex:yG,defaultErrorMap:Lm,discriminatedUnion:$ye,effect:z$,enum:Wye,function:Vye,getErrorMap:Y0,getParsedType:Ll,instanceof:Pye,intersection:Fye,isAborted:dE,isAsync:mv,isDirty:fE,isValid:Sf,late:kye,lazy:qye,literal:Uye,makeIssue:X0,map:zye,nan:Eye,nativeEnum:Hye,never:Iye,null:jG,nullable:Qye,number:ED,object:NG,get objectUtil(){return uE},oboolean:ebe,onumber:Jye,optional:Gye,ostring:Zye,pipeline:Xye,preprocess:Yye,promise:Kye,quotelessJson:tye,record:SG,set:Bye,setErrorMap:nye,strictObject:Rye,string:jo,symbol:Tye,transformer:z$,tuple:Lye,undefined:Dye,union:AD,unknown:Oye,get util(){return mn},void:Mye},Symbol.toStringTag,{value:"Module"})),Me=Symbol.for("drizzle:entityKind");function Wr(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Me))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Me in n&&n[Me]===t[Me])return!0;n=Object.getPrototypeOf(n)}return!1}var dV;dV=Me;class Vm{constructor(t,n){le(this,"name");le(this,"keyAsName");le(this,"primary");le(this,"notNull");le(this,"default");le(this,"defaultFn");le(this,"onUpdateFn");le(this,"hasDefault");le(this,"isUnique");le(this,"uniqueName");le(this,"uniqueType");le(this,"dataType");le(this,"columnType");le(this,"enumValues");le(this,"generated");le(this,"generatedIdentity");le(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}le(Vm,dV,"Column");var fV;fV=Me;class CG{constructor(t,n,r){le(this,"config");le(this,"$default",this.$defaultFn);le(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}le(CG,fV,"ColumnBuilder");const sm=Symbol.for("drizzle:Name");var hV;hV=Me;class kG{constructor(t,n){le(this,"reference");le(this,"_onUpdate","no action");le(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:i,foreignColumns:a}=t();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new PG(t,this)}}le(kG,hV,"PgForeignKeyBuilder");var mV;mV=Me;class PG{constructor(t,n){le(this,"reference");le(this,"onUpdate");le(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:r}=this.reference(),i=n.map(l=>l.name),a=r.map(l=>l.name),o=[this.table[sm],...i,r[0].table[sm],...a];return t??`${o.join("_")}_fk`}}le(PG,mV,"PgForeignKey");function sbe(e,...t){return e(...t)}function Wp(e){return new AG(e)}function EG(e,t){return`${e[sm]}_${t.join("_")}_unique`}var pV;pV=Me;class _G{constructor(t,n){le(this,"columns");le(this,"nullsNotDistinctConfig",!1);this.name=n,this.columns=t}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(t){return new TG(t,this.columns,this.nullsNotDistinctConfig,this.name)}}le(_G,pV,"PgUniqueConstraintBuilder");var gV;gV=Me;class AG{constructor(t){le(this,"name");this.name=t}on(...t){return new _G(t,this.name)}}le(AG,gV,"PgUniqueOnConstraintBuilder");var xV;xV=Me;class TG{constructor(t,n,r,i){le(this,"columns");le(this,"name");le(this,"nullsNotDistinct",!1);this.table=t,this.columns=n,this.name=i??EG(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=r}getName(){return this.name}}le(TG,xV,"PgUniqueConstraint");function B$(e,t,n){for(let r=t;r<e.length;r++){const i=e[r];if(i==="\\"){r++;continue}if(i==='"')return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}function DG(e,t=0){const n=[];let r=t,i=!1;for(;r<e.length;){const a=e[r];if(a===","){(i||r===t)&&n.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){const[c,u]=B$(e,r+1,!0);n.push(c),r=u;continue}if(a==="}")return[n,r+1];if(a==="{"){const[c,u]=DG(e,r+1);n.push(c),r=u;continue}const[o,l]=B$(e,r,!1);n.push(o),r=l}return[n,r]}function ibe(e){const[t]=DG(e,1);return t}function OG(e){return`{${e.map(t=>Array.isArray(t)?OG(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var vV,yV;class hn extends(yV=CG,vV=Me,yV){constructor(){super(...arguments);le(this,"foreignKeyConfigs",[])}array(n){return new MG(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>sbe((o,l)=>{const c=new kG(()=>{const u=o();return{columns:[n],foreignColumns:[u]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(r)},i,a))}buildExtraConfigColumn(n){return new IG(n,this.config)}}le(hn,vV,"PgColumnBuilder");var bV,jV;class Kt extends(jV=Vm,bV=Me,jV){constructor(t,n){n.uniqueName||(n.uniqueName=EG(t,[n.name])),super(t,n),this.table=t}}le(Kt,bV,"PgColumn");var wV,NV;class IG extends(NV=Kt,wV=Me,NV){constructor(){super(...arguments);le(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});le(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}le(IG,wV,"ExtraConfigColumn");var SV;SV=Me;class Xj{constructor(t,n,r,i){le(this,"name");le(this,"keyAsName");le(this,"type");le(this,"indexConfig");this.name=t,this.keyAsName=n,this.type=r,this.indexConfig=i}}le(Xj,SV,"IndexedColumn");var CV,kV;class MG extends(kV=hn,CV=Me,kV){constructor(t,n,r){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(t){const n=this.config.baseBuilder.build(t);return new mE(t,this.config,n)}}le(MG,CV,"PgArrayBuilder");var PV,EV;const MN=class MN extends(EV=Kt,PV=Me,EV){constructor(n,r,i,a){super(n,r);le(this,"size");this.baseColumn=i,this.range=a,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=ibe(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const i=n.map(a=>a===null?null:Wr(this.baseColumn,MN)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return r?i:OG(i)}};le(MN,PV,"PgArray");let mE=MN;const pE=Symbol.for("drizzle:isPgEnum");function abe(e){return!!e&&typeof e=="function"&&pE in e&&e[pE]===!0}var _V,AV;class RG extends(AV=hn,_V=Me,AV){constructor(t,n){super(t,"string","PgEnumColumn"),this.config.enum=n}build(t){return new $G(t,this.config)}}le(RG,_V,"PgEnumColumnBuilder");var TV,DV;class $G extends(DV=Kt,TV=Me,DV){constructor(n,r){super(n,r);le(this,"enum",this.config.enum);le(this,"enumValues",this.config.enum.enumValues);this.enum=r.enum}getSQLType(){return this.enum.enumName}}le($G,TV,"PgEnumColumn");function obe(e,t){return lbe(e,t,void 0)}function lbe(e,t,n){const r=Object.assign(i=>new RG(i??"",r),{enumName:e,enumValues:t,schema:n,[pE]:!0});return r}var OV;OV=Me;class TD{constructor(t,n,r,i=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:r,isWith:i}}}le(TD,OV,"Subquery");const cbe={startActiveSpan(e,t){return t()}},im=Symbol.for("drizzle:ViewBaseConfig"),nk=Symbol.for("drizzle:Schema"),V$=Symbol.for("drizzle:Columns"),q$=Symbol.for("drizzle:ExtraConfigColumns"),rk=Symbol.for("drizzle:OriginalName"),sk=Symbol.for("drizzle:BaseName"),rw=Symbol.for("drizzle:IsAlias"),U$=Symbol.for("drizzle:ExtraConfigBuilder"),FG=Symbol.for("drizzle:IsDrizzleTable");var IV,MV,RV,$V,FV,LV,zV,BV,VV,qV,Tj;let oa=(qV=Me,VV=sm,BV=rk,zV=nk,LV=V$,FV=q$,$V=sk,RV=rw,MV=FG,IV=U$,Tj=class{constructor(t,n,r){le(this,VV);le(this,BV);le(this,zV);le(this,LV);le(this,FV);le(this,$V);le(this,RV,!1);le(this,MV,!0);le(this,IV);this[sm]=this[rk]=t,this[nk]=n,this[sk]=r}},le(Tj,qV,"Table"),le(Tj,"Symbol",{Name:sm,Schema:nk,OriginalName:rk,Columns:V$,ExtraConfigColumns:q$,BaseName:sk,IsAlias:rw,ExtraConfigBuilder:U$}),Tj);function LG(e){return typeof e=="object"&&e!==null&&FG in e}function ube(e){return e!=null&&typeof e.getSQL=="function"}function dbe(e){var n;const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),(n=r.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}var UV;UV=Me;class Ia{constructor(t){le(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new kr([this])}}le(Ia,UV,"StringChunk");var WV;WV=Me;const Td=class Td{constructor(t){le(this,"decoder",zG);le(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return cbe.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:u}=r;return dbe(t.map(d=>{var f;if(Wr(d,Ia))return{sql:d.value.join(""),params:[]};if(Wr(d,sw))return{sql:a(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const h=[new Ia("(")];for(const[m,g]of d.entries())h.push(g),m<d.length-1&&h.push(new Ia(", "));return h.push(new Ia(")")),this.buildQueryFromSourceParams(h,r)}if(Wr(d,Td))return this.buildQueryFromSourceParams(d.queryChunks,{...r,inlineParams:c||d.shouldInlineParams});if(Wr(d,oa)){const h=d[oa.Symbol.Schema],m=d[oa.Symbol.Name];return{sql:h===void 0||d[rw]?a(m):a(h)+"."+a(m),params:[]}}if(Wr(d,Vm)){const h=i.getColumnCasing(d);if(n.invokeSource==="indexes")return{sql:a(h),params:[]};const m=d.table[oa.Symbol.Schema];return{sql:d.table[rw]||m===void 0?a(d.table[oa.Symbol.Name])+"."+a(h):a(m)+"."+a(d.table[oa.Symbol.Name])+"."+a(h),params:[]}}if(Wr(d,qG)){const h=d[im].schema,m=d[im].name;return{sql:h===void 0||d[im].isAlias?a(m):a(h)+"."+a(m),params:[]}}if(Wr(d,DD)){if(Wr(d.value,aw))return{sql:o(u.value++,d),params:[d],typings:["none"]};const h=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(Wr(h,Td))return this.buildQueryFromSourceParams([h],r);if(c)return{sql:this.mapInlineParam(h,r),params:[]};let m=["none"];return l&&(m=[l(d.encoder)]),{sql:o(u.value++,h),params:[h],typings:m}}return Wr(d,aw)?{sql:o(u.value++,d),params:[d],typings:["none"]}:Wr(d,Td.Aliased)&&d.fieldAlias!==void 0?{sql:a(d.fieldAlias),params:[]}:Wr(d,TD)?d._.isWith?{sql:a(d._.alias),params:[]}:this.buildQueryFromSourceParams([new Ia("("),d._.sql,new Ia(") "),new sw(d._.alias)],r):abe(d)?d.schema?{sql:a(d.schema)+"."+a(d.enumName),params:[]}:{sql:a(d.enumName),params:[]}:ube(d)?(f=d.shouldOmitSQLParens)!=null&&f.call(d)?this.buildQueryFromSourceParams([d.getSQL()],r):this.buildQueryFromSourceParams([new Ia("("),d.getSQL(),new Ia(")")],r):c?{sql:this.mapInlineParam(d,r),params:[]}:{sql:o(u.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const r=t.toString();return n(r==="[object Object]"?JSON.stringify(t):r)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Td.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};le(Td,WV,"SQL");let kr=Td;var HV;HV=Me;class sw{constructor(t){le(this,"brand");this.value=t}getSQL(){return new kr([this])}}le(sw,HV,"Name");const zG={mapFromDriverValue:e=>e},BG={mapToDriverValue:e=>e};({...zG,...BG});var KV;KV=Me;class DD{constructor(t,n=BG){le(this,"brand");this.value=t,this.encoder=n}getSQL(){return new kr([this])}}le(DD,KV,"Param");function iw(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Ia(e[0]));for(const[r,i]of t.entries())n.push(i,new Ia(e[r+1]));return new kr(n)}(e=>{function t(){return new kr([])}e.empty=t;function n(c){return new kr(c)}e.fromList=n;function r(c){return new kr([new Ia(c)])}e.raw=r;function i(c,u){const d=[];for(const[f,h]of c.entries())f>0&&u!==void 0&&d.push(u),d.push(h);return new kr(d)}e.join=i;function a(c){return new sw(c)}e.identifier=a;function o(c){return new aw(c)}e.placeholder=o;function l(c,u){return new DD(c,u)}e.param=l})(iw||(iw={}));(e=>{var n;n=Me;const r=class r{constructor(a,o){le(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};le(r,n,"SQL.Aliased");let t=r;e.Aliased=t})(kr||(kr={}));var GV;GV=Me;class aw{constructor(t){this.name=t}getSQL(){return new kr([this])}}le(aw,GV,"Placeholder");const VG=Symbol.for("drizzle:IsDrizzleView");var QV,YV,XV;XV=Me,YV=im,QV=VG;class qG{constructor({name:t,schema:n,selectedFields:r,query:i}){le(this,YV);le(this,QV,!0);this[im]={name:t,originalName:t,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new kr([this])}}le(qG,XV,"View");function fbe(e){return typeof e=="object"&&e!==null&&VG in e}Vm.prototype.getSQL=function(){return new kr([this])};oa.prototype.getSQL=function(){return new kr([this])};TD.prototype.getSQL=function(){return new kr([this])};function hbe(e){return e[oa.Symbol.Columns]}function mbe(e){return e[im].selectedFields}function Ns(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var ZV,JV;class Fy extends(JV=hn,ZV=Me,JV){generatedAlwaysAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}le(Fy,ZV,"PgIntColumnBaseBuilder");var e8,t8;class UG extends(t8=Fy,e8=Me,t8){constructor(t){super(t,"number","PgBigInt53")}build(t){return new WG(t,this.config)}}le(UG,e8,"PgBigInt53Builder");var n8,r8;class WG extends(r8=Kt,n8=Me,r8){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}le(WG,n8,"PgBigInt53");var s8,i8;class HG extends(i8=Fy,s8=Me,i8){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new KG(t,this.config)}}le(HG,s8,"PgBigInt64Builder");var a8,o8;class KG extends(o8=Kt,a8=Me,o8){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}le(KG,a8,"PgBigInt64");function qm(e,t){const{name:n,config:r}=Ns(e,t);return r.mode==="number"?new UG(n):new HG(n)}var l8,c8;class GG extends(c8=hn,l8=Me,c8){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new QG(t,this.config)}}le(GG,l8,"PgBigSerial53Builder");var u8,d8;class QG extends(d8=Kt,u8=Me,d8){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}le(QG,u8,"PgBigSerial53");var f8,h8;class YG extends(h8=hn,f8=Me,h8){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new XG(t,this.config)}}le(YG,f8,"PgBigSerial64Builder");var m8,p8;class XG extends(p8=Kt,m8=Me,p8){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}le(XG,m8,"PgBigSerial64");function pbe(e,t){const{name:n,config:r}=Ns(e,t);return r.mode==="number"?new GG(n):new YG(n)}var g8,x8;class ZG extends(x8=hn,g8=Me,x8){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new JG(t,this.config)}}le(ZG,g8,"PgBooleanBuilder");var v8,y8;class JG extends(y8=Kt,v8=Me,y8){getSQLType(){return"boolean"}}le(JG,v8,"PgBoolean");function Lr(e){return new ZG(e??"")}var b8,j8;class eQ extends(j8=hn,b8=Me,j8){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new tQ(t,this.config)}}le(eQ,b8,"PgCharBuilder");var w8,N8;class tQ extends(N8=Kt,w8=Me,N8){constructor(){super(...arguments);le(this,"length",this.config.length);le(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}le(tQ,w8,"PgChar");function gbe(e,t={}){const{name:n,config:r}=Ns(e,t);return new eQ(n,r)}var S8,C8;class nQ extends(C8=hn,S8=Me,C8){constructor(t){super(t,"string","PgCidr")}build(t){return new rQ(t,this.config)}}le(nQ,S8,"PgCidrBuilder");var k8,P8;class rQ extends(P8=Kt,k8=Me,P8){getSQLType(){return"cidr"}}le(rQ,k8,"PgCidr");function xbe(e){return new nQ(e??"")}var E8,_8;class sQ extends(_8=hn,E8=Me,_8){constructor(t,n,r){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(t){return new iQ(t,this.config)}}le(sQ,E8,"PgCustomColumnBuilder");var A8,T8;class iQ extends(T8=Kt,A8=Me,T8){constructor(n,r){super(n,r);le(this,"sqlName");le(this,"mapTo");le(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}le(iQ,A8,"PgCustomColumn");function vbe(e){return(t,n)=>{const{name:r,config:i}=Ns(t,n);return new sQ(r,i,e)}}var D8,O8;class Hp extends(O8=hn,D8=Me,O8){defaultNow(){return this.default(iw`now()`)}}le(Hp,D8,"PgDateColumnBaseBuilder");var I8,M8;class aQ extends(M8=Hp,I8=Me,M8){constructor(t){super(t,"date","PgDate")}build(t){return new oQ(t,this.config)}}le(aQ,I8,"PgDateBuilder");var R8,$8;class oQ extends($8=Kt,R8=Me,$8){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}le(oQ,R8,"PgDate");var F8,L8;class lQ extends(L8=Hp,F8=Me,L8){constructor(t){super(t,"string","PgDateString")}build(t){return new cQ(t,this.config)}}le(lQ,F8,"PgDateStringBuilder");var z8,B8;class cQ extends(B8=Kt,z8=Me,B8){getSQLType(){return"date"}}le(cQ,z8,"PgDateString");function ybe(e,t){const{name:n,config:r}=Ns(e,t);return(r==null?void 0:r.mode)==="date"?new aQ(n):new lQ(n)}var V8,q8;class uQ extends(q8=hn,V8=Me,q8){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new dQ(t,this.config)}}le(uQ,V8,"PgDoublePrecisionBuilder");var U8,W8;class dQ extends(W8=Kt,U8=Me,W8){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}le(dQ,U8,"PgDoublePrecision");function bbe(e){return new uQ(e??"")}var H8,K8;class fQ extends(K8=hn,H8=Me,K8){constructor(t){super(t,"string","PgInet")}build(t){return new hQ(t,this.config)}}le(fQ,H8,"PgInetBuilder");var G8,Q8;class hQ extends(Q8=Kt,G8=Me,Q8){getSQLType(){return"inet"}}le(hQ,G8,"PgInet");function jbe(e){return new fQ(e??"")}var Y8,X8;class mQ extends(X8=Fy,Y8=Me,X8){constructor(t){super(t,"number","PgInteger")}build(t){return new pQ(t,this.config)}}le(mQ,Y8,"PgIntegerBuilder");var Z8,J8;class pQ extends(J8=Kt,Z8=Me,J8){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}le(pQ,Z8,"PgInteger");function Ee(e){return new mQ(e??"")}var eq,tq;class gQ extends(tq=hn,eq=Me,tq){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new xQ(t,this.config)}}le(gQ,eq,"PgIntervalBuilder");var nq,rq;class xQ extends(rq=Kt,nq=Me,rq){constructor(){super(...arguments);le(this,"fields",this.config.intervalConfig.fields);le(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}le(xQ,nq,"PgInterval");function wbe(e,t={}){const{name:n,config:r}=Ns(e,t);return new gQ(n,r)}var sq,iq;class vQ extends(iq=hn,sq=Me,iq){constructor(t){super(t,"json","PgJson")}build(t){return new yQ(t,this.config)}}le(vQ,sq,"PgJsonBuilder");var aq,oq;class yQ extends(oq=Kt,aq=Me,oq){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}le(yQ,aq,"PgJson");function Nbe(e){return new vQ(e??"")}var lq,cq;class bQ extends(cq=hn,lq=Me,cq){constructor(t){super(t,"json","PgJsonb")}build(t){return new jQ(t,this.config)}}le(bQ,lq,"PgJsonbBuilder");var uq,dq;class jQ extends(dq=Kt,uq=Me,dq){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}le(jQ,uq,"PgJsonb");function Wi(e){return new bQ(e??"")}var fq,hq;class wQ extends(hq=hn,fq=Me,hq){constructor(t){super(t,"array","PgLine")}build(t){return new NQ(t,this.config)}}le(wQ,fq,"PgLineBuilder");var mq,pq;class NQ extends(pq=Kt,mq=Me,pq){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}le(NQ,mq,"PgLine");var gq,xq;class SQ extends(xq=hn,gq=Me,xq){constructor(t){super(t,"json","PgLineABC")}build(t){return new CQ(t,this.config)}}le(SQ,gq,"PgLineABCBuilder");var vq,yq;class CQ extends(yq=Kt,vq=Me,yq){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}le(CQ,vq,"PgLineABC");function Sbe(e,t){const{name:n,config:r}=Ns(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new wQ(n):new SQ(n)}var bq,jq;class kQ extends(jq=hn,bq=Me,jq){constructor(t){super(t,"string","PgMacaddr")}build(t){return new PQ(t,this.config)}}le(kQ,bq,"PgMacaddrBuilder");var wq,Nq;class PQ extends(Nq=Kt,wq=Me,Nq){getSQLType(){return"macaddr"}}le(PQ,wq,"PgMacaddr");function Cbe(e){return new kQ(e??"")}var Sq,Cq;class EQ extends(Cq=hn,Sq=Me,Cq){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new _Q(t,this.config)}}le(EQ,Sq,"PgMacaddr8Builder");var kq,Pq;class _Q extends(Pq=Kt,kq=Me,Pq){getSQLType(){return"macaddr8"}}le(_Q,kq,"PgMacaddr8");function kbe(e){return new EQ(e??"")}var Eq,_q;class AQ extends(_q=hn,Eq=Me,_q){constructor(t,n,r){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(t){return new TQ(t,this.config)}}le(AQ,Eq,"PgNumericBuilder");var Aq,Tq;class TQ extends(Tq=Kt,Aq=Me,Tq){constructor(n,r){super(n,r);le(this,"precision");le(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}le(TQ,Aq,"PgNumeric");function an(e,t){const{name:n,config:r}=Ns(e,t);return new AQ(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var Dq,Oq;class DQ extends(Oq=hn,Dq=Me,Oq){constructor(t){super(t,"array","PgPointTuple")}build(t){return new OQ(t,this.config)}}le(DQ,Dq,"PgPointTupleBuilder");var Iq,Mq;class OQ extends(Mq=Kt,Iq=Me,Mq){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}le(OQ,Iq,"PgPointTuple");var Rq,$q;class IQ extends($q=hn,Rq=Me,$q){constructor(t){super(t,"json","PgPointObject")}build(t){return new MQ(t,this.config)}}le(IQ,Rq,"PgPointObjectBuilder");var Fq,Lq;class MQ extends(Lq=Kt,Fq=Me,Lq){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}le(MQ,Fq,"PgPointObject");function Pbe(e,t){const{name:n,config:r}=Ns(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new DQ(n):new IQ(n)}function Ebe(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function W$(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,e[t+i]);return r.getFloat64(0,!0)}function RQ(e){const t=Ebe(e);let n=0;const r=t[n];n+=1;const i=new DataView(t.buffer),a=i.getUint32(n,r===1);if(n+=4,a&536870912&&(i.getUint32(n,r===1),n+=4),(a&65535)===1){const o=W$(t,n);n+=8;const l=W$(t,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var zq,Bq;class $Q extends(Bq=hn,zq=Me,Bq){constructor(t){super(t,"array","PgGeometry")}build(t){return new FQ(t,this.config)}}le($Q,zq,"PgGeometryBuilder");var Vq,qq;class FQ extends(qq=Kt,Vq=Me,qq){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return RQ(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}le(FQ,Vq,"PgGeometry");var Uq,Wq;class LQ extends(Wq=hn,Uq=Me,Wq){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new zQ(t,this.config)}}le(LQ,Uq,"PgGeometryObjectBuilder");var Hq,Kq;class zQ extends(Kq=Kt,Hq=Me,Kq){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=RQ(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}le(zQ,Hq,"PgGeometryObject");function _be(e,t){const{name:n,config:r}=Ns(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new $Q(n):new LQ(n)}var Gq,Qq;class BQ extends(Qq=hn,Gq=Me,Qq){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new VQ(t,this.config)}}le(BQ,Gq,"PgRealBuilder");var Yq,Xq;class VQ extends(Xq=Kt,Yq=Me,Xq){constructor(n,r){super(n,r);le(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}le(VQ,Yq,"PgReal");function Abe(e){return new BQ(e??"")}var Zq,Jq;class qQ extends(Jq=hn,Zq=Me,Jq){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new UQ(t,this.config)}}le(qQ,Zq,"PgSerialBuilder");var eU,tU;class UQ extends(tU=Kt,eU=Me,tU){getSQLType(){return"serial"}}le(UQ,eU,"PgSerial");function nt(e){return new qQ(e??"")}var nU,rU;class WQ extends(rU=Fy,nU=Me,rU){constructor(t){super(t,"number","PgSmallInt")}build(t){return new HQ(t,this.config)}}le(WQ,nU,"PgSmallIntBuilder");var sU,iU;class HQ extends(iU=Kt,sU=Me,iU){constructor(){super(...arguments);le(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}le(HQ,sU,"PgSmallInt");function Tbe(e){return new WQ(e??"")}var aU,oU;class KQ extends(oU=hn,aU=Me,oU){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new GQ(t,this.config)}}le(KQ,aU,"PgSmallSerialBuilder");var lU,cU;class GQ extends(cU=Kt,lU=Me,cU){getSQLType(){return"smallserial"}}le(GQ,lU,"PgSmallSerial");function Dbe(e){return new KQ(e??"")}var uU,dU;class QQ extends(dU=hn,uU=Me,dU){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new YQ(t,this.config)}}le(QQ,uU,"PgTextBuilder");var fU,hU;class YQ extends(hU=Kt,fU=Me,hU){constructor(){super(...arguments);le(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}le(YQ,fU,"PgText");function mt(e,t={}){const{name:n,config:r}=Ns(e,t);return new QQ(n,r)}var mU,pU;class XQ extends(pU=Hp,mU=Me,pU){constructor(t,n,r){super(t,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(t){return new ZQ(t,this.config)}}le(XQ,mU,"PgTimeBuilder");var gU,xU;class ZQ extends(xU=Kt,gU=Me,xU){constructor(n,r){super(n,r);le(this,"withTimezone");le(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(ZQ,gU,"PgTime");function Obe(e,t={}){const{name:n,config:r}=Ns(e,t);return new XQ(n,r.withTimezone??!1,r.precision)}var vU,yU;class JQ extends(yU=Hp,vU=Me,yU){constructor(t,n,r){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(t){return new eY(t,this.config)}}le(JQ,vU,"PgTimestampBuilder");var bU,jU;class eY extends(jU=Kt,bU=Me,jU){constructor(n,r){super(n,r);le(this,"withTimezone");le(this,"precision");le(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));le(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(eY,bU,"PgTimestamp");var wU,NU;class tY extends(NU=Hp,wU=Me,NU){constructor(t,n,r){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(t){return new nY(t,this.config)}}le(tY,wU,"PgTimestampStringBuilder");var SU,CU;class nY extends(CU=Kt,SU=Me,CU){constructor(n,r){super(n,r);le(this,"withTimezone");le(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(nY,SU,"PgTimestampString");function ge(e,t={}){const{name:n,config:r}=Ns(e,t);return(r==null?void 0:r.mode)==="string"?new tY(n,r.withTimezone??!1,r.precision):new JQ(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var kU,PU;class rY extends(PU=hn,kU=Me,PU){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(iw`gen_random_uuid()`)}build(t){return new sY(t,this.config)}}le(rY,kU,"PgUUIDBuilder");var EU,_U;class sY extends(_U=Kt,EU=Me,_U){getSQLType(){return"uuid"}}le(sY,EU,"PgUUID");function Ibe(e){return new rY(e??"")}var AU,TU;class iY extends(TU=hn,AU=Me,TU){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new aY(t,this.config)}}le(iY,AU,"PgVarcharBuilder");var DU,OU;class aY extends(OU=Kt,DU=Me,OU){constructor(){super(...arguments);le(this,"length",this.config.length);le(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}le(aY,DU,"PgVarchar");function ee(e,t={}){const{name:n,config:r}=Ns(e,t);return new iY(n,r)}var IU,MU;class oY extends(MU=hn,IU=Me,MU){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new lY(t,this.config)}}le(oY,IU,"PgBinaryVectorBuilder");var RU,$U;class lY extends($U=Kt,RU=Me,$U){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}le(lY,RU,"PgBinaryVector");function Mbe(e,t){const{name:n,config:r}=Ns(e,t);return new oY(n,r)}var FU,LU;class cY extends(LU=hn,FU=Me,LU){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new uY(t,this.config)}}le(cY,FU,"PgHalfVectorBuilder");var zU,BU;class uY extends(BU=Kt,zU=Me,BU){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}le(uY,zU,"PgHalfVector");function Rbe(e,t){const{name:n,config:r}=Ns(e,t);return new cY(n,r)}var VU,qU;class dY extends(qU=hn,VU=Me,qU){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new fY(t,this.config)}}le(dY,VU,"PgSparseVectorBuilder");var UU,WU;class fY extends(WU=Kt,UU=Me,WU){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}le(fY,UU,"PgSparseVector");function $be(e,t){const{name:n,config:r}=Ns(e,t);return new dY(n,r)}var HU,KU;class hY extends(KU=hn,HU=Me,KU){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new mY(t,this.config)}}le(hY,HU,"PgVectorBuilder");var GU,QU;class mY extends(QU=Kt,GU=Me,QU){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}le(mY,GU,"PgVector");function Fbe(e,t){const{name:n,config:r}=Ns(e,t);return new hY(n,r)}function Lbe(){return{bigint:qm,bigserial:pbe,boolean:Lr,char:gbe,cidr:xbe,customType:vbe,date:ybe,doublePrecision:bbe,inet:jbe,integer:Ee,interval:wbe,json:Nbe,jsonb:Wi,line:Sbe,macaddr:Cbe,macaddr8:kbe,numeric:an,point:Pbe,geometry:_be,real:Abe,serial:nt,smallint:Tbe,smallserial:Dbe,text:mt,time:Obe,timestamp:ge,uuid:Ibe,varchar:ee,bit:Mbe,halfvec:Rbe,sparsevec:$be,vector:Fbe}}const gE=Symbol.for("drizzle:PgInlineForeignKeys"),H$=Symbol.for("drizzle:EnableRLS");var YU,XU,ZU,JU,e9;class _x extends(e9=oa,JU=Me,ZU=gE,XU=H$,YU=oa.Symbol.ExtraConfigBuilder,e9){constructor(){super(...arguments);le(this,ZU,[]);le(this,XU,!1);le(this,YU)}}le(_x,JU,"PgTable"),le(_x,"Symbol",Object.assign({},oa.Symbol,{InlineForeignKeys:gE,EnableRLS:H$}));function zbe(e,t,n,r,i=e){const a=new _x(e,r,i),o=typeof t=="function"?t(Lbe()):t,l=Object.fromEntries(Object.entries(o).map(([d,f])=>{const h=f;h.setName(d);const m=h.build(a);return a[gE].push(...h.buildForeignKeys(m,a)),[d,m]})),c=Object.fromEntries(Object.entries(o).map(([d,f])=>{const h=f;h.setName(d);const m=h.buildExtraConfigColumn(a);return[d,m]})),u=Object.assign(a,l);return u[oa.Symbol.Columns]=l,u[oa.Symbol.ExtraConfigColumns]=c,n&&(u[_x.Symbol.ExtraConfigBuilder]=n),Object.assign(u,{enableRLS:()=>(u[_x.Symbol.EnableRLS]=!0,u)})}const rt=(e,t,n)=>zbe(e,t,n,void 0);var t9;t9=Me;class pY{constructor(t,n){this.unique=t,this.name=n}on(...t){return new Zj(t.map(n=>{if(Wr(n,kr))return n;n=n;const r=new Xj(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...t){return new Zj(t.map(n=>{if(Wr(n,kr))return n;n=n;const r=new Xj(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(t,...n){return new Zj(n.map(r=>{if(Wr(r,kr))return r;r=r;const i=new Xj(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),i}),this.unique,!0,this.name,t)}}le(pY,t9,"PgIndexBuilderOn");var n9;n9=Me;class Zj{constructor(t,n,r,i,a="btree"){le(this,"config");this.config={name:i,columns:t,unique:n,only:r,method:a}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new gY(this.config,t)}}le(Zj,n9,"PgIndexBuilder");var r9;r9=Me;class gY{constructor(t,n){le(this,"config");this.config={...t,table:n}}}le(gY,r9,"PgIndex");function tf(e){return new pY(!1,e)}const dr={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Dr(e,t){return t.includes(e.columnType)}function Bbe(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const Vbe=AD([jo(),ED(),_D(),jG()]),qbe=AD([Vbe,SG(nw()),wG(nw())]),Ube=PD(e=>e instanceof Buffer);function xY(e,t){const n=(t==null?void 0:t.zodInstance)??rbe,r=(t==null?void 0:t.coerce)??{};let i;return Bbe(e)&&(i=e.enumValues.length?n.enum(e.enumValues):n.string()),i||(Dr(e,["PgGeometry","PgPointTuple"])?i=n.tuple([n.number(),n.number()]):Dr(e,["PgGeometryObject","PgPointObject"])?i=n.object({x:n.number(),y:n.number()}):Dr(e,["PgHalfVector","PgVector"])?(i=n.array(n.number()),i=e.dimensions?i.length(e.dimensions):i):Dr(e,["PgLine"])?i=n.tuple([n.number(),n.number(),n.number()]):Dr(e,["PgLineABC"])?i=n.object({a:n.number(),b:n.number(),c:n.number()}):Dr(e,["PgArray"])?(i=n.array(xY(e.baseColumn,n)),i=e.size?i.length(e.size):i):e.dataType==="array"?i=n.array(n.any()):e.dataType==="number"?i=Wbe(e,n,r):e.dataType==="bigint"?i=Hbe(e,n,r):e.dataType==="boolean"?i=r===!0||r.boolean?n.coerce.boolean():n.boolean():e.dataType==="date"?i=r===!0||r.date?n.coerce.date():n.date():e.dataType==="string"?i=Kbe(e,n,r):e.dataType==="json"?i=qbe:e.dataType==="custom"?i=n.any():e.dataType==="buffer"&&(i=Ube)),i||(i=n.any()),i}function Wbe(e,t,n){let r=e.getSQLType().includes("unsigned"),i,a,o=!1;Dr(e,["MySqlTinyInt","SingleStoreTinyInt"])?(i=r?0:dr.INT8_MIN,a=r?dr.INT8_UNSIGNED_MAX:dr.INT8_MAX,o=!0):Dr(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=r?0:dr.INT16_MIN,a=r?dr.INT16_UNSIGNED_MAX:dr.INT16_MAX,o=!0):Dr(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=r?0:dr.INT24_MIN,a=r?dr.INT24_UNSIGNED_MAX:dr.INT24_MAX,o=Dr(e,["MySqlMediumInt","SingleStoreMediumInt"])):Dr(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=r?0:dr.INT32_MIN,a=r?dr.INT32_UNSIGNED_MAX:dr.INT32_MAX,o=!0):Dr(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=r?0:dr.INT48_MIN,a=r?dr.INT48_UNSIGNED_MAX:dr.INT48_MAX):Dr(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||Dr(e,["MySqlSerial","SingleStoreSerial"]),i=r?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):Dr(e,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let l=n===!0||n!=null&&n.number?t.coerce.number():t.number();return l=l.min(i).max(a),o?l.int():l}function Hbe(e,t,n){const r=e.getSQLType().includes("unsigned"),i=r?0n:dr.INT64_MIN,a=r?dr.INT64_UNSIGNED_MAX:dr.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(i).max(a)}function Kbe(e,t,n){if(Dr(e,["PgUUID"]))return t.string().uuid();let r,i,a=!1;Dr(e,["PgVarchar","SQLiteText"])?r=e.length:Dr(e,["MySqlVarChar","SingleStoreVarChar"])?r=e.length??dr.INT16_UNSIGNED_MAX:Dr(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?r=dr.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?r=dr.INT24_UNSIGNED_MAX:e.textType==="text"?r=dr.INT16_UNSIGNED_MAX:r=dr.INT8_UNSIGNED_MAX),Dr(e,["PgChar","MySqlChar","SingleStoreChar"])&&(r=e.length,a=!0),Dr(e,["PgBinaryVector"])&&(i=/^[01]+$/,r=e.dimensions);let o=n===!0||n!=null&&n.string?t.coerce.string():t.string();return o=i?o.regex(i):o,r&&a?o.length(r):r?o.max(r):o}function vY(e){return LG(e)?hbe(e):mbe(e)}function yY(e,t,n,r){const i={};for(const[a,o]of Object.entries(e)){if(!Wr(o,Vm)&&!Wr(o,kr)&&!Wr(o,kr.Aliased)&&typeof o=="object"){const f=LG(o)||fbe(o)?vY(o):o;i[a]=yY(f,t[a]??{},n,r);continue}const l=t[a];if(l!==void 0&&typeof l!="function"){i[a]=l;continue}const c=Wr(o,Vm)?o:void 0,u=c?xY(c,r):nw(),d=typeof l=="function"?l(u):u;n.never(c)||(i[a]=d,c&&(n.nullable(c)&&(i[a]=i[a].nullable()),n.optional(c)&&(i[a]=i[a].optional())))}return NG(i)}const Gbe={never:e=>{var t,n;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((n=e==null?void 0:e.generatedIdentity)==null?void 0:n.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},at=(e,t)=>{const n=vY(e);return yY(n,{},Gbe)},Un=rt("users",{id:ee("id",{length:100}).primaryKey(),email:ee("email",{length:255}).notNull().unique(),firstName:ee("first_name",{length:100}),lastName:ee("last_name",{length:100}),profileImageUrl:mt("profile_image_url"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull(),passwordHash:ee("password_hash",{length:255}),googleId:ee("google_id",{length:255}),emailVerified:Lr("email_verified").default(!1),emailVerificationToken:ee("email_verification_token",{length:255}),emailVerificationExpires:ge("email_verification_expires"),passwordResetToken:ee("password_reset_token",{length:255}),passwordResetExpires:ge("password_reset_expires"),totpSecret:ee("totp_secret",{length:255}),totpEnabled:Lr("totp_enabled").default(!1),backupCodes:mt("backup_codes"),lastLoginAt:ge("last_login_at"),isSystemAdmin:Lr("is_system_admin").default(!1)}),br=rt("organizations",{id:nt("id").primaryKey(),name:mt("name").notNull(),slug:ee("slug",{length:100}).notNull().unique(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull(),currency:ee("currency",{length:10}),logoUrl:mt("logo_url"),address:mt("address"),city:ee("city",{length:100}),state:ee("state",{length:100}),postalCode:ee("postal_code",{length:20}),country:ee("country",{length:100}),phone:ee("phone",{length:50}),email:ee("email",{length:255}),website:ee("website",{length:255}),taxId:ee("tax_id",{length:100}),registrationNumber:ee("registration_number",{length:100}),topLevelEntityLabel:ee("top_level_entity_label",{length:50}).default("Organization"),topLevelEntityLabelCustom:ee("top_level_entity_label_custom",{length:50}),programEntityLabel:ee("program_entity_label",{length:50}).default("Program"),programEntityLabelCustom:ee("program_entity_label_custom",{length:50})});rt("user_organizations",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id,{onDelete:"cascade"}),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),role:mt("role").default("member").notNull(),createdAt:ge("created_at").defaultNow().notNull()});const Qbe=rt("user_invitations",{id:nt("id").primaryKey(),email:ee("email",{length:255}).notNull(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),role:ee("role",{length:50}).default("member").notNull(),token:ee("token",{length:255}).notNull().unique(),expiresAt:ge("expires_at").notNull(),invitedBy:ee("invited_by",{length:100}).references(()=>Un.id),status:ee("status",{length:20}).default("pending").notNull(),acceptedAt:ge("accepted_at"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Ybe=rt("user_activity_logs",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).references(()=>Un.id,{onDelete:"set null"}),organizationId:Ee("organization_id").references(()=>br.id,{onDelete:"cascade"}),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),action:ee("action",{length:100}).notNull(),entityType:ee("entity_type",{length:100}),entityId:Ee("entity_id"),details:Wi("details"),ipAddress:ee("ip_address",{length:45}),userAgent:mt("user_agent"),createdAt:ge("created_at").defaultNow().notNull()}),bY=rt("programs",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),name:ee("name",{length:100}).notNull(),slug:ee("slug",{length:100}),description:mt("description"),managerId:ee("manager_id",{length:100}).references(()=>Un.id),startDate:ge("start_date"),endDate:ge("end_date"),status:ee("status",{length:20}).default("active"),isVirtual:Lr("is_virtual").default(!1),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({orgSlugUnique:Wp().on(e.organizationId,e.slug)})),kn=rt("projects",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),programId:Ee("program_id").references(()=>bY.id),name:ee("name",{length:255}).notNull(),code:ee("code",{length:50}).notNull(),description:mt("description"),startDate:ge("start_date"),endDate:ge("end_date"),budget:an("budget"),currency:ee("currency",{length:3}).default("USD"),status:ee("status",{length:50}).default("planning"),baselineCost:an("baseline_cost").default("0"),actualCost:an("actual_cost").default("0"),earnedValue:an("earned_value").default("0"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Xbe=rt("project_templates",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").references(()=>br.id),name:ee("name",{length:100}).notNull(),description:mt("description"),category:ee("category",{length:100}),isPublic:Lr("is_public").default(!1),metadata:Wi("metadata"),templateData:Wi("template_data"),usageCount:Ee("usage_count").default(0),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Ni=rt("tasks",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),parentId:Ee("parent_id"),wbsCode:ee("wbs_code",{length:50}),name:ee("name",{length:255}).notNull(),description:mt("description"),assignedTo:ee("assigned_to",{length:100}).references(()=>Un.id),assignedToName:ee("assigned_to_name",{length:255}),status:ee("status",{length:50}).default("not-started"),priority:ee("priority",{length:20}).default("medium"),customStatusId:Ee("custom_status_id").references(()=>zD.id),discipline:ee("discipline",{length:50}),disciplineLabel:ee("discipline_label",{length:100}),areaCode:ee("area_code",{length:50}),weightFactor:an("weight_factor"),constraintType:ee("constraint_type",{length:50}),constraintDate:ge("constraint_date"),baselineStart:ge("baseline_start"),baselineFinish:ge("baseline_finish"),actualStartDate:ge("actual_start_date"),actualFinishDate:ge("actual_finish_date"),workMode:ee("work_mode",{length:20}).default("fixed-duration"),isMilestone:Lr("is_milestone").default(!1),isCriticalPath:Lr("is_critical_path").default(!1),estimatedHours:an("estimated_hours"),actualHours:an("actual_hours"),baselineCost:an("baseline_cost").default("0"),actualCost:an("actual_cost").default("0"),earnedValue:an("earned_value").default("0"),startDate:ge("start_date"),endDate:ge("end_date"),progress:Ee("progress").default(0),createdBy:ee("created_by",{length:100}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),OD=rt("task_materials",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),materialId:Ee("material_id").notNull(),name:ee("name",{length:255}).notNull(),quantity:an("quantity").notNull(),unit:ee("unit",{length:50}).notNull(),cost:an("cost").default("0").notNull(),actualQuantity:an("actual_quantity").default("0"),actualCost:an("actual_cost").default("0"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Zbe=rt("material_consumptions",{id:nt("id").primaryKey(),taskMaterialId:Ee("task_material_id").notNull().references(()=>OD.id),quantity:an("quantity").notNull(),consumedAt:ge("consumed_at").defaultNow().notNull(),consumedBy:ee("consumed_by",{length:100}).references(()=>Un.id),notes:mt("notes")}),Jbe=rt("material_deliveries",{id:nt("id").primaryKey(),taskMaterialId:Ee("task_material_id").notNull().references(()=>OD.id),quantity:an("quantity").notNull(),deliveredAt:ge("delivered_at").defaultNow().notNull(),supplier:ee("supplier",{length:100}),notes:mt("notes")}),ID=rt("risks",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),code:ee("code",{length:50}).notNull(),title:ee("title",{length:255}).notNull(),description:mt("description"),category:ee("category",{length:100}),status:ee("status",{length:50}).default("identified"),probability:Ee("probability").default(3),impact:ee("impact",{length:20}).default("medium"),mitigationPlan:mt("mitigation_plan"),responseStrategy:ee("response_strategy",{length:50}),owner:ee("owner",{length:100}),costImpact:an("cost_impact"),scheduleImpact:Ee("schedule_impact"),riskExposure:an("risk_exposure"),contingencyReserve:an("contingency_reserve"),assignedTo:ee("assigned_to",{length:100}),targetResolutionDate:ge("target_resolution_date"),identifiedDate:ge("identified_date").defaultNow(),closedDate:ge("closed_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),MD=rt("issues",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),code:ee("code",{length:50}).notNull(),title:ee("title",{length:255}).notNull(),description:mt("description"),status:ee("status",{length:50}).default("open"),priority:ee("priority",{length:20}).default("medium"),category:ee("category",{length:100}),assignedTo:ee("assigned_to",{length:100}),reportedBy:ee("reported_by",{length:100}),reportedDate:ge("reported_date").defaultNow(),resolvedDate:ge("resolved_date"),resolution:mt("resolution"),issueType:ee("issue_type",{length:50}).default("standard"),impactCost:an("impact_cost"),impactSchedule:Ee("impact_schedule"),impactQuality:ee("impact_quality",{length:50}),impactSafety:ee("impact_safety",{length:50}),discipline:ee("discipline",{length:50}),escalationLevel:ee("escalation_level",{length:50}),targetResolutionDate:ge("target_resolution_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),RD=rt("stakeholders",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),name:ee("name",{length:100}).notNull(),role:ee("role",{length:100}),organization:ee("organization",{length:100}),email:ee("email",{length:255}),phone:ee("phone",{length:50}),influence:ee("influence",{length:20}).default("medium"),interest:ee("interest",{length:20}).default("medium"),notes:mt("notes"),communicationStyle:ee("communication_style",{length:50}),preferredChannel:ee("preferred_channel",{length:50}),updateFrequency:ee("update_frequency",{length:50}),engagementLevel:Ee("engagement_level"),lastInteractionDate:ge("last_interaction_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),jY=rt("cost_items",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),taskId:Ee("task_id").references(()=>Ni.id),category:ee("category",{length:100}).notNull(),description:ee("description",{length:255}).notNull(),budgeted:an("budgeted").notNull(),actual:an("actual").default("0"),variance:an("variance").default("0"),committed:an("committed").default("0"),forecast:an("forecast").default("0"),referenceNumber:ee("reference_number",{length:50}),status:ee("status",{length:50}),invoiceDate:ge("invoice_date"),paidDate:ge("paid_date"),currency:ee("currency",{length:10}).default("USD"),date:ge("date").defaultNow(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),eje=rt("communication_metrics",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id,{onDelete:"cascade"}),stakeholderId:Ee("stakeholder_id").references(()=>RD.id,{onDelete:"cascade"}),userId:Ee("user_id"),responseTimeAvg:Ee("response_time_avg"),overdueCount:Ee("overdue_count").default(0),messageCount:Ee("message_count").default(0),escalationCount:Ee("escalation_count").default(0),healthStatus:ee("health_status",{length:20}).default("healthy"),healthScore:Ee("health_score").default(100),lastInteractionDate:ge("last_interaction_date"),lastResponseDate:ge("last_response_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({projectStakeholderIdx:tf("comm_metrics_project_stakeholder_idx").on(e.projectId,e.stakeholderId),projectUserIdx:tf("comm_metrics_project_user_idx").on(e.projectId,e.userId)})),$D=rt("resource_groups",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),name:ee("name",{length:100}).notNull(),description:mt("description"),color:ee("color",{length:20}),parentId:Ee("parent_id"),createdAt:ge("created_at").defaultNow().notNull()}),tje=rt("resource_group_members",{id:nt("id").primaryKey(),groupId:Ee("group_id").notNull().references(()=>$D.id,{onDelete:"cascade"}),resourceId:Ee("resource_id").notNull(),joinedAt:ge("joined_at").defaultNow().notNull()});rt("resource_pricing_tiers",{id:nt("id").primaryKey(),resourceId:Ee("resource_id").notNull(),name:ee("name",{length:100}).notNull(),rate:an("rate").notNull(),currency:ee("currency",{length:3}).default("USD"),multiplier:an("multiplier").default("1.0"),effectiveDate:ge("effective_date"),createdAt:ge("created_at").defaultNow().notNull()});const Ly=rt("resources",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),groupId:Ee("group_id").references(()=>$D.id),name:ee("name",{length:100}).notNull(),type:ee("type",{length:50}).notNull(),discipline:ee("discipline",{length:100}),role:ee("role",{length:100}),status:ee("status",{length:50}).default("active"),email:ee("email",{length:255}),phone:ee("phone",{length:50}),calendarId:Ee("calendar_id"),availability:an("availability").default("100"),costType:ee("cost_type",{length:50}).default("hourly"),baseRate:an("base_rate"),currency:ee("currency",{length:3}).default("USD"),unit:ee("unit",{length:20}),notes:mt("notes"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),nje=rt("resource_assignments",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),resourceId:Ee("resource_id").notNull().references(()=>Ly.id),allocation:Ee("allocation").default(100).notNull(),effortHours:an("effort_hours"),cost:an("cost"),startDate:ge("start_date"),endDate:ge("end_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),rje=rt("resource_time_entries",{id:nt("id").primaryKey(),resourceId:Ee("resource_id").notNull().references(()=>Ly.id),taskId:Ee("task_id").references(()=>Ni.id),projectId:Ee("project_id").notNull().references(()=>kn.id),date:ge("date").notNull(),hours:an("hours").notNull(),description:mt("description"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),wY=rt("tags",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),name:ee("name",{length:100}).notNull(),category:ee("category",{length:50}),color:ee("color",{length:20}).default("#007bff"),description:mt("description"),usageCount:Ee("usage_count").default(0).notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({orgNameUnique:Wp("tags_org_name_unique").on(e.organizationId,e.name),orgCategoryIdx:tf("tags_org_category_idx").on(e.organizationId,e.category)})),sje=obe("tag_entity_type",["organization","program","project","task","risk","issue","document","resource","contact","lesson"]),ije=rt("tag_assignments",{id:nt("id").primaryKey(),tagId:Ee("tag_id").notNull().references(()=>wY.id,{onDelete:"cascade"}),entityType:sje("entity_type").notNull(),entityId:Ee("entity_id").notNull(),createdAt:ge("created_at").defaultNow().notNull()},e=>({tagEntityUnique:Wp("tag_assignments_unique").on(e.tagId,e.entityType,e.entityId),entityIdx:tf("tag_assignments_entity_idx").on(e.entityType,e.entityId)})),aje=rt("lessons_learned",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),projectId:Ee("project_id").references(()=>kn.id),issueId:Ee("issue_id").references(()=>MD.id),riskId:Ee("risk_id").references(()=>ID.id),category:ee("category",{length:50}).notNull(),title:ee("title",{length:255}).notNull(),description:mt("description").notNull(),rootCause:mt("root_cause"),actionTaken:mt("action_taken"),outcome:mt("outcome"),impactRating:Ee("impact_rating").default(1),applicability:ee("applicability",{length:50}).default("global"),createdBy:ee("created_by",{length:100}).references(()=>Un.id),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),NY=rt("documents",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),documentNumber:ee("document_number",{length:100}),name:ee("name",{length:200}).notNull(),title:ee("title",{length:255}),description:mt("description"),category:ee("category",{length:50}),discipline:ee("discipline",{length:50}),documentType:ee("document_type",{length:50}),revision:ee("revision",{length:20}).default("0"),status:ee("status",{length:50}).default("draft"),fileUrl:mt("file_url"),fileType:ee("file_type",{length:50}),sizeBytes:Ee("size_bytes"),uploadedBy:ee("uploaded_by",{length:100}).references(()=>Un.id),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),SY=rt("notification_rules",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),name:ee("name",{length:150}).notNull(),description:mt("description"),eventType:ee("event_type",{length:50}),condition:Wi("condition"),recipients:Wi("recipients").$type().default([]),channel:ee("channel",{length:20}).default("email"),isActive:Lr("is_active").default(!0),createdBy:ee("created_by",{length:100}).references(()=>Un.id),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),oje=rt("notification_logs",{id:nt("id").primaryKey(),notificationId:Ee("notification_id").references(()=>TY.id),ruleId:Ee("rule_id").references(()=>SY.id),projectId:Ee("project_id").references(()=>kn.id),recipient:ee("recipient",{length:255}),channel:ee("channel",{length:20}),status:ee("status",{length:50}),sentAt:ge("sent_at").defaultNow(),error:mt("error"),createdAt:ge("created_at").defaultNow().notNull()});rt("push_subscriptions",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).references(()=>Un.id,{onDelete:"cascade"}).notNull(),endpoint:mt("endpoint").notNull(),p256dh:mt("p256dh").notNull(),auth:mt("auth").notNull(),enabled:Lr("enabled").default(!0),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()});const CY=rt("subscription_plans",{id:nt("id").primaryKey(),tier:ee("tier",{length:50}).notNull().unique(),name:ee("name",{length:100}).notNull(),priceMonthly:Ee("price_monthly"),priceYearly:Ee("price_yearly"),currency:ee("currency",{length:3}).default("USD"),storageQuotaBytes:qm("storage_quota_bytes",{mode:"number"}),aiTokenLimit:Ee("ai_token_limit"),projectLimit:Ee("project_limit"),userLimit:Ee("user_limit"),features:Wi("features"),isActive:Lr("is_active").default(!0),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),lje=rt("organization_subscriptions",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),planId:Ee("plan_id").notNull().references(()=>CY.id),status:ee("status",{length:50}).default("active"),startDate:ge("start_date").defaultNow(),endDate:ge("end_date"),autoRenew:Lr("auto_renew").default(!0),paymentMethodId:ee("payment_method_id",{length:100}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),cje=rt("ai_action_logs",{id:nt("id").primaryKey(),actionId:ee("action_id",{length:100}).notNull(),userId:ee("user_id",{length:100}).references(()=>Un.id),projectId:Ee("project_id").references(()=>kn.id),action:ee("action",{length:100}).notNull(),details:Wi("details"),status:ee("status",{length:50}).notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),uje=rt("ai_usage_summary",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),month:ee("month",{length:7}).notNull(),tokensUsed:Ee("tokens_used").default(0).notNull(),requestCount:Ee("request_count").default(0).notNull(),tokenLimit:Ee("token_limit"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({orgMonthUnique:Wp("ai_usage_org_month_unique").on(e.organizationId,e.month)})),kY=rt("cloud_storage_connections",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),provider:ee("provider",{length:50}).notNull(),accessToken:mt("access_token"),refreshToken:mt("refresh_token"),tokenExpiresAt:ge("token_expires_at"),syncStatus:ee("sync_status",{length:50}).default("inactive"),lastSyncAt:ge("last_sync_at"),syncError:mt("sync_error"),connectedBy:ee("connected_by",{length:100}).references(()=>Un.id),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({orgProviderUnique:Wp("cloud_storage_org_provider_unique").on(e.organizationId,e.provider)})),dje=rt("cloud_synced_files",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),connectionId:Ee("connection_id").references(()=>kY.id,{onDelete:"cascade"}),name:ee("name",{length:255}).notNull(),cloudFileId:ee("cloud_file_id",{length:255}).notNull(),cloudFilePath:mt("cloud_file_path"),fileType:ee("file_type",{length:50}),sizeBytes:qm("size_bytes",{mode:"number"}),lastSyncedAt:ge("last_synced_at"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),fje=rt("custom_dashboards",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id,{onDelete:"cascade"}),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),name:ee("name",{length:100}).notNull(),layout:Wi("layout").notNull(),isDefault:Lr("is_default").default(!1).notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({userProjectUnique:Wp("custom_dashboards_user_project_unique").on(e.userId,e.projectId)})),hje=rt("bug_reports",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id,{onDelete:"cascade"}),organizationId:Ee("organization_id").references(()=>br.id,{onDelete:"set null"}),title:ee("title",{length:255}).notNull(),description:mt("description").notNull(),category:ee("category",{length:50}).notNull(),severity:ee("severity",{length:20}).default("medium"),status:ee("status",{length:20}).default("pending"),stepsToReproduce:mt("steps_to_reproduce"),expectedBehavior:mt("expected_behavior"),actualBehavior:mt("actual_behavior"),screenshots:Wi("screenshots"),browserInfo:Wi("browser_info"),deviceInfo:Wi("device_info"),sanitized:Lr("sanitized").default(!1),sanitizedAt:ge("sanitized_at"),sanitizedBy:ee("sanitized_by",{length:100}),moderationNotes:mt("moderation_notes"),backlogItemId:Ee("backlog_item_id"),backlogStatus:ee("backlog_status",{length:50}),resolvedAt:ge("resolved_at"),resolvedBy:ee("resolved_by",{length:100}),resolutionNotes:mt("resolution_notes"),internalResolutionNotes:mt("internal_resolution_notes"),initialNotificationSent:Lr("initial_notification_sent").default(!1),resolutionNotificationSent:Lr("resolution_notification_sent").default(!1),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()},e=>({userIdIdx:tf("bug_reports_user_id_idx").on(e.userId),statusIdx:tf("bug_reports_status_idx").on(e.status),createdAtIdx:tf("bug_reports_created_at_idx").on(e.createdAt)})),PY=rt("contacts",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id,{onDelete:"cascade"}),firstName:ee("first_name",{length:100}).notNull(),lastName:ee("last_name",{length:100}).notNull(),email:ee("email",{length:255}),phone:ee("phone",{length:50}),jobTitle:ee("job_title",{length:100}),company:ee("company",{length:100}),type:ee("type",{length:50}),role:ee("role",{length:100}),notes:mt("notes"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),mje=rt("contact_logs",{id:nt("id").primaryKey(),contactId:Ee("contact_id").notNull().references(()=>PY.id,{onDelete:"cascade"}),userId:ee("user_id",{length:100}).references(()=>Un.id),type:ee("type",{length:50}),notes:mt("notes"),date:ge("date").defaultNow(),createdAt:ge("created_at").defaultNow().notNull()}),FD=rt("chat_conversations",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),taskId:Ee("task_id").references(()=>Ni.id,{onDelete:"cascade"}),type:ee("type",{length:50}).default("channel"),name:ee("name",{length:100}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),pje=rt("chat_participants",{id:nt("id").primaryKey(),conversationId:Ee("conversation_id").notNull().references(()=>FD.id,{onDelete:"cascade"}),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),joinedAt:ge("joined_at").defaultNow().notNull(),lastReadAt:ge("last_read_at"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),EY=rt("chat_messages",{id:nt("id").primaryKey(),conversationId:Ee("conversation_id").references(()=>FD.id,{onDelete:"cascade"}),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),message:mt("message").notNull(),attachments:Wi("attachments"),deletedAt:ge("deleted_at"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),gje=rt("message_reactions",{id:nt("id").primaryKey(),messageId:Ee("message_id").notNull().references(()=>EY.id,{onDelete:"cascade"}),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id,{onDelete:"cascade"}),emoji:ee("emoji",{length:50}).notNull(),createdAt:ge("created_at").defaultNow().notNull()}),LD=rt("change_requests",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),code:ee("code",{length:50}).notNull(),title:ee("title",{length:255}).notNull(),description:mt("description"),status:ee("status",{length:50}).default("draft"),priority:ee("priority",{length:20}).default("medium"),reason:mt("reason"),impactAnalysis:mt("impact_analysis"),costImpact:an("cost_impact"),scheduleImpact:Ee("schedule_impact"),requestedBy:ee("requested_by",{length:100}).references(()=>Un.id),requestedDate:ge("requested_date").defaultNow(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),xje=rt("change_request_approvals",{id:nt("id").primaryKey(),changeRequestId:Ee("change_request_id").notNull().references(()=>LD.id,{onDelete:"cascade"}),reviewerId:ee("reviewer_id",{length:100}).references(()=>Un.id),status:ee("status",{length:50}).default("pending"),sequence:Ee("sequence").default(1),comments:mt("comments"),approvalDate:ge("approval_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),vje=rt("change_request_tasks",{id:nt("id").primaryKey(),changeRequestId:Ee("change_request_id").notNull().references(()=>LD.id,{onDelete:"cascade"}),taskId:Ee("task_id").references(()=>Ni.id),description:mt("description"),createdAt:ge("created_at").defaultNow().notNull()}),yje=rt("change_request_templates",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),name:ee("name",{length:100}).notNull(),fields:Wi("fields"),createdAt:ge("created_at").defaultNow().notNull()}),bje=rt("task_dependencies",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id),predecessorId:Ee("predecessor_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),successorId:Ee("successor_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),type:ee("type",{length:20}).default("fs"),lag:Ee("lag").default(0),lagDays:Ee("lag_days").default(0),createdAt:ge("created_at").defaultNow().notNull()}),zD=rt("project_status",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id,{onDelete:"cascade"}),name:ee("name",{length:50}).notNull(),code:ee("code",{length:20}),color:ee("color",{length:20}),order:Ee("order").default(0),isDefault:Lr("is_default").default(!1),isActive:Lr("is_active").default(!0),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),jje=rt("kanban_columns",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id,{onDelete:"cascade"}),name:ee("name",{length:50}).notNull(),statusId:ee("status_id",{length:50}),customStatusId:Ee("custom_status_id").references(()=>zD.id),order:Ee("order").default(0),isActive:Lr("is_active").default(!0),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),wje=rt("exchange_rates",{id:nt("id").primaryKey(),baseCurrency:ee("base_currency",{length:3}).default("USD").notNull(),targetCurrency:ee("target_currency",{length:3}).notNull(),rate:an("rate").notNull(),date:ge("date").notNull(),source:ee("source",{length:50}),createdAt:ge("created_at").defaultNow().notNull()}),Nje=rt("exchange_rate_sync",{id:nt("id").primaryKey(),status:ee("status",{length:50}),syncDate:ge("sync_date"),error:mt("error")}),_Y=rt("cost_breakdown_structure",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id,{onDelete:"cascade"}),parentId:Ee("parent_id"),code:ee("code",{length:50}).notNull(),name:ee("name",{length:255}).notNull(),description:mt("description"),level:Ee("level").default(1),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Sje=rt("cost_item_cbs_links",{id:nt("id").primaryKey(),costItemId:Ee("cost_item_id").notNull().references(()=>jY.id,{onDelete:"cascade"}),cbsId:Ee("cbs_id").notNull().references(()=>_Y.id,{onDelete:"cascade"}),allocation:an("allocation").default("100"),createdAt:ge("created_at").defaultNow().notNull()}),Cje=rt("procurement_requisitions",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),description:mt("description").notNull(),requisitionNumber:ee("requisition_number",{length:50}),requestedBy:ee("requested_by",{length:100}).references(()=>Un.id),status:ee("status",{length:50}).default("draft"),requestedDate:ge("requested_date"),requiredDate:ge("required_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),kje=rt("resource_requirements",{id:nt("id").primaryKey(),projectId:Ee("project_id").references(()=>kn.id),taskId:Ee("task_id").references(()=>Ni.id),resourceType:ee("resource_type",{length:50}),quantity:an("quantity"),startDate:ge("start_date"),endDate:ge("end_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Pje=rt("inventory_allocations",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),resourceId:Ee("resource_id").references(()=>Ly.id),quantity:an("quantity"),allocatedDate:ge("allocated_date"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Eje=rt("google_connections",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),accessToken:mt("access_token"),refreshToken:mt("refresh_token"),scope:mt("scope"),expiryDate:qm("expiry_date",{mode:"number"}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),AY=rt("ai_conversations",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),projectId:Ee("project_id").references(()=>kn.id),title:ee("title",{length:255}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),_je=rt("ai_messages",{id:nt("id").primaryKey(),conversationId:Ee("conversation_id").notNull().references(()=>AY.id,{onDelete:"cascade"}),role:ee("role",{length:20}).notNull(),content:mt("content").notNull(),createdAt:ge("created_at").defaultNow().notNull()}),Aje=rt("ai_usage",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),organizationId:Ee("organization_id").references(()=>br.id),tokensInput:Ee("tokens_input"),tokensOutput:Ee("tokens_output"),model:ee("model",{length:50}),createdAt:ge("created_at").defaultNow().notNull()}),Tje=rt("email_templates",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),name:ee("name",{length:100}).notNull(),type:ee("type",{length:50}),subject:ee("subject",{length:255}),body:mt("body"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Dje=rt("sent_emails",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),recipient:ee("recipient",{length:255}).notNull(),subject:ee("subject",{length:255}),sentAt:ge("sent_at").defaultNow().notNull(),status:ee("status",{length:50})}),Oje=rt("email_usage",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),emailsSent:Ee("emails_sent").default(0).notNull(),month:ee("month",{length:7}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Ije=rt("project_files",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),organizationId:Ee("organization_id").references(()=>br.id),name:ee("name",{length:255}).notNull(),url:mt("url").notNull(),size:Ee("size"),type:ee("type",{length:50}),uploadedBy:ee("uploaded_by",{length:100}).references(()=>Un.id),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),Mje=rt("storage_quota",{id:nt("id").primaryKey(),organizationId:Ee("organization_id").notNull().references(()=>br.id),usedBytes:qm("used_bytes",{mode:"number"}).default(0),limitBytes:qm("limit_bytes",{mode:"number"}),updatedAt:ge("updated_at").defaultNow().notNull()}),Rje=rt("task_documents",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),documentId:Ee("document_id").notNull().references(()=>NY.id,{onDelete:"cascade"}),createdAt:ge("created_at").defaultNow().notNull()}),$je=rt("task_risks",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),riskId:Ee("risk_id").notNull().references(()=>ID.id,{onDelete:"cascade"}),createdAt:ge("created_at").defaultNow().notNull()}),Fje=rt("task_issues",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id,{onDelete:"cascade"}),issueId:Ee("issue_id").notNull().references(()=>MD.id,{onDelete:"cascade"}),createdAt:ge("created_at").defaultNow().notNull()}),TY=rt("notifications",{id:nt("id").primaryKey(),userId:ee("user_id",{length:100}).notNull().references(()=>Un.id),title:ee("title",{length:255}).notNull(),message:mt("message"),type:ee("type",{length:50}),read:Lr("read").default(!1),createdAt:ge("created_at").defaultNow().notNull()}),Lje=rt("project_events",{id:nt("id").primaryKey(),projectId:Ee("project_id").notNull().references(()=>kn.id),title:ee("title",{length:255}).notNull(),description:mt("description"),startDate:ge("start_date"),endDate:ge("end_date"),type:ee("type",{length:50}),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),zje=rt("stakeholder_raci",{id:nt("id").primaryKey(),taskId:Ee("task_id").notNull().references(()=>Ni.id),stakeholderId:Ee("stakeholder_id").notNull().references(()=>RD.id),projectId:Ee("project_id").references(()=>kn.id),resourceId:Ee("resource_id").references(()=>Ly.id),inheritedFromTaskId:Ee("inherited_from_task_id").references(()=>Ni.id),raciType:ee("raci_type",{length:1}).notNull(),isInherited:Lr("is_inherited").default(!1),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()});at(Un);at(Xbe);const DY=at(kn),Bje=at(Ni),Vje=at(ID),qje=at(MD);at(RD);at(jY);at(br);at(bY);const Uje=at(Ly),Wje=at(NY),Hje=at(SY),Kje=at(wY).omit({id:!0,usageCount:!0,createdAt:!0,updatedAt:!0});Kje.partial();at(ije).omit({id:!0,createdAt:!0});const Gje=at(aje).omit({id:!0,createdAt:!0,updatedAt:!0});Gje.partial();const Qje=at(eje).omit({id:!0,createdAt:!0,updatedAt:!0});Qje.partial();at(CY);at(lje);at(uje);at(kY);at(dje);at(fje);const Yje=at(hje).omit({id:!0,sanitized:!0,sanitizedAt:!0,sanitizedBy:!0,moderationNotes:!0,backlogItemId:!0,backlogStatus:!0,resolvedAt:!0,resolvedBy:!0,resolutionNotes:!0,internalResolutionNotes:!0,initialNotificationSent:!0,resolutionNotificationSent:!0,createdAt:!0,updatedAt:!0});Yje.partial();at(PY);at(mje);at(FD);at(pje);at(EY);at(LD);at(xje);at(vje);at(yje);at(bje);const Xje=at(zD);Xje.partial();const Zje=at(jje);Zje.partial();at(wje);at(Nje);at(Cje);at(kje);at(Pje);at(Eje);at(AY);at(_je);at(Aje);at(Tje);at(Dje);at(Oje);at(Ije);at(Mje);at(Rje);at($je);at(Fje);const Jje=at(TY);Jje.partial();at(oje);at(Lje);at(zje);at(_Y);at(Sje);at(OD);at(Zbe);at(Jbe);at($D);at(tje);at(rje);at(gje);at(cje);at(nje);at(Qbe);at(Ybe);const zt=C1,xE=vD,e0e=k1,OY=x.forwardRef(({className:e,...t},n)=>s.jsx(qp,{ref:n,className:he("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));OY.displayName=qp.displayName;const Rt=x.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(e0e,{children:[s.jsx(OY,{}),s.jsxs(Up,{ref:r,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(P1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Fn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rt.displayName=Up.displayName;const Bt=({className:e,...t})=>s.jsx("div",{className:he("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Bt.displayName="DialogHeader";const on=({className:e,...t})=>s.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});on.displayName="DialogFooter";const Vt=x.forwardRef(({className:e,...t},n)=>s.jsx(Iy,{ref:n,className:he("text-lg font-semibold leading-none tracking-tight",e),...t}));Vt.displayName=Iy.displayName;const ir=x.forwardRef(({className:e,...t},n)=>s.jsx(My,{ref:n,className:he("text-sm text-muted-foreground",e),...t}));ir.displayName=My.displayName;var t0e="Label",IY=x.forwardRef((e,t)=>s.jsx(Qe.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));IY.displayName=t0e;var MY=IY;const n0e=Vf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=x.forwardRef(({className:e,...t},n)=>s.jsx(MY,{ref:n,className:he(n0e(),e),...t}));G.displayName=MY.displayName;const K$=Dve,RY=x.createContext({}),Oc=({...e})=>s.jsx(RY.Provider,{value:{name:e.name},children:s.jsx(Rve,{...e})}),D1=()=>{const e=x.useContext(RY),t=x.useContext($Y),{getFieldState:n,formState:r}=A1(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},$Y=x.createContext({}),Tl=x.forwardRef(({className:e,...t},n)=>{const r=x.useId();return s.jsx($Y.Provider,{value:{id:r},children:s.jsx("div",{ref:n,className:he("space-y-2",e),...t})})});Tl.displayName="FormItem";const Dl=x.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=D1();return s.jsx(G,{ref:n,className:he(r&&"text-destructive",e),htmlFor:i,...t})});Dl.displayName="FormLabel";const Ol=x.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:a}=D1();return s.jsx(e1,{ref:t,id:r,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});Ol.displayName="FormControl";const r0e=x.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=D1();return s.jsx("p",{ref:n,id:r,className:he("text-sm text-muted-foreground",e),...t})});r0e.displayName="FormDescription";const Il=x.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:a}=D1(),o=i?String((i==null?void 0:i.message)??""):t;return o?s.jsx("p",{ref:r,id:a,className:he("text-sm font-medium text-destructive",e),...n,children:o}):null});Il.displayName="FormMessage";const Ht=x.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:he("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ht.displayName="Textarea";function Pv(e,[t,n]){return Math.min(n,Math.max(t,e))}var s0e=x.createContext(void 0);function Yu(e){const t=x.useContext(s0e);return e||t||"ltr"}function zy(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var i0e=[" ","Enter","ArrowUp","ArrowDown"],a0e=[" ","Enter"],By="Select",[O1,I1,o0e]=Fp(By),[Kp]=Er(By,[o0e,Qu]),M1=Qu(),[l0e,Xu]=Kp(By),[c0e,u0e]=Kp(By),FY=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=M1(t),[v,b]=x.useState(null),[y,j]=x.useState(null),[N,w]=x.useState(!1),S=Yu(u),[k=!1,C]=ni({prop:r,defaultProp:i,onChange:a}),[A,D]=ni({prop:o,defaultProp:l,onChange:c}),P=x.useRef(null),_=v?g||!!v.closest("form"):!0,[O,M]=x.useState(new Set),T=Array.from(O).map(R=>R.props.value).join(";");return s.jsx(p1,{...p,children:s.jsxs(l0e,{required:m,scope:t,trigger:v,onTriggerChange:b,valueNode:y,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:Gr(),value:A,onValueChange:D,open:k,onOpenChange:C,dir:S,triggerPointerDownPosRef:P,disabled:h,children:[s.jsx(O1.Provider,{scope:t,children:s.jsx(c0e,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(R=>{M(F=>new Set(F).add(R))},[]),onNativeOptionRemove:x.useCallback(R=>{M(F=>{const E=new Set(F);return E.delete(R),E})},[]),children:n})}),_?s.jsxs(cX,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:R=>D(R.target.value),disabled:h,form:g,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(O)]},T):null]})})};FY.displayName=By;var LY="SelectTrigger",zY=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=M1(n),o=Xu(LY,n),l=o.disabled||r,c=kt(t,o.onTriggerChange),u=I1(n),d=x.useRef("touch"),[f,h,m]=uX(p=>{const v=u().filter(j=>!j.disabled),b=v.find(j=>j.value===o.value),y=dX(v,p,b);y!==void 0&&o.onValueChange(y.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(Ty,{asChild:!0,...a,children:s.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":lX(o.value)?"":void 0,...i,ref:c,onClick:Re(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:Re(i.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Re(i.onKeyDown,p=>{const v=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(v&&p.key===" ")&&i0e.includes(p.key)&&(g(),p.preventDefault())})})})});zY.displayName=LY;var BY="SelectValue",VY=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=e,c=Xu(BY,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=kt(t,c.onValueNodeChange);return zr(()=>{u(d)},[u,d]),s.jsx(Qe.span,{...l,ref:f,style:{pointerEvents:"none"},children:lX(c.value)?s.jsx(s.Fragment,{children:o}):a})});VY.displayName=BY;var d0e="SelectIcon",qY=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return s.jsx(Qe.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});qY.displayName=d0e;var f0e="SelectPortal",UY=e=>s.jsx(Lp,{asChild:!0,...e});UY.displayName=f0e;var Pf="SelectContent",WY=x.forwardRef((e,t)=>{const n=Xu(Pf,e.__scopeSelect),[r,i]=x.useState();if(zr(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?zf.createPortal(s.jsx(HY,{scope:e.__scopeSelect,children:s.jsx(O1.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(KY,{...e,ref:t})});WY.displayName=Pf;var oo=10,[HY,Zu]=Kp(Pf),h0e="SelectContentImpl",m0e=Pu("SelectContent.RemoveScroll"),KY=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v,...b}=e,y=Xu(Pf,n),[j,N]=x.useState(null),[w,S]=x.useState(null),k=kt(t,te=>N(te)),[C,A]=x.useState(null),[D,P]=x.useState(null),_=I1(n),[O,M]=x.useState(!1),T=x.useRef(!1);x.useEffect(()=>{if(j)return S1(j)},[j]),w1();const R=x.useCallback(te=>{const[pe,...J]=_().map(re=>re.ref.current),[xe]=J.slice(-1),ye=document.activeElement;for(const re of te)if(re===ye||(re==null||re.scrollIntoView({block:"nearest"}),re===pe&&w&&(w.scrollTop=0),re===xe&&w&&(w.scrollTop=w.scrollHeight),re==null||re.focus(),document.activeElement!==ye))return},[_,w]),F=x.useCallback(()=>R([C,j]),[R,C,j]);x.useEffect(()=>{O&&F()},[O,F]);const{onOpenChange:E,triggerPointerDownPosRef:B}=y;x.useEffect(()=>{if(j){let te={x:0,y:0};const pe=xe=>{var ye,re;te={x:Math.abs(Math.round(xe.pageX)-(((ye=B.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((re=B.current)==null?void 0:re.y)??0))}},J=xe=>{te.x<=10&&te.y<=10?xe.preventDefault():j.contains(xe.target)||E(!1),document.removeEventListener("pointermove",pe),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",J,{capture:!0})}}},[j,E,B]),x.useEffect(()=>{const te=()=>E(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[E]);const[L,I]=uX(te=>{const pe=_().filter(ye=>!ye.disabled),J=pe.find(ye=>ye.ref.current===document.activeElement),xe=dX(pe,te,J);xe&&setTimeout(()=>xe.ref.current.focus())}),q=x.useCallback((te,pe,J)=>{const xe=!T.current&&!J;(y.value!==void 0&&y.value===pe||xe)&&(A(te),xe&&(T.current=!0))},[y.value]),$=x.useCallback(()=>j==null?void 0:j.focus(),[j]),z=x.useCallback((te,pe,J)=>{const xe=!T.current&&!J;(y.value!==void 0&&y.value===pe||xe)&&P(te)},[y.value]),Y=r==="popper"?vE:GY,ne=Y===vE?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return s.jsx(HY,{scope:n,content:j,viewport:w,onViewportChange:S,itemRefCallback:q,selectedItem:C,onItemLeave:$,itemTextRefCallback:z,focusSelectedItem:F,selectedItemText:D,position:r,isPositioned:O,searchRef:L,children:s.jsx(Oy,{as:m0e,allowPinchZoom:!0,children:s.jsx(Dy,{asChild:!0,trapped:y.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:Re(i,te=>{var pe;(pe=y.trigger)==null||pe.focus({preventScroll:!0}),te.preventDefault()}),children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(Y,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:te=>te.preventDefault(),...b,...ne,onPlaced:()=>M(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Re(b.onKeyDown,te=>{const pe=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!pe&&te.key.length===1&&I(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let xe=_().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(te.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const ye=te.target,re=xe.indexOf(ye);xe=xe.slice(re+1)}setTimeout(()=>R(xe)),te.preventDefault()}})})})})})})});KY.displayName=h0e;var p0e="SelectItemAlignedPosition",GY=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=Xu(Pf,n),o=Zu(Pf,n),[l,c]=x.useState(null),[u,d]=x.useState(null),f=kt(t,k=>d(k)),h=I1(n),m=x.useRef(!1),g=x.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:b,focusSelectedItem:y}=o,j=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&p&&v&&b){const k=a.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),D=b.getBoundingClientRect();if(a.dir!=="rtl"){const ye=D.left-C.left,re=A.left-ye,ue=k.left-re,ke=k.width+ue,$e=Math.max(ke,C.width),Ve=window.innerWidth-oo,gt=Pv(re,[oo,Math.max(oo,Ve-$e)]);l.style.minWidth=ke+"px",l.style.left=gt+"px"}else{const ye=C.right-D.right,re=window.innerWidth-A.right-ye,ue=window.innerWidth-k.right-re,ke=k.width+ue,$e=Math.max(ke,C.width),Ve=window.innerWidth-oo,gt=Pv(re,[oo,Math.max(oo,Ve-$e)]);l.style.minWidth=ke+"px",l.style.right=gt+"px"}const P=h(),_=window.innerHeight-oo*2,O=p.scrollHeight,M=window.getComputedStyle(u),T=parseInt(M.borderTopWidth,10),R=parseInt(M.paddingTop,10),F=parseInt(M.borderBottomWidth,10),E=parseInt(M.paddingBottom,10),B=T+R+O+E+F,L=Math.min(v.offsetHeight*5,B),I=window.getComputedStyle(p),q=parseInt(I.paddingTop,10),$=parseInt(I.paddingBottom,10),z=k.top+k.height/2-oo,Y=_-z,ne=v.offsetHeight/2,te=v.offsetTop+ne,pe=T+R+te,J=B-pe;if(pe<=z){const ye=P.length>0&&v===P[P.length-1].ref.current;l.style.bottom="0px";const re=u.clientHeight-p.offsetTop-p.offsetHeight,ue=Math.max(Y,ne+(ye?$:0)+re+F),ke=pe+ue;l.style.height=ke+"px"}else{const ye=P.length>0&&v===P[0].ref.current;l.style.top="0px";const ue=Math.max(z,T+p.offsetTop+(ye?q:0)+ne)+J;l.style.height=ue+"px",p.scrollTop=pe-z+p.offsetTop}l.style.margin=`${oo}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=_+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,a.trigger,a.valueNode,l,u,p,v,b,a.dir,r]);zr(()=>j(),[j]);const[N,w]=x.useState();zr(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const S=x.useCallback(k=>{k&&g.current===!0&&(j(),y==null||y(),g.current=!1)},[j,y]);return s.jsx(x0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Qe.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});GY.displayName=p0e;var g0e="SelectPopperPosition",vE=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=oo,...a}=e,o=M1(n);return s.jsx(g1,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vE.displayName=g0e;var[x0e,BD]=Kp(Pf,{}),yE="SelectViewport",QY=x.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=Zu(yE,n),o=BD(yE,n),l=kt(t,a.onViewportChange),c=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(O1.Slot,{scope:n,children:s.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Re(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-oo*2,p=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),b=Math.max(p,v);if(b<g){const y=b+m,j=Math.min(g,y),N=y-j;f.style.height=j+"px",f.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});QY.displayName=yE;var YY="SelectGroup",[v0e,y0e]=Kp(YY),b0e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Gr();return s.jsx(v0e,{scope:n,id:i,children:s.jsx(Qe.div,{role:"group","aria-labelledby":i,...r,ref:t})})});b0e.displayName=YY;var XY="SelectLabel",ZY=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=y0e(XY,n);return s.jsx(Qe.div,{id:i.id,...r,ref:t})});ZY.displayName=XY;var ow="SelectItem",[j0e,JY]=Kp(ow),eX=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,l=Xu(ow,n),c=Zu(ow,n),u=l.value===r,[d,f]=x.useState(a??""),[h,m]=x.useState(!1),g=kt(t,y=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,y,r,i)}),p=Gr(),v=x.useRef("touch"),b=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(j0e,{scope:n,value:r,disabled:i,textId:p,isSelected:u,onItemTextChange:x.useCallback(y=>{f(j=>j||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(O1.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:s.jsx(Qe.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:Re(o.onFocus,()=>m(!0)),onBlur:Re(o.onBlur,()=>m(!1)),onClick:Re(o.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Re(o.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Re(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:Re(o.onPointerMove,y=>{var j;v.current=y.pointerType,i?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(o.onPointerLeave,y=>{var j;y.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:Re(o.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(a0e.includes(y.key)&&b(),y.key===" "&&y.preventDefault())})})})})});eX.displayName=ow;var cx="SelectItemText",tX=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,o=Xu(cx,n),l=Zu(cx,n),c=JY(cx,n),u=u0e(cx,n),[d,f]=x.useState(null),h=kt(t,b=>f(b),c.onItemTextChange,b=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=x.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return zr(()=>(p(g),()=>v(g)),[p,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(Qe.span,{id:c.textId,...a,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zf.createPortal(a.children,o.valueNode):null]})});tX.displayName=cx;var nX="SelectItemIndicator",rX=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return JY(nX,n).isSelected?s.jsx(Qe.span,{"aria-hidden":!0,...r,ref:t}):null});rX.displayName=nX;var bE="SelectScrollUpButton",sX=x.forwardRef((e,t)=>{const n=Zu(bE,e.__scopeSelect),r=BD(bE,e.__scopeSelect),[i,a]=x.useState(!1),o=kt(t,r.onScrollButtonChange);return zr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(aX,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});sX.displayName=bE;var jE="SelectScrollDownButton",iX=x.forwardRef((e,t)=>{const n=Zu(jE,e.__scopeSelect),r=BD(jE,e.__scopeSelect),[i,a]=x.useState(!1),o=kt(t,r.onScrollButtonChange);return zr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(aX,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});iX.displayName=jE;var aX=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=Zu("SelectScrollButton",n),o=x.useRef(null),l=I1(n),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),zr(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Qe.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Re(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Re(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Re(i.onPointerLeave,()=>{c()})})}),w0e="SelectSeparator",oX=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Qe.div,{"aria-hidden":!0,...r,ref:t})});oX.displayName=w0e;var wE="SelectArrow",N0e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=M1(n),a=Xu(wE,n),o=Zu(wE,n);return a.open&&o.position==="popper"?s.jsx(x1,{...i,...r,ref:t}):null});N0e.displayName=wE;function lX(e){return e===""||e===void 0}var cX=x.forwardRef((e,t)=>{const{value:n,...r}=e,i=x.useRef(null),a=kt(t,i),o=zy(n);return x.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&d){const f=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(f)}},[o,n]),s.jsx(Ey,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});cX.displayName="BubbleSelect";function uX(e){const t=lr(e),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function dX(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=S0e(e,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function S0e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var C0e=FY,fX=zY,k0e=VY,P0e=qY,E0e=UY,hX=WY,_0e=QY,mX=ZY,pX=eX,A0e=tX,T0e=rX,gX=sX,xX=iX,vX=oX;const ze=C0e,Be=k0e,Fe=x.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(fX,{ref:r,className:he("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(P0e,{asChild:!0,children:s.jsx(ar,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=fX.displayName;const yX=x.forwardRef(({className:e,...t},n)=>s.jsx(gX,{ref:n,className:he("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(kx,{className:"h-4 w-4"})}));yX.displayName=gX.displayName;const bX=x.forwardRef(({className:e,...t},n)=>s.jsx(xX,{ref:n,className:he("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ar,{className:"h-4 w-4"})}));bX.displayName=xX.displayName;const Le=x.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>s.jsx(E0e,{children:s.jsxs(hX,{ref:i,className:he("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(yX,{}),s.jsx(_0e,{className:he("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(bX,{})]})}));Le.displayName=hX.displayName;const D0e=x.forwardRef(({className:e,...t},n)=>s.jsx(mX,{ref:n,className:he("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));D0e.displayName=mX.displayName;const X=x.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(pX,{ref:r,className:he("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(T0e,{children:s.jsx(Sr,{className:"h-4 w-4"})})}),s.jsx(A0e,{children:t})]}));X.displayName=pX.displayName;const O0e=x.forwardRef(({className:e,...t},n)=>s.jsx(vX,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));O0e.displayName=vX.displayName;const ie=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm hover:shadow-md transition-shadow",e),...t}));ie.displayName="Card";const Ne=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("flex flex-col space-y-1.5 p-6",e),...t}));Ne.displayName="CardHeader";const Se=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("text-2xl font-semibold leading-none tracking-tight",e),...t}));Se.displayName="CardTitle";const it=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("text-sm text-muted-foreground",e),...t}));it.displayName="CardDescription";const ce=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("p-6 pt-0",e),...t}));ce.displayName="CardContent";const Gp=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("flex items-center p-6 pt-0",e),...t}));Gp.displayName="CardFooter";const Um=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:he("w-full caption-bottom text-sm",e),...t})}));Um.displayName="Table";const Wm=x.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:he("[&_tr]:border-b",e),...t}));Wm.displayName="TableHeader";const Hm=x.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:he("[&_tr:last-child]:border-0",e),...t}));Hm.displayName="TableBody";const I0e=x.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:he("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));I0e.displayName="TableFooter";const la=x.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:he("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));la.displayName="TableRow";const ns=x.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:he("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ns.displayName="TableHead";const Mr=x.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:he("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Mr.displayName="TableCell";const M0e=x.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:he("mt-4 text-sm text-muted-foreground",e),...t}));M0e.displayName="TableCaption";const R0e=Vf("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ae({className:e,variant:t,...n}){return s.jsx("div",{className:he(R0e({variant:t}),e),...n})}var ik="rovingFocusGroup.onEntryFocus",$0e={bubbles:!1,cancelable:!0},R1="RovingFocusGroup",[NE,jX,F0e]=Fp(R1),[L0e,Qp]=Er(R1,[F0e]),[z0e,B0e]=L0e(R1),wX=x.forwardRef((e,t)=>s.jsx(NE.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(NE.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(V0e,{...e,ref:t})})}));wX.displayName=R1;var V0e=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),m=kt(t,h),g=Yu(a),[p=null,v]=ni({prop:o,defaultProp:l,onChange:c}),[b,y]=x.useState(!1),j=lr(u),N=jX(n),w=x.useRef(!1),[S,k]=x.useState(0);return x.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(ik,j),()=>C.removeEventListener(ik,j)},[j]),s.jsx(z0e,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:p,onItemFocus:x.useCallback(C=>v(C),[v]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>k(C=>C-1),[]),children:s.jsx(Qe.div,{tabIndex:b||S===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Re(e.onMouseDown,()=>{w.current=!0}),onFocus:Re(e.onFocus,C=>{const A=!w.current;if(C.target===C.currentTarget&&A&&!b){const D=new CustomEvent(ik,$0e);if(C.currentTarget.dispatchEvent(D),!D.defaultPrevented){const P=N().filter(R=>R.focusable),_=P.find(R=>R.active),O=P.find(R=>R.id===p),T=[_,O,...P].filter(Boolean).map(R=>R.ref.current);CX(T,d)}}w.current=!1}),onBlur:Re(e.onBlur,()=>y(!1))})})}),NX="RovingFocusGroupItem",SX=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=e,l=Gr(),c=a||l,u=B0e(NX,n),d=u.currentTabStopId===c,f=jX(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=u;return x.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),s.jsx(NE.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:s.jsx(Qe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Re(e.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:Re(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Re(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const p=W0e(g,u.orientation,u.dir);if(p!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=f().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const y=b.indexOf(g.currentTarget);b=u.loop?H0e(b,y+1):b.slice(y+1)}setTimeout(()=>CX(b))}})})})});SX.displayName=NX;var q0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function U0e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function W0e(e,t,n){const r=U0e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return q0e[r]}function CX(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function H0e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var VD=wX,qD=SX,UD="Tabs",[K0e]=Er(UD,[Qp]),kX=Qp(),[G0e,WD]=K0e(UD),PX=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Yu(l),[f,h]=ni({prop:r,onChange:i,defaultProp:a});return s.jsx(G0e,{scope:n,baseId:Gr(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Qe.div,{dir:d,"data-orientation":o,...u,ref:t})})});PX.displayName=UD;var EX="TabsList",_X=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=WD(EX,n),o=kX(n);return s.jsx(VD,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Qe.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});_X.displayName=EX;var AX="TabsTrigger",TX=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,o=WD(AX,n),l=kX(n),c=IX(o.baseId,r),u=MX(o.baseId,r),d=r===o.value;return s.jsx(qD,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(Qe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:Re(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Re(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Re(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});TX.displayName=AX;var DX="TabsContent",OX=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=e,l=WD(DX,n),c=IX(l.baseId,r),u=MX(l.baseId,r),d=r===l.value,f=x.useRef(d);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Yr,{present:i||d,children:({present:h})=>s.jsx(Qe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});OX.displayName=DX;function IX(e,t){return`${e}-trigger-${t}`}function MX(e,t){return`${e}-content-${t}`}var Q0e=PX,RX=_X,$X=TX,FX=OX;const Vr=Q0e,Pr=x.forwardRef(({className:e,...t},n)=>s.jsx(RX,{ref:n,className:he("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Pr.displayName=RX.displayName;const tt=x.forwardRef(({className:e,...t},n)=>s.jsx($X,{ref:n,className:he("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));tt.displayName=$X.displayName;const ht=x.forwardRef(({className:e,...t},n)=>s.jsx(FX,{ref:n,className:he("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ht.displayName=FX.displayName;function Y0e(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var HD="ScrollArea",[LX]=Er(HD),[X0e,no]=LX(HD),zX=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[m,g]=x.useState(null),[p,v]=x.useState(null),[b,y]=x.useState(0),[j,N]=x.useState(0),[w,S]=x.useState(!1),[k,C]=x.useState(!1),A=kt(t,P=>c(P)),D=Yu(i);return s.jsx(X0e,{scope:n,type:r,dir:D,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:p,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:N,children:s.jsx(Qe.div,{dir:D,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});zX.displayName=HD;var BX="ScrollAreaViewport",VX=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=e,o=no(BX,n),l=x.useRef(null),c=kt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Qe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});VX.displayName=BX;var yl="ScrollAreaScrollbar",KD=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=no(yl,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return x.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(Z0e,{...r,ref:t,forceMount:n}):i.type==="scroll"?s.jsx(J0e,{...r,ref:t,forceMount:n}):i.type==="auto"?s.jsx(qX,{...r,ref:t,forceMount:n}):i.type==="always"?s.jsx(GD,{...r,ref:t}):null});KD.displayName=yl;var Z0e=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=no(yl,e.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Yr,{present:n||a,children:s.jsx(qX,{"data-state":a?"visible":"hidden",...r,ref:t})})}),J0e=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=no(yl,e.__scopeScrollArea),a=e.orientation==="horizontal",o=F1(()=>c("SCROLL_END"),100),[l,c]=Y0e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),x.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[i.viewport,a,c,o]),s.jsx(Yr,{present:n||l!=="hidden",children:s.jsx(GD,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),qX=x.forwardRef((e,t)=>{const n=no(yl,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=x.useState(!1),l=e.orientation==="horizontal",c=F1(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Km(n.viewport,c),Km(n.content,c),s.jsx(Yr,{present:r||a,children:s.jsx(GD,{"data-state":a?"visible":"hidden",...i,ref:t})})}),GD=x.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=no(yl,e.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=GX(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return iwe(h,o.current,l,m)}return n==="horizontal"?s.jsx(ewe,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollLeft,m=G$(h,l,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=f(h,i.dir))}}):n==="vertical"?s.jsx(twe,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const h=i.viewport.scrollTop,m=G$(h,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=f(h))}}):null}),ewe=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=no(yl,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=kt(t,c,a.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(WX,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),YX(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:cw(o.paddingLeft),paddingEnd:cw(o.paddingRight)}})}})}),twe=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=no(yl,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=kt(t,c,a.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(WX,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),YX(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:cw(o.paddingTop),paddingEnd:cw(o.paddingBottom)}})}})}),[nwe,UX]=LX(yl),WX=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=no(yl,n),[g,p]=x.useState(null),v=kt(t,A=>p(A)),b=x.useRef(null),y=x.useRef(""),j=m.viewport,N=r.content-r.viewport,w=lr(d),S=lr(c),k=F1(f,10);function C(A){if(b.current){const D=A.clientX-b.current.left,P=A.clientY-b.current.top;u({x:D,y:P})}}return x.useEffect(()=>{const A=D=>{const P=D.target;(g==null?void 0:g.contains(P))&&w(D,N)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[j,g,N,w]),x.useEffect(S,[r,S]),Km(g,k),Km(m.content,k),s.jsx(nwe,{scope:n,scrollbar:g,hasThumb:i,onThumbChange:lr(a),onThumbPointerUp:lr(o),onThumbPositionChange:S,onThumbPointerDown:lr(l),children:s.jsx(Qe.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Re(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),b.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(A))}),onPointerMove:Re(e.onPointerMove,C),onPointerUp:Re(e.onPointerUp,A=>{const D=A.target;D.hasPointerCapture(A.pointerId)&&D.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),lw="ScrollAreaThumb",HX=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=UX(lw,e.__scopeScrollArea);return s.jsx(Yr,{present:n||i.hasThumb,children:s.jsx(rwe,{ref:t,...r})})}),rwe=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=no(lw,n),o=UX(lw,n),{onThumbPositionChange:l}=o,c=kt(t,f=>o.onThumbChange(f)),u=x.useRef(void 0),d=F1(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=a.viewport;if(f){const h=()=>{if(d(),!u.current){const m=awe(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,d,l]),s.jsx(Qe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Re(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,p=f.clientY-m.top;o.onThumbPointerDown({x:g,y:p})}),onPointerUp:Re(e.onPointerUp,o.onThumbPointerUp)})});HX.displayName=lw;var QD="ScrollAreaCorner",KX=x.forwardRef((e,t)=>{const n=no(QD,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(swe,{...e,ref:t}):null});KX.displayName=QD;var swe=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=no(QD,n),[a,o]=x.useState(0),[l,c]=x.useState(0),u=!!(a&&l);return Km(i.scrollbarX,()=>{var f;const d=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Km(i.scrollbarY,()=>{var f;const d=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(Qe.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function cw(e){return e?parseInt(e,10):0}function GX(e,t){const n=e/t;return isNaN(n)?0:n}function $1(e){const t=GX(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function iwe(e,t,n,r="ltr"){const i=$1(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return QX([c,u],f)(e)}function G$(e,t,n="ltr"){const r=$1(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Pv(e,c);return QX([0,o],[0,l])(u)}function QX(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function YX(e,t){return e>0&&e<t}var awe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function F1(e,t){const n=lr(e),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Km(e,t){const n=lr(t);zr(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var XX=zX,owe=VX,lwe=KX;const On=x.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(XX,{ref:r,className:he("relative overflow-hidden",e),...n,children:[s.jsx(owe,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(YD,{}),s.jsx(lwe,{})]}));On.displayName=XX.displayName;const YD=x.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(KD,{ref:r,orientation:t,className:he("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(HX,{className:"relative flex-1 rounded-full bg-border"})}));YD.displayName=KD.displayName;const ak={tasks:{name:"Task",fields:[{key:"wbsCode",label:"WBS Code",required:!1},{key:"name",label:"Name",required:!0},{key:"description",label:"Description",required:!1},{key:"status",label:"Status",type:"enum",options:["not-started","in-progress","review","completed","on-hold"]},{key:"priority",label:"Priority",type:"enum",options:["low","medium","high","critical"]},{key:"startDate",label:"Start Date",type:"date"},{key:"endDate",label:"End Date",type:"date"},{key:"progress",label:"Progress %",type:"number"},{key:"discipline",label:"Discipline",type:"enum",options:["civil","structural","mechanical","electrical","piping","instrumentation","process","hvac","architectural","general","management","legal","drilling","cementing","logistics","procurement","hse","quality","safety"]},{key:"assignedTo",label:"Assigned To",type:"text"}]},risks:{name:"Risk",fields:[{key:"code",label:"Code",required:!1},{key:"title",label:"Title",required:!0},{key:"description",label:"Description",required:!1},{key:"status",label:"Status",type:"enum",options:["identified","assessed","mitigating","closed"]},{key:"impact",label:"Impact",type:"enum",options:["low","medium","high","critical"]},{key:"probability",label:"Probability (1-5)",type:"number"},{key:"category",label:"Category",type:"enum",options:["technical","external","organizational","project-management","commercial","hse","quality","schedule","resource"]},{key:"mitigationPlan",label:"Mitigation Plan",required:!1}]},issues:{name:"Issue",fields:[{key:"code",label:"Code",required:!1},{key:"title",label:"Title",required:!0},{key:"description",label:"Description",required:!1},{key:"status",label:"Status",type:"enum",options:["open","in-progress","resolved","closed"]},{key:"priority",label:"Priority",type:"enum",options:["low","medium","high","critical"]},{key:"assignedTo",label:"Assigned To",type:"text"},{key:"resolution",label:"Resolution",required:!1}]}};function cwe({onBack:e,onClose:t}){const[n,r]=x.useState(null),[i,a]=x.useState(null),[o,l]=x.useState(1),[c,u]=x.useState({}),[d,f]=x.useState(!1),{toast:h}=Nt(),{selectedOrgId:m,selectedProgramId:g}=jt(),p=Pi(),v=w=>{var C;const S=(C=w.target.files)==null?void 0:C[0];if(!S)return;r(S);const k=new FileReader;k.onload=A=>{var D;try{const P=JSON.parse((D=A.target)==null?void 0:D.result);a(P),b(P),l(2)}catch{h({title:"Invalid JSON",description:"The file format is incorrect. Please upload a valid JSON file.",variant:"destructive"})}},k.readAsText(S)},b=w=>{const S={};Object.keys(ak).forEach(k=>{if(w[k]&&Array.isArray(w[k])&&w[k].length>0){const C=w[k][0],A=Object.keys(C),D=ak[k].fields;S[k]=A.map(P=>{const _=D.find(O=>O.key.toLowerCase()===P.toLowerCase()||O.label.toLowerCase()===P.toLowerCase()||P.toLowerCase().includes("assign")&&O.key==="assignedTo"||P.toLowerCase().includes("engineer")&&O.key==="discipline");return{sourceField:P,targetField:_?_.key:"",mappingType:(_==null?void 0:_.type)==="enum"?"enum":"direct",isMapped:!!_,enumMappings:(_==null?void 0:_.type)==="enum"?y(w[k],P,_.options||[]):void 0}})}}),u(S)},y=(w,S,k)=>{const C=Array.from(new Set(w.map(D=>D[S]).filter(Boolean))),A={};return C.forEach(D=>{const P=String(D).toLowerCase(),_=k.find(O=>O.toLowerCase()===P||P.includes(O.toLowerCase()));A[String(D)]=_||"other"}),A},j=(w,S,k)=>{const C={...c};C[w][S]={...C[w][S],...k},u(C)},N=async()=>{if(!(!i||!m)){f(!0);try{const w=i.project||{name:"Imported Project",code:`IMP-${Date.now()}`,startDate:new Date().toISOString(),status:"planning"},k=await(await fe("POST","/api/projects",{...w,organizationId:m,programId:g||void 0,startDate:w.startDate?new Date(w.startDate):null,endDate:w.endDate?new Date(w.endDate):null})).json(),A=await(await fe("POST",`/api/projects/${k.id}/import`,{...i,fieldMappings:c})).json();A.success?(h({title:"Import Successful",description:`Imported ${A.imported.tasks} tasks, ${A.imported.risks} risks.`}),p.invalidateQueries({queryKey:["/api/projects"]}),t()):h({title:"Import Warning",description:A.message,variant:"default"})}catch(w){h({title:"Import Failed",description:w.message,variant:"destructive"})}finally{f(!1)}}};return o===1?s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-10 flex flex-col items-center justify-center text-center space-y-4 hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:s.jsx(Rm,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Upload JSON File"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Drag and drop or click to select"})]}),s.jsx(Ce,{type:"file",accept:".json",className:"max-w-xs",onChange:v})]}),s.jsx("div",{className:"flex justify-between",children:s.jsx(H,{variant:"outline",onClick:e,children:"Back"})})]}):s.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs(Vr,{defaultValue:"tasks",className:"h-full flex flex-col",children:[s.jsx(Pr,{children:Object.keys(c).map(w=>s.jsxs(tt,{value:w,className:"capitalize",children:[w," ",s.jsx(ae,{variant:"secondary",className:"ml-2",children:c[w].length})]},w))}),Object.keys(c).map(w=>s.jsx(ht,{value:w,className:"flex-1 overflow-hidden mt-4",children:s.jsx(On,{className:"h-[400px] border rounded-md",children:s.jsxs(Um,{children:[s.jsx(Wm,{children:s.jsxs(la,{children:[s.jsx(ns,{children:"Source Field (JSON)"}),s.jsx(ns,{children:"Target Field (System)"}),s.jsx(ns,{children:"Mapping Type"}),s.jsx(ns,{children:"Status"})]})}),s.jsx(Hm,{children:c[w].map((S,k)=>{var C;return s.jsxs(la,{children:[s.jsx(Mr,{className:"font-medium",children:S.sourceField}),s.jsx(Mr,{children:s.jsxs(ze,{value:S.targetField||"ignore_field",onValueChange:A=>j(w,k,{targetField:A==="ignore_field"?"":A,isMapped:A!=="ignore_field"}),children:[s.jsx(Fe,{className:"w-[200px]",children:s.jsx(Be,{placeholder:"Ignore Field"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"ignore_field",children:"-- Ignore --"}),(C=ak[w])==null?void 0:C.fields.map(A=>s.jsx(X,{value:A.key,children:A.label},A.key))]})]})}),s.jsx(Mr,{children:S.isMapped&&s.jsx(ae,{variant:"outline",className:"capitalize",children:S.mappingType})}),s.jsx(Mr,{children:S.isMapped?s.jsx(Sr,{className:"h-4 w-4 text-green-500"}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Ignored"})})]},k)})})]})})},w))]})}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(H,{variant:"outline",onClick:()=>l(1),children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Re-upload"]}),s.jsx(H,{onClick:N,disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:["Confirm & Import",s.jsx(yf,{className:"ml-2 h-4 w-4"})]})})]})]})}function uwe({onSelect:e,selectedTemplateId:t}){const{data:n,isLoading:r,error:i}=je({queryKey:["/api/project-templates"]}),[a,o]=x.useState("all");if(r)return s.jsx("div",{className:"flex justify-center p-8",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(i)return s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[s.jsx("div",{className:"text-destructive font-medium mb-2",children:"Error loading templates"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:i.message}),s.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]});if(!(n!=null&&n.length))return s.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No templates available. (Backend returned empty list)"});const l=["all",...Array.from(new Set(n.map(u=>u.category)))],c=a==="all"?n:n.filter(u=>u.category===a);return s.jsxs("div",{className:"flex flex-col h-full min-h-0 space-y-4",children:[s.jsx(Vr,{value:a,onValueChange:o,className:"w-full",children:s.jsx(Pr,{className:"w-full justify-start overflow-x-auto",children:l.map(u=>s.jsx(tt,{value:u,className:"capitalize min-h-[44px]",children:u},u))})}),s.jsx(On,{className:"flex-1 min-h-0 pr-2",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4",children:c.map(u=>{var d,f;return s.jsxs(ie,{className:he("cursor-pointer transition-all hover:border-primary min-h-[120px]",t===u.id?"border-primary ring-1 ring-primary":""),onClick:()=>e(u),children:[s.jsxs(Ne,{className:"p-4 pb-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(ae,{variant:"secondary",className:"mb-2",children:u.category}),t===u.id&&s.jsx(Sr,{className:"h-4 w-4 text-primary flex-shrink-0"})]}),s.jsx(Se,{className:"text-base",children:u.name}),s.jsx(it,{className:"line-clamp-2 text-xs",children:u.description})]}),s.jsx(ce,{className:"p-4 pt-2",children:s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-muted px-2 py-1 rounded min-h-[28px]",children:[s.jsx(a1,{className:"h-3 w-3 flex-shrink-0"}),((d=u.metadata)==null?void 0:d.taskCount)||0," Tasks"]}),s.jsxs("div",{className:"flex items-center gap-1 bg-muted px-2 py-1 rounded capitalize min-h-[28px]",children:[((f=u.metadata)==null?void 0:f.complexity)||"Medium"," Complexity"]})]})})]},u.id)})})})]})}function dwe({template:e}){var t,n;return e?s.jsxs("div",{className:"h-full flex flex-col min-h-0 space-y-4",children:[s.jsxs(ie,{className:"flex-shrink-0",children:[s.jsx(Ne,{className:"pb-3",children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(Se,{className:"text-lg break-words",children:e.name}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsx(ae,{children:e.category}),e.metadata.industry&&s.jsx(ae,{variant:"outline",className:"capitalize",children:e.metadata.industry})]})]})})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground break-words",children:e.description}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col items-center p-2 bg-muted rounded min-h-[60px] justify-center",children:[s.jsx(bn,{className:"h-4 w-4 mb-1 text-blue-500"}),s.jsxs("span",{className:"font-medium",children:[e.metadata.estimatedDuration||"-"," Days"]}),s.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Est. Duration"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-muted rounded min-h-[60px] justify-center",children:[s.jsx(mme,{className:"h-4 w-4 mb-1 text-orange-500"}),s.jsx("span",{className:"font-medium capitalize text-[10px]",children:e.metadata.complexity||"Medium"}),s.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Complexity"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-muted rounded min-h-[60px] justify-center",children:[s.jsx(Cn,{className:"h-4 w-4 mb-1 text-green-500"}),s.jsx("span",{className:"font-medium",children:e.metadata.typicalTeamSize||"-"}),s.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Team Size"})]})]})]})]}),s.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-4 overflow-hidden",children:[s.jsxs(ie,{className:"flex flex-col overflow-hidden flex-1 min-h-0",children:[s.jsx(Ne,{className:"py-3 px-4 bg-muted/30 flex-shrink-0",children:s.jsxs(Se,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4 flex-shrink-0"}),"Included Tasks (",((t=e.templateData.tasks)==null?void 0:t.length)||0,")"]})}),s.jsx(ce,{className:"flex-1 p-0 overflow-hidden min-h-0",children:s.jsx(On,{className:"h-full p-4",children:s.jsx("div",{className:"space-y-3",children:(n=e.templateData.tasks)==null?void 0:n.map((r,i)=>s.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[s.jsx("span",{className:"font-mono text-xs text-muted-foreground min-w-[24px] mt-0.5 flex-shrink-0",children:r.wbsCode}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-medium leading-none break-words",children:r.name}),r.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-words",children:r.description})]})]},i))})})})]}),e.templateData.risks&&e.templateData.risks.length>0&&s.jsxs(ie,{className:"flex flex-col overflow-hidden flex-shrink-0",children:[s.jsx(Ne,{className:"py-3 px-4 bg-muted/30 flex-shrink-0",children:s.jsxs(Se,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 flex-shrink-0"}),"Common Risks (",e.templateData.risks.length,")"]})}),s.jsx(ce,{className:"flex-1 p-0 overflow-hidden min-h-0",children:s.jsx(On,{className:"h-[150px] p-4",children:s.jsx("div",{className:"space-y-3",children:e.templateData.risks.map((r,i)=>s.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[s.jsx(ae,{variant:r.impact==="critical"||r.impact==="high"?"destructive":"outline",className:"h-5 px-1.5 text-[10px] capitalize mt-0.5 flex-shrink-0",children:r.impact||"Medium"}),s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx("p",{className:"font-medium leading-none break-words",children:r.title})})]},i))})})})]})]})]}):s.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground bg-muted/10 rounded-lg border border-dashed p-6 min-h-[200px]",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm",children:"Select a template to preview details"})})})}function fwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const hwe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,mwe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pwe={};function Q$(e,t){return(pwe.jsx?mwe:hwe).test(e)}const gwe=/[ \t\n\f\r]/g;function xwe(e){return typeof e=="object"?e.type==="text"?Y$(e.value):!1:Y$(e)}function Y$(e){return e.replace(gwe,"")===""}class Vy{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Vy.prototype.normal={};Vy.prototype.property={};Vy.prototype.space=void 0;function ZX(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Vy(n,r,t)}function SE(e){return e.toLowerCase()}class Gi{constructor(t,n){this.attribute=n,this.property=t}}Gi.prototype.attribute="";Gi.prototype.booleanish=!1;Gi.prototype.boolean=!1;Gi.prototype.commaOrSpaceSeparated=!1;Gi.prototype.commaSeparated=!1;Gi.prototype.defined=!1;Gi.prototype.mustUseProperty=!1;Gi.prototype.number=!1;Gi.prototype.overloadedBoolean=!1;Gi.prototype.property="";Gi.prototype.spaceSeparated=!1;Gi.prototype.space=void 0;let vwe=0;const Xt=qf(),qr=qf(),CE=qf(),We=qf(),Hn=qf(),am=qf(),Zi=qf();function qf(){return 2**++vwe}const kE=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xt,booleanish:qr,commaOrSpaceSeparated:Zi,commaSeparated:am,number:We,overloadedBoolean:CE,spaceSeparated:Hn},Symbol.toStringTag,{value:"Module"})),ok=Object.keys(kE);class XD extends Gi{constructor(t,n,r,i){let a=-1;if(super(t,n),X$(this,"space",i),typeof r=="number")for(;++a<ok.length;){const o=ok[a];X$(this,ok[a],(r&kE[o])===kE[o])}}}XD.prototype.defined=!0;function X$(e,t,n){n&&(e[t]=n)}function Yp(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new XD(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[SE(r)]=r,n[SE(a.attribute)]=r}return new Vy(t,n,e.space)}const JX=Yp({properties:{ariaActiveDescendant:null,ariaAtomic:qr,ariaAutoComplete:null,ariaBusy:qr,ariaChecked:qr,ariaColCount:We,ariaColIndex:We,ariaColSpan:We,ariaControls:Hn,ariaCurrent:null,ariaDescribedBy:Hn,ariaDetails:null,ariaDisabled:qr,ariaDropEffect:Hn,ariaErrorMessage:null,ariaExpanded:qr,ariaFlowTo:Hn,ariaGrabbed:qr,ariaHasPopup:null,ariaHidden:qr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Hn,ariaLevel:We,ariaLive:null,ariaModal:qr,ariaMultiLine:qr,ariaMultiSelectable:qr,ariaOrientation:null,ariaOwns:Hn,ariaPlaceholder:null,ariaPosInSet:We,ariaPressed:qr,ariaReadOnly:qr,ariaRelevant:null,ariaRequired:qr,ariaRoleDescription:Hn,ariaRowCount:We,ariaRowIndex:We,ariaRowSpan:We,ariaSelected:qr,ariaSetSize:We,ariaSort:null,ariaValueMax:We,ariaValueMin:We,ariaValueNow:We,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function eZ(e,t){return t in e?e[t]:t}function tZ(e,t){return eZ(e,t.toLowerCase())}const ywe=Yp({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:am,acceptCharset:Hn,accessKey:Hn,action:null,allow:null,allowFullScreen:Xt,allowPaymentRequest:Xt,allowUserMedia:Xt,alt:null,as:null,async:Xt,autoCapitalize:null,autoComplete:Hn,autoFocus:Xt,autoPlay:Xt,blocking:Hn,capture:null,charSet:null,checked:Xt,cite:null,className:Hn,cols:We,colSpan:null,content:null,contentEditable:qr,controls:Xt,controlsList:Hn,coords:We|am,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xt,defer:Xt,dir:null,dirName:null,disabled:Xt,download:CE,draggable:qr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xt,formTarget:null,headers:Hn,height:We,hidden:CE,high:We,href:null,hrefLang:null,htmlFor:Hn,httpEquiv:Hn,id:null,imageSizes:null,imageSrcSet:null,inert:Xt,inputMode:null,integrity:null,is:null,isMap:Xt,itemId:null,itemProp:Hn,itemRef:Hn,itemScope:Xt,itemType:Hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xt,low:We,manifest:null,max:null,maxLength:We,media:null,method:null,min:null,minLength:We,multiple:Xt,muted:Xt,name:null,nonce:null,noModule:Xt,noValidate:Xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xt,optimum:We,pattern:null,ping:Hn,placeholder:null,playsInline:Xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xt,referrerPolicy:null,rel:Hn,required:Xt,reversed:Xt,rows:We,rowSpan:We,sandbox:Hn,scope:null,scoped:Xt,seamless:Xt,selected:Xt,shadowRootClonable:Xt,shadowRootDelegatesFocus:Xt,shadowRootMode:null,shape:null,size:We,sizes:null,slot:null,span:We,spellCheck:qr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:We,step:null,style:null,tabIndex:We,target:null,title:null,translate:null,type:null,typeMustMatch:Xt,useMap:null,value:qr,width:We,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Hn,axis:null,background:null,bgColor:null,border:We,borderColor:null,bottomMargin:We,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xt,declare:Xt,event:null,face:null,frame:null,frameBorder:null,hSpace:We,leftMargin:We,link:null,longDesc:null,lowSrc:null,marginHeight:We,marginWidth:We,noResize:Xt,noHref:Xt,noShade:Xt,noWrap:Xt,object:null,profile:null,prompt:null,rev:null,rightMargin:We,rules:null,scheme:null,scrolling:qr,standby:null,summary:null,text:null,topMargin:We,valueType:null,version:null,vAlign:null,vLink:null,vSpace:We,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xt,disableRemotePlayback:Xt,prefix:null,property:null,results:We,security:null,unselectable:null},space:"html",transform:tZ}),bwe=Yp({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Zi,accentHeight:We,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:We,amplitude:We,arabicForm:null,ascent:We,attributeName:null,attributeType:null,azimuth:We,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:We,by:null,calcMode:null,capHeight:We,className:Hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:We,diffuseConstant:We,direction:null,display:null,dur:null,divisor:We,dominantBaseline:null,download:Xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:We,enableBackground:null,end:null,event:null,exponent:We,externalResourcesRequired:null,fill:null,fillOpacity:We,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:am,g2:am,glyphName:am,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:We,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:We,horizOriginX:We,horizOriginY:We,id:null,ideographic:We,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:We,k:We,k1:We,k2:We,k3:We,k4:We,kernelMatrix:Zi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:We,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:We,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:We,overlineThickness:We,paintOrder:null,panose1:null,path:null,pathLength:We,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:We,pointsAtY:We,pointsAtZ:We,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Zi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Zi,rev:Zi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Zi,requiredFeatures:Zi,requiredFonts:Zi,requiredFormats:Zi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:We,specularExponent:We,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:We,strikethroughThickness:We,string:null,stroke:null,strokeDashArray:Zi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:We,strokeOpacity:We,strokeWidth:null,style:null,surfaceScale:We,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Zi,tabIndex:We,tableValues:null,target:null,targetX:We,targetY:We,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Zi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:We,underlineThickness:We,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:We,values:null,vAlphabetic:We,vMathematical:We,vectorEffect:null,vHanging:We,vIdeographic:We,version:null,vertAdvY:We,vertOriginX:We,vertOriginY:We,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:We,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eZ}),nZ=Yp({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),rZ=Yp({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tZ}),sZ=Yp({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),jwe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},wwe=/[A-Z]/g,Z$=/-[a-z]/g,Nwe=/^data[-\w.:]+$/i;function Swe(e,t){const n=SE(t);let r=t,i=Gi;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Nwe.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Z$,kwe);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Z$.test(a)){let o=a.replace(wwe,Cwe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=XD}return new i(r,t)}function Cwe(e){return"-"+e.toLowerCase()}function kwe(e){return e.charAt(1).toUpperCase()}const Pwe=ZX([JX,ywe,nZ,rZ,sZ],"html"),ZD=ZX([JX,bwe,nZ,rZ,sZ],"svg");function Ewe(e){return e.join(" ").trim()}var JD={},J$=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,_we=/\n/g,Awe=/^\s*/,Twe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Dwe=/^:\s*/,Owe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Iwe=/^[;\s]*/,Mwe=/^\s+|\s+$/g,Rwe=`
`,eF="/",tF="*",_d="",$we="comment",Fwe="declaration";function Lwe(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(g){var p=g.match(_we);p&&(n+=p.length);var v=g.lastIndexOf(Rwe);r=~v?g.length-v:r+g.length}function a(){var g={line:n,column:r};return function(p){return p.position=new o(g),u(),p}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var p=new Error(t.source+":"+n+":"+r+": "+g);if(p.reason=g,p.filename=t.source,p.line=n,p.column=r,p.source=e,!t.silent)throw p}function c(g){var p=g.exec(e);if(p){var v=p[0];return i(v),e=e.slice(v.length),p}}function u(){c(Awe)}function d(g){var p;for(g=g||[];p=f();)p!==!1&&g.push(p);return g}function f(){var g=a();if(!(eF!=e.charAt(0)||tF!=e.charAt(1))){for(var p=2;_d!=e.charAt(p)&&(tF!=e.charAt(p)||eF!=e.charAt(p+1));)++p;if(p+=2,_d===e.charAt(p-1))return l("End of comment missing");var v=e.slice(2,p-2);return r+=2,i(v),e=e.slice(p),r+=2,g({type:$we,comment:v})}}function h(){var g=a(),p=c(Twe);if(p){if(f(),!c(Dwe))return l("property missing ':'");var v=c(Owe),b=g({type:Fwe,property:nF(p[0].replace(J$,_d)),value:v?nF(v[0].replace(J$,_d)):_d});return c(Iwe),b}}function m(){var g=[];d(g);for(var p;p=h();)p!==!1&&(g.push(p),d(g));return g}return u(),m()}function nF(e){return e?e.replace(Mwe,_d):_d}var zwe=Lwe,Bwe=Vl&&Vl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(JD,"__esModule",{value:!0});JD.default=qwe;const Vwe=Bwe(zwe);function qwe(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,Vwe.default)(e),i=typeof t=="function";return r.forEach(a=>{if(a.type!=="declaration")return;const{property:o,value:l}=a;i?t(o,l,a):l&&(n=n||{},n[o]=l)}),n}var L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.camelCase=void 0;var Uwe=/^--[a-zA-Z0-9_-]+$/,Wwe=/-([a-z])/g,Hwe=/^[^-]+$/,Kwe=/^-(webkit|moz|ms|o|khtml)-/,Gwe=/^-(ms)-/,Qwe=function(e){return!e||Hwe.test(e)||Uwe.test(e)},Ywe=function(e,t){return t.toUpperCase()},rF=function(e,t){return"".concat(t,"-")},Xwe=function(e,t){return t===void 0&&(t={}),Qwe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Gwe,rF):e=e.replace(Kwe,rF),e.replace(Wwe,Ywe))};L1.camelCase=Xwe;var Zwe=Vl&&Vl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Jwe=Zwe(JD),eNe=L1;function PE(e,t){var n={};return!e||typeof e!="string"||(0,Jwe.default)(e,function(r,i){r&&i&&(n[(0,eNe.camelCase)(r,t)]=i)}),n}PE.default=PE;var tNe=PE;const nNe=yn(tNe),iZ=aZ("end"),eO=aZ("start");function aZ(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function rNe(e){const t=eO(e),n=iZ(e);if(t&&n)return{start:t,end:n}}function Ax(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?sF(e.position):"start"in e||"end"in e?sF(e):"line"in e||"column"in e?EE(e):""}function EE(e){return iF(e&&e.line)+":"+iF(e&&e.column)}function sF(e){return EE(e&&e.start)+"-"+EE(e&&e.end)}function iF(e){return e&&typeof e=="number"?e:1}class ii extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Ax(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ii.prototype.file="";ii.prototype.name="";ii.prototype.reason="";ii.prototype.message="";ii.prototype.stack="";ii.prototype.column=void 0;ii.prototype.line=void 0;ii.prototype.ancestors=void 0;ii.prototype.cause=void 0;ii.prototype.fatal=void 0;ii.prototype.place=void 0;ii.prototype.ruleId=void 0;ii.prototype.source=void 0;const tO={}.hasOwnProperty,sNe=new Map,iNe=/[A-Z]/g,aNe=new Set(["table","tbody","thead","tfoot","tr"]),oNe=new Set(["td","th"]),oZ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function lNe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=gNe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=pNe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?ZD:Pwe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=lZ(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function lZ(e,t,n){if(t.type==="element")return cNe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return uNe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return fNe(e,t,n);if(t.type==="mdxjsEsm")return dNe(e,t);if(t.type==="root")return hNe(e,t,n);if(t.type==="text")return mNe(e,t)}function cNe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ZD,e.schema=i),e.ancestors.push(t);const a=uZ(e,t.tagName,!1),o=xNe(e,t);let l=rO(e,t);return aNe.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!xwe(c):!0})),cZ(e,o,a,t),nO(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function uNe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ev(e,t.position)}function dNe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ev(e,t.position)}function fNe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=ZD,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:uZ(e,t.name,!0),o=vNe(e,t),l=rO(e,t);return cZ(e,o,a,t),nO(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function hNe(e,t,n){const r={};return nO(r,rO(e,t)),e.create(t,e.Fragment,r,n)}function mNe(e,t){return t.value}function cZ(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function nO(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function pNe(e,t,n){return r;function r(i,a,o,l){const u=Array.isArray(o.children)?n:t;return l?u(a,o,l):u(a,o)}}function gNe(e,t){return n;function n(r,i,a,o){const l=Array.isArray(a.children),c=eO(r);return t(i,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function xNe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&tO.call(t.properties,i)){const a=yNe(e,i,t.properties[i]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&oNe.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function vNe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Ev(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else Ev(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function rO(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:sNe;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const u=i.get(c)||0;o=c+"-"+u,i.set(c,u+1)}}const l=lZ(e,a,o);l!==void 0&&n.push(l)}return n}function yNe(e,t,n){const r=Swe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?fwe(n):Ewe(n)),r.property==="style"){let i=typeof n=="object"?n:bNe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=jNe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?jwe[r.property]||r.property:r.attribute,n]}}function bNe(e,t){try{return nNe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new ii("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=oZ+"#cannot-parse-style-attribute",i}}function uZ(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const l=Q$(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=Q$(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return tO.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ev(e)}function Ev(e,t){const n=new ii("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=oZ+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jNe(e){const t={};let n;for(n in e)tO.call(e,n)&&(t[wNe(n)]=e[n]);return t}function wNe(e){let t=e.replace(iNe,NNe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function NNe(e){return"-"+e.toLowerCase()}const lk={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},SNe={};function sO(e,t){const n=SNe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dZ(e,r,i)}function dZ(e,t,n){if(CNe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return aF(e.children,t,n)}return Array.isArray(e)?aF(e,t,n):""}function aF(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=dZ(e[i],t,n);return r.join("")}function CNe(e){return!!(e&&typeof e=="object")}const oF=document.createElement("i");function iO(e){const t="&"+e+";";oF.innerHTML=t;const n=oF.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pa(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function $a(e,t){return e.length>0?(pa(e,e.length,0,t),e):t}const lF={}.hasOwnProperty;function fZ(e){const t={};let n=-1;for(;++n<e.length;)kNe(t,e[n]);return t}function kNe(e,t){let n;for(n in t){const i=(lF.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){lF.call(i,o)||(i[o]=[]);const l=a[o];PNe(i[o],Array.isArray(l)?l:l?[l]:[])}}}function PNe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pa(e,0,0,r)}function hZ(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Co(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const mi=Ju(/[A-Za-z]/),Zs=Ju(/[\dA-Za-z]/),ENe=Ju(/[#-'*+\--9=?A-Z^-~]/);function uw(e){return e!==null&&(e<32||e===127)}const _E=Ju(/\d/),_Ne=Ju(/[\dA-Fa-f]/),ANe=Ju(/[!-/:-@[-`{-~]/);function Ct(e){return e!==null&&e<-2}function qn(e){return e!==null&&(e<0||e===32)}function ln(e){return e===-2||e===-1||e===32}const z1=Ju(new RegExp("\\p{P}|\\p{S}","u")),Ef=Ju(/\s/);function Ju(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Xp(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Zs(e.charCodeAt(n+1))&&Zs(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function pn(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return ln(c)?(e.enter(n),l(c)):t(c)}function l(c){return ln(c)&&a++<i?(e.consume(c),l):(e.exit(n),t(c))}}const TNe={tokenize:DNe};function DNe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),pn(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Ct(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const ONe={tokenize:INe},cF={tokenize:MNe};function INe(e){const t=this,n=[];let r=0,i,a,o;return l;function l(j){if(r<n.length){const N=n[r];return t.containerState=N[1],e.attempt(N[0].continuation,c,u)(j)}return u(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const N=t.events.length;let w=N,S;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){S=t.events[w][1].end;break}b(r);let k=N;for(;k<t.events.length;)t.events[k][1].end={...S},k++;return pa(t.events,w+1,0,t.events.slice(N)),t.events.length=k,u(j)}return l(j)}function u(j){if(r===n.length){if(!i)return h(j);if(i.currentConstruct&&i.currentConstruct.concrete)return g(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(cF,d,f)(j)}function d(j){return i&&y(),b(r),h(j)}function f(j){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(j)}function h(j){return t.containerState={},e.attempt(cF,m,g)(j)}function m(j){return r++,n.push([t.currentConstruct,t.containerState]),h(j)}function g(j){if(j===null){i&&y(),b(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),p(j)}function p(j){if(j===null){v(e.exit("chunkFlow"),!0),b(0),e.consume(j);return}return Ct(j)?(e.consume(j),v(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(j),p)}function v(j,N){const w=t.sliceStream(j);if(N&&w.push(null),j.previous=a,a&&(a.next=j),a=j,i.defineSkip(j.start),i.write(w),t.parser.lazy[j.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const k=t.events.length;let C=k,A,D;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){D=t.events[C][1].end;break}A=!0}for(b(r),S=k;S<t.events.length;)t.events[S][1].end={...D},S++;pa(t.events,C+1,0,t.events.slice(k)),t.events.length=S}}function b(j){let N=n.length;for(;N-- >j;){const w=n[N];t.containerState=w[1],w[0].exit.call(t,e)}n.length=j}function y(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function MNe(e,t,n){return pn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gm(e){if(e===null||qn(e)||Ef(e))return 1;if(z1(e))return 2}function B1(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const AE={name:"attention",resolveAll:RNe,tokenize:$Ne};function RNe(e,t){let n=-1,r,i,a,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};uF(f,-c),uF(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=$a(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=$a(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=$a(u,B1(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=$a(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=$a(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,pa(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function $Ne(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Gm(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Gm(c),f=!d||d===2&&i||n.includes(c),h=!i||i===2&&d||n.includes(r);return u._open=!!(a===42?f:f&&(i||!h)),u._close=!!(a===42?h:h&&(d||!f)),t(c)}}function uF(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const FNe={name:"autolink",tokenize:LNe};function LNe(e,t,n){let r=0;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(m){return mi(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Zs(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||Zs(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||uw(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),d):ENe(m)?(e.consume(m),u):n(m)}function d(m){return Zs(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Zs(m))&&r++<63){const g=m===45?h:f;return e.consume(m),g}return n(m)}}const qy={partial:!0,tokenize:zNe};function zNe(e,t,n){return r;function r(a){return ln(a)?pn(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||Ct(a)?t(a):n(a)}}const mZ={continuation:{tokenize:VNe},exit:qNe,name:"blockQuote",tokenize:BNe};function BNe(e,t,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return ln(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function VNe(e,t,n){const r=this;return i;function i(o){return ln(o)?pn(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(mZ,t,n)(o)}}function qNe(e){e.exit("blockQuote")}const pZ={name:"characterEscape",tokenize:UNe};function UNe(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return ANe(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const gZ={name:"characterReference",tokenize:WNe};function WNe(e,t,n){const r=this;let i=0,a,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=Zs,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=_Ne,d):(e.enter("characterReferenceValue"),a=7,o=_E,d(f))}function d(f){if(f===59&&i){const h=e.exit("characterReferenceValue");return o===Zs&&!iO(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<a?(e.consume(f),d):n(f)}}const dF={partial:!0,tokenize:KNe},fF={concrete:!0,name:"codeFenced",tokenize:HNe};function HNe(e,t,n){const r=this,i={partial:!0,tokenize:w};let a=0,o=0,l;return c;function c(S){return u(S)}function u(S){const k=r.events[r.events.length-1];return a=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,l=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(S)}function d(S){return S===l?(o++,e.consume(S),d):o<3?n(S):(e.exit("codeFencedFenceSequence"),ln(S)?pn(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Ct(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(dF,p,N)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||Ct(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):ln(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),pn(e,m,"whitespace")(S)):S===96&&S===l?n(S):(e.consume(S),h)}function m(S){return S===null||Ct(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||Ct(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===l?n(S):(e.consume(S),g)}function p(S){return e.attempt(i,N,v)(S)}function v(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),b}function b(S){return a>0&&ln(S)?pn(e,y,"linePrefix",a+1)(S):y(S)}function y(S){return S===null||Ct(S)?e.check(dF,p,N)(S):(e.enter("codeFlowValue"),j(S))}function j(S){return S===null||Ct(S)?(e.exit("codeFlowValue"),y(S)):(e.consume(S),j)}function N(S){return e.exit("codeFenced"),t(S)}function w(S,k,C){let A=0;return D;function D(T){return S.enter("lineEnding"),S.consume(T),S.exit("lineEnding"),P}function P(T){return S.enter("codeFencedFence"),ln(T)?pn(S,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):_(T)}function _(T){return T===l?(S.enter("codeFencedFenceSequence"),O(T)):C(T)}function O(T){return T===l?(A++,S.consume(T),O):A>=o?(S.exit("codeFencedFenceSequence"),ln(T)?pn(S,M,"whitespace")(T):M(T)):C(T)}function M(T){return T===null||Ct(T)?(S.exit("codeFencedFence"),k(T)):C(T)}}}function KNe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const ck={name:"codeIndented",tokenize:QNe},GNe={partial:!0,tokenize:YNe};function QNe(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),pn(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):Ct(u)?e.attempt(GNe,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||Ct(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function YNe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ct(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):pn(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):Ct(o)?i(o):n(o)}}const XNe={name:"codeText",previous:JNe,resolve:ZNe,tokenize:e1e};function ZNe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function JNe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function e1e(e,t,n){let r=0,i,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(a=e.enter("codeTextSequence"),i=0,d(f)):Ct(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Ct(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",u(f))}}class t1e{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Lg(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Lg(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Lg(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Lg(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Lg(this.left,n.reverse())}}}function Lg(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function xZ(e){const t={};let n=-1,r,i,a,o,l,c,u;const d=new t1e(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,n1e(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,n),l.unshift(r),d.splice(i,n-i+1,l))}}return pa(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function n1e(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,f,h=-1,m=n,g=0,p=0;const v=[p];for(;m;){for(;e.get(++i)[1]!==m;);a.push(i),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(p=h+1,v.push(p),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):v.pop(),h=v.length;h--;){const b=l.slice(v[h],v[h+1]),y=a.pop();c.push([y,y+b.length-1]),e.splice(y,2,b)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const r1e={resolve:i1e,tokenize:a1e},s1e={partial:!0,tokenize:o1e};function i1e(e){return xZ(e),e}function a1e(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):Ct(l)?e.check(s1e,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function o1e(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),pn(e,a,"linePrefix")}function a(o){if(o===null||Ct(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function vZ(e,t,n,r,i,a,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return f;function f(b){return b===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(b),e.exit(a),h):b===null||b===32||b===41||uw(b)?n(b):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),p(b))}function h(b){return b===62?(e.enter(a),e.consume(b),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===62?(e.exit("chunkString"),e.exit(l),h(b)):b===null||b===60||Ct(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===60||b===62||b===92?(e.consume(b),m):m(b)}function p(b){return!d&&(b===null||b===41||qn(b))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(b)):d<u&&b===40?(e.consume(b),d++,p):b===41?(e.consume(b),d--,p):b===null||b===32||b===40||uw(b)?n(b):(e.consume(b),b===92?v:p)}function v(b){return b===40||b===41||b===92?(e.consume(b),p):p(b)}}function yZ(e,t,n,r,i,a){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(i),e.consume(m),e.exit(i),e.enter(a),d}function d(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(a),e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):Ct(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||Ct(m)||l++>999?(e.exit("chunkString"),d(m)):(e.consume(m),c||(c=!ln(m)),m===92?h:f)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,f):f(m)}}function bZ(e,t,n,r,i,a){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(a),u(h))}function u(h){return h===o?(e.exit(a),c(o)):h===null?n(h):Ct(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),pn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||Ct(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?f:d)}function f(h){return h===o||h===92?(e.consume(h),d):d(h)}}function Tx(e,t){let n;return r;function r(i){return Ct(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ln(i)?pn(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const l1e={name:"definition",tokenize:u1e},c1e={partial:!0,tokenize:d1e};function u1e(e,t,n){const r=this;let i;return a;function a(m){return e.enter("definition"),o(m)}function o(m){return yZ.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return i=Co(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return qn(m)?Tx(e,u)(m):u(m)}function u(m){return vZ(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(c1e,f,f)(m)}function f(m){return ln(m)?pn(e,h,"whitespace")(m):h(m)}function h(m){return m===null||Ct(m)?(e.exit("definition"),r.parser.defined.push(i),t(m)):n(m)}}function d1e(e,t,n){return r;function r(l){return qn(l)?Tx(e,i)(l):n(l)}function i(l){return bZ(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return ln(l)?pn(e,o,"whitespace")(l):o(l)}function o(l){return l===null||Ct(l)?t(l):n(l)}}const f1e={name:"hardBreakEscape",tokenize:h1e};function h1e(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return Ct(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const m1e={name:"headingAtx",resolve:p1e,tokenize:g1e};function p1e(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pa(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function g1e(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||qn(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||Ct(d)?(e.exit("atxHeading"),t(d)):ln(d)?pn(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||qn(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const x1e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hF=["pre","script","style","textarea"],v1e={concrete:!0,name:"htmlFlow",resolveTo:j1e,tokenize:w1e},y1e={partial:!0,tokenize:S1e},b1e={partial:!0,tokenize:N1e};function j1e(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function w1e(e,t,n){const r=this;let i,a,o,l,c;return u;function u($){return d($)}function d($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),f}function f($){return $===33?(e.consume($),h):$===47?(e.consume($),a=!0,p):$===63?(e.consume($),i=3,r.interrupt?t:L):mi($)?(e.consume($),o=String.fromCharCode($),v):n($)}function h($){return $===45?(e.consume($),i=2,m):$===91?(e.consume($),i=5,l=0,g):mi($)?(e.consume($),i=4,r.interrupt?t:L):n($)}function m($){return $===45?(e.consume($),r.interrupt?t:L):n($)}function g($){const z="CDATA[";return $===z.charCodeAt(l++)?(e.consume($),l===z.length?r.interrupt?t:_:g):n($)}function p($){return mi($)?(e.consume($),o=String.fromCharCode($),v):n($)}function v($){if($===null||$===47||$===62||qn($)){const z=$===47,Y=o.toLowerCase();return!z&&!a&&hF.includes(Y)?(i=1,r.interrupt?t($):_($)):x1e.includes(o.toLowerCase())?(i=6,z?(e.consume($),b):r.interrupt?t($):_($)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):a?y($):j($))}return $===45||Zs($)?(e.consume($),o+=String.fromCharCode($),v):n($)}function b($){return $===62?(e.consume($),r.interrupt?t:_):n($)}function y($){return ln($)?(e.consume($),y):D($)}function j($){return $===47?(e.consume($),D):$===58||$===95||mi($)?(e.consume($),N):ln($)?(e.consume($),j):D($)}function N($){return $===45||$===46||$===58||$===95||Zs($)?(e.consume($),N):w($)}function w($){return $===61?(e.consume($),S):ln($)?(e.consume($),w):j($)}function S($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),c=$,k):ln($)?(e.consume($),S):C($)}function k($){return $===c?(e.consume($),c=null,A):$===null||Ct($)?n($):(e.consume($),k)}function C($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||qn($)?w($):(e.consume($),C)}function A($){return $===47||$===62||ln($)?j($):n($)}function D($){return $===62?(e.consume($),P):n($)}function P($){return $===null||Ct($)?_($):ln($)?(e.consume($),P):n($)}function _($){return $===45&&i===2?(e.consume($),R):$===60&&i===1?(e.consume($),F):$===62&&i===4?(e.consume($),I):$===63&&i===3?(e.consume($),L):$===93&&i===5?(e.consume($),B):Ct($)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(y1e,q,O)($)):$===null||Ct($)?(e.exit("htmlFlowData"),O($)):(e.consume($),_)}function O($){return e.check(b1e,M,q)($)}function M($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),T}function T($){return $===null||Ct($)?O($):(e.enter("htmlFlowData"),_($))}function R($){return $===45?(e.consume($),L):_($)}function F($){return $===47?(e.consume($),o="",E):_($)}function E($){if($===62){const z=o.toLowerCase();return hF.includes(z)?(e.consume($),I):_($)}return mi($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),E):_($)}function B($){return $===93?(e.consume($),L):_($)}function L($){return $===62?(e.consume($),I):$===45&&i===2?(e.consume($),L):_($)}function I($){return $===null||Ct($)?(e.exit("htmlFlowData"),q($)):(e.consume($),I)}function q($){return e.exit("htmlFlow"),t($)}}function N1e(e,t,n){const r=this;return i;function i(o){return Ct(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function S1e(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(qy,t,n)}}const C1e={name:"htmlText",tokenize:k1e};function k1e(e,t,n){const r=this;let i,a,o;return l;function l(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),c}function c(L){return L===33?(e.consume(L),u):L===47?(e.consume(L),w):L===63?(e.consume(L),j):mi(L)?(e.consume(L),C):n(L)}function u(L){return L===45?(e.consume(L),d):L===91?(e.consume(L),a=0,g):mi(L)?(e.consume(L),y):n(L)}function d(L){return L===45?(e.consume(L),m):n(L)}function f(L){return L===null?n(L):L===45?(e.consume(L),h):Ct(L)?(o=f,F(L)):(e.consume(L),f)}function h(L){return L===45?(e.consume(L),m):f(L)}function m(L){return L===62?R(L):L===45?h(L):f(L)}function g(L){const I="CDATA[";return L===I.charCodeAt(a++)?(e.consume(L),a===I.length?p:g):n(L)}function p(L){return L===null?n(L):L===93?(e.consume(L),v):Ct(L)?(o=p,F(L)):(e.consume(L),p)}function v(L){return L===93?(e.consume(L),b):p(L)}function b(L){return L===62?R(L):L===93?(e.consume(L),b):p(L)}function y(L){return L===null||L===62?R(L):Ct(L)?(o=y,F(L)):(e.consume(L),y)}function j(L){return L===null?n(L):L===63?(e.consume(L),N):Ct(L)?(o=j,F(L)):(e.consume(L),j)}function N(L){return L===62?R(L):j(L)}function w(L){return mi(L)?(e.consume(L),S):n(L)}function S(L){return L===45||Zs(L)?(e.consume(L),S):k(L)}function k(L){return Ct(L)?(o=k,F(L)):ln(L)?(e.consume(L),k):R(L)}function C(L){return L===45||Zs(L)?(e.consume(L),C):L===47||L===62||qn(L)?A(L):n(L)}function A(L){return L===47?(e.consume(L),R):L===58||L===95||mi(L)?(e.consume(L),D):Ct(L)?(o=A,F(L)):ln(L)?(e.consume(L),A):R(L)}function D(L){return L===45||L===46||L===58||L===95||Zs(L)?(e.consume(L),D):P(L)}function P(L){return L===61?(e.consume(L),_):Ct(L)?(o=P,F(L)):ln(L)?(e.consume(L),P):A(L)}function _(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,O):Ct(L)?(o=_,F(L)):ln(L)?(e.consume(L),_):(e.consume(L),M)}function O(L){return L===i?(e.consume(L),i=void 0,T):L===null?n(L):Ct(L)?(o=O,F(L)):(e.consume(L),O)}function M(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||qn(L)?A(L):(e.consume(L),M)}function T(L){return L===47||L===62||qn(L)?A(L):n(L)}function R(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function F(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),E}function E(L){return ln(L)?pn(e,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):B(L)}function B(L){return e.enter("htmlTextData"),o(L)}}const aO={name:"labelEnd",resolveAll:A1e,resolveTo:T1e,tokenize:D1e},P1e={tokenize:O1e},E1e={tokenize:I1e},_1e={tokenize:M1e};function A1e(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&pa(e,0,e.length,n),e}function T1e(e,t){let n=e.length,r=0,i,a,o,l;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=$a(l,e.slice(a+1,a+r+3)),l=$a(l,[["enter",d,t]]),l=$a(l,B1(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=$a(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=$a(l,e.slice(o+1)),l=$a(l,[["exit",c,t]]),pa(e,a,e.length,l),e}function D1e(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(h){return a?a._inactive?f(h):(o=r.parser.defined.includes(Co(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(P1e,d,o?d:f)(h):h===91?e.attempt(E1e,d,o?u:f)(h):o?d(h):f(h)}function u(h){return e.attempt(_1e,d,f)(h)}function d(h){return t(h)}function f(h){return a._balanced=!0,n(h)}}function O1e(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return qn(f)?Tx(e,a)(f):a(f)}function a(f){return f===41?d(f):vZ(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return qn(f)?Tx(e,c)(f):d(f)}function l(f){return n(f)}function c(f){return f===34||f===39||f===40?bZ(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return qn(f)?Tx(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function I1e(e,t,n){const r=this;return i;function i(l){return yZ.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Co(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function M1e(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const R1e={name:"labelStartImage",resolveAll:aO.resolveAll,tokenize:$1e};function $1e(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const F1e={name:"labelStartLink",resolveAll:aO.resolveAll,tokenize:L1e};function L1e(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const uk={name:"lineEnding",tokenize:z1e};function z1e(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),pn(e,t,"linePrefix")}}const Jj={name:"thematicBreak",tokenize:B1e};function B1e(e,t,n){let r=0,i;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,l(u)}function l(u){return u===i?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||Ct(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===i?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),ln(u)?pn(e,l,"whitespace")(u):l(u))}}const Oi={continuation:{tokenize:W1e},exit:K1e,name:"list",tokenize:U1e},V1e={partial:!0,tokenize:G1e},q1e={partial:!0,tokenize:H1e};function U1e(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:_E(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Jj,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return _E(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(qy,r.interrupt?n:d,e.attempt(V1e,h,f))}function d(m){return r.containerState.initialBlankLine=!0,a++,h(m)}function f(m){return ln(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function W1e(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(qy,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,pn(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!ln(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(q1e,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,pn(e,e.attempt(Oi,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function H1e(e,t,n){const r=this;return pn(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function K1e(e){e.exit(this.containerState.type)}function G1e(e,t,n){const r=this;return pn(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!ln(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const mF={name:"setextUnderline",resolveTo:Q1e,tokenize:Y1e};function Q1e(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Y1e(e,t,n){const r=this;let i;return a;function a(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===i?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),ln(u)?pn(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Ct(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const X1e={tokenize:Z1e};function Z1e(e){const t=this,n=e.attempt(qy,r,e.attempt(this.parser.constructs.flowInitial,i,pn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(r1e,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const J1e={resolveAll:wZ()},eSe=jZ("string"),tSe=jZ("text");function jZ(e){return{resolveAll:wZ(e==="text"?nSe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,l);return o;function o(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const f=i[d];let h=-1;if(f)for(;++h<f.length;){const m=f[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function wZ(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function nSe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,l=0,c;for(;a--;){const u=i[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const rSe={42:Oi,43:Oi,45:Oi,48:Oi,49:Oi,50:Oi,51:Oi,52:Oi,53:Oi,54:Oi,55:Oi,56:Oi,57:Oi,62:mZ},sSe={91:l1e},iSe={[-2]:ck,[-1]:ck,32:ck},aSe={35:m1e,42:Jj,45:[mF,Jj],60:v1e,61:mF,95:Jj,96:fF,126:fF},oSe={38:gZ,92:pZ},lSe={[-5]:uk,[-4]:uk,[-3]:uk,33:R1e,38:gZ,42:AE,60:[FNe,C1e],91:F1e,92:[f1e,pZ],93:aO,95:AE,96:XNe},cSe={null:[AE,J1e]},uSe={null:[42,95]},dSe={null:[]},fSe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:uSe,contentInitial:sSe,disable:dSe,document:rSe,flow:aSe,flowInitial:iSe,insideSpan:cSe,string:oSe,text:lSe},Symbol.toStringTag,{value:"Module"}));function hSe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],l=[];const c={attempt:k(w),check:k(S),consume:y,enter:j,exit:N,interrupt:k(S,{interrupt:!0})},u={code:null,containerState:{},defineSkip:p,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:f};let d=t.tokenize.call(u,c);return t.resolveAll&&a.push(t),u;function f(P){return o=$a(o,P),v(),o[o.length-1]!==null?[]:(C(t,0),u.events=B1(a,u.events,u),u.events)}function h(P,_){return pSe(m(P),_)}function m(P){return mSe(o,P)}function g(){const{_bufferIndex:P,_index:_,line:O,column:M,offset:T}=r;return{_bufferIndex:P,_index:_,line:O,column:M,offset:T}}function p(P){i[P.line]=P.column,D()}function v(){let P;for(;r._index<o.length;){const _=o[r._index];if(typeof _=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<_.length;)b(_.charCodeAt(r._bufferIndex));else b(_)}}function b(P){d=d(P)}function y(P){Ct(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,D()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function j(P,_){const O=_||{};return O.type=P,O.start=g(),u.events.push(["enter",O,u]),l.push(O),O}function N(P){const _=l.pop();return _.end=g(),u.events.push(["exit",_,u]),_}function w(P,_){C(P,_.from)}function S(P,_){_.restore()}function k(P,_){return O;function O(M,T,R){let F,E,B,L;return Array.isArray(M)?q(M):"tokenize"in M?q([M]):I(M);function I(ne){return te;function te(pe){const J=pe!==null&&ne[pe],xe=pe!==null&&ne.null,ye=[...Array.isArray(J)?J:J?[J]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return q(ye)(pe)}}function q(ne){return F=ne,E=0,ne.length===0?R:$(ne[E])}function $(ne){return te;function te(pe){return L=A(),B=ne,ne.partial||(u.currentConstruct=ne),ne.name&&u.parser.constructs.disable.null.includes(ne.name)?Y():ne.tokenize.call(_?Object.assign(Object.create(u),_):u,c,z,Y)(pe)}}function z(ne){return P(B,L),T}function Y(ne){return L.restore(),++E<F.length?$(F[E]):R}}}function C(P,_){P.resolveAll&&!a.includes(P)&&a.push(P),P.resolve&&pa(u.events,_,u.events.length-_,P.resolve(u.events.slice(_),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function A(){const P=g(),_=u.previous,O=u.currentConstruct,M=u.events.length,T=Array.from(l);return{from:M,restore:R};function R(){r=P,u.previous=_,u.currentConstruct=O,u.events.length=M,l=T,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function mSe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function pSe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function gSe(e){const r={constructs:fZ([fSe,...(e||{}).extensions||[]]),content:i(TNe),defined:[],document:i(ONe),flow:i(X1e),lazy:{},string:i(eSe),text:i(tSe)};return r;function i(a){return o;function o(l){return hSe(r,a,l)}}}function xSe(e){for(;!xZ(e););return e}const pF=/[\0\t\n\r]/g;function vSe(){let e=1,t="",n=!0,r;return i;function i(a,o,l){const c=[];let u,d,f,h,m;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(pF.lastIndex=f,u=pF.exec(a),h=u&&u.index!==void 0?u.index:a.length,m=a.charCodeAt(h),!u){t=a.slice(f);break}if(m===10&&f===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<h&&(c.push(a.slice(f,h)),e+=h-f),m){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const ySe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function bSe(e){return e.replace(ySe,jSe)}function jSe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return hZ(n.slice(a?2:1),a?16:10)}return iO(n)||e}const NZ={}.hasOwnProperty;function wSe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),NSe(n)(xSe(gSe(n).document().write(vSe()(e,t,!0))))}function NSe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(be),autolinkProtocol:A,autolinkEmail:A,atxHeading:a($e),blockQuote:a(xe),characterEscape:A,characterReference:A,codeFenced:a(ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ye,o),codeText:a(re,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(ue),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(ke),hardBreakEscape:a(Ve),hardBreakTrailing:a(Ve),htmlFlow:a(gt,o),htmlFlowData:A,htmlText:a(gt,o),htmlTextData:A,image:a(He),label:o,link:a(be),listItem:a(sn),listItemValue:h,listOrdered:a(xt,f),listUnordered:a(xt),paragraph:a(K),reference:$,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a($e),strong:a(de),thematicBreak:a(Oe)},exit:{atxHeading:c(),atxHeadingSequence:w,autolink:c(),autolinkEmail:J,autolinkProtocol:pe,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:ne,characterReference:te,codeFenced:c(v),codeFencedFence:p,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:D,codeIndented:c(b),codeText:c(T),codeTextData:D,data:D,definition:c(),definitionDestinationString:N,definitionLabelString:y,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(_),hardBreakTrailing:c(_),htmlFlow:c(O),htmlFlowData:D,htmlText:c(M),htmlTextData:D,image:c(F),label:B,labelText:E,lineEnding:P,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:z,resourceDestinationString:L,resourceTitleString:I,resource:q,setextHeading:c(C),setextHeadingLineSequence:k,setextHeadingText:S,strong:c(),thematicBreak:c()}};SZ(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Z){let W={type:"root",children:[]};const me={stack:[W],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},Ae=[];let Je=-1;for(;++Je<Z.length;)if(Z[Je][1].type==="listOrdered"||Z[Je][1].type==="listUnordered")if(Z[Je][0]==="enter")Ae.push(Je);else{const St=Ae.pop();Je=i(Z,St,Je)}for(Je=-1;++Je<Z.length;){const St=t[Z[Je][0]];NZ.call(St,Z[Je][1].type)&&St[Z[Je][1].type].call(Object.assign({sliceSerialize:Z[Je][2].sliceSerialize},me),Z[Je][1])}if(me.tokenStack.length>0){const St=me.tokenStack[me.tokenStack.length-1];(St[1]||gF).call(me,void 0,St[0])}for(W.position={start:Ic(Z.length>0?Z[0][1].start:{line:1,column:1,offset:0}),end:Ic(Z.length>0?Z[Z.length-2][1].end:{line:1,column:1,offset:0})},Je=-1;++Je<t.transforms.length;)W=t.transforms[Je](W)||W;return W}function i(Z,W,me){let Ae=W-1,Je=-1,St=!1,Jn,Rn,Cs,Vs;for(;++Ae<=me;){const _r=Z[Ae];switch(_r[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_r[0]==="enter"?Je++:Je--,Vs=void 0;break}case"lineEndingBlank":{_r[0]==="enter"&&(Jn&&!Vs&&!Je&&!Cs&&(Cs=Ae),Vs=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Vs=void 0}if(!Je&&_r[0]==="enter"&&_r[1].type==="listItemPrefix"||Je===-1&&_r[0]==="exit"&&(_r[1].type==="listUnordered"||_r[1].type==="listOrdered")){if(Jn){let _i=Ae;for(Rn=void 0;_i--;){const Xr=Z[_i];if(Xr[1].type==="lineEnding"||Xr[1].type==="lineEndingBlank"){if(Xr[0]==="exit")continue;Rn&&(Z[Rn][1].type="lineEndingBlank",St=!0),Xr[1].type="lineEnding",Rn=_i}else if(!(Xr[1].type==="linePrefix"||Xr[1].type==="blockQuotePrefix"||Xr[1].type==="blockQuotePrefixWhitespace"||Xr[1].type==="blockQuoteMarker"||Xr[1].type==="listItemIndent"))break}Cs&&(!Rn||Cs<Rn)&&(Jn._spread=!0),Jn.end=Object.assign({},Rn?Z[Rn][1].start:_r[1].end),Z.splice(Rn||Ae,0,["exit",Jn,_r[2]]),Ae++,me++}if(_r[1].type==="listItemPrefix"){const _i={type:"listItem",_spread:!1,start:Object.assign({},_r[1].start),end:void 0};Jn=_i,Z.splice(Ae,0,["enter",_i,_r[2]]),Ae++,me++,Cs=void 0,Vs=!0}}}return Z[W][1]._spread=St,me}function a(Z,W){return me;function me(Ae){l.call(this,Z(Ae),Ae),W&&W.call(this,Ae)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Z,W,me){this.stack[this.stack.length-1].children.push(Z),this.stack.push(Z),this.tokenStack.push([W,me||void 0]),Z.position={start:Ic(W.start),end:void 0}}function c(Z){return W;function W(me){Z&&Z.call(this,me),u.call(this,me)}}function u(Z,W){const me=this.stack.pop(),Ae=this.tokenStack.pop();if(Ae)Ae[0].type!==Z.type&&(W?W.call(this,Z,Ae[0]):(Ae[1]||gF).call(this,Z,Ae[0]));else throw new Error("Cannot close `"+Z.type+"` ("+Ax({start:Z.start,end:Z.end})+"): its not open");me.position.end=Ic(Z.end)}function d(){return sO(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(Z){if(this.data.expectingFirstListItemValue){const W=this.stack[this.stack.length-2];W.start=Number.parseInt(this.sliceSerialize(Z),10),this.data.expectingFirstListItemValue=void 0}}function m(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.lang=Z}function g(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.meta=Z}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.value=Z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.value=Z.replace(/(\r?\n|\r)$/g,"")}function y(Z){const W=this.resume(),me=this.stack[this.stack.length-1];me.label=W,me.identifier=Co(this.sliceSerialize(Z)).toLowerCase()}function j(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.title=Z}function N(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.url=Z}function w(Z){const W=this.stack[this.stack.length-1];if(!W.depth){const me=this.sliceSerialize(Z).length;W.depth=me}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function k(Z){const W=this.stack[this.stack.length-1];W.depth=this.sliceSerialize(Z).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(Z){const me=this.stack[this.stack.length-1].children;let Ae=me[me.length-1];(!Ae||Ae.type!=="text")&&(Ae=ve(),Ae.position={start:Ic(Z.start),end:void 0},me.push(Ae)),this.stack.push(Ae)}function D(Z){const W=this.stack.pop();W.value+=this.sliceSerialize(Z),W.position.end=Ic(Z.end)}function P(Z){const W=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=W.children[W.children.length-1];me.position.end=Ic(Z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(W.type)&&(A.call(this,Z),D.call(this,Z))}function _(){this.data.atHardBreak=!0}function O(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.value=Z}function M(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.value=Z}function T(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.value=Z}function R(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=W,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function F(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=W,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function E(Z){const W=this.sliceSerialize(Z),me=this.stack[this.stack.length-2];me.label=bSe(W),me.identifier=Co(W).toLowerCase()}function B(){const Z=this.stack[this.stack.length-1],W=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const Ae=Z.children;me.children=Ae}else me.alt=W}function L(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.url=Z}function I(){const Z=this.resume(),W=this.stack[this.stack.length-1];W.title=Z}function q(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function z(Z){const W=this.resume(),me=this.stack[this.stack.length-1];me.label=W,me.identifier=Co(this.sliceSerialize(Z)).toLowerCase(),this.data.referenceType="full"}function Y(Z){this.data.characterReferenceType=Z.type}function ne(Z){const W=this.sliceSerialize(Z),me=this.data.characterReferenceType;let Ae;me?(Ae=hZ(W,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ae=iO(W);const Je=this.stack[this.stack.length-1];Je.value+=Ae}function te(Z){const W=this.stack.pop();W.position.end=Ic(Z.end)}function pe(Z){D.call(this,Z);const W=this.stack[this.stack.length-1];W.url=this.sliceSerialize(Z)}function J(Z){D.call(this,Z);const W=this.stack[this.stack.length-1];W.url="mailto:"+this.sliceSerialize(Z)}function xe(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ke(){return{type:"emphasis",children:[]}}function $e(){return{type:"heading",depth:0,children:[]}}function Ve(){return{type:"break"}}function gt(){return{type:"html",value:""}}function He(){return{type:"image",title:null,url:"",alt:null}}function be(){return{type:"link",title:null,url:"",children:[]}}function xt(Z){return{type:"list",ordered:Z.type==="listOrdered",start:null,spread:Z._spread,children:[]}}function sn(Z){return{type:"listItem",spread:Z._spread,checked:null,children:[]}}function K(){return{type:"paragraph",children:[]}}function de(){return{type:"strong",children:[]}}function ve(){return{type:"text",value:""}}function Oe(){return{type:"thematicBreak"}}}function Ic(e){return{line:e.line,column:e.column,offset:e.offset}}function SZ(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?SZ(e,r):SSe(e,r)}}function SSe(e,t){let n;for(n in t)if(NZ.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gF(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ax({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ax({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ax({start:t.start,end:t.end})+") is still open")}function CSe(e){const t=this;t.parser=n;function n(r){return wSe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function kSe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function PSe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ESe(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function _Se(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ASe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function TSe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Xp(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function DSe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function OSe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function CZ(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function ISe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return CZ(e,t);const i={src:Xp(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function MSe(e,t){const n={src:Xp(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function RSe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function $Se(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return CZ(e,t);const i={href:Xp(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function FSe(e,t){const n={href:Xp(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LSe(e,t,n){const r=e.all(t),i=n?zSe(n):kZ(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(i||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,u),e.applyData(t,u)}function zSe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=kZ(n[r])}return t}function kZ(e){const t=e.spread;return t??e.children.length>1}function BSe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function VSe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qSe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function USe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WSe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=eO(t.children[1]),c=iZ(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function HSe(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const f=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:a,properties:h,children:[]};f&&(g.children=e.all(f),e.patch(f,g),g=e.applyData(f,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function KSe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const xF=9,vF=32;function GSe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(yF(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(yF(t.slice(i),i>0,!1)),a.join("")}function yF(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===xF||a===vF;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===xF||a===vF;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function QSe(e,t){const n={type:"text",value:GSe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function YSe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const XSe={blockquote:kSe,break:PSe,code:ESe,delete:_Se,emphasis:ASe,footnoteReference:TSe,heading:DSe,html:OSe,imageReference:ISe,image:MSe,inlineCode:RSe,linkReference:$Se,link:FSe,listItem:LSe,list:BSe,paragraph:VSe,root:qSe,strong:USe,table:WSe,tableCell:KSe,tableRow:HSe,text:QSe,thematicBreak:YSe,toml:Wb,yaml:Wb,definition:Wb,footnoteDefinition:Wb};function Wb(){}const PZ=-1,V1=0,Dx=1,dw=2,oO=3,lO=4,cO=5,uO=6,EZ=7,_Z=8,bF=typeof self=="object"?self:globalThis,ZSe=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case V1:case PZ:return n(o,i);case Dx:{const l=n([],i);for(const c of o)l.push(r(c));return l}case dw:{const l=n({},i);for(const[c,u]of o)l[r(c)]=r(u);return l}case oO:return n(new Date(o),i);case lO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case cO:{const l=n(new Map,i);for(const[c,u]of o)l.set(r(c),r(u));return l}case uO:{const l=n(new Set,i);for(const c of o)l.add(r(c));return l}case EZ:{const{name:l,message:c}=o;return n(new bF[l](c),i)}case _Z:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new bF[a](o),i)};return r},jF=e=>ZSe(new Map,e)(0),oh="",{toString:JSe}={},{keys:eCe}=Object,zg=e=>{const t=typeof e;if(t!=="object"||!e)return[V1,t];const n=JSe.call(e).slice(8,-1);switch(n){case"Array":return[Dx,oh];case"Object":return[dw,oh];case"Date":return[oO,oh];case"RegExp":return[lO,oh];case"Map":return[cO,oh];case"Set":return[uO,oh];case"DataView":return[Dx,n]}return n.includes("Array")?[Dx,n]:n.includes("Error")?[EZ,n]:[dw,n]},Hb=([e,t])=>e===V1&&(t==="function"||t==="symbol"),tCe=(e,t,n,r)=>{const i=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=zg(o);switch(l){case V1:{let d=o;switch(c){case"bigint":l=_Z,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return i([PZ],o)}return i([l,d],o)}case Dx:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),i([c,[...h]],o)}const d=[],f=i([l,d],o);for(const h of o)d.push(a(h));return f}case dw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],f=i([l,d],o);for(const h of eCe(o))(e||!Hb(zg(o[h])))&&d.push([a(h),a(o[h])]);return f}case oO:return i([l,o.toISOString()],o);case lO:{const{source:d,flags:f}=o;return i([l,{source:d,flags:f}],o)}case cO:{const d=[],f=i([l,d],o);for(const[h,m]of o)(e||!(Hb(zg(h))||Hb(zg(m))))&&d.push([a(h),a(m)]);return f}case uO:{const d=[],f=i([l,d],o);for(const h of o)(e||!Hb(zg(h)))&&d.push(a(h));return f}}const{message:u}=o;return i([l,{name:c,message:u}],o)};return a},wF=(e,{json:t,lossy:n}={})=>{const r=[];return tCe(!(t||n),!!t,new Map,r)(e),r},fw=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?jF(wF(e,t)):structuredClone(e):(e,t)=>jF(wF(e,t));function nCe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function rCe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function sCe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||nCe,r=e.options.footnoteBackLabel||rCe,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),f=String(u.identifier).toUpperCase(),h=Xp(f.toLowerCase());let m=0;const g=[],p=e.footnoteCounts.get(f);for(;p!==void 0&&++m<=p;){g.length>0&&g.push({type:"text",value:" "});let y=typeof n=="string"?n:n(c,m);typeof y=="string"&&(y={type:"text",value:y}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const v=d[d.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const y=v.children[v.children.length-1];y&&y.type==="text"?y.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...g)}else d.push(...g);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(u,b),l.push(b)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...fw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const q1=function(e){if(e==null)return lCe;if(typeof e=="function")return U1(e);if(typeof e=="object")return Array.isArray(e)?iCe(e):aCe(e);if(typeof e=="string")return oCe(e);throw new Error("Expected function, string, or object as test")};function iCe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=q1(e[n]);return U1(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function aCe(e){const t=e;return U1(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function oCe(e){return U1(t);function t(n){return n&&n.type===e}}function U1(e){return t;function t(n,r,i){return!!(cCe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function lCe(){return!0}function cCe(e){return e!==null&&typeof e=="object"&&"type"in e}const AZ=[],uCe=!0,TE=!1,dCe="skip";function TZ(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=q1(i),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=AZ,g,p,v;if((!t||a(c,u,d[d.length-1]||void 0))&&(m=fCe(n(c,d)),m[0]===TE))return m;if("children"in c&&c.children){const b=c;if(b.children&&m[0]!==dCe)for(p=(r?b.children.length:-1)+o,v=d.concat(b);p>-1&&p<b.children.length;){const y=b.children[p];if(g=l(y,p,v)(),g[0]===TE)return g;p=typeof g[1]=="number"?g[1]:p+o}}return m}}}function fCe(e){return Array.isArray(e)?e:typeof e=="number"?[uCe,e]:e==null?AZ:[e]}function dO(e,t,n,r){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=r),TZ(e,a,l,i);function l(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return o(c,f,d)}}const DE={}.hasOwnProperty,hCe={};function mCe(e,t){const n=t||hCe,r=new Map,i=new Map,a=new Map,o={...XSe,...n.handlers},l={all:u,applyData:gCe,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:pCe,wrap:vCe};return dO(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),l;function c(d,f){const h=d.type,m=l.handlers[h];if(DE.call(l.handlers,h)&&m)return m(l,d,f);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in d){const{children:p,...v}=d,b=fw(v);return b.children=l.all(d),b}return fw(d)}return(l.options.unknownHandler||xCe)(l,d,f)}function u(d){const f=[];if("children"in d){const h=d.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],d);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=NF(g.value)),!Array.isArray(g)&&g.type==="element")){const p=g.children[0];p&&p.type==="text"&&(p.value=NF(p.value))}Array.isArray(g)?f.push(...g):f.push(g)}}}return f}}function pCe(e,t){e.position&&(t.position=rNe(e))}function gCe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,fw(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function xCe(e,t){const n=t.data||{},r="value"in t&&!(DE.call(n,"hProperties")||DE.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function vCe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function NF(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function SF(e,t){const n=mCe(e,t),r=n.one(e,void 0),i=sCe(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function yCe(e,t){return e&&"run"in e?async function(n,r){const i=SF(n,{file:r,...t});await e.run(i,r)}:function(n,r){return SF(n,{file:r,...e||t})}}function CF(e){if(e)throw e}var e0=Object.prototype.hasOwnProperty,DZ=Object.prototype.toString,kF=Object.defineProperty,PF=Object.getOwnPropertyDescriptor,EF=function(t){return typeof Array.isArray=="function"?Array.isArray(t):DZ.call(t)==="[object Array]"},_F=function(t){if(!t||DZ.call(t)!=="[object Object]")return!1;var n=e0.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&e0.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||e0.call(t,i)},AF=function(t,n){kF&&n.name==="__proto__"?kF(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},TF=function(t,n){if(n==="__proto__")if(e0.call(t,n)){if(PF)return PF(t,n).value}else return;return t[n]},bCe=function e(){var t,n,r,i,a,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=TF(l,n),i=TF(t,n),l!==i&&(d&&i&&(_F(i)||(a=EF(i)))?(a?(a=!1,o=r&&EF(r)?r:[]):o=r&&_F(r)?r:{},AF(l,{name:n,newValue:e(d,o,i)})):typeof i<"u"&&AF(l,{name:n,newValue:i}));return l};const dk=yn(bCe);function OE(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jCe(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...u){const d=e[++a];let f=-1;if(c){o(c);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,d?wCe(d,l)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function wCe(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(i);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return i(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,i):c instanceof Error?i(c):a(c))}function i(o,...l){n||(n=!0,t(o,...l))}function a(o){i(null,o)}}const qo={basename:NCe,dirname:SCe,extname:CCe,join:kCe,sep:"/"};function NCe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Uy(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function SCe(e){if(Uy(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function CCe(e){Uy(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function kCe(...e){let t=-1,n;for(;++t<e.length;)Uy(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":PCe(n)}function PCe(e){Uy(e);const t=e.codePointAt(0)===47;let n=ECe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function ECe(e,t){let n="",r=0,i=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function Uy(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _Ce={cwd:ACe};function ACe(){return"/"}function IE(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function TCe(e){if(typeof e=="string")e=new URL(e);else if(!IE(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return DCe(e)}function DCe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const fk=["history","path","basename","stem","extname","dirname"];class OZ{constructor(t){let n;t?IE(t)?n={path:t}:typeof t=="string"||OCe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":_Ce.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<fk.length;){const a=fk[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)fk.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qo.basename(this.path):void 0}set basename(t){mk(t,"basename"),hk(t,"basename"),this.path=qo.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?qo.dirname(this.path):void 0}set dirname(t){DF(this.basename,"dirname"),this.path=qo.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?qo.extname(this.path):void 0}set extname(t){if(hk(t,"extname"),DF(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qo.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){IE(t)&&(t=TCe(t)),mk(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?qo.basename(this.path,this.extname):void 0}set stem(t){mk(t,"stem"),hk(t,"stem"),this.path=qo.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ii(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function hk(e,t){if(e&&e.includes(qo.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qo.sep+"`")}function mk(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function DF(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function OCe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ICe=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},MCe={}.hasOwnProperty;class fO extends ICe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jCe()}copy(){const t=new fO;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(dk(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(xk("data",this.frozen),this.namespace[t]=n,this):MCe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(xk("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Kb(t),r=this.parser||this.Parser;return pk("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),pk("process",this.parser||this.Parser),gk("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const l=Kb(t),c=r.parse(l);r.run(c,l,function(d,f,h){if(d||!f||!h)return u(d);const m=f,g=r.stringify(m,h);FCe(g)?h.value=g:h.result=g,u(d,h)});function u(d,f){d||!f?o(d):a?a(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),pk("processSync",this.parser||this.Parser),gk("processSync",this.compiler||this.Compiler),this.process(t,i),IF("processSync","process",n),r;function i(a,o){n=!0,CF(a),r=o}}run(t,n,r){OF(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=Kb(n);i.run(t,c,u);function u(d,f,h){const m=f||t;d?l(d):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),IF("runSync","run",r),i;function a(o,l){CF(o),i=l,r=!0}}stringify(t,n){this.freeze();const r=Kb(n),i=this.compiler||this.Compiler;return gk("stringify",i),OF(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(xk("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;c(d,f)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(i.settings=dk(!0,i.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];a(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===u){h=f;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[m,...g]=d;const p=r[h][1];OE(p)&&OE(m)&&(m=dk(!0,p,m)),r[h]=[u,m,...g]}}}}const RCe=new fO().freeze();function pk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function gk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function xk(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function OF(e){if(!OE(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function IF(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Kb(e){return $Ce(e)?e:new OZ(e)}function $Ce(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function FCe(e){return typeof e=="string"||LCe(e)}function LCe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zCe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",MF=[],RF={allowDangerousHtml:!0},BCe=/^(https?|ircs?|mailto|xmpp)$/i,VCe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hO(e){const t=qCe(e),n=UCe(e);return WCe(t.runSync(t.parse(n),n),e)}function qCe(e){const t=e.rehypePlugins||MF,n=e.remarkPlugins||MF,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...RF}:RF;return RCe().use(CSe).use(n).use(yCe,r).use(t)}function UCe(e){const t=e.children||"",n=new OZ;return typeof t=="string"&&(n.value=t),n}function WCe(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||HCe;for(const d of VCe)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+zCe+d.id,void 0);return dO(e,u),lNe(e,{Fragment:s.Fragment,components:i,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function u(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return o?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let m;for(m in lk)if(Object.hasOwn(lk,m)&&Object.hasOwn(d.properties,m)){const g=d.properties[m],p=lk[m];(p===null||p.includes(d.tagName))&&(d.properties[m]=c(String(g||""),m,d))}}if(d.type==="element"){let m=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(d,f,h)),m&&h&&typeof f=="number")return l&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function HCe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||BCe.test(e.slice(0,t))?e:""}function $F(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function KCe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function GCe(e,t,n){const i=q1((n||{}).ignore||[]),a=QCe(t);let o=-1;for(;++o<a.length;)TZ(e,"text",l);function l(u,d){let f=-1,h;for(;++f<d.length;){const m=d[f],g=h?h.children:void 0;if(i(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,d)}function c(u,d){const f=d[d.length-1],h=a[o][0],m=a[o][1];let g=0;const v=f.children.indexOf(u);let b=!1,y=[];h.lastIndex=0;let j=h.exec(u.value);for(;j;){const N=j.index,w={index:j.index,input:j.input,stack:[...d,u]};let S=m(...j,w);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?h.lastIndex=N+1:(g!==N&&y.push({type:"text",value:u.value.slice(g,N)}),Array.isArray(S)?y.push(...S):S&&y.push(S),g=N+j[0].length,b=!0),!h.global)break;j=h.exec(u.value)}return b?(g<u.value.length&&y.push({type:"text",value:u.value.slice(g)}),f.children.splice(v,1,...y)):y=[u],v+y.length}}function QCe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([YCe(i[0]),XCe(i[1])])}return t}function YCe(e){return typeof e=="string"?new RegExp(KCe(e),"g"):e}function XCe(e){return typeof e=="function"?e:function(){return e}}const vk="phrasing",yk=["autolink","link","image","label"];function ZCe(){return{transforms:[ike],enter:{literalAutolink:eke,literalAutolinkEmail:bk,literalAutolinkHttp:bk,literalAutolinkWww:bk},exit:{literalAutolink:ske,literalAutolinkEmail:rke,literalAutolinkHttp:tke,literalAutolinkWww:nke}}}function JCe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:vk,notInConstruct:yk},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:vk,notInConstruct:yk},{character:":",before:"[ps]",after:"\\/",inConstruct:vk,notInConstruct:yk}]}}function eke(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function bk(e){this.config.enter.autolinkProtocol.call(this,e)}function tke(e){this.config.exit.autolinkProtocol.call(this,e)}function nke(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function rke(e){this.config.exit.autolinkEmail.call(this,e)}function ske(e){this.exit(e)}function ike(e){GCe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ake],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),oke]],{ignore:["link","linkReference"]})}function ake(e,t,n,r,i){let a="";if(!IZ(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!lke(n)))return!1;const o=cke(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function oke(e,t,n,r){return!IZ(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function lke(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function cke(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=$F(e,"(");let a=$F(e,")");for(;r!==-1&&i>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function IZ(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ef(n)||z1(n))&&(!t||n!==47)}MZ.peek=vke;function uke(){this.buffer()}function dke(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function fke(){this.buffer()}function hke(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function mke(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Co(this.sliceSerialize(e)).toLowerCase(),n.label=t}function pke(e){this.exit(e)}function gke(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Co(this.sliceSerialize(e)).toLowerCase(),n.label=t}function xke(e){this.exit(e)}function vke(){return"["}function MZ(e,t,n,r){const i=n.createTracker(r);let a=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{after:"]",before:a})),l(),o(),a+=i.move("]"),a}function yke(){return{enter:{gfmFootnoteCallString:uke,gfmFootnoteCall:dke,gfmFootnoteDefinitionLabelString:fke,gfmFootnoteDefinition:hke},exit:{gfmFootnoteCallString:mke,gfmFootnoteCall:pke,gfmFootnoteDefinitionLabelString:gke,gfmFootnoteDefinition:xke}}}function bke(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:MZ},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,o){const l=a.createTracker(o);let c=l.move("[^");const u=a.enter("footnoteDefinition"),d=a.enter("label");return c+=l.move(a.safe(a.associationId(r),{before:c,after:"]"})),d(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,l.current()),t?RZ:jke))),u(),c}}function jke(e,t,n){return t===0?e:RZ(e,t,n)}function RZ(e,t,n){return(n?"":"    ")+e}const wke=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];$Z.peek=Pke;function Nke(){return{canContainEols:["delete"],enter:{strikethrough:Cke},exit:{strikethrough:kke}}}function Ske(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:wke}],handlers:{delete:$Z}}}function Cke(e){this.enter({type:"delete",children:[]},e)}function kke(e){this.exit(e)}function $Z(e,t,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function Pke(){return"~"}function Eke(e){return e.length}function _ke(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Eke,a=[],o=[],l=[],c=[];let u=0,d=-1;for(;++d<e.length;){const p=[],v=[];let b=-1;for(e[d].length>u&&(u=e[d].length);++b<e[d].length;){const y=Ake(e[d][b]);if(n.alignDelimiters!==!1){const j=i(y);v[b]=j,(c[b]===void 0||j>c[b])&&(c[b]=j)}p.push(y)}o[d]=p,l[d]=v}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)a[f]=FF(r[f]);else{const p=FF(r);for(;++f<u;)a[f]=p}f=-1;const h=[],m=[];for(;++f<u;){const p=a[f];let v="",b="";p===99?(v=":",b=":"):p===108?v=":":p===114&&(b=":");let y=n.alignDelimiters===!1?1:Math.max(1,c[f]-v.length-b.length);const j=v+"-".repeat(y)+b;n.alignDelimiters!==!1&&(y=v.length+y+b.length,y>c[f]&&(c[f]=y),m[f]=y),h[f]=j}o.splice(1,0,h),l.splice(1,0,m),d=-1;const g=[];for(;++d<o.length;){const p=o[d],v=l[d];f=-1;const b=[];for(;++f<u;){const y=p[f]||"";let j="",N="";if(n.alignDelimiters!==!1){const w=c[f]-(v[f]||0),S=a[f];S===114?j=" ".repeat(w):S===99?w%2?(j=" ".repeat(w/2+.5),N=" ".repeat(w/2-.5)):(j=" ".repeat(w/2),N=j):N=" ".repeat(w)}n.delimiterStart!==!1&&!f&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&y==="")&&(n.delimiterStart!==!1||f)&&b.push(" "),n.alignDelimiters!==!1&&b.push(j),b.push(y),n.alignDelimiters!==!1&&b.push(N),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&b.push("|")}g.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return g.join(`
`)}function Ake(e){return e==null?"":String(e)}function FF(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Tke(e,t,n,r){const i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(e,a.current()),Dke);return i(),o}function Dke(e,t,n){return">"+(n?"":" ")+e}function Oke(e,t){return LF(e,t.inConstruct,!0)&&!LF(e,t.notInConstruct,!1)}function LF(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function zF(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Oke(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Ike(e,t){const n=String(e);let r=n.indexOf(t),i=r,a=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}function Mke(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Rke(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function $ke(e,t,n,r){const i=Rke(n),a=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Mke(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(a,Fke);return f(),h}const l=n.createTracker(r),c=i.repeat(Math.max(Ike(a,i)+1,3)),u=n.enter("codeFenced");let d=l.move(c);if(e.lang){const f=n.enter(`codeFencedLang${o}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${o}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),f()}return d+=l.move(`
`),a&&(d+=l.move(a+`
`)),d+=l.move(c),u(),d}function Fke(e,t,n){return(n?"":"    ")+e}function mO(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Lke(e,t,n,r){const i=mO(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),o(),u}function zke(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function _v(e){return"&#x"+e.toString(16).toUpperCase()+";"}function hw(e,t,n){const r=Gm(e),i=Gm(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}FZ.peek=Bke;function FZ(e,t,n,r){const i=zke(n),a=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let c=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),d=hw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=_v(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=hw(r.after.charCodeAt(0),f,i);h.inside&&(c=c.slice(0,-1)+_v(f));const m=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+m}function Bke(e,t,n){return n.options.emphasis||"*"}function Vke(e,t){let n=!1;return dO(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,TE}),!!((!e.depth||e.depth<3)&&sO(e)&&(t.options.setext||n))}function qke(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(Vke(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");a.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(u)&&(u=_v(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}LZ.peek=Uke;function LZ(e){return e.value||""}function Uke(){return"<"}zZ.peek=Wke;function zZ(e,t,n,r){const i=mO(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),u+=c.move(")"),o(),u}function Wke(){return"!"}BZ.peek=Hke;function BZ(e,t,n,r){const i=e.referenceType,a=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,a(),i==="full"||!u||u!==f?c+=l.move(f+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Hke(){return"!"}VZ.peek=Kke;function VZ(e,t,n){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const o=n.unsafe[a],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return i+r+i}function Kke(){return"`"}function qZ(e,t){const n=sO(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}UZ.peek=Gke;function UZ(e,t,n,r){const i=mO(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(qZ(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),l(),n.stack=d,f}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${a}`),u+=o.move(" "+i),u+=o.move(n.safe(e.title,{before:u,after:i,...o.current()})),u+=o.move(i),c()),u+=o.move(")"),l(),u}function Gke(e,t,n){return qZ(e,n)?"<":"["}WZ.peek=Qke;function WZ(e,t,n,r){const i=e.referenceType,a=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,a(),i==="full"||!u||u!==f?c+=l.move(f+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Qke(){return"["}function pO(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Yke(e){const t=pO(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Xke(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function HZ(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Zke(e,t,n,r){const i=n.enter("list"),a=n.bulletCurrent;let o=e.ordered?Xke(n):pO(n);const l=e.ordered?o==="."?")":".":Yke(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),HZ(n)===o&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),u}function Jke(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function ePe(e,t,n,r){const i=Jke(n);let a=n.bulletCurrent||pO(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(a+" ".repeat(o-a.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),d);return c(),u;function d(f,h,m){return h?(m?"":" ".repeat(o))+f:(m?a:a+" ".repeat(o-a.length))+f}}function tPe(e,t,n,r){const i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(e,r);return a(),i(),o}const nPe=q1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function rPe(e,t,n,r){return(e.children.some(function(o){return nPe(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function sPe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}KZ.peek=iPe;function KZ(e,t,n,r){const i=sPe(n),a=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let c=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),d=hw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=_v(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=hw(r.after.charCodeAt(0),f,i);h.inside&&(c=c.slice(0,-1)+_v(f));const m=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+m}function iPe(e,t,n){return n.options.strong||"*"}function aPe(e,t,n,r){return n.safe(e.value,r)}function oPe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function lPe(e,t,n){const r=(HZ(n)+(n.options.ruleSpaces?" ":"")).repeat(oPe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const GZ={blockquote:Tke,break:zF,code:$ke,definition:Lke,emphasis:FZ,hardBreak:zF,heading:qke,html:LZ,image:zZ,imageReference:BZ,inlineCode:VZ,link:UZ,linkReference:WZ,list:Zke,listItem:ePe,paragraph:tPe,root:rPe,strong:KZ,text:aPe,thematicBreak:lPe};function cPe(){return{enter:{table:uPe,tableData:BF,tableHeader:BF,tableRow:fPe},exit:{codeText:hPe,table:dPe,tableData:jk,tableHeader:jk,tableRow:jk}}}function uPe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function dPe(e){this.exit(e),this.data.inTable=void 0}function fPe(e){this.enter({type:"tableRow",children:[]},e)}function jk(e){this.exit(e)}function BF(e){this.enter({type:"tableCell",children:[]},e)}function hPe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,mPe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function mPe(e,t){return t==="|"?t:e}function pPe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,p,v){return u(d(m,p,v),m.align)}function l(m,g,p,v){const b=f(m,p,v),y=u([b]);return y.slice(0,y.indexOf(`
`))}function c(m,g,p,v){const b=p.enter("tableCell"),y=p.enter("phrasing"),j=p.containerPhrasing(m,{...v,before:a,after:a});return y(),b(),j}function u(m,g){return _ke(m,{align:g,alignDelimiters:r,padding:n,stringLength:i})}function d(m,g,p){const v=m.children;let b=-1;const y=[],j=g.enter("table");for(;++b<v.length;)y[b]=f(v[b],g,p);return j(),y}function f(m,g,p){const v=m.children;let b=-1;const y=[],j=g.enter("tableRow");for(;++b<v.length;)y[b]=c(v[b],m,g,p);return j(),y}function h(m,g,p){let v=GZ.inlineCode(m,g,p);return p.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function gPe(){return{exit:{taskListCheckValueChecked:VF,taskListCheckValueUnchecked:VF,paragraph:vPe}}}function xPe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:yPe}}}function VF(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function vPe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function yPe(e,t,n,r){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);a&&l.move(o);let c=GZ.listItem(e,t,n,{...r,...l.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+o}}function bPe(){return[ZCe(),yke(),Nke(),cPe(),gPe()]}function jPe(e){return{extensions:[JCe(),bke(e),Ske(),pPe(e),xPe()]}}const wPe={tokenize:EPe,partial:!0},QZ={tokenize:_Pe,partial:!0},YZ={tokenize:APe,partial:!0},XZ={tokenize:TPe,partial:!0},NPe={tokenize:DPe,partial:!0},ZZ={name:"wwwAutolink",tokenize:kPe,previous:eJ},JZ={name:"protocolAutolink",tokenize:PPe,previous:tJ},vc={name:"emailAutolink",tokenize:CPe,previous:nJ},bl={};function SPe(){return{text:bl}}let ud=48;for(;ud<123;)bl[ud]=vc,ud++,ud===58?ud=65:ud===91&&(ud=97);bl[43]=vc;bl[45]=vc;bl[46]=vc;bl[95]=vc;bl[72]=[vc,JZ];bl[104]=[vc,JZ];bl[87]=[vc,ZZ];bl[119]=[vc,ZZ];function CPe(e,t,n){const r=this;let i,a;return o;function o(f){return!ME(f)||!nJ.call(r,r.previous)||gO(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return ME(f)?(e.consume(f),l):f===64?(e.consume(f),c):n(f)}function c(f){return f===46?e.check(NPe,d,u)(f):f===45||f===95||Zs(f)?(a=!0,e.consume(f),c):d(f)}function u(f){return e.consume(f),i=!0,c}function d(f){return a&&i&&mi(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function kPe(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!eJ.call(r,r.previous)||gO(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(wPe,e.attempt(QZ,e.attempt(YZ,a),n),n)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function PPe(e,t,n){const r=this;let i="",a=!1;return o;function o(f){return(f===72||f===104)&&tJ.call(r,r.previous)&&!gO(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),l):n(f)}function l(f){if(mi(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(f),c}return n(f)}function c(f){return f===47?(e.consume(f),a?u:(a=!0,c)):n(f)}function u(f){return f===null||uw(f)||qn(f)||Ef(f)||z1(f)?n(f):e.attempt(QZ,e.attempt(YZ,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function EPe(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),a):n(o)}function a(o){return o===null?n(o):t(o)}}function _Pe(e,t,n){let r,i,a;return o;function o(u){return u===46||u===95?e.check(XZ,c,l)(u):u===null||qn(u)||Ef(u)||u!==45&&z1(u)?c(u):(a=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),o}function c(u){return i||r||!a?n(u):t(u)}}function APe(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(XZ,t,a)(o):o===null||qn(o)||Ef(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&r++,e.consume(o),i}}function TPe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),a):l===93?(e.consume(l),i):l===60||l===null||qn(l)||Ef(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||qn(l)||Ef(l)?t(l):r(l)}function a(l){return mi(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):mi(l)?(e.consume(l),o):n(l)}}function DPe(e,t,n){return r;function r(a){return e.consume(a),i}function i(a){return Zs(a)?n(a):t(a)}}function eJ(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||qn(e)}function tJ(e){return!mi(e)}function nJ(e){return!(e===47||ME(e))}function ME(e){return e===43||e===45||e===46||e===95||Zs(e)}function gO(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const OPe={tokenize:BPe,partial:!0};function IPe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:FPe,continuation:{tokenize:LPe},exit:zPe}},text:{91:{name:"gfmFootnoteCall",tokenize:$Pe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:MPe,resolveTo:RPe}}}}function MPe(e,t,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Co(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function RPe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function $Pe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),c}function c(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(f){if(a>999||f===93&&!o||f===null||f===91||qn(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(Co(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return qn(f)||(o=!0),a++,e.consume(f),f===92?d:u}function d(f){return f===91||f===92||f===93?(e.consume(f),a++,u):u(f)}}function FPe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(o>999||g===93&&!l||g===null||g===91||qn(g))return n(g);if(g===93){e.exit("chunkString");const p=e.exit("gfmFootnoteDefinitionLabelString");return a=Co(r.sliceSerialize(p)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return qn(g)||(l=!0),o++,e.consume(g),g===92?f:d}function f(g){return g===91||g===92||g===93?(e.consume(g),o++,d):d(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),i.includes(a)||i.push(a),pn(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function LPe(e,t,n){return e.check(qy,t,e.attempt(OPe,t,n))}function zPe(e){e.exit("gfmFootnoteDefinition")}function BPe(e,t,n){const r=this;return pn(e,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):n(a)}}function VPe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},f={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",d,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",f,l]],m=l.parser.constructs.insideSpan.null;m&&pa(h,h.length,0,B1(m,o.slice(u+1,c),l)),pa(h,h.length,0,[["exit",f,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",d,l]]),pa(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function a(o,l,c){const u=this.previous,d=this.events;let f=0;return h;function h(g){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const p=Gm(u);if(g===126)return f>1?c(g):(o.consume(g),f++,m);if(f<2&&!n)return c(g);const v=o.exit("strikethroughSequenceTemporary"),b=Gm(g);return v._open=!b||b===2&&!!p,v._close=!p||p===2&&!!b,l(g)}}}class qPe{constructor(){this.map=[]}add(t,n,r){UPe(this,t,n,r)}consume(t){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const a of i)t.push(a);i=r.pop()}this.map.length=0}}function UPe(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function WPe(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function HPe(){return{flow:{null:{name:"table",tokenize:KPe,resolveAll:GPe}}}}function KPe(e,t,n){const r=this;let i=0,a=0,o;return l;function l(D){let P=r.events.length-1;for(;P>-1;){const M=r.events[P][1].type;if(M==="lineEnding"||M==="linePrefix")P--;else break}const _=P>-1?r.events[P][1].type:null,O=_==="tableHead"||_==="tableRow"?S:c;return O===S&&r.parser.lazy[r.now().line]?n(D):O(D)}function c(D){return e.enter("tableHead"),e.enter("tableRow"),u(D)}function u(D){return D===124||(o=!0,a+=1),d(D)}function d(D){return D===null?n(D):Ct(D)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),m):n(D):ln(D)?pn(e,d,"whitespace")(D):(a+=1,o&&(o=!1,i+=1),D===124?(e.enter("tableCellDivider"),e.consume(D),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),f(D)))}function f(D){return D===null||D===124||qn(D)?(e.exit("data"),d(D)):(e.consume(D),D===92?h:f)}function h(D){return D===92||D===124?(e.consume(D),f):f(D)}function m(D){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(D):(e.enter("tableDelimiterRow"),o=!1,ln(D)?pn(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):g(D))}function g(D){return D===45||D===58?v(D):D===124?(o=!0,e.enter("tableCellDivider"),e.consume(D),e.exit("tableCellDivider"),p):w(D)}function p(D){return ln(D)?pn(e,v,"whitespace")(D):v(D)}function v(D){return D===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(D),e.exit("tableDelimiterMarker"),b):D===45?(a+=1,b(D)):D===null||Ct(D)?N(D):w(D)}function b(D){return D===45?(e.enter("tableDelimiterFiller"),y(D)):w(D)}function y(D){return D===45?(e.consume(D),y):D===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(D),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(D))}function j(D){return ln(D)?pn(e,N,"whitespace")(D):N(D)}function N(D){return D===124?g(D):D===null||Ct(D)?!o||i!==a?w(D):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(D)):w(D)}function w(D){return n(D)}function S(D){return e.enter("tableRow"),k(D)}function k(D){return D===124?(e.enter("tableCellDivider"),e.consume(D),e.exit("tableCellDivider"),k):D===null||Ct(D)?(e.exit("tableRow"),t(D)):ln(D)?pn(e,k,"whitespace")(D):(e.enter("data"),C(D))}function C(D){return D===null||D===124||qn(D)?(e.exit("data"),k(D)):(e.consume(D),D===92?A:C)}function A(D){return D===92||D===124?(e.consume(D),C):C(D)}}function GPe(e,t){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,d,f;const h=new qPe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(qF(h,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",d,t]])),i=g.type==="tableDelimiterRow"?2:d?3:1):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],f=Gb(h,t,a,i,void 0,f),a=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],f=Gb(h,t,a,i,void 0,f)),a=o,o=[a[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,a[1]!==0?(o[0]=o[1],f=Gb(h,t,a,i,n,f)):o[1]!==0&&(f=Gb(h,t,o,i,n,f)),i=0):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&qF(h,t,c,u,d),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=WPe(t.events,n))}return e}function Gb(e,t,n,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(a.end=Object.assign({},xh(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const c=xh(t.events,n[1]);if(a={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const u=xh(t.events,n[2]),d=xh(t.events,n[3]),f={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,p=n[3]-n[2]-1;e.add(g,p,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(a.end=Object.assign({},xh(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function qF(e,t,n,r,i){const a=[],o=xh(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function xh(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const QPe={name:"tasklistCheck",tokenize:XPe};function YPe(){return{text:{91:QPe}}}function XPe(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),a)}function a(c){return qn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return Ct(c)?t(c):ln(c)?e.check({tokenize:ZPe},t,n)(c):n(c)}}function ZPe(e,t,n){return pn(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function JPe(e){return fZ([SPe(),IPe(),VPe(e),HPe(),YPe()])}const e2e={};function xO(e){const t=this,n=e||e2e,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(JPe(n)),a.push(bPe()),o.push(jPe(n))}function mw({attachments:e,onAttachmentsChange:t,disabled:n=!1,maxFiles:r=3,maxSizeMB:i=5}){const a=x.useRef(null),[o,l]=x.useState(null),c=async m=>{const g=m.target.files;if(!g||g.length===0)return;l(null);const p=[];for(let v=0;v<g.length;v++){if(e.length+p.length>=r){l(`Maximum ${r} files allowed`);break}const b=g[v];if(b.size/(1024*1024)>i){l(`File ${b.name} exceeds ${i}MB limit`);continue}let j="other",N;b.type.startsWith("image/")?(j="image",N=await d(b)):(b.type.startsWith("text/")||b.name.endsWith(".txt")||b.name.endsWith(".md")||b.name.endsWith(".csv")||b.name.endsWith(".json"))&&(j="text"),p.push({file:b,preview:N,type:j})}t([...e,...p]),a.current&&(a.current.value="")},u=m=>{const g=e.filter((p,v)=>v!==m);t(g)},d=m=>new Promise((g,p)=>{const v=new FileReader;v.onload=()=>g(v.result),v.onerror=p,v.readAsDataURL(m)}),f=m=>{switch(m){case"image":return PK;case"text":return Sn;default:return uv}},h=m=>m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/(1024*1024)).toFixed(1)} MB`;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{ref:a,type:"file",multiple:!0,accept:"image/*,.txt,.md,.csv,.json,.pdf",onChange:c,className:"hidden","data-testid":"input-file-attachment"}),s.jsx(H,{type:"button",size:"icon",variant:"ghost",onClick:()=>{var m;return(m=a.current)==null?void 0:m.click()},disabled:n||e.length>=r,title:`Attach files (max ${r})`,"data-testid":"button-attach-file",children:s.jsx(TK,{className:"h-4 w-4"})}),o&&s.jsx("p",{className:"text-xs text-destructive","data-testid":"text-attachment-error",children:o}),e.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2","data-testid":"attachment-list",children:e.map((m,g)=>{const p=f(m.type);return s.jsxs("div",{className:"relative group flex items-center gap-1 bg-muted rounded-md p-1 pr-2","data-testid":`attachment-item-${g}`,children:[m.type==="image"&&m.preview?s.jsx("img",{src:m.preview,alt:m.file.name,className:"w-8 h-8 object-cover rounded"}):s.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-background rounded",children:s.jsx(p,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"text-xs truncate max-w-[100px]",children:m.file.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:h(m.file.size)})]}),s.jsx(H,{type:"button",size:"icon",variant:"ghost",className:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>u(g),"data-testid":`button-remove-attachment-${g}`,children:s.jsx(Fn,{className:"h-3 w-3"})})]},g)})})]})}async function t2e(e){return e.type==="image"&&e.preview?`[Image attached: ${e.file.name}]

(Image data provided as base64)`:e.type==="text"?new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(`[File: ${e.file.name}]
\`\`\`
${i}
\`\`\``)},r.onerror=n,r.readAsText(e.file)}):`[Attached file: ${e.file.name} (${e.file.type})]`}async function rJ(e){return e.length===0?"":`

---
Attached files:
`+(await Promise.all(e.map(t2e))).join(`

`)}function sJ({value:e,onChange:t,onKeyDown:n,disabled:r=!1,placeholder:i="Type @ to mention...",className:a=""}){const{selectedProjectId:o}=jt(),l=x.useRef(null),c=x.useRef(null),[u,d]=x.useState(!1),[f,h]=x.useState(""),[m,g]=x.useState(-1),[p,v]=x.useState(0),{data:b=[]}=je({queryKey:o?[`/api/projects/${o}/tasks`]:["__disabled__"],enabled:!!o&&u}),{data:y=[]}=je({queryKey:o?[`/api/projects/${o}/risks`]:["__disabled__"],enabled:!!o&&u}),{data:j=[]}=je({queryKey:o?[`/api/projects/${o}/issues`]:["__disabled__"],enabled:!!o&&u}),{data:N=[]}=je({queryKey:o?[`/api/projects/${o}/stakeholders`]:["__disabled__"],enabled:!!o&&u}),S=[...b.map(_=>{var O;return{id:`task-${_.id}`,type:"task",name:_.name,code:_.wbsCode,description:(O=_.description)==null?void 0:O.substring(0,50)}}),...y.map(_=>{var O;return{id:`risk-${_.id}`,type:"risk",name:_.title,code:_.code,description:(O=_.description)==null?void 0:O.substring(0,50)}}),...j.map(_=>{var O;return{id:`issue-${_.id}`,type:"issue",name:_.title,code:_.code,description:(O=_.description)==null?void 0:O.substring(0,50)}}),...N.map(_=>({id:`stakeholder-${_.id}`,type:"stakeholder",name:_.name,description:_.role||_.organization}))].filter(_=>{var M,T;const O=f.toLowerCase();return _.name.toLowerCase().includes(O)||((M=_.code)==null?void 0:M.toLowerCase().includes(O))||((T=_.description)==null?void 0:T.toLowerCase().includes(O))}).slice(0,10),k=_=>{const O=_.target.value,M=_.target.selectionStart;t(O);const T=O.substring(0,M),R=T.lastIndexOf("@");if(R!==-1){const F=T.substring(R+1);if(!F.includes(" ")&&!F.includes(`
`)){d(!0),h(F),g(R),v(0);return}}d(!1),h(""),g(-1)},C=x.useCallback(_=>{if(m===-1)return;const O=e.substring(0,m),M=e.substring(m+f.length+1),T=`@${_.type}:${_.code||_.name}`;t(O+T+" "+M),d(!1),h(""),g(-1),setTimeout(()=>{if(l.current){const R=O.length+T.length+1;l.current.setSelectionRange(R,R),l.current.focus()}},0)},[m,f,e,t]),A=_=>{if(u&&S.length>0){if(_.key==="ArrowDown"){_.preventDefault(),v(O=>Math.min(O+1,S.length-1));return}if(_.key==="ArrowUp"){_.preventDefault(),v(O=>Math.max(O-1,0));return}if(_.key==="Enter"||_.key==="Tab"){_.preventDefault(),C(S[p]);return}if(_.key==="Escape"){_.preventDefault(),d(!1);return}}n==null||n(_)};x.useEffect(()=>{const _=O=>{c.current&&!c.current.contains(O.target)&&l.current&&!l.current.contains(O.target)&&d(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const D=_=>{switch(_){case"task":return JT;case"risk":return ft;case"issue":return bt;case"stakeholder":return Cn;case"cost":return ur}},P=_=>{switch(_){case"task":return"text-blue-500";case"risk":return"text-orange-500";case"issue":return"text-red-500";case"stakeholder":return"text-green-500";case"cost":return"text-purple-500"}};return s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ht,{ref:l,value:e,onChange:k,onKeyDown:A,disabled:r,placeholder:i,className:`min-h-[60px] resize-none ${a}`,"data-testid":"input-message-mention"}),u&&s.jsxs("div",{ref:c,className:"absolute bottom-full left-0 right-0 mb-1 bg-popover border rounded-md shadow-lg z-50 max-h-64 overflow-hidden","data-testid":"mention-dropdown",children:[s.jsx("div",{className:"p-2 border-b bg-muted/50",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"Type to search tasks, risks, issues, or stakeholders"})}),s.jsx(On,{className:"max-h-48",children:S.length===0?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:f?"No matches found":"Loading..."}):s.jsx("div",{className:"py-1",children:S.map((_,O)=>{const M=D(_.type);return s.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-left flex items-center gap-2 hover:bg-accent ${O===p?"bg-accent":""}`,onClick:()=>C(_),"data-testid":`mention-item-${_.id}`,children:[s.jsx(M,{className:`h-4 w-4 flex-shrink-0 ${P(_.type)}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[_.code&&s.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:_.code}),s.jsx("span",{className:"text-sm truncate",children:_.name})]}),_.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:_.description})]}),s.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:_.type})]},_.id)})})})]})]})}const n2e=Vf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$t=x.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:he(n2e({variant:t}),e),...n}));$t.displayName="Alert";const r2e=x.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:he("mb-1 font-medium leading-none tracking-tight",e),...t}));r2e.displayName="AlertTitle";const Ft=x.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:he("text-sm [&_p]:leading-relaxed",e),...t}));Ft.displayName="AlertDescription";function iJ({open:e,onOpenChange:t,preview:n,functionName:r,args:i,onApproved:a}){const{toast:o}=Nt(),l=Pe({mutationFn:async()=>{if(!n)throw new Error("No preview available");return await fe("POST","/api/ai/execute-action",{actionId:n.actionId,functionName:r,args:i})},onSuccess:()=>{we.invalidateQueries(),o({title:"Action Executed",description:(n==null?void 0:n.description)||"Action completed successfully"}),a==null||a(),t(!1)},onError:f=>{o({title:"Execution Failed",description:f.message,variant:"destructive"})}}),c=Pe({mutationFn:async()=>{if(!n)throw new Error("No preview available");return await fe("POST","/api/ai/reject-action",{actionId:n.actionId})},onSuccess:()=>{o({title:"Action Rejected",description:"The action has been cancelled"}),t(!1)},onError:f=>{o({title:"Error",description:f.message,variant:"destructive"})}});if(!n)return null;const u=f=>{switch(f){case"create":return"bg-green-500/10 text-green-700 dark:text-green-400";case"update":return"bg-blue-500/10 text-blue-700 dark:text-blue-400";case"delete":return"bg-red-500/10 text-red-700 dark:text-red-400";case"bulk":return"bg-amber-500/10 text-amber-700 dark:text-amber-400";default:return"bg-muted"}},d=f=>{switch(f){case"add":return s.jsx(pr,{className:"h-4 w-4 text-green-500"});case"modify":return s.jsx(ft,{className:"h-4 w-4 text-blue-500"});case"remove":return s.jsx(Fn,{className:"h-4 w-4 text-red-500"});default:return null}};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] flex flex-col",children:[s.jsxs(Bt,{children:[s.jsxs(Vt,{className:"flex items-center gap-2",children:["Review AI Action",s.jsx(ae,{className:u(n.type),children:n.type.toUpperCase()})]}),s.jsx(ir,{children:n.description})]}),s.jsx(On,{className:"flex-1 pr-4",children:s.jsxs("div",{className:"space-y-4",children:[n.warnings&&n.warnings.length>0&&s.jsxs($t,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:s.jsx("div",{className:"space-y-1",children:n.warnings.map((f,h)=>s.jsx("p",{children:f},h))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Changes to be made:"}),s.jsx("div",{className:"space-y-2",children:n.changes.map((f,h)=>s.jsx("div",{className:he("p-3 rounded-lg border",f.type==="add"&&"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",f.type==="modify"&&"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",f.type==="remove"&&"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800"),children:s.jsxs("div",{className:"flex items-start gap-2",children:[d(f.type),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium capitalize",children:f.field}),f.type==="modify"&&f.oldValue!==void 0&&s.jsxs("div",{className:"mt-1 space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground line-through",children:f.oldValue===null?"null":String(f.oldValue)}),s.jsxs("p",{className:"text-xs font-medium",children:[" ",f.newValue===null?"null":String(f.newValue)]})]}),f.type==="add"&&s.jsx("p",{className:"text-xs font-medium mt-1",children:f.newValue===null?"null":String(f.newValue)}),f.type==="remove"&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.oldValue===null?"null":String(f.oldValue)})]})]})},h))})]}),n.affectedIds&&n.affectedIds.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold",children:["Affected Items: ",n.affectedIds.length]}),n.type==="bulk"&&n.affectedIds.length>5?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.affectedIds.slice(0,5).map((f,h)=>s.jsxs(ae,{variant:"outline",children:["ID: ",f]},h)),s.jsxs(ae,{variant:"outline",className:"bg-muted",children:["+",n.affectedIds.length-5," more"]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["This will affect ",n.affectedIds.length," items total"]})]}):s.jsx("div",{className:"flex flex-wrap gap-2",children:n.affectedIds.map((f,h)=>s.jsxs(ae,{variant:"outline",children:["ID: ",f]},h))})]}),n.preview&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Preview:"}),n.preview.summary&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.preview.summary.tasksCount!==void 0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial Tasks"}),s.jsx("p",{className:"text-lg font-semibold",children:n.preview.summary.tasksCount})]}),n.preview.summary.risksCount!==void 0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial Risks"}),s.jsx("p",{className:"text-lg font-semibold",children:n.preview.summary.risksCount})]})]}),n.preview.project&&s.jsxs("div",{className:"pt-2 border-t space-y-1",children:[s.jsxs("p",{className:"text-xs font-medium",children:["Project: ",n.preview.project.name]}),n.preview.project.code&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Code: ",n.preview.project.code]}),n.preview.project.description&&s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:n.preview.project.description})]})]}),!n.preview.summary&&s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify(n.preview,null,2)})})]})]})}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>c.mutate(),disabled:l.isPending||c.isPending,children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Rejecting..."]}):"Reject"}),s.jsx(H,{onClick:()=>l.mutate(),disabled:l.isPending||c.isPending,variant:n.type==="delete"?"destructive":"default",children:l.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Executing..."]}):`Approve & ${n.type==="delete"?"Delete":"Execute"}`})]})]})})}function s2e({organizationId:e,onBack:t,onCancel:n,onProjectCreated:r}){const{toast:i}=Nt();yr();const[a,o]=x.useState(""),[l,c]=x.useState(null),[u,d]=x.useState([]),[f,h]=x.useState(null),m=x.useRef(null),g=Pe({mutationFn:async()=>(await fe("POST","/api/ai/conversations",{title:"Create New Project"})).json(),onSuccess:j=>{c(j.id)},onError:j=>{i({title:"Error",description:j.message,variant:"destructive"})}});x.useEffect(()=>{l||g.mutate()},[]);const{data:p=[],refetch:v}=je({queryKey:l?[`/api/ai/conversations/${l}/messages`]:["__disabled__"],enabled:!!l,retry:1});x.useEffect(()=>{var j;(j=m.current)==null||j.scrollIntoView({behavior:"smooth"})},[p]);const b=Pe({mutationFn:async j=>{if(!l)throw new Error("No conversation initialized");const N=await rJ(u);return(await fe("POST","/api/ai/chat",{conversationId:l,message:j,attachments:N.length>0?N:void 0,context:{currentPage:"create-project-ai",modelName:"gemini-2.5-pro",organizationId:e}})).json()},onSuccess:async j=>{if(o(""),d([]),await v(),j.functionCalls&&j.functionCalls.length>0){for(const N of j.functionCalls)if(N.name==="create_project_from_ai")try{const w=JSON.parse(N.result);w.preview&&h({preview:w.preview,functionName:N.name,args:N.args})}catch(w){console.error("Failed to parse preview:",w)}}},onError:j=>{i({title:"Error",description:j.message,variant:"destructive"})}});Pe({mutationFn:async({functionName:j,args:N})=>(await fe("POST","/api/ai/execute-action",{functionName:j,args:{...N,organizationId:e,previewMode:!1}})).json(),onSuccess:async j=>{var N,w;h(null),(N=j.project)!=null&&N.id?(i({title:"Success",description:"Project created successfully!"}),we.invalidateQueries({queryKey:["/api/projects"]}),r(j.project.id)):(w=j.summary)!=null&&w.projectId&&(i({title:"Success",description:`Project created with ${j.summary.tasksCreated} tasks and ${j.summary.risksCreated} risks!`}),we.invalidateQueries({queryKey:["/api/projects"]}),r(j.summary.projectId))},onError:j=>{i({title:"Error",description:j.message,variant:"destructive"})}});const y=async j=>{j==null||j.preventDefault(),!(!a.trim()||b.isPending)&&b.mutate(a.trim())};return l?s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[s.jsx(On,{className:"flex-1 px-6 py-4 min-h-0",children:p.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[s.jsx(Yl,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Create Project with AI"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Describe your project and I'll help you create a comprehensive project structure with tasks, risks, and milestones. You can attach files with specifications, requirements, or contracts."})]}):s.jsxs("div",{className:"space-y-4",children:[p.map(j=>s.jsxs("div",{className:`flex gap-3 ${j.role==="user"?"justify-end":"justify-start"}`,children:[j.role==="assistant"&&s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Yl,{className:"h-4 w-4 text-primary"})}),s.jsx(ie,{className:`max-w-[80%] ${j.role==="user"?"bg-primary text-primary-foreground":""}`,children:s.jsx("div",{className:"p-3",children:j.role==="assistant"?s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx(hO,{remarkPlugins:[xO],children:j.content})}):s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.content})})}),j.role==="user"&&s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Bn,{className:"h-4 w-4 text-primary-foreground"})})]},j.id)),b.isPending&&s.jsxs("div",{className:"flex gap-3 justify-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Yl,{className:"h-4 w-4 text-primary"})}),s.jsx(ie,{children:s.jsxs("div",{className:"p-3 flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Thinking..."})]})})]}),s.jsx("div",{ref:m})]})}),s.jsxs("div",{className:"border-t p-4 space-y-3",children:[u.length>0&&s.jsx("div",{children:s.jsx(mw,{attachments:u,onAttachmentsChange:d,disabled:b.isPending})}),s.jsxs("form",{onSubmit:y,className:"flex gap-2 items-end",children:[s.jsx(mw,{attachments:[],onAttachmentsChange:j=>d(N=>[...N,...j]),disabled:b.isPending}),s.jsx(sJ,{value:a,onChange:o,placeholder:"Describe your project... (e.g., 'Create a 100MW solar power plant project')",onKeyDown:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),y())},disabled:b.isPending,className:"flex-1"}),s.jsx(H,{type:"submit",size:"icon",disabled:!a.trim()||b.isPending,children:b.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin"}):s.jsx(l1,{className:"h-4 w-4"})})]})]}),f&&s.jsx(iJ,{open:!!f,onOpenChange:j=>{j||h(null)},preview:f.preview,functionName:f.functionName,args:f.args,onApproved:()=>{h(null)}})]}):s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}const i2e=DY.extend({name:jo().min(1,"Name is required"),code:jo().min(1,"Code is required"),startDate:jo().optional().nullable(),endDate:jo().optional().nullable()}),a2e=DY.extend({name:jo().min(1,"Name is required"),code:jo().optional(),startDate:jo().optional().nullable(),endDate:jo().optional().nullable()});function aJ({open:e,onOpenChange:t}){const[n,r]=x.useState(1),[i,a]=x.useState(null),{toast:o}=Nt(),{selectedOrgId:l,selectedProgramId:c}=jt(),u=Pi();yr();const[d,f]=x.useState(null);x.useEffect(()=>{if(!e){const y=setTimeout(()=>{r(1),a(null),f(null),h.reset()},300);return()=>clearTimeout(y)}},[e]);const h=Yve({resolver:eye(i==="template"?a2e:i2e),defaultValues:{name:"",code:"",description:"",startDate:"",endDate:"",status:"planning"}}),m=Pe({mutationFn:async y=>{if(!l)throw new Error("No organization selected. Please select an organization first.");return(await fe("POST","/api/projects",{...y,organizationId:l,programId:c||void 0,startDate:y.startDate?new Date(y.startDate):null,endDate:y.endDate?new Date(y.endDate):null})).json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/projects"]}),o({title:"Success",description:"Project created successfully"}),t(!1)},onError:y=>{o({title:"Error",description:y.message,variant:"destructive"})}}),g=Pe({mutationFn:async y=>{if(!l||!d)throw new Error("Missing required data");return(await fe("POST",`/api/project-templates/${d.id}/create-project`,{name:y.name,organizationId:l,startDate:y.startDate?new Date(y.startDate):new Date})).json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/projects"]}),o({title:"Success",description:"Project created from template successfully"}),t(!1)},onError:y=>{o({title:"Error",description:y.message,variant:"destructive"})}}),p=y=>{if(i==="template"){if(!d){o({title:"Error",description:"Please select a template",variant:"destructive"});return}g.mutate({name:y.name,startDate:y.startDate||""})}else({...y},m.mutate(y))},v=y=>{a(y),r(2)},b=()=>{r(1),a(null)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-[95vw] sm:max-w-[1200px] lg:max-w-[1400px] max-h-[85vh] flex flex-col p-0 gap-0",children:[s.jsx("div",{className:"px-6 pt-6 pb-4",children:s.jsxs(Bt,{children:[s.jsx(Vt,{children:n===1?"Create New Project":i==="empty"?"Project Details":i==="template"?"Select Template":i==="ai"?"Generate with AI":"Import Project Data"}),s.jsx(ir,{children:n===1?"Choose how you would like to start your new project.":i==="empty"?"Enter the basic details for your project.":i==="template"?"Start from a pre-built industry template.":i==="ai"?"Describe your project and let AI build the structure.":"Upload a JSON file and map your data fields."})]})}),n===1&&s.jsx("div",{className:"px-6 pb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[s.jsx(Qb,{icon:yme,title:"Create Empty Project",description:"Start with a blank project and build from scratch.",onClick:()=>v("empty")}),s.jsx(Qb,{icon:Tme,title:"Create from Template",description:"Choose from pre-built templates or your saved projects.",onClick:()=>v("template")}),s.jsx(Qb,{icon:jf,title:"Create from AI",description:"Describe your project and let AI generate the structure.",onClick:()=>v("ai")}),s.jsx(Qb,{icon:Rm,title:"Create from Import",description:"Upload a JSON file and map fields to your project structure.",onClick:()=>v("import")})]})}),n===2&&i==="empty"&&s.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:s.jsx(K$,{...h,children:s.jsxs("form",{onSubmit:h.handleSubmit(p),className:"space-y-4",children:[s.jsx(Oc,{control:h.control,name:"name",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"Project Name"}),s.jsx(Ol,{children:s.jsx(Ce,{placeholder:"e.g. Refinery Expansion",...y})}),s.jsx(Il,{})]})}),s.jsx(Oc,{control:h.control,name:"code",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"Project Code"}),s.jsx(Ol,{children:s.jsx(Ce,{placeholder:"e.g. P-2024-001",...y})}),s.jsx(Il,{})]})}),s.jsx(Oc,{control:h.control,name:"description",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"Description"}),s.jsx(Ol,{children:s.jsx(Ht,{placeholder:"Project details...",...y,value:y.value||""})}),s.jsx(Il,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Oc,{control:h.control,name:"startDate",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"Start Date"}),s.jsx(Ol,{children:s.jsx(Ce,{type:"date",name:y.name,ref:y.ref,onBlur:y.onBlur,onChange:y.onChange,value:y.value||""})}),s.jsx(Il,{})]})}),s.jsx(Oc,{control:h.control,name:"endDate",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"End Date"}),s.jsx(Ol,{children:s.jsx(Ce,{type:"date",name:y.name,ref:y.ref,onBlur:y.onBlur,onChange:y.onChange,value:y.value||""})}),s.jsx(Il,{}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Optional. Leave blank to calculate from schedule."})]})})]}),s.jsx(Oc,{control:h.control,name:"status",render:({field:y})=>s.jsxs(Tl,{children:[s.jsx(Dl,{children:"Status"}),s.jsxs(ze,{onValueChange:y.onChange,defaultValue:y.value||void 0,children:[s.jsx(Ol,{children:s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select status"})})}),s.jsxs(Le,{children:[s.jsx(X,{value:"planning",children:"Planning"}),s.jsx(X,{value:"active",children:"Active"}),s.jsx(X,{value:"on-hold",children:"On Hold"}),s.jsx(X,{value:"completed",children:"Completed"}),s.jsx(X,{value:"archived",children:"Archived"})]})]}),s.jsx(Il,{})]})})]})})}),n===2&&i==="empty"&&s.jsxs(on,{className:"px-6 pb-6 pt-4 border-t",children:[s.jsxs(H,{type:"button",variant:"outline",onClick:b,children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(H,{type:"button",onClick:h.handleSubmit(p),disabled:m.isPending,children:[m.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Project"]})]})]}),n===2&&i==="template"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 flex-1 overflow-hidden flex flex-col min-h-0",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[s.jsx("div",{className:"lg:col-span-2 flex flex-col min-h-0 overflow-hidden",children:s.jsx(uwe,{onSelect:f,selectedTemplateId:d==null?void 0:d.id})}),s.jsx("div",{className:"lg:col-span-1 flex flex-col min-h-0 overflow-hidden lg:border-l lg:pl-6 pt-4 lg:pt-0",children:s.jsx(dwe,{template:d})})]})}),d&&s.jsx(on,{className:"px-6 pb-6 pt-4 border-t flex-col sm:flex-row gap-3 sm:gap-2",children:s.jsx(K$,{...h,children:s.jsxs("form",{onSubmit:h.handleSubmit(p),className:"w-full space-y-4 sm:space-y-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 flex-1",children:[s.jsx(Oc,{control:h.control,name:"name",render:({field:y})=>s.jsxs(Tl,{className:"flex-1",children:[s.jsx(Dl,{className:"text-sm",children:"Project Name"}),s.jsx(Ol,{children:s.jsx(Ce,{placeholder:`e.g. ${d.name}`,...y,className:"min-h-[44px]"})}),s.jsx(Il,{})]})}),s.jsx(Oc,{control:h.control,name:"startDate",render:({field:y})=>s.jsxs(Tl,{className:"sm:w-[200px]",children:[s.jsx(Dl,{className:"text-sm",children:"Start Date"}),s.jsx(Ol,{children:s.jsx(Ce,{type:"date",...y,className:"min-h-[44px]",value:y.value||""})}),s.jsx(Il,{})]})})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-between gap-2 sm:gap-0 pt-2",children:[s.jsxs(H,{type:"button",variant:"outline",onClick:b,className:"min-h-[44px]",children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),className:"min-h-[44px]",children:"Cancel"}),s.jsxs(H,{type:"submit",disabled:g.isPending||!h.watch("name"),className:"min-h-[44px]",children:[g.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Project"]})]})]})]})})}),!d&&s.jsxs(on,{className:"px-6 pb-6 pt-4 border-t",children:[s.jsxs(H,{type:"button",variant:"outline",onClick:b,className:"min-h-[44px]",children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),className:"min-h-[44px]",children:"Cancel"})]})]}),n===2&&i==="import"&&s.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:s.jsx(cwe,{onBack:b,onClose:()=>t(!1)})}),n===2&&i==="ai"&&l&&s.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:s.jsx(s2e,{organizationId:l,onBack:b,onCancel:()=>t(!1),onProjectCreated:y=>{u.invalidateQueries({queryKey:["/api/projects"]}),o({title:"Success",description:"Project created successfully"}),t(!1)}})})]})})}function Qb({icon:e,title:t,description:n,onClick:r,disabled:i,badge:a}){return s.jsx(ie,{className:`cursor-pointer transition-all hover:border-primary hover:shadow-md ${i?"opacity-60 cursor-not-allowed":""}`,onClick:i?void 0:r,children:s.jsxs(Ne,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(e,{className:"h-6 w-6 text-primary"})}),a&&s.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-muted rounded-full",children:a})]}),s.jsx(Se,{className:"text-lg mt-3",children:t}),s.jsx(it,{className:"mt-1",children:n})]})})}var vO="Checkbox",[o2e]=Er(vO),[l2e,c2e]=o2e(vO),oJ=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=x.useState(null),g=kt(t,N=>m(N)),p=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[b=!1,y]=ni({prop:i,defaultProp:a,onChange:u}),j=x.useRef(b);return x.useEffect(()=>{const N=h==null?void 0:h.form;if(N){const w=()=>y(j.current);return N.addEventListener("reset",w),()=>N.removeEventListener("reset",w)}},[h,y]),s.jsxs(l2e,{scope:n,state:b,disabled:l,children:[s.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":bu(b)?"mixed":b,"aria-required":o,"data-state":uJ(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onKeyDown:Re(e.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Re(e.onClick,N=>{y(w=>bu(w)?!0:!w),v&&(p.current=N.isPropagationStopped(),p.current||N.stopPropagation())})}),v&&s.jsx(u2e,{control:h,bubbles:!p.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:bu(a)?!1:a})]})});oJ.displayName=vO;var lJ="CheckboxIndicator",cJ=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,a=c2e(lJ,n);return s.jsx(Yr,{present:r||bu(a.state)||a.state===!0,children:s.jsx(Qe.span,{"data-state":uJ(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});cJ.displayName=lJ;var u2e=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:i,...a}=e,o=x.useRef(null),l=zy(n),c=Ay(t);x.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&m){const g=new Event("click",{bubbles:r});d.indeterminate=bu(n),m.call(d,bu(n)?!1:n),d.dispatchEvent(g)}},[l,n,r]);const u=x.useRef(bu(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function bu(e){return e==="indeterminate"}function uJ(e){return bu(e)?"indeterminate":e?"checked":"unchecked"}var dJ=oJ,d2e=cJ;const Wt=x.forwardRef(({className:e,...t},n)=>s.jsx(dJ,{ref:n,className:he("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(d2e,{className:he("flex items-center justify-center text-current"),children:s.jsx(Sr,{className:"h-4 w-4"})})}));Wt.displayName=dJ.displayName;var UF=1,f2e=.9,h2e=.8,m2e=.17,wk=.1,Nk=.999,p2e=.9999,g2e=.99,x2e=/[\\\/_+.#"@\[\(\{&]/,v2e=/[\\\/_+.#"@\[\(\{&]/g,y2e=/[\s-]/,fJ=/[\s-]/g;function RE(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?UF:g2e;var l=`${i},${a}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(a),u=n.indexOf(c,i),d=0,f,h,m,g;u>=0;)f=RE(e,t,n,r,u+1,a+1,o),f>d&&(u===i?f*=UF:x2e.test(e.charAt(u-1))?(f*=h2e,m=e.slice(i,u-1).match(v2e),m&&i>0&&(f*=Math.pow(Nk,m.length))):y2e.test(e.charAt(u-1))?(f*=f2e,g=e.slice(i,u-1).match(fJ),g&&i>0&&(f*=Math.pow(Nk,g.length))):(f*=m2e,i>0&&(f*=Math.pow(Nk,u-i))),e.charAt(u)!==t.charAt(a)&&(f*=p2e)),(f<wk&&n.charAt(u-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(u-1)!==r.charAt(a))&&(h=RE(e,t,n,r,u+1,a+2,o),h*wk>f&&(f=h*wk)),f>d&&(d=f),u=n.indexOf(c,u+1);return o[l]=d,d}function WF(e){return e.toLowerCase().replace(fJ," ")}function b2e(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,RE(e,t,WF(e),WF(t),0,0,{})}var Bg='[cmdk-group=""]',Sk='[cmdk-group-items=""]',j2e='[cmdk-group-heading=""]',hJ='[cmdk-item=""]',HF=`${hJ}:not([aria-disabled="true"])`,$E="cmdk-item-select",vh="data-value",w2e=(e,t,n)=>b2e(e,t,n),mJ=x.createContext(void 0),Wy=()=>x.useContext(mJ),pJ=x.createContext(void 0),yO=()=>x.useContext(pJ),gJ=x.createContext(void 0),xJ=x.forwardRef((e,t)=>{let n=yh(()=>{var q,$;return{search:"",value:($=(q=e.value)!=null?q:e.defaultValue)!=null?$:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=yh(()=>new Set),i=yh(()=>new Map),a=yh(()=>new Map),o=yh(()=>new Set),l=vJ(e),{label:c,children:u,value:d,onValueChange:f,filter:h,shouldFilter:m,loop:g,disablePointerSelection:p=!1,vimBindings:v=!0,...b}=e,y=Gr(),j=Gr(),N=Gr(),w=x.useRef(null),S=O2e();_f(()=>{if(d!==void 0){let q=d.trim();n.current.value=q,k.emit()}},[d]),_f(()=>{S(6,O)},[]);let k=x.useMemo(()=>({subscribe:q=>(o.current.add(q),()=>o.current.delete(q)),snapshot:()=>n.current,setState:(q,$,z)=>{var Y,ne,te,pe;if(!Object.is(n.current[q],$)){if(n.current[q]=$,q==="search")_(),D(),S(1,P);else if(q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let J=document.getElementById(N);J?J.focus():(Y=document.getElementById(y))==null||Y.focus()}if(S(7,()=>{var J;n.current.selectedItemId=(J=M())==null?void 0:J.id,k.emit()}),z||S(5,O),((ne=l.current)==null?void 0:ne.value)!==void 0){let J=$??"";(pe=(te=l.current).onValueChange)==null||pe.call(te,J);return}}k.emit()}},emit:()=>{o.current.forEach(q=>q())}}),[]),C=x.useMemo(()=>({value:(q,$,z)=>{var Y;$!==((Y=a.current.get(q))==null?void 0:Y.value)&&(a.current.set(q,{value:$,keywords:z}),n.current.filtered.items.set(q,A($,z)),S(2,()=>{D(),k.emit()}))},item:(q,$)=>(r.current.add(q),$&&(i.current.has($)?i.current.get($).add(q):i.current.set($,new Set([q]))),S(3,()=>{_(),D(),n.current.value||P(),k.emit()}),()=>{a.current.delete(q),r.current.delete(q),n.current.filtered.items.delete(q);let z=M();S(4,()=>{_(),(z==null?void 0:z.getAttribute("id"))===q&&P(),k.emit()})}),group:q=>(i.current.has(q)||i.current.set(q,new Set),()=>{a.current.delete(q),i.current.delete(q)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:N,labelId:j,listInnerRef:w}),[]);function A(q,$){var z,Y;let ne=(Y=(z=l.current)==null?void 0:z.filter)!=null?Y:w2e;return q?ne(q,n.current.search,$):0}function D(){if(!n.current.search||l.current.shouldFilter===!1)return;let q=n.current.filtered.items,$=[];n.current.filtered.groups.forEach(Y=>{let ne=i.current.get(Y),te=0;ne.forEach(pe=>{let J=q.get(pe);te=Math.max(J,te)}),$.push([Y,te])});let z=w.current;T().sort((Y,ne)=>{var te,pe;let J=Y.getAttribute("id"),xe=ne.getAttribute("id");return((te=q.get(xe))!=null?te:0)-((pe=q.get(J))!=null?pe:0)}).forEach(Y=>{let ne=Y.closest(Sk);ne?ne.appendChild(Y.parentElement===ne?Y:Y.closest(`${Sk} > *`)):z.appendChild(Y.parentElement===z?Y:Y.closest(`${Sk} > *`))}),$.sort((Y,ne)=>ne[1]-Y[1]).forEach(Y=>{var ne;let te=(ne=w.current)==null?void 0:ne.querySelector(`${Bg}[${vh}="${encodeURIComponent(Y[0])}"]`);te==null||te.parentElement.appendChild(te)})}function P(){let q=T().find(z=>z.getAttribute("aria-disabled")!=="true"),$=q==null?void 0:q.getAttribute(vh);k.setState("value",$||void 0)}function _(){var q,$,z,Y;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let te of r.current){let pe=($=(q=a.current.get(te))==null?void 0:q.value)!=null?$:"",J=(Y=(z=a.current.get(te))==null?void 0:z.keywords)!=null?Y:[],xe=A(pe,J);n.current.filtered.items.set(te,xe),xe>0&&ne++}for(let[te,pe]of i.current)for(let J of pe)if(n.current.filtered.items.get(J)>0){n.current.filtered.groups.add(te);break}n.current.filtered.count=ne}function O(){var q,$,z;let Y=M();Y&&(((q=Y.parentElement)==null?void 0:q.firstChild)===Y&&((z=($=Y.closest(Bg))==null?void 0:$.querySelector(j2e))==null||z.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function M(){var q;return(q=w.current)==null?void 0:q.querySelector(`${hJ}[aria-selected="true"]`)}function T(){var q;return Array.from(((q=w.current)==null?void 0:q.querySelectorAll(HF))||[])}function R(q){let $=T()[q];$&&k.setState("value",$.getAttribute(vh))}function F(q){var $;let z=M(),Y=T(),ne=Y.findIndex(pe=>pe===z),te=Y[ne+q];($=l.current)!=null&&$.loop&&(te=ne+q<0?Y[Y.length-1]:ne+q===Y.length?Y[0]:Y[ne+q]),te&&k.setState("value",te.getAttribute(vh))}function E(q){let $=M(),z=$==null?void 0:$.closest(Bg),Y;for(;z&&!Y;)z=q>0?T2e(z,Bg):D2e(z,Bg),Y=z==null?void 0:z.querySelector(HF);Y?k.setState("value",Y.getAttribute(vh)):F(q)}let B=()=>R(T().length-1),L=q=>{q.preventDefault(),q.metaKey?B():q.altKey?E(1):F(1)},I=q=>{q.preventDefault(),q.metaKey?R(0):q.altKey?E(-1):F(-1)};return x.createElement(Qe.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:q=>{var $;($=b.onKeyDown)==null||$.call(b,q);let z=q.nativeEvent.isComposing||q.keyCode===229;if(!(q.defaultPrevented||z))switch(q.key){case"n":case"j":{v&&q.ctrlKey&&L(q);break}case"ArrowDown":{L(q);break}case"p":case"k":{v&&q.ctrlKey&&I(q);break}case"ArrowUp":{I(q);break}case"Home":{q.preventDefault(),R(0);break}case"End":{q.preventDefault(),B();break}case"Enter":{q.preventDefault();let Y=M();if(Y){let ne=new Event($E);Y.dispatchEvent(ne)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:M2e},c),W1(e,q=>x.createElement(pJ.Provider,{value:k},x.createElement(mJ.Provider,{value:C},q))))}),N2e=x.forwardRef((e,t)=>{var n,r;let i=Gr(),a=x.useRef(null),o=x.useContext(gJ),l=Wy(),c=vJ(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;_f(()=>{if(!u)return l.item(i,o==null?void 0:o.id)},[u]);let d=yJ(i,a,[e.value,e.children,a],e.keywords),f=yO(),h=zu(S=>S.value&&S.value===d.current),m=zu(S=>u||l.filter()===!1?!0:S.search?S.filtered.items.get(i)>0:!0);x.useEffect(()=>{let S=a.current;if(!(!S||e.disabled))return S.addEventListener($E,g),()=>S.removeEventListener($E,g)},[m,e.onSelect,e.disabled]);function g(){var S,k;p(),(k=(S=c.current).onSelect)==null||k.call(S,d.current)}function p(){f.setState("value",d.current,!0)}if(!m)return null;let{disabled:v,value:b,onSelect:y,forceMount:j,keywords:N,...w}=e;return x.createElement(Qe.div,{ref:ac(a,t),...w,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!h,"data-disabled":!!v,"data-selected":!!h,onPointerMove:v||l.getDisablePointerSelection()?void 0:p,onClick:v?void 0:g},e.children)}),S2e=x.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=Gr(),l=x.useRef(null),c=x.useRef(null),u=Gr(),d=Wy(),f=zu(m=>i||d.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);_f(()=>d.group(o),[]),yJ(o,l,[e.value,e.heading,c]);let h=x.useMemo(()=>({id:o,forceMount:i}),[i]);return x.createElement(Qe.div,{ref:ac(l,t),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),W1(e,m=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},x.createElement(gJ.Provider,{value:h},m))))}),C2e=x.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=x.useRef(null),a=zu(o=>!o.search);return!n&&!a?null:x.createElement(Qe.div,{ref:ac(i,t),...r,"cmdk-separator":"",role:"separator"})}),k2e=x.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=yO(),o=zu(u=>u.search),l=zu(u=>u.selectedItemId),c=Wy();return x.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),x.createElement(Qe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:i?e.value:o,onChange:u=>{i||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),P2e=x.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,a=x.useRef(null),o=x.useRef(null),l=zu(u=>u.selectedItemId),c=Wy();return x.useEffect(()=>{if(o.current&&a.current){let u=o.current,d=a.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(f),h.unobserve(u)}}},[]),x.createElement(Qe.div,{ref:ac(a,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},W1(e,u=>x.createElement("div",{ref:ac(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),E2e=x.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...l}=e;return x.createElement(C1,{open:n,onOpenChange:r},x.createElement(k1,{container:o},x.createElement(qp,{"cmdk-overlay":"",className:i}),x.createElement(Up,{"aria-label":e.label,"cmdk-dialog":"",className:a},x.createElement(xJ,{ref:t,...l}))))}),_2e=x.forwardRef((e,t)=>zu(n=>n.filtered.count===0)?x.createElement(Qe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),A2e=x.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...a}=e;return x.createElement(Qe.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},W1(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),Qi=Object.assign(xJ,{List:P2e,Item:N2e,Input:k2e,Group:S2e,Separator:C2e,Dialog:E2e,Empty:_2e,Loading:A2e});function T2e(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function D2e(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function vJ(e){let t=x.useRef(e);return _f(()=>{t.current=e}),t}var _f=typeof window>"u"?x.useEffect:x.useLayoutEffect;function yh(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function zu(e){let t=yO(),n=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,n,n)}function yJ(e,t,n,r=[]){let i=x.useRef(),a=Wy();return _f(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=r.map(u=>u.trim());a.value(e,l,c),(o=t.current)==null||o.setAttribute(vh,l),i.current=l}),i}var O2e=()=>{let[e,t]=x.useState(),n=yh(()=>new Map);return _f(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function I2e(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function W1({asChild:e,children:t},n){return e&&x.isValidElement(t)?x.cloneElement(I2e(t),{ref:t.ref},n(t.props.children)):n(t)}var M2e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ya=x.forwardRef(({className:e,...t},n)=>s.jsx(Qi,{ref:n,className:he("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Ya.displayName=Qi.displayName;const Xa=x.forwardRef(({className:e,...t},n)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(os,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Qi.Input,{ref:n,className:he("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Xa.displayName=Qi.Input.displayName;const Za=x.forwardRef(({className:e,...t},n)=>s.jsx(Qi.List,{ref:n,className:he("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Za.displayName=Qi.List.displayName;const Ja=x.forwardRef((e,t)=>s.jsx(Qi.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Ja.displayName=Qi.Empty.displayName;const Ms=x.forwardRef(({className:e,...t},n)=>s.jsx(Qi.Group,{ref:n,className:he("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Ms.displayName=Qi.Group.displayName;const bO=x.forwardRef(({className:e,...t},n)=>s.jsx(Qi.Separator,{ref:n,className:he("-mx-1 h-px bg-border",e),...t}));bO.displayName=Qi.Separator.displayName;const Rs=x.forwardRef(({className:e,...t},n)=>s.jsx(Qi.Item,{ref:n,className:he("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));Rs.displayName=Qi.Item.displayName;var jO="Popover",[bJ]=Er(jO,[Qu]),Hy=Qu(),[R2e,ed]=bJ(jO),jJ=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=Hy(t),c=x.useRef(null),[u,d]=x.useState(!1),[f=!1,h]=ni({prop:r,defaultProp:i,onChange:a});return s.jsx(p1,{...l,children:s.jsx(R2e,{scope:t,contentId:Gr(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:n})})};jJ.displayName=jO;var wJ="PopoverAnchor",$2e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ed(wJ,n),a=Hy(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return x.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Ty,{...a,...r,ref:t})});$2e.displayName=wJ;var NJ="PopoverTrigger",SJ=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ed(NJ,n),a=Hy(n),o=kt(t,i.triggerRef),l=s.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":_J(i.open),...r,ref:o,onClick:Re(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Ty,{asChild:!0,...a,children:l})});SJ.displayName=NJ;var wO="PopoverPortal",[F2e,L2e]=bJ(wO,{forceMount:void 0}),CJ=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=ed(wO,t);return s.jsx(F2e,{scope:t,forceMount:n,children:s.jsx(Yr,{present:n||a.open,children:s.jsx(Lp,{asChild:!0,container:i,children:r})})})};CJ.displayName=wO;var Qm="PopoverContent",kJ=x.forwardRef((e,t)=>{const n=L2e(Qm,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=ed(Qm,e.__scopePopover);return s.jsx(Yr,{present:r||a.open,children:a.modal?s.jsx(B2e,{...i,ref:t}):s.jsx(V2e,{...i,ref:t})})});kJ.displayName=Qm;var z2e=Pu("PopoverContent.RemoveScroll"),B2e=x.forwardRef((e,t)=>{const n=ed(Qm,e.__scopePopover),r=x.useRef(null),i=kt(t,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return S1(o)},[]),s.jsx(Oy,{as:z2e,allowPinchZoom:!0,children:s.jsx(PJ,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Re(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),V2e=x.forwardRef((e,t)=>{const n=ed(Qm,e.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(PJ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),PJ=x.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=ed(Qm,n),m=Hy(n);return w1(),s.jsx(Dy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(g1,{"data-state":_J(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),EJ="PopoverClose",q2e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ed(EJ,n);return s.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Re(e.onClick,()=>i.onOpenChange(!1))})});q2e.displayName=EJ;var U2e="PopoverArrow",W2e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Hy(n);return s.jsx(x1,{...i,...r,ref:t})});W2e.displayName=U2e;function _J(e){return e?"open":"closed"}var H2e=jJ,K2e=SJ,G2e=CJ,AJ=kJ;const Ls=H2e,Si=K2e,ps=x.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>s.jsx(G2e,{children:s.jsx(AJ,{ref:i,align:t,sideOffset:n,className:he("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));ps.displayName=AJ.displayName;function Ky({entityType:e,entityId:t,value:n=[],onChange:r,placeholder:i="Add tags...",disabled:a=!1,className:o}){const{selectedOrgId:l}=jt(),[c,u]=x.useState(""),[d,f]=x.useState(!1),h=x.useRef(null),{data:m=[]}=je({queryKey:[`/api/tags/entity/${e}/${t}`],queryFn:async()=>(await fe("GET",`/api/tags/entity/${e}/${t}`)).json(),enabled:!!t&&!!l});x.useEffect(()=>{r&&m.length>0&&n.length===0&&r(m)},[m,r,n.length]);const{data:g=[]}=je({queryKey:[`/api/organizations/${l}/tags/search`,c],queryFn:async()=>!c||c.length<1?[]:(await fe("GET",`/api/organizations/${l}/tags/search?q=${encodeURIComponent(c)}&limit=10`)).json(),enabled:!!l&&!!c&&c.length>=1}),p=g.filter(k=>!n.some(C=>C.id===k.id)),v=Pe({mutationFn:async k=>(await fe("POST",`/api/tags/${k}/assign`,{entityType:e,entityId:t})).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tags/entity/${e}/${t}`]}),we.invalidateQueries({queryKey:[`/api/organizations/${l}/tags`]}),u(""),f(!1)}}),b=Pe({mutationFn:async k=>{await fe("DELETE",`/api/tags/${k}/assign/${e}/${t}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tags/entity/${e}/${t}`]}),we.invalidateQueries({queryKey:[`/api/organizations/${l}/tags`]})}}),y=Pe({mutationFn:async k=>{const A=await(await fe("POST",`/api/organizations/${l}/tags`,{name:k})).json();return await fe("POST",`/api/tags/${A.id}/assign`,{entityType:e,entityId:t}),A},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tags/entity/${e}/${t}`]}),we.invalidateQueries({queryKey:[`/api/organizations/${l}/tags`]}),u(""),f(!1)}}),j=k=>{v.mutate(k.id),r&&r([...n,k])},N=k=>{b.mutate(k),r&&r(n.filter(C=>C.id!==k))},w=()=>{c.trim()&&!n.some(k=>k.name.toLowerCase()===c.trim().toLowerCase())&&y.mutate(c.trim())},S=k=>{if(k.key==="Enter"&&c.trim()){k.preventDefault();const C=p.find(A=>A.name.toLowerCase()===c.trim().toLowerCase());C?j(C):w()}else k.key==="Escape"&&f(!1)};return s.jsxs("div",{className:he("space-y-2",o),children:[s.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[40px] p-2 border rounded-md",children:[n.map(k=>s.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",style:k.color?{borderColor:k.color,backgroundColor:`${k.color}20`}:void 0,children:[k.color&&s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:k.color}}),k.name,!a&&s.jsx("button",{type:"button",onClick:()=>N(k.id),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5",children:s.jsx(Fn,{className:"h-3 w-3"})})]},k.id)),!a&&s.jsxs(Ls,{open:d,onOpenChange:f,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"ghost",size:"sm",className:"h-7 px-2 text-muted-foreground",onClick:()=>{var k;return(k=h.current)==null?void 0:k.focus()},children:[s.jsx(Et,{className:"h-4 w-4 mr-1"}),"Add tag"]})}),s.jsx(ps,{className:"w-[300px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{ref:h,placeholder:"Search or create tag...",value:c,onValueChange:u,onKeyDown:S}),s.jsxs(Za,{children:[s.jsx(Ja,{children:c.trim()?s.jsx("div",{className:"p-2",children:s.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:w,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),'Create "',c.trim(),'"']})}):s.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"Start typing to search or create a tag"})}),p.length>0&&s.jsx(Ms,{heading:"Suggestions",children:p.map(k=>s.jsxs(Rs,{onSelect:()=>j(k),className:"flex items-center gap-2",children:[k.color&&s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k.color}}),s.jsx("span",{children:k.name}),k.category&&s.jsx(ae,{variant:"outline",className:"ml-auto text-xs",children:k.category}),s.jsx(Sr,{className:he("ml-auto h-4 w-4",n.some(C=>C.id===k.id)?"opacity-100":"opacity-0")})]},k.id))}),c.trim()&&!p.some(k=>k.name.toLowerCase()===c.trim().toLowerCase())&&s.jsx(Ms,{children:s.jsxs(Rs,{onSelect:w,className:"flex items-center gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),s.jsxs("span",{children:['Create "',c.trim(),'"']})]})})]})]})})]})]}),n.length===0&&!a&&s.jsx("p",{className:"text-xs text-muted-foreground",children:i})]})}function TJ({open:e,onOpenChange:t,project:n,organizationId:r,onCreate:i,onUpdate:a}){const{toast:o}=Nt(),[l,c]=x.useState("general"),[u,d]=x.useState(""),[f,h]=x.useState(""),[m,g]=x.useState(""),[p,v]=x.useState("active"),[b,y]=x.useState(null),[j,N]=x.useState(null),[w,S]=x.useState(""),[k,C]=x.useState(""),[A,D]=x.useState("blue"),[P,_]=x.useState(""),[O,M]=x.useState("system"),[T,R]=x.useState("not-started"),[F,E]=x.useState(null),[B,L]=x.useState("hybrid"),[I,q]=x.useState("linear"),[$,z]=x.useState(7),[Y,ne]=x.useState(!0),[te,pe]=x.useState(10),[J,xe]=x.useState(!0),ye=!n;x.useEffect(()=>{e&&(n?(d(n.name),h(n.code),g(n.description||""),v(n.status||"active"),c("general")):(d(""),h(""),g(""),v("active"),c("general")))},[e,n]);const{data:re=[],refetch:ue}=je({queryKey:[`/api/projects/${n==null?void 0:n.id}/statuses`],enabled:e&&!!n&&n.id>0}),{data:ke=[],refetch:$e}=je({queryKey:[`/api/projects/${n==null?void 0:n.id}/kanban-columns`],enabled:e&&!!n&&n.id>0}),Ve=Pe({mutationFn:async W=>n?(await fe("PATCH",`/api/projects/${n.id}`,W)).json():void 0,onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${r}/projects`]}),o({title:"Success",description:"Project updated successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to update project",variant:"destructive"})}}),gt=Pe({mutationFn:async W=>n?(await fe("POST",`/api/projects/${n.id}/statuses`,{...W,projectId:n.id,order:re.length,isActive:!0})).json():void 0,onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/statuses`]}),S(""),C(""),D("blue"),ue(),o({title:"Success",description:"Status created successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to create status",variant:"destructive"})}}),He=Pe({mutationFn:async({id:W,...me})=>(await fe("PATCH",`/api/project-statuses/${W}`,me)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/statuses`]}),y(null),ue(),o({title:"Success",description:"Status updated successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to update status",variant:"destructive"})}}),be=Pe({mutationFn:async W=>{await fe("DELETE",`/api/project-statuses/${W}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/statuses`]}),ue(),o({title:"Success",description:"Status deleted successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to delete status",variant:"destructive"})}}),xt=Pe({mutationFn:async W=>n?(await fe("POST",`/api/projects/${n.id}/kanban-columns`,{...W,projectId:n.id,order:ke.length,isActive:!0})).json():void 0,onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/kanban-columns`]}),_(""),M("system"),R("not-started"),E(null),$e(),o({title:"Success",description:"Column created successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to create column",variant:"destructive"})}}),sn=Pe({mutationFn:async({id:W,...me})=>(await fe("PATCH",`/api/kanban-columns/${W}`,me)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/kanban-columns`]}),N(null),$e(),o({title:"Success",description:"Column updated successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to update column",variant:"destructive"})}}),K=Pe({mutationFn:async W=>{await fe("DELETE",`/api/kanban-columns/${W}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n==null?void 0:n.id}/kanban-columns`]}),$e(),o({title:"Success",description:"Column deleted successfully"})},onError:W=>{o({title:"Error",description:W.message||"Failed to delete column",variant:"destructive"})}}),de=()=>{if(!u.trim()||!f.trim()){o({title:"Error",description:"Name and code are required",variant:"destructive"});return}const W={name:u,code:f,description:m||void 0,organizationId:r,status:p};n&&a?Ve.mutate(W):i&&i(W)},ve=()=>{if(!w.trim()||!k.trim()){o({title:"Error",description:"Name and code are required",variant:"destructive"});return}gt.mutate({name:w,code:k.toLowerCase().replace(/\s+/g,"-"),color:A})},Oe=()=>{if(!P.trim()){o({title:"Error",description:"Column name is required",variant:"destructive"});return}if(O==="system"&&!T){o({title:"Error",description:"Please select a system status",variant:"destructive"});return}if(O==="custom"&&!F){o({title:"Error",description:"Please select a custom status",variant:"destructive"});return}xt.mutate({name:P,statusId:O==="system"?T:void 0,customStatusId:O==="custom"&&F||void 0})},Z=[{id:"not-started",name:"Not Started"},{id:"in-progress",name:"In Progress"},{id:"review",name:"In Review"},{id:"completed",name:"Completed"},{id:"on-hold",name:"On Hold"}];return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:n?`Edit Project: ${n.name}`:"Create Project"})}),s.jsxs(Vr,{value:l,onValueChange:c,className:"flex-1 flex flex-col min-h-0",children:[s.jsxs(Pr,{children:[s.jsx(tt,{value:"general",children:"General"}),n&&s.jsxs(s.Fragment,{children:[s.jsx(tt,{value:"statuses",children:"Status Configuration"}),s.jsx(tt,{value:"kanban",children:"Kanban Columns"}),s.jsx(tt,{value:"materials",children:"Material Tracking"})]})]}),s.jsx(ht,{value:"general",className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"name",children:"Name *"}),s.jsx(Ce,{id:"name",value:u,onChange:W=>d(W.target.value),placeholder:"Project name"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"code",children:"Code *"}),s.jsx(Ce,{id:"code",value:f,onChange:W=>h(W.target.value),placeholder:"PRJ-001"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",value:m,onChange:W=>g(W.target.value),placeholder:"Project description",rows:3})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:p,onValueChange:v,children:[s.jsx(Fe,{id:"status",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"active",children:"Active"}),s.jsx(X,{value:"on-hold",children:"On Hold"}),s.jsx(X,{value:"completed",children:"Completed"}),s.jsx(X,{value:"cancelled",children:"Cancelled"})]})]})]}),n&&s.jsxs("div",{children:[s.jsx(G,{children:"Tags"}),s.jsx(Ky,{entityType:"project",entityId:n.id,placeholder:"Add tags to categorize this project..."})]})]})}),n&&s.jsx(ht,{value:"statuses",className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Custom Statuses"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Define custom statuses for this project"})]})}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-sm",children:"Add New Status"})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"status-name",children:"Name"}),s.jsx(Ce,{id:"status-name",value:w,onChange:W=>S(W.target.value),placeholder:"e.g., Stuck, Internal Approval"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"status-code",children:"Code"}),s.jsx(Ce,{id:"status-code",value:k,onChange:W=>C(W.target.value),placeholder:"e.g., stuck, internal-approval"})]})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"status-color",children:"Color"}),s.jsxs(ze,{value:A,onValueChange:D,children:[s.jsx(Fe,{id:"status-color",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"blue",children:"Blue"}),s.jsx(X,{value:"green",children:"Green"}),s.jsx(X,{value:"red",children:"Red"}),s.jsx(X,{value:"amber",children:"Amber"}),s.jsx(X,{value:"purple",children:"Purple"}),s.jsx(X,{value:"gray",children:"Gray"})]})]})]}),s.jsxs(H,{onClick:ve,disabled:gt.isPending,children:[gt.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Status"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Existing Statuses"}),re.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom statuses defined"}):s.jsx("div",{className:"space-y-2",children:re.map(W=>s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full bg-${W.color||"blue"}-500`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:W.code})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{checked:W.isActive||!1,onCheckedChange:me=>He.mutate({id:W.id,isActive:me===!0})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>y(W),children:s.jsx(Ga,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>be.mutate(W.id),children:s.jsx(wn,{className:"h-4 w-4"})})]})]})})},W.id))})]}),b&&s.jsx(Q2e,{status:b,open:!!b,onOpenChange:W=>!W&&y(null),onUpdate:W=>He.mutate({id:b.id,...W})})]})}),n&&s.jsx(ht,{value:"kanban",className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Kanban Columns"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure Kanban board columns for this project"})]})}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-sm",children:"Add New Column"})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"column-name",children:"Column Name"}),s.jsx(Ce,{id:"column-name",value:P,onChange:W=>_(W.target.value),placeholder:"e.g., Stuck, Internal Approval"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"column-type",children:"Map To"}),s.jsxs(ze,{value:O,onValueChange:W=>M(W),children:[s.jsx(Fe,{id:"column-type",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"system",children:"System Status"}),s.jsx(X,{value:"custom",children:"Custom Status"})]})]})]}),O==="system"?s.jsxs("div",{children:[s.jsx(G,{htmlFor:"column-status",children:"System Status"}),s.jsxs(ze,{value:T,onValueChange:R,children:[s.jsx(Fe,{id:"column-status",children:s.jsx(Be,{})}),s.jsx(Le,{children:Z.map(W=>s.jsx(X,{value:W.id,children:W.name},W.id))})]})]}):s.jsxs("div",{children:[s.jsx(G,{htmlFor:"column-custom-status",children:"Custom Status"}),re.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom statuses available. Create one in the Status Configuration tab."}):s.jsxs(ze,{value:(F==null?void 0:F.toString())||"",onValueChange:W=>E(parseInt(W)),children:[s.jsx(Fe,{id:"column-custom-status",children:s.jsx(Be,{placeholder:"Select custom status"})}),s.jsx(Le,{children:re.map(W=>s.jsx(X,{value:W.id.toString(),children:W.name},W.id))})]})]}),s.jsxs(H,{onClick:Oe,disabled:xt.isPending,children:[xt.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Column"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Existing Columns"}),ke.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom columns defined. Default columns will be used."}):s.jsx("div",{className:"space-y-2",children:ke.map(W=>{var Ae,Je;const me=W.statusId?(Ae=Z.find(St=>St.id===W.statusId))==null?void 0:Ae.name:((Je=re.find(St=>St.id===W.customStatusId))==null?void 0:Je.name)||"Unknown";return s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Maps to: ",me]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{checked:W.isActive||!1,onCheckedChange:St=>sn.mutate({id:W.id,isActive:St===!0})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>N(W),children:s.jsx(Ga,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>K.mutate(W.id),children:s.jsx(wn,{className:"h-4 w-4"})})]})]})})},W.id)})})]}),j&&s.jsx(Y2e,{column:j,statuses:re,systemStatuses:Z,open:!!j,onOpenChange:W=>!W&&N(null),onUpdate:W=>sn.mutate({id:j.id,...W})})]})}),n&&s.jsx(ht,{value:"materials",className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Material Tracking Configuration"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure how materials are tracked and displayed in this project."})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Consumption Entry Method"})}),s.jsx(ce,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"How should material consumption be recorded?"}),s.jsxs(ze,{value:B,onValueChange:W=>L(W),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"entries-only",children:"Date-stamped entries only (Recommended for audit)"}),s.jsx(X,{value:"running-total",children:"Running total only (Simple)"}),s.jsx(X,{value:"hybrid",children:"Both (Entries + quick adjustment)"})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[B==="entries-only"&&"Full audit trail with date-stamped entries. Best for compliance and reconciliation.",B==="running-total"&&"Simple single field updated manually. Fast but no history.",B==="hybrid"&&"Entries create history, but users can also adjust total directly. Best flexibility."]})]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Consumption Rate Calculation"})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"How should consumption rate be calculated?"}),s.jsxs(ze,{value:I,onValueChange:W=>q(W),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"linear",children:"Linear projection (Simple)"}),s.jsx(X,{value:"weighted-average",children:"Weighted average (Sophisticated)"})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[I==="linear"&&"Simple average: Cumulative Consumption / Days Elapsed. Works well for steady consumption.",I==="weighted-average"&&"Recent consumption weighted more heavily. Adapts to changing patterns."]})]}),I==="weighted-average"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"weighted-window",children:"Weighted Average Window (days)"}),s.jsx(Ce,{id:"weighted-window",type:"number",min:"1",max:"30",value:$,onChange:W=>z(parseInt(W.target.value)||7)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of recent days to weight more heavily in the calculation."})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Forecast Display"})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-forecast",checked:Y,onCheckedChange:W=>ne(W===!0)}),s.jsx(G,{htmlFor:"show-forecast",className:"cursor-pointer",children:"Show forecasted completion date"})]}),Y&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"forecast-threshold",children:"Warning Threshold (%)"}),s.jsx(Ce,{id:"forecast-threshold",type:"number",min:"0",max:"100",value:te,onChange:W=>pe(parseInt(W.target.value)||10)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Show warning when forecasted consumption exceeds planned quantity by this percentage."})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Delivery Tracking"})}),s.jsxs(ce,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"track-deliveries",checked:J,onCheckedChange:W=>xe(W===!0)}),s.jsx(G,{htmlFor:"track-deliveries",className:"cursor-pointer",children:"Track material deliveries separately from consumption"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"When enabled, you can track when materials are delivered vs when they are consumed. This helps manage inventory on-site and reconcile with procurement."})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(H,{onClick:async()=>{const W={consumptionEntryMethod:B,consumptionRateMethod:I,weightedAverageWindow:I==="weighted-average"?$:void 0,showForecast:Y,forecastWarningThreshold:te,trackDeliveries:J};try{await fe("PATCH",`/api/projects/${n.id}`,{materialTrackingConfig:W}),we.invalidateQueries({queryKey:[`/api/organizations/${r}/projects`]}),o({title:"Success",description:"Material tracking configuration updated successfully"})}catch(me){o({title:"Error",description:me.message||"Failed to update configuration",variant:"destructive"})}},children:"Save Configuration"})})]})})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),l==="general"&&s.jsxs(H,{onClick:de,disabled:Ve.isPending||ye&&!i,children:[Ve.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin mr-2"}):null,n?"Update":"Create"]})]})]})})}function Q2e({status:e,open:t,onOpenChange:n,onUpdate:r}){const[i,a]=x.useState(e.name),[o,l]=x.useState(e.code),[c,u]=x.useState(e.color||"blue");x.useEffect(()=>{a(e.name),l(e.code),u(e.color||"blue")},[e]);const d=()=>{r({name:i,code:o,color:c}),n(!1)};return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Edit Status"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-status-name",children:"Name"}),s.jsx(Ce,{id:"edit-status-name",value:i,onChange:f=>a(f.target.value)})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-status-code",children:"Code"}),s.jsx(Ce,{id:"edit-status-code",value:o||"",onChange:f=>l(f.target.value)})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-status-color",children:"Color"}),s.jsxs(ze,{value:c,onValueChange:u,children:[s.jsx(Fe,{id:"edit-status-color",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"blue",children:"Blue"}),s.jsx(X,{value:"green",children:"Green"}),s.jsx(X,{value:"red",children:"Red"}),s.jsx(X,{value:"amber",children:"Amber"}),s.jsx(X,{value:"purple",children:"Purple"}),s.jsx(X,{value:"gray",children:"Gray"})]})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(H,{onClick:d,children:"Update"})]})]})})}function Y2e({column:e,statuses:t,systemStatuses:n,open:r,onOpenChange:i,onUpdate:a}){const[o,l]=x.useState(e.name),[c,u]=x.useState(e.statusId?"system":"custom"),[d,f]=x.useState(e.statusId||"not-started"),[h,m]=x.useState(e.customStatusId||null);x.useEffect(()=>{l(e.name),u(e.statusId?"system":"custom"),f(e.statusId||"not-started"),m(e.customStatusId||null)},[e]);const g=()=>{a({name:o,statusId:c==="system"?d:void 0,customStatusId:c==="custom"&&h||void 0}),i(!1)};return s.jsx(zt,{open:r,onOpenChange:i,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Edit Column"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-column-name",children:"Column Name"}),s.jsx(Ce,{id:"edit-column-name",value:o,onChange:p=>l(p.target.value)})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-column-type",children:"Map To"}),s.jsxs(ze,{value:c,onValueChange:p=>u(p),children:[s.jsx(Fe,{id:"edit-column-type",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"system",children:"System Status"}),s.jsx(X,{value:"custom",children:"Custom Status"})]})]})]}),c==="system"?s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-column-status",children:"System Status"}),s.jsxs(ze,{value:d,onValueChange:f,children:[s.jsx(Fe,{id:"edit-column-status",children:s.jsx(Be,{})}),s.jsx(Le,{children:n.map(p=>s.jsx(X,{value:p.id,children:p.name},p.id))})]})]}):s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-column-custom-status",children:"Custom Status"}),t.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom statuses available."}):s.jsxs(ze,{value:(h==null?void 0:h.toString())||"",onValueChange:p=>m(parseInt(p)),children:[s.jsx(Fe,{id:"edit-column-custom-status",children:s.jsx(Be,{placeholder:"Select custom status"})}),s.jsx(Le,{children:t.map(p=>s.jsx(X,{value:p.id.toString(),children:p.name},p.id))})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(H,{onClick:g,children:"Update"})]})]})})}var FE=["Enter"," "],X2e=["ArrowDown","PageUp","Home"],DJ=["ArrowUp","PageDown","End"],Z2e=[...X2e,...DJ],J2e={ltr:[...FE,"ArrowRight"],rtl:[...FE,"ArrowLeft"]},eEe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Gy="Menu",[Av,tEe,nEe]=Fp(Gy),[Uf,OJ]=Er(Gy,[nEe,Qu,Qp]),H1=Qu(),IJ=Qp(),[rEe,Wf]=Uf(Gy),[sEe,Qy]=Uf(Gy),MJ=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,l=H1(t),[c,u]=x.useState(null),d=x.useRef(!1),f=lr(a),h=Yu(i);return x.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(p1,{...l,children:s.jsx(rEe,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(sEe,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:r})})})};MJ.displayName=Gy;var iEe="MenuAnchor",NO=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=H1(n);return s.jsx(Ty,{...i,...r,ref:t})});NO.displayName=iEe;var SO="MenuPortal",[aEe,RJ]=Uf(SO,{forceMount:void 0}),$J=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=Wf(SO,t);return s.jsx(aEe,{scope:t,forceMount:n,children:s.jsx(Yr,{present:n||a.open,children:s.jsx(Lp,{asChild:!0,container:i,children:r})})})};$J.displayName=SO;var Ua="MenuContent",[oEe,CO]=Uf(Ua),FJ=x.forwardRef((e,t)=>{const n=RJ(Ua,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Wf(Ua,e.__scopeMenu),o=Qy(Ua,e.__scopeMenu);return s.jsx(Av.Provider,{scope:e.__scopeMenu,children:s.jsx(Yr,{present:r||a.open,children:s.jsx(Av.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(lEe,{...i,ref:t}):s.jsx(cEe,{...i,ref:t})})})})}),lEe=x.forwardRef((e,t)=>{const n=Wf(Ua,e.__scopeMenu),r=x.useRef(null),i=kt(t,r);return x.useEffect(()=>{const a=r.current;if(a)return S1(a)},[]),s.jsx(kO,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Re(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),cEe=x.forwardRef((e,t)=>{const n=Wf(Ua,e.__scopeMenu);return s.jsx(kO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),uEe=Pu("MenuContent.ScrollLock"),kO=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,v=Wf(Ua,n),b=Qy(Ua,n),y=H1(n),j=IJ(n),N=tEe(n),[w,S]=x.useState(null),k=x.useRef(null),C=kt(t,k,v.onContentChange),A=x.useRef(0),D=x.useRef(""),P=x.useRef(0),_=x.useRef(null),O=x.useRef("right"),M=x.useRef(0),T=g?Oy:x.Fragment,R=g?{as:uEe,allowPinchZoom:!0}:void 0,F=B=>{var te,pe;const L=D.current+B,I=N().filter(J=>!J.disabled),q=document.activeElement,$=(te=I.find(J=>J.ref.current===q))==null?void 0:te.textValue,z=I.map(J=>J.textValue),Y=wEe(z,L,$),ne=(pe=I.find(J=>J.textValue===Y))==null?void 0:pe.ref.current;(function J(xe){D.current=xe,window.clearTimeout(A.current),xe!==""&&(A.current=window.setTimeout(()=>J(""),1e3))})(L),ne&&setTimeout(()=>ne.focus())};x.useEffect(()=>()=>window.clearTimeout(A.current),[]),w1();const E=x.useCallback(B=>{var I,q;return O.current===((I=_.current)==null?void 0:I.side)&&SEe(B,(q=_.current)==null?void 0:q.area)},[]);return s.jsx(oEe,{scope:n,searchRef:D,onItemEnter:x.useCallback(B=>{E(B)&&B.preventDefault()},[E]),onItemLeave:x.useCallback(B=>{var L;E(B)||((L=k.current)==null||L.focus(),S(null))},[E]),onTriggerLeave:x.useCallback(B=>{E(B)&&B.preventDefault()},[E]),pointerGraceTimerRef:P,onPointerGraceIntentChange:x.useCallback(B=>{_.current=B},[]),children:s.jsx(T,{...R,children:s.jsx(Dy,{asChild:!0,trapped:i,onMountAutoFocus:Re(a,B=>{var L;B.preventDefault(),(L=k.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(VD,{asChild:!0,...j,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:Re(c,B=>{b.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(g1,{role:"menu","aria-orientation":"vertical","data-state":eee(v.open),"data-radix-menu-content":"",dir:b.dir,...y,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:Re(p.onKeyDown,B=>{const I=B.target.closest("[data-radix-menu-content]")===B.currentTarget,q=B.ctrlKey||B.altKey||B.metaKey,$=B.key.length===1;I&&(B.key==="Tab"&&B.preventDefault(),!q&&$&&F(B.key));const z=k.current;if(B.target!==z||!Z2e.includes(B.key))return;B.preventDefault();const ne=N().filter(te=>!te.disabled).map(te=>te.ref.current);DJ.includes(B.key)&&ne.reverse(),bEe(ne)}),onBlur:Re(e.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(A.current),D.current="")}),onPointerMove:Re(e.onPointerMove,Tv(B=>{const L=B.target,I=M.current!==B.clientX;if(B.currentTarget.contains(L)&&I){const q=B.clientX>M.current?"right":"left";O.current=q,M.current=B.clientX}}))})})})})})})});FJ.displayName=Ua;var dEe="MenuGroup",PO=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Qe.div,{role:"group",...r,ref:t})});PO.displayName=dEe;var fEe="MenuLabel",LJ=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Qe.div,{...r,ref:t})});LJ.displayName=fEe;var pw="MenuItem",KF="menu.itemSelect",K1=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,a=x.useRef(null),o=Qy(pw,e.__scopeMenu),l=CO(pw,e.__scopeMenu),c=kt(t,a),u=x.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const h=new CustomEvent(KF,{bubbles:!0,cancelable:!0});f.addEventListener(KF,m=>r==null?void 0:r(m),{once:!0}),QT(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(zJ,{...i,ref:c,disabled:n,onClick:Re(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:Re(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Re(e.onKeyDown,f=>{const h=l.searchRef.current!=="";n||h&&f.key===" "||FE.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});K1.displayName=pw;var zJ=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=CO(pw,n),l=IJ(n),c=x.useRef(null),u=kt(t,c),[d,f]=x.useState(!1),[h,m]=x.useState("");return x.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[a.children]),s.jsx(Av.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:s.jsx(qD,{asChild:!0,...l,focusable:!r,children:s.jsx(Qe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Re(e.onPointerMove,Tv(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(e.onPointerLeave,Tv(g=>o.onItemLeave(g))),onFocus:Re(e.onFocus,()=>f(!0)),onBlur:Re(e.onBlur,()=>f(!1))})})})}),hEe="MenuCheckboxItem",BJ=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return s.jsx(HJ,{scope:e.__scopeMenu,checked:n,children:s.jsx(K1,{role:"menuitemcheckbox","aria-checked":gw(n)?"mixed":n,...i,ref:t,"data-state":_O(n),onSelect:Re(i.onSelect,()=>r==null?void 0:r(gw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});BJ.displayName=hEe;var VJ="MenuRadioGroup",[mEe,pEe]=Uf(VJ,{value:void 0,onValueChange:()=>{}}),qJ=x.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,a=lr(r);return s.jsx(mEe,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(PO,{...i,ref:t})})});qJ.displayName=VJ;var UJ="MenuRadioItem",WJ=x.forwardRef((e,t)=>{const{value:n,...r}=e,i=pEe(UJ,e.__scopeMenu),a=n===i.value;return s.jsx(HJ,{scope:e.__scopeMenu,checked:a,children:s.jsx(K1,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":_O(a),onSelect:Re(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});WJ.displayName=UJ;var EO="MenuItemIndicator",[HJ,gEe]=Uf(EO,{checked:!1}),KJ=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,a=gEe(EO,n);return s.jsx(Yr,{present:r||gw(a.checked)||a.checked===!0,children:s.jsx(Qe.span,{...i,ref:t,"data-state":_O(a.checked)})})});KJ.displayName=EO;var xEe="MenuSeparator",GJ=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});GJ.displayName=xEe;var vEe="MenuArrow",QJ=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=H1(n);return s.jsx(x1,{...i,...r,ref:t})});QJ.displayName=vEe;var yEe="MenuSub",[udt,YJ]=Uf(yEe),ux="MenuSubTrigger",XJ=x.forwardRef((e,t)=>{const n=Wf(ux,e.__scopeMenu),r=Qy(ux,e.__scopeMenu),i=YJ(ux,e.__scopeMenu),a=CO(ux,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(NO,{asChild:!0,...u,children:s.jsx(zJ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":eee(n.open),...e,ref:ac(t,i.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Re(e.onPointerMove,Tv(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Re(e.onPointerLeave,Tv(f=>{var m,g;d();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const p=(g=n.content)==null?void 0:g.dataset.side,v=p==="right",b=v?-5:5,y=h[v?"left":"right"],j=h[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:y,y:h.top},{x:j,y:h.top},{x:j,y:h.bottom},{x:y,y:h.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Re(e.onKeyDown,f=>{var m;const h=a.searchRef.current!=="";e.disabled||h&&f.key===" "||J2e[r.dir].includes(f.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),f.preventDefault())})})})});XJ.displayName=ux;var ZJ="MenuSubContent",JJ=x.forwardRef((e,t)=>{const n=RJ(Ua,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Wf(Ua,e.__scopeMenu),o=Qy(Ua,e.__scopeMenu),l=YJ(ZJ,e.__scopeMenu),c=x.useRef(null),u=kt(t,c);return s.jsx(Av.Provider,{scope:e.__scopeMenu,children:s.jsx(Yr,{present:r||a.open,children:s.jsx(Av.Slot,{scope:e.__scopeMenu,children:s.jsx(kO,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Re(e.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Re(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Re(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=eEe[o.dir].includes(d.key);f&&h&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});JJ.displayName=ZJ;function eee(e){return e?"open":"closed"}function gw(e){return e==="indeterminate"}function _O(e){return gw(e)?"indeterminate":e?"checked":"unchecked"}function bEe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function jEe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function wEe(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=jEe(e,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function NEe(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,u=t[o].x,d=t[o].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}function SEe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return NEe(n,t)}function Tv(e){return t=>t.pointerType==="mouse"?e(t):void 0}var CEe=MJ,kEe=NO,PEe=$J,EEe=FJ,_Ee=PO,AEe=LJ,TEe=K1,DEe=BJ,OEe=qJ,IEe=WJ,MEe=KJ,REe=GJ,$Ee=QJ,FEe=XJ,LEe=JJ,AO="DropdownMenu",[zEe]=Er(AO,[OJ]),Ei=OJ(),[BEe,tee]=zEe(AO),nee=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=Ei(t),u=x.useRef(null),[d=!1,f]=ni({prop:i,defaultProp:a,onChange:o});return s.jsx(BEe,{scope:t,triggerId:Gr(),triggerRef:u,contentId:Gr(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(CEe,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};nee.displayName=AO;var ree="DropdownMenuTrigger",see=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=tee(ree,n),o=Ei(n);return s.jsx(kEe,{asChild:!0,...o,children:s.jsx(Qe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:ac(t,a.triggerRef),onPointerDown:Re(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Re(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});see.displayName=ree;var VEe="DropdownMenuPortal",iee=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ei(t);return s.jsx(PEe,{...r,...n})};iee.displayName=VEe;var aee="DropdownMenuContent",oee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=tee(aee,n),a=Ei(n),o=x.useRef(!1);return s.jsx(EEe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:Re(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Re(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oee.displayName=aee;var qEe="DropdownMenuGroup",UEe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(_Ee,{...i,...r,ref:t})});UEe.displayName=qEe;var WEe="DropdownMenuLabel",lee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(AEe,{...i,...r,ref:t})});lee.displayName=WEe;var HEe="DropdownMenuItem",cee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(TEe,{...i,...r,ref:t})});cee.displayName=HEe;var KEe="DropdownMenuCheckboxItem",uee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(DEe,{...i,...r,ref:t})});uee.displayName=KEe;var GEe="DropdownMenuRadioGroup",QEe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(OEe,{...i,...r,ref:t})});QEe.displayName=GEe;var YEe="DropdownMenuRadioItem",dee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(IEe,{...i,...r,ref:t})});dee.displayName=YEe;var XEe="DropdownMenuItemIndicator",fee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(MEe,{...i,...r,ref:t})});fee.displayName=XEe;var ZEe="DropdownMenuSeparator",hee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(REe,{...i,...r,ref:t})});hee.displayName=ZEe;var JEe="DropdownMenuArrow",e_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx($Ee,{...i,...r,ref:t})});e_e.displayName=JEe;var t_e="DropdownMenuSubTrigger",mee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(FEe,{...i,...r,ref:t})});mee.displayName=t_e;var n_e="DropdownMenuSubContent",pee=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ei(n);return s.jsx(LEe,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pee.displayName=n_e;var r_e=nee,s_e=see,i_e=iee,gee=oee,xee=lee,vee=cee,yee=uee,bee=dee,jee=fee,wee=hee,Nee=mee,See=pee;const _n=r_e,An=s_e,a_e=x.forwardRef(({className:e,inset:t,children:n,...r},i)=>s.jsxs(Nee,{ref:i,className:he("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,s.jsx(qa,{className:"ml-auto"})]}));a_e.displayName=Nee.displayName;const o_e=x.forwardRef(({className:e,...t},n)=>s.jsx(See,{ref:n,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));o_e.displayName=See.displayName;const Nn=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(i_e,{children:s.jsx(gee,{ref:r,sideOffset:t,className:he("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Nn.displayName=gee.displayName;const ct=x.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(vee,{ref:r,className:he("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));ct.displayName=vee.displayName;const Mh=x.forwardRef(({className:e,children:t,checked:n,...r},i)=>s.jsxs(yee,{ref:i,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(jee,{children:s.jsx(Sr,{className:"h-4 w-4"})})}),t]}));Mh.displayName=yee.displayName;const l_e=x.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(bee,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(jee,{children:s.jsx(jK,{className:"h-2 w-2 fill-current"})})}),t]}));l_e.displayName=bee.displayName;const hi=x.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(xee,{ref:r,className:he("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));hi.displayName=xee.displayName;const fr=x.forwardRef(({className:e,...t},n)=>s.jsx(wee,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));fr.displayName=wee.displayName;var TO="Avatar",[c_e]=Er(TO),[u_e,Cee]=c_e(TO),kee=x.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=x.useState("idle");return s.jsx(u_e,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Qe.span,{...r,ref:t})})});kee.displayName=TO;var Pee="AvatarImage",Eee=x.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=Cee(Pee,n),l=d_e(r,a),c=lr(u=>{i(u),o.onImageLoadingStatusChange(u)});return zr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Qe.img,{...a,ref:t,src:r}):null});Eee.displayName=Pee;var _ee="AvatarFallback",Aee=x.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=Cee(_ee,n),[o,l]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Qe.span,{...i,ref:t}):null});Aee.displayName=_ee;function GF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function d_e(e,{referrerPolicy:t,crossOrigin:n}){const r=h_e(),i=x.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=x.useState(()=>GF(a,e));return zr(()=>{l(GF(a,e))},[a,e]),zr(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,t]),o}function f_e(){return()=>{}}function h_e(){return x.useSyncExternalStore(f_e,()=>!0,()=>!1)}var Tee=kee,Dee=Eee,Oee=Aee;const yi=x.forwardRef(({className:e,...t},n)=>s.jsx(Tee,{ref:n,className:he(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));yi.displayName=Tee.displayName;const Bu=x.forwardRef(({className:e,...t},n)=>s.jsx(Dee,{ref:n,className:he("aspect-square h-full w-full",e),...t}));Bu.displayName=Dee.displayName;const bi=x.forwardRef(({className:e,...t},n)=>s.jsx(Oee,{ref:n,className:he("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));bi.displayName=Oee.displayName;const Iee=x.createContext(void 0);function m_e({children:e}){const[t,n]=x.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");x.useEffect(()=>{const i=document.documentElement;i.classList.remove("light","dark"),i.classList.add(t),localStorage.setItem("theme",t)},[t]);const r=()=>{n(i=>i==="light"?"dark":"light")};return s.jsx(Iee.Provider,{value:{theme:t,toggleTheme:r},children:e})}function Mee(){const e=x.useContext(Iee);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}function zs(){const e=Pi();yr();const{data:t,isLoading:n,error:r}=je({queryKey:["/api/auth/user"],queryFn:async()=>{try{return await(await fe("GET","/api/auth/me")).json()}catch(a){if(a.message.includes("401"))return null;throw a}},retry:!1,staleTime:1e3*60*5,refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1}),i=Pe({mutationFn:async()=>{await fe("POST","/api/auth/logout")},onSuccess:()=>{e.setQueryData(["/api/auth/user"],null),e.clear(),window.location.href="/login"}});return{user:t,isLoading:n,isAuthenticated:!!t,error:r,logout:i.mutate,isLoggingOut:i.isPending}}function p_e(){var He,be,xt,sn;const{theme:e,toggleTheme:t}=Mee(),{user:n}=zs(),{toast:r}=Nt(),[,i]=yr(),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(!1),[m,g]=x.useState(!1),[p,v]=x.useState(null),[b,y]=x.useState(!1),[j,N]=x.useState(!1),w=x.useRef(null),[S,k]=x.useState([{id:1,title:"Task Assigned",message:"You've been assigned to 'Site Preparation'",type:"info",time:"2 hours ago",read:!1},{id:2,title:"Risk Alert",message:"High risk 'Weather Delays' requires attention",type:"warning",time:"5 hours ago",read:!1},{id:3,title:"Issue Resolved",message:"Issue 'Permit Delay' has been closed",type:"success",time:"1 day ago",read:!1}]),C=S.filter(K=>!K.read).length,A=()=>{k(K=>K.map(de=>({...de,read:!0}))),r({title:"Notifications marked as read"})},D=K=>{k(de=>de.map(ve=>ve.id===K?{...ve,read:!0}:ve))},{organizations:P,programs:_,projects:O,selectedOrgId:M,selectedProgramId:T,selectedProjectId:R,setSelectedOrgId:F,setSelectedProgramId:E,setSelectedProjectId:B,terminology:L,isLoadingOrgs:I,isLoadingPrograms:q,isLoadingProjects:$,orgsError:z,programsError:Y,projectsError:ne}=jt(),{logout:te}=zs(),pe=()=>{te()};P.find(K=>K.id===M);const J=O.find(K=>K.id===R),xe=async()=>{if(!R){r({title:"Error",description:"Please select a project first",variant:"destructive"});return}c(!0);try{const K=await fetch(`/api/projects/${R}/export`,{credentials:"include"});if(!K.ok)throw new Error("Export failed");const de=await K.json(),ve=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(ve),Z=document.createElement("a");Z.href=Oe,Z.download=`${(J==null?void 0:J.code)||"project"}_export_${new Date().toISOString().split("T")[0]}.json`,Z.click(),URL.revokeObjectURL(Oe),r({title:"Success",description:"Project exported successfully"})}catch{r({title:"Error",description:"Failed to export project",variant:"destructive"})}finally{c(!1)}},ye=async()=>{if(!R){r({title:"Error",description:"Please select a project first",variant:"destructive"});return}c(!0);try{const K=await fetch(`/api/projects/${R}/export?format=csv`,{credentials:"include"});if(!K.ok)throw new Error("Export failed");const de=await K.text(),ve=new Blob([de],{type:"text/csv"}),Oe=URL.createObjectURL(ve),Z=document.createElement("a");Z.href=Oe,Z.download=`${(J==null?void 0:J.code)||"project"}_tasks_${new Date().toISOString().split("T")[0]}.csv`,Z.click(),URL.revokeObjectURL(Oe),r({title:"Success",description:"Tasks exported as CSV"})}catch{r({title:"Error",description:"Failed to export CSV",variant:"destructive"})}finally{c(!1)}},re=async()=>{if(!R){r({title:"Error",description:"Please select a project first",variant:"destructive"});return}c(!0);try{const K=await fetch(`/api/projects/${R}/reports/status`,{credentials:"include"});if(!K.ok)throw new Error("Export failed");const de=await K.blob(),ve=URL.createObjectURL(de),Oe=document.createElement("a");Oe.href=ve,Oe.download=`${(J==null?void 0:J.code)||"project"}_status_report_${new Date().toISOString().split("T")[0]}.pdf`,Oe.click(),URL.revokeObjectURL(ve),r({title:"Success",description:"PDF report downloaded"})}catch{r({title:"Error",description:"Failed to generate PDF report",variant:"destructive"})}finally{c(!1)}},ue=()=>{if(!R){r({title:"Error",description:"Please select a project first",variant:"destructive"});return}v(null),g(!0)},ke=()=>{var K;(K=w.current)==null||K.click()},$e=async()=>{try{const K=await fetch("/api/import/template",{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch template");const de=await K.json(),ve=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(ve),Z=document.createElement("a");Z.href=Oe,Z.download="import_template.json",Z.click(),URL.revokeObjectURL(Oe),r({title:"Success",description:"Template downloaded"})}catch{r({title:"Error",description:"Failed to download template",variant:"destructive"})}},Ve=async()=>{try{const K=await fetch("/api/import/schema",{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch schema");const de=await K.json(),ve=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(ve),Z=document.createElement("a");Z.href=Oe,Z.download="import_schema.json",Z.click(),URL.revokeObjectURL(Oe),r({title:"Success",description:"Schema downloaded - use this with AI tools to generate valid project JSON"})}catch{r({title:"Error",description:"Failed to download schema",variant:"destructive"})}},gt=async K=>{var ve,Oe;const de=(ve=K.target.files)==null?void 0:ve[0];if(!(!de||!R)){try{const Z=await de.text(),W=JSON.parse(Z),Ae=await(await fetch(`/api/projects/${R}/import`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(W)})).json();Ae.success?(v({success:!0,message:Ae.message||"Project data imported successfully",warnings:Ae.warnings}),r({title:"Success",description:Ae.message||"Project data imported successfully"})):(v({success:!1,message:Ae.message||"Import failed",errors:Ae.errors,warnings:Ae.warnings}),r({title:"Import Issues",description:`Import completed with ${((Oe=Ae.errors)==null?void 0:Oe.length)||0} error(s)`,variant:"destructive"}))}catch(Z){v({success:!1,message:Z.message||"Failed to import project data",errors:["Invalid JSON format or network error"]}),r({title:"Error",description:"Failed to import project data",variant:"destructive"})}w.current&&(w.current.value="")}};return s.jsxs("header",{className:"flex h-14 md:h-16 items-center gap-2 md:gap-4 border-b bg-background px-2 md:px-4",children:[s.jsx(Nve,{"data-testid":"button-sidebar-toggle"}),s.jsxs(Y7,{children:[s.jsx(fve,{asChild:!0,className:"md:hidden",children:s.jsxs(H,{variant:"outline",size:"sm",className:"gap-1 text-xs max-w-[120px] truncate","data-testid":"button-mobile-selector",children:[s.jsx(Is,{className:"h-3 w-3 shrink-0"}),s.jsx("span",{className:"truncate",children:(J==null?void 0:J.name)||"Select"})]})}),s.jsxs(yD,{side:"top",className:"h-auto",children:[s.jsx(bD,{children:s.jsx(jD,{children:"Select Context"})}),s.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4"}),L.topLevel]}),s.jsxs(ze,{value:(M==null?void 0:M.toString())||"",onValueChange:K=>F(parseInt(K)),disabled:I||P.length===0||!!z,children:[s.jsx(Fe,{"data-testid":"trigger-organization-mobile",children:s.jsx(Be,{placeholder:I?"Loading...":`Select ${L.topLevel}`})}),s.jsx(Le,{children:P.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))})]}),z&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading organizations"})]}),M&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Is,{className:"h-4 w-4"}),L.program]}),s.jsxs(ze,{value:(T==null?void 0:T.toString())||"all",onValueChange:K=>E(K==="all"?null:parseInt(K)),disabled:q||!!Y,children:[s.jsx(Fe,{"data-testid":"trigger-program-mobile",children:s.jsx(Be,{placeholder:q?"Loading...":`All ${L.program}s`})}),s.jsxs(Le,{children:[s.jsxs(X,{value:"all",children:["All ",L.program,"s"]}),_.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))]})]}),Y&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading programs"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Is,{className:"h-4 w-4"}),"Project"]}),s.jsxs(ze,{value:(R==null?void 0:R.toString())||"",onValueChange:K=>B(parseInt(K)),disabled:$||O.length===0||!M||!!ne,children:[s.jsx(Fe,{"data-testid":"trigger-project-mobile",children:s.jsx(Be,{placeholder:$?"Loading...":"Select Project"})}),s.jsx(Le,{children:O.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))})]}),ne&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading projects"})]})]})]})]}),s.jsxs(ze,{value:(M==null?void 0:M.toString())||"",onValueChange:K=>F(parseInt(K)),disabled:I||P.length===0||!!z,"data-testid":"select-organization",children:[s.jsx(Fe,{className:"hidden md:flex w-48","data-testid":"trigger-organization",children:s.jsx(Be,{placeholder:I?"Loading...":`Select ${L.topLevel}`})}),s.jsx(Le,{children:P.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))})]}),z&&s.jsxs(ae,{variant:"destructive",className:"hidden md:flex text-xs",title:z.message||"Error loading organizations",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Error"]}),M&&s.jsxs(s.Fragment,{children:[s.jsxs(ze,{value:(T==null?void 0:T.toString())||"all",onValueChange:K=>E(K==="all"?null:parseInt(K)),disabled:q||!!Y,"data-testid":"select-program",children:[s.jsx(Fe,{className:"hidden md:flex w-56","data-testid":"trigger-program",children:s.jsx(Be,{placeholder:q?"Loading...":`All ${L.program}s`})}),s.jsxs(Le,{children:[s.jsxs(X,{value:"all",children:["All ",L.program,"s"]}),_.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))]})]}),Y&&s.jsxs(ae,{variant:"destructive",className:"hidden md:flex text-xs",title:Y.message||"Error loading programs",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Error"]})]}),s.jsxs(ze,{value:(R==null?void 0:R.toString())||"",onValueChange:K=>B(parseInt(K)),disabled:$||O.length===0||!M||!!ne,"data-testid":"select-project",children:[s.jsx(Fe,{className:"hidden md:flex w-56","data-testid":"trigger-project",children:s.jsx(Be,{placeholder:$?"Loading...":"Select Project"})}),s.jsx(Le,{children:O.map(K=>s.jsx(X,{value:K.id.toString(),children:K.name},K.id))})]}),R&&J?s.jsx(H,{variant:"ghost",size:"icon",className:"hidden md:flex shrink-0",onClick:()=>N(!0),"data-testid":"button-project-settings",title:"Project Settings",children:s.jsx(Ga,{className:"h-4 w-4"})}):s.jsx(H,{variant:"ghost",size:"icon",className:"hidden md:flex shrink-0 opacity-50 cursor-not-allowed",disabled:!0,"data-testid":"button-project-settings-disabled",title:"Select a project to access settings",children:s.jsx(Ga,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative hidden md:flex flex-1 max-w-md",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{type:"search",placeholder:"Search tasks, documents, resources...",className:"pl-9","data-testid":"input-search"})]}),a?s.jsxs("div",{className:"flex md:hidden flex-1 items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{type:"search",placeholder:"Search...",className:"pl-9 h-9",autoFocus:!0,"data-testid":"input-search-mobile"})]}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>o(!1),"data-testid":"button-close-search",children:s.jsx(Fn,{className:"h-4 w-4"})})]}):s.jsx(H,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>o(!0),"data-testid":"button-open-search",children:s.jsx(os,{className:"h-4 w-4"})}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"default",size:"icon",className:"md:hidden shrink-0","data-testid":"button-add-mobile",children:s.jsx(Et,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",className:"w-56",children:[s.jsx(hi,{children:"Create New"}),s.jsx(fr,{}),s.jsx(ct,{"data-testid":"menu-item-new-task",onClick:()=>R&&i("/wbs?action=new"),disabled:!R,children:"New Task"}),s.jsx(ct,{"data-testid":"menu-item-new-risk",onClick:()=>R&&i("/risks?action=new"),disabled:!R,children:"New Risk"}),s.jsx(ct,{"data-testid":"menu-item-new-issue",onClick:()=>R&&i("/issues?action=new"),disabled:!R,children:"New Issue"}),s.jsx(ct,{"data-testid":"menu-item-new-change",onClick:()=>R&&i("/change-requests?action=new"),disabled:!R,children:"Change Request"}),s.jsx(fr,{}),s.jsx(ct,{"data-testid":"menu-item-new-project",onClick:()=>y(!0),children:"New Project"})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"default",size:"default",className:"hidden md:flex","data-testid":"button-add",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add"]})}),s.jsxs(Nn,{align:"end",className:"w-56",children:[s.jsx(hi,{children:"Create New"}),s.jsx(fr,{}),s.jsx(ct,{"data-testid":"menu-item-new-task",onClick:()=>R&&i("/wbs?action=new"),disabled:!R,children:"New Task"}),s.jsx(ct,{"data-testid":"menu-item-new-risk",onClick:()=>R&&i("/risks?action=new"),disabled:!R,children:"New Risk"}),s.jsx(ct,{"data-testid":"menu-item-new-issue",onClick:()=>R&&i("/issues?action=new"),disabled:!R,children:"New Issue"}),s.jsx(ct,{"data-testid":"menu-item-new-change",onClick:()=>R&&i("/change-requests?action=new"),disabled:!R,children:"Change Request"}),s.jsx(fr,{}),s.jsx(ct,{"data-testid":"menu-item-new-project",onClick:()=>y(!0),children:"New Project"})]})]}),s.jsx(aJ,{open:b,onOpenChange:y}),s.jsx("input",{type:"file",ref:w,onChange:gt,accept:".json",className:"hidden","data-testid":"input-import-file"}),s.jsxs("div",{className:"flex items-center gap-1 md:gap-2 ml-auto",children:[s.jsx(H,{variant:"ghost",size:"icon",className:"hidden md:flex",onClick:()=>i("/ai-assistant"),"data-testid":"button-ai-assistant",title:"AI Assistant",children:s.jsx(Yl,{className:"h-4 w-4"})}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"hidden md:flex",disabled:l,"data-testid":"button-import-export",children:s.jsx(ds,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",className:"w-56",children:[s.jsx(hi,{children:"Import"}),s.jsxs(ct,{onClick:ue,"data-testid":"menu-item-import-json",children:[s.jsx(Rm,{className:"h-4 w-4 mr-2"}),"Import Project Data"]}),s.jsxs(ct,{onClick:$e,"data-testid":"menu-item-download-template",children:[s.jsx(H4,{className:"h-4 w-4 mr-2"}),"Download Template"]}),s.jsxs(ct,{onClick:Ve,"data-testid":"menu-item-download-schema",children:[s.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Download AI Schema"]}),s.jsx(fr,{}),s.jsx(hi,{children:"Export"}),s.jsxs(ct,{onClick:re,"data-testid":"menu-item-export-pdf",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"PDF Report"]}),s.jsxs(ct,{onClick:xe,"data-testid":"menu-item-export-json",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"JSON Data"]}),s.jsxs(ct,{onClick:ye,"data-testid":"menu-item-export-csv",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"CSV Tasks"]})]})]}),s.jsx(H,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-theme-toggle",children:e==="light"?s.jsx(AK,{className:"h-4 w-4"}):s.jsx(IK,{className:"h-4 w-4"})}),s.jsxs(Ls,{open:f,onOpenChange:h,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"ghost",size:"icon",className:"relative","data-testid":"button-notifications",children:[s.jsx(Zd,{className:"h-4 w-4"}),C>0&&s.jsx(ae,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs","data-testid":"badge-notification-count",children:C})]})}),s.jsxs(ps,{align:"end",className:"w-80 p-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),C>0&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:A,className:"h-auto py-1 px-2 text-xs","data-testid":"button-mark-all-read",children:[s.jsx(W4,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),s.jsx(On,{className:"h-[300px]",children:S.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No notifications"}):s.jsx("div",{className:"divide-y",children:S.map(K=>s.jsx("div",{className:`p-3 hover-elevate cursor-pointer ${K.read?"":"bg-muted/50"}`,onClick:()=>D(K.id),"data-testid":`notification-item-${K.id}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${K.type==="warning"?"bg-amber-500":K.type==="success"?"bg-green-500":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm",children:K.title}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:K.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:K.time})]})]})},K.id))})})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"relative","data-testid":"button-profile",children:s.jsxs(yi,{className:"h-7 w-7",children:[s.jsx(Bu,{src:(n==null?void 0:n.profileImageUrl)||void 0,alt:(n==null?void 0:n.firstName)||"User"}),s.jsxs(bi,{className:"text-xs",children:[(He=n==null?void 0:n.firstName)==null?void 0:He[0],(be=n==null?void 0:n.lastName)==null?void 0:be[0]]})]})})}),s.jsxs(Nn,{align:"end",className:"w-56",children:[s.jsx(hi,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("p",{className:"text-sm font-medium",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n==null?void 0:n.email})]})}),s.jsx(fr,{}),s.jsxs(ct,{onClick:()=>d(!0),"data-testid":"menu-item-profile",children:[s.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Profile"]}),s.jsxs(ct,{onClick:()=>i("/settings"),"data-testid":"menu-item-settings",children:[s.jsx(c1,{className:"h-4 w-4 mr-2"}),"Settings"]}),s.jsxs(ct,{onClick:()=>i("/bug-report"),"data-testid":"menu-item-bug-report",children:[s.jsx(bt,{className:"h-4 w-4 mr-2"}),"Report Bug"]}),s.jsxs(ct,{onClick:()=>i("/user-guide"),"data-testid":"menu-item-user-guide",children:[s.jsx(Sn,{className:"h-4 w-4 mr-2"}),"User Guide"]}),s.jsx(fr,{}),s.jsxs(ct,{onClick:pe,"data-testid":"menu-item-logout",children:[s.jsx(Mme,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),s.jsx(zt,{open:u,onOpenChange:d,children:s.jsxs(Rt,{className:"sm:max-w-md",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Profile"}),s.jsx(ir,{children:"Your account information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(yi,{className:"h-16 w-16",children:[s.jsx(Bu,{src:(n==null?void 0:n.profileImageUrl)||void 0,alt:(n==null?void 0:n.firstName)||"User"}),s.jsxs(bi,{className:"text-xl",children:[(xt=n==null?void 0:n.firstName)==null?void 0:xt[0],(sn=n==null?void 0:n.lastName)==null?void 0:sn[0]]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(ji,{className:"h-3 w-3"}),n==null?void 0:n.email]})]})]}),s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4"}),"Organizations"]}),s.jsx("div",{className:"space-y-2",children:P.map(K=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:K.name}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:[s.jsx(ul,{className:"h-3 w-3 mr-1"}),"Member"]})]},K.id))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(H,{variant:"outline",onClick:()=>d(!1),"data-testid":"button-close-profile",children:"Close"})})]})]})}),s.jsx(zt,{open:m,onOpenChange:g,children:s.jsxs(Rt,{className:"sm:max-w-lg",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Import Project Data"}),s.jsx(ir,{children:"Import tasks, risks, issues, stakeholders, and costs from a JSON file"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(a1,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Use AI to generate project data:"}),s.jsxs("ol",{className:"list-decimal list-inside mt-1 space-y-1 text-xs",children:[s.jsx("li",{children:'Download the "AI Schema" from the dropdown menu'}),s.jsx("li",{children:"Give the schema to ChatGPT, Claude, or Gemini"}),s.jsx("li",{children:"Ask it to generate project data following the schema"}),s.jsx("li",{children:"Import the generated JSON file here"})]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:$e,className:"flex-1","data-testid":"button-download-template",children:[s.jsx(H4,{className:"h-4 w-4 mr-2"}),"Download Template"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:Ve,className:"flex-1","data-testid":"button-download-schema",children:[s.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Download AI Schema"]})]}),p&&s.jsx("div",{className:`rounded-lg p-3 ${p.success?"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800"}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[p.success?s.jsx(W4,{className:"h-4 w-4 text-green-600 dark:text-green-400 mt-0.5 shrink-0"}):s.jsx(bt,{className:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-medium ${p.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"}`,children:p.message}),p.warnings&&p.warnings.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:"Warnings:"}),s.jsxs("ul",{className:"text-xs text-amber-600 dark:text-amber-400 list-disc list-inside",children:[p.warnings.slice(0,5).map((K,de)=>s.jsx("li",{children:K},de)),p.warnings.length>5&&s.jsxs("li",{children:["...and ",p.warnings.length-5," more"]})]})]}),p.errors&&p.errors.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Errors:"}),s.jsxs("ul",{className:"text-xs text-red-600 dark:text-red-400 list-disc list-inside",children:[p.errors.slice(0,5).map((K,de)=>s.jsx("li",{children:K},de)),p.errors.length>5&&s.jsxs("li",{children:["...and ",p.errors.length-5," more"]})]})]})]})]})}),s.jsxs("div",{className:"flex justify-between pt-2",children:[s.jsx(H,{variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-import",children:p!=null&&p.success?"Close":"Cancel"}),s.jsxs("div",{className:"flex gap-2",children:[(p==null?void 0:p.success)&&s.jsx(H,{onClick:()=>window.location.reload(),"data-testid":"button-reload-page",children:"Reload Page"}),s.jsxs(H,{onClick:ke,"data-testid":"button-select-import-file",children:[s.jsx(Rm,{className:"h-4 w-4 mr-2"}),p?"Import Another":"Select JSON File"]})]})]})]})]})})]}),J&&M&&s.jsx(TJ,{open:j,onOpenChange:N,project:J,organizationId:M,onUpdate:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${M}/projects`]})}})]})}function g_e(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function G1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const LE=e=>Array.isArray(e);function Ree(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Dv(e){return typeof e=="string"||Array.isArray(e)}function QF(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function DO(e,t,n,r){if(typeof t=="function"){const[i,a]=QF(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=QF(r);t=t(n!==void 0?n:e.custom,i,a)}return t}function Q1(e,t,n){const r=e.getProps();return DO(r,t,n!==void 0?n:r.custom,e)}const OO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],IO=["initial",...OO],Yy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hf=new Set(Yy),Xl=e=>e*1e3,Zl=e=>e/1e3,x_e={type:"spring",stiffness:500,damping:25,restSpeed:10},v_e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),y_e={type:"keyframes",duration:.8},b_e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j_e=(e,{keyframes:t})=>t.length>2?y_e:Hf.has(e)?e.startsWith("scale")?v_e(t[1]):x_e:b_e;function MO(e,t){return e?e[t]||e.default||e:void 0}const w_e={useManualTiming:!1},N_e=e=>e!==null;function Y1(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(N_e),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const ei=e=>e;let $ee=ei;function S_e(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,d=!1,f=!1)=>{const m=f&&r?t:n;return d&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(l),r=!1,i&&(i=!1,c.process(u))}};return c}const Yb=["read","resolveKeyframes","update","preRender","render","postRender"],C_e=40;function Fee(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Yb.reduce((b,y)=>(b[y]=S_e(a),b),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:h}=o,m=()=>{const b=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,C_e),1),i.timestamp=b,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Yb.reduce((b,y)=>{const j=o[y];return b[y]=(N,w=!1,S=!1)=>(n||g(),j.schedule(N,w,S)),b},{}),cancel:b=>{for(let y=0;y<Yb.length;y++)o[Yb[y]].cancel(b)},state:i,steps:o}}const{schedule:Ln,cancel:Vu,state:As,steps:Ck}=Fee(typeof requestAnimationFrame<"u"?requestAnimationFrame:ei,!0),Lee=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,k_e=1e-7,P_e=12;function E_e(e,t,n,r,i){let a,o,l=0;do o=t+(n-t)/2,a=Lee(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>k_e&&++l<P_e);return o}function Xy(e,t,n,r){if(e===t&&n===r)return ei;const i=a=>E_e(a,0,1,e,n);return a=>a===0||a===1?a:Lee(i(a),t,r)}const zee=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Bee=e=>t=>1-e(1-t),Vee=Xy(.33,1.53,.69,.99),RO=Bee(Vee),qee=zee(RO),Uee=e=>(e*=2)<1?.5*RO(e):.5*(2-Math.pow(2,-10*(e-1))),$O=e=>1-Math.sin(Math.acos(e)),Wee=Bee($O),Hee=zee($O),Kee=e=>/^0[^.\s]+$/u.test(e);function __e(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Kee(e):!0}const Gee=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Qee=e=>t=>typeof t=="string"&&t.startsWith(e),Yee=Qee("--"),A_e=Qee("var(--"),FO=e=>A_e(e)?T_e.test(e.split("/*")[0].trim()):!1,T_e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,D_e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function O_e(e){const t=D_e.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Xee(e,t,n=1){const[r,i]=O_e(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return Gee(o)?parseFloat(o):o}return FO(i)?Xee(i,t,n+1):i}const hc=(e,t,n)=>n>t?t:n<e?e:n,Zp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ov={...Zp,transform:e=>hc(0,1,e)},Xb={...Zp,default:1},Zy=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Lc=Zy("deg"),sl=Zy("%"),At=Zy("px"),I_e=Zy("vh"),M_e=Zy("vw"),YF={...sl,parse:e=>sl.parse(e)/100,transform:e=>sl.transform(e*100)},R_e=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),XF=e=>e===Zp||e===At,ZF=(e,t)=>parseFloat(e.split(", ")[t]),JF=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ZF(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?ZF(a[1],e):0}},$_e=new Set(["x","y","z"]),F_e=Yy.filter(e=>!$_e.has(e));function L_e(e){const t=[];return F_e.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ym={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:JF(4,13),y:JF(5,14)};Ym.translateX=Ym.x;Ym.translateY=Ym.y;const Zee=e=>t=>t.test(e),z_e={test:e=>e==="auto",parse:e=>e},Jee=[Zp,At,sl,Lc,M_e,I_e,z_e],eL=e=>Jee.find(Zee(e)),nf=new Set;let zE=!1,BE=!1;function ete(){if(BE){const e=Array.from(nf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=L_e(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var l;(l=r.getValue(a))===null||l===void 0||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}BE=!1,zE=!1,nf.forEach(e=>e.complete()),nf.clear()}function tte(){nf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(BE=!0)})}function B_e(){tte(),ete()}class LO{constructor(t,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(nf.add(this),zE||(zE=!0,Ln.read(tte),Ln.resolveKeyframes(ete))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=i==null?void 0:i.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&o===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),nf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,nf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ox=e=>Math.round(e*1e5)/1e5,zO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function V_e(e){return e==null}const q_e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,BO=(e,t)=>n=>!!(typeof n=="string"&&q_e.test(n)&&n.startsWith(e)||t&&!V_e(n)&&Object.prototype.hasOwnProperty.call(n,t)),nte=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(zO);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},U_e=e=>hc(0,255,e),kk={...Zp,transform:e=>Math.round(U_e(e))},Rd={test:BO("rgb","red"),parse:nte("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+kk.transform(e)+", "+kk.transform(t)+", "+kk.transform(n)+", "+Ox(Ov.transform(r))+")"};function W_e(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const VE={test:BO("#"),parse:W_e,transform:Rd.transform},Rh={test:BO("hsl","hue"),parse:nte("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+sl.transform(Ox(t))+", "+sl.transform(Ox(n))+", "+Ox(Ov.transform(r))+")"},Ks={test:e=>Rd.test(e)||VE.test(e)||Rh.test(e),parse:e=>Rd.test(e)?Rd.parse(e):Rh.test(e)?Rh.parse(e):VE.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Rd.transform(e):Rh.transform(e)},H_e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K_e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(zO))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(H_e))===null||n===void 0?void 0:n.length)||0)>0}const rte="number",ste="color",G_e="var",Q_e="var(",tL="${}",Y_e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Iv(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(Y_e,c=>(Ks.test(c)?(r.color.push(a),i.push(ste),n.push(Ks.parse(c))):c.startsWith(Q_e)?(r.var.push(a),i.push(G_e),n.push(c)):(r.number.push(a),i.push(rte),n.push(parseFloat(c))),++a,tL)).split(tL);return{values:n,split:l,indexes:r,types:i}}function ite(e){return Iv(e).values}function ate(e){const{split:t,types:n}=Iv(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const l=n[o];l===rte?a+=Ox(i[o]):l===ste?a+=Ks.transform(i[o]):a+=i[o]}return a}}const X_e=e=>typeof e=="number"?0:e;function Z_e(e){const t=ite(e);return ate(e)(t.map(X_e))}const qu={test:K_e,parse:ite,createTransformer:ate,getAnimatableNone:Z_e},J_e=new Set(["brightness","contrast","saturate","opacity"]);function eAe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(zO)||[];if(!r)return e;const i=n.replace(r,"");let a=J_e.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const tAe=/\b([a-z-]*)\(.*?\)/gu,qE={...qu,getAnimatableNone:e=>{const t=e.match(tAe);return t?t.map(eAe).join(" "):e}},nAe={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At},rAe={rotate:Lc,rotateX:Lc,rotateY:Lc,rotateZ:Lc,scale:Xb,scaleX:Xb,scaleY:Xb,scaleZ:Xb,skew:Lc,skewX:Lc,skewY:Lc,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Ov,originX:YF,originY:YF,originZ:At},nL={...Zp,transform:Math.round},VO={...nAe,...rAe,zIndex:nL,size:At,fillOpacity:Ov,strokeOpacity:Ov,numOctaves:nL},sAe={...VO,color:Ks,backgroundColor:Ks,outlineColor:Ks,fill:Ks,stroke:Ks,borderColor:Ks,borderTopColor:Ks,borderRightColor:Ks,borderBottomColor:Ks,borderLeftColor:Ks,filter:qE,WebkitFilter:qE},qO=e=>sAe[e];function ote(e,t){let n=qO(e);return n!==qE&&(n=qu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const iAe=new Set(["auto","none","0"]);function aAe(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!iAe.has(a)&&Iv(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=ote(n,i)}class lte extends LO{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),FO(u))){const d=Xee(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!R_e.has(r)||t.length!==2)return;const[i,a]=t,o=eL(i),l=eL(a);if(o!==l)if(XF(o)&&XF(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)__e(t[i])&&r.push(i);r.length&&aAe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ym[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Ym[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function UO(e){return typeof e=="function"}let t0;function oAe(){t0=void 0}const il={now:()=>(t0===void 0&&il.set(As.isProcessing||w_e.useManualTiming?As.timestamp:performance.now()),t0),set:e=>{t0=e,queueMicrotask(oAe)}},rL=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qu.test(e)||e==="0")&&!e.startsWith("url("));function lAe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function cAe(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=rL(i,t),l=rL(a,t);return!o||!l?!1:lAe(e)||(n==="spring"||UO(n))&&r}const uAe=40;class cte{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=il.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uAe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&B_e(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=il.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!cAe(t,r,i,a))if(o)this.options.duration=0;else{c==null||c(Y1(t,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Xm=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},ute=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Xm(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function dte(e,t){return t?e*(1e3/t):0}const dAe=5;function fte(e,t,n){const r=Math.max(t-dAe,0);return dte(n-e(r),t-r)}const wr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pk=.001;function fAe({duration:e=wr.duration,bounce:t=wr.bounce,velocity:n=wr.velocity,mass:r=wr.mass}){let i,a,o=1-t;o=hc(wr.minDamping,wr.maxDamping,o),e=hc(wr.minDuration,wr.maxDuration,Zl(e)),o<1?(i=u=>{const d=u*o,f=d*e,h=d-n,m=UE(u,o),g=Math.exp(-f);return Pk-h/m*g},a=u=>{const f=u*o*e,h=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),p=UE(Math.pow(u,2),o);return(-i(u)+Pk>0?-1:1)*((h-m)*g)/p}):(i=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-Pk+d*f},a=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const l=5/e,c=mAe(i,a,l);if(e=Xl(e),isNaN(c))return{stiffness:wr.stiffness,damping:wr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const hAe=12;function mAe(e,t,n){let r=n;for(let i=1;i<hAe;i++)r=r-e(r)/t(r);return r}function UE(e,t){return e*Math.sqrt(1-t*t)}const WE=2e4;function hte(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<WE;)t+=n,r=e.next(t);return t>=WE?1/0:t}const pAe=["duration","bounce"],gAe=["stiffness","damping","mass"];function sL(e,t){return t.some(n=>e[n]!==void 0)}function xAe(e){let t={velocity:wr.velocity,stiffness:wr.stiffness,damping:wr.damping,mass:wr.mass,isResolvedFromDuration:!1,...e};if(!sL(e,gAe)&&sL(e,pAe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*hc(.05,1,1-e.bounce)*Math.sqrt(i);t={...t,mass:wr.mass,stiffness:i,damping:a}}else{const n=fAe(e);t={...t,...n,mass:wr.mass},t.isResolvedFromDuration=!0}return t}function mte(e=wr.visualDuration,t=wr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:m}=xAe({...n,velocity:-Zl(n.velocity||0)}),g=h||0,p=u/(2*Math.sqrt(c*d)),v=o-a,b=Zl(Math.sqrt(c/d)),y=Math.abs(v)<5;r||(r=y?wr.restSpeed.granular:wr.restSpeed.default),i||(i=y?wr.restDelta.granular:wr.restDelta.default);let j;if(p<1){const w=UE(b,p);j=S=>{const k=Math.exp(-p*b*S);return o-k*((g+p*b*v)/w*Math.sin(w*S)+v*Math.cos(w*S))}}else if(p===1)j=w=>o-Math.exp(-b*w)*(v+(g+b*v)*w);else{const w=b*Math.sqrt(p*p-1);j=S=>{const k=Math.exp(-p*b*S),C=Math.min(w*S,300);return o-k*((g+p*b*v)*Math.sinh(C)+w*v*Math.cosh(C))/w}}const N={calculatedDuration:m&&f||null,next:w=>{const S=j(w);if(m)l.done=w>=f;else{let k=0;p<1&&(k=w===0?Xl(g):fte(j,w,S));const C=Math.abs(k)<=r,A=Math.abs(o-S)<=i;l.done=C&&A}return l.value=l.done?o:S,l},toString:()=>{const w=Math.min(hte(N),WE),S=ute(k=>N.next(w*k).value,w,30);return w+"ms "+S}};return N}function iL({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,g=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let p=n*t;const v=f+p,b=o===void 0?v:o(v);b!==v&&(p=b-f);const y=C=>-p*Math.exp(-C/r),j=C=>b+y(C),N=C=>{const A=y(C),D=j(C);h.done=Math.abs(A)<=u,h.value=h.done?b:D};let w,S;const k=C=>{m(h.value)&&(w=C,S=mte({keyframes:[h.value,g(h.value)],velocity:fte(j,C,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:C=>{let A=!1;return!S&&w===void 0&&(A=!0,N(C),k(C)),w!==void 0&&C>=w?S.next(C-w):(!A&&N(C),h)}}}const vAe=Xy(.42,0,1,1),yAe=Xy(0,0,.58,1),pte=Xy(.42,0,.58,1),bAe=e=>Array.isArray(e)&&typeof e[0]!="number",WO=e=>Array.isArray(e)&&typeof e[0]=="number",jAe={linear:ei,easeIn:vAe,easeInOut:pte,easeOut:yAe,circIn:$O,circInOut:Hee,circOut:Wee,backIn:RO,backInOut:qee,backOut:Vee,anticipate:Uee},aL=e=>{if(WO(e)){$ee(e.length===4);const[t,n,r,i]=e;return Xy(t,n,r,i)}else if(typeof e=="string")return jAe[e];return e},wAe=(e,t)=>n=>t(e(n)),ju=(...e)=>e.reduce(wAe),gr=(e,t,n)=>e+(t-e)*n;function Ek(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function NAe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=Ek(c,l,e+1/3),a=Ek(c,l,e),o=Ek(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function xw(e,t){return n=>n>0?t:e}const _k=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},SAe=[VE,Rd,Rh],CAe=e=>SAe.find(t=>t.test(e));function oL(e){const t=CAe(e);if(!t)return!1;let n=t.parse(e);return t===Rh&&(n=NAe(n)),n}const lL=(e,t)=>{const n=oL(e),r=oL(t);if(!n||!r)return xw(e,t);const i={...n};return a=>(i.red=_k(n.red,r.red,a),i.green=_k(n.green,r.green,a),i.blue=_k(n.blue,r.blue,a),i.alpha=gr(n.alpha,r.alpha,a),Rd.transform(i))},HE=new Set(["none","hidden"]);function kAe(e,t){return HE.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function PAe(e,t){return n=>gr(e,t,n)}function HO(e){return typeof e=="number"?PAe:typeof e=="string"?FO(e)?xw:Ks.test(e)?lL:AAe:Array.isArray(e)?gte:typeof e=="object"?Ks.test(e)?lL:EAe:xw}function gte(e,t){const n=[...e],r=n.length,i=e.map((a,o)=>HO(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function EAe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=HO(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function _Ae(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=e.indexes[o][i[o]],c=(n=e.values[l])!==null&&n!==void 0?n:0;r[a]=c,i[o]++}return r}const AAe=(e,t)=>{const n=qu.createTransformer(t),r=Iv(e),i=Iv(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?HE.has(e)&&!i.values.length||HE.has(t)&&!r.values.length?kAe(e,t):ju(gte(_Ae(r,i),i.values),n):xw(e,t)};function xte(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?gr(e,t,n):HO(e)(e,t)}function TAe(e,t,n){const r=[],i=n||xte,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ei:t;l=ju(c,l)}r.push(l)}return r}function DAe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if($ee(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=TAe(t,r,i),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=Xm(e[d],e[d+1],u);return o[d](f)};return n?u=>c(hc(e[0],e[a-1],u)):c}function OAe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Xm(0,t,r);e.push(gr(n,1,i))}}function IAe(e){const t=[0];return OAe(t,e.length-1),t}function MAe(e,t){return e.map(n=>n*t)}function RAe(e,t){return e.map(()=>t||pte).splice(0,e.length-1)}function vw({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=bAe(r)?r.map(aL):aL(r),a={done:!1,value:t[0]},o=MAe(n&&n.length===t.length?n:IAe(t),e),l=DAe(o,t,{ease:Array.isArray(i)?i:RAe(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const $Ae=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ln.update(t,!0),stop:()=>Vu(t),now:()=>As.isProcessing?As.timestamp:il.now()}},FAe={decay:iL,inertia:iL,tween:vw,keyframes:vw,spring:mte},LAe=e=>e/100;class KO extends cte{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||LO,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(a,l,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=UO(n)?n:FAe[n]||vw;let c,u;l!==vw&&typeof t[0]!="number"&&(c=ju(LAe,xte(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});a==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=hte(d));const{calculatedDuration:f}=d,h=f+i,m=h*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:p,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let j=this.currentTime,N=a;if(m){const C=Math.min(this.currentTime,d)/f;let A=Math.floor(C),D=C%1;!D&&C>=1&&(D=1),D===1&&A--,A=Math.min(A,m+1),!!(A%2)&&(g==="reverse"?(D=1-D,p&&(D-=p/f)):g==="mirror"&&(N=o)),j=hc(0,1,D)*f}const w=y?{done:!1,value:c[0]}:N.next(j);l&&(w.value=l(w.value));let{done:S}=w;!y&&u!==null&&(S=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return k&&i!==void 0&&(w.value=Y1(c,this.options,i)),v&&v(w.value),k&&this.finish(),w}get duration(){const{resolved:t}=this;return t?Zl(t.calculatedDuration):0}get time(){return Zl(this.currentTime)}set time(t){t=Xl(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Zl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=$Ae,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const zAe=new Set(["opacity","clipPath","filter","transform"]);function GO(e){let t;return()=>(t===void 0&&(t=e()),t)}const BAe={linearEasing:void 0};function VAe(e,t){const n=GO(e);return()=>{var r;return(r=BAe[t])!==null&&r!==void 0?r:n()}}const yw=VAe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function vte(e){return!!(typeof e=="function"&&yw()||!e||typeof e=="string"&&(e in KE||yw())||WO(e)||Array.isArray(e)&&e.every(vte))}const dx=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,KE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dx([0,.65,.55,1]),circOut:dx([.55,0,1,.45]),backIn:dx([.31,.01,.66,-.59]),backOut:dx([.33,1.53,.69,.99])};function yte(e,t){if(e)return typeof e=="function"&&yw()?ute(e,t):WO(e)?dx(e):Array.isArray(e)?e.map(n=>yte(n,t)||KE.easeOut):KE[e]}function qAe(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=yte(l,i);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function cL(e,t){e.timeline=t,e.onfinish=null}const UAe=GO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bw=10,WAe=2e4;function HAe(e){return UO(e.type)||e.type==="spring"||!vte(e.ease)}function KAe(e,t){const n=new KO({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<WAe;)r=n.sample(a),i.push(r.value),a+=bw;return{times:void 0,keyframes:i,duration:a-bw,ease:"linear"}}const bte={anticipate:Uee,backInOut:qee,circInOut:Hee};function GAe(e){return e in bte}class uL extends cte{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new lte(a,(o,l)=>this.onKeyframesResolved(o,l),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:i=300,times:a,ease:o,type:l,motionValue:c,name:u,startTime:d}=this.options;if(!(!((r=c.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&yw()&&GAe(o)&&(o=bte[o]),HAe(this.options)){const{onComplete:h,onUpdate:m,motionValue:g,element:p,...v}=this.options,b=KAe(t,v);t=b.keyframes,t.length===1&&(t[1]=t[0]),i=b.duration,a=b.times,o=b.ease,l="keyframes"}const f=qAe(c.owner.current,u,t,{...this.options,duration:i,times:a,ease:o});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(cL(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;c.set(Y1(t,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:a,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Zl(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Zl(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Xl(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ei;const{animation:r}=n;cL(r,t)}return ei}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:h,...m}=this.options,g=new KO({...m,keyframes:r,duration:i,type:a,ease:o,times:l,isGenerator:!0}),p=Xl(this.time);u.setWithVelocity(g.sample(p-bw).value,g.sample(p).value,bw)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:l}=t;return UAe()&&r&&zAe.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const QAe=GO(()=>window.ScrollTimeline!==void 0);class YAe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>QAe()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function XAe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const QO=(e,t,n,r={},i,a)=>o=>{const l=MO(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Xl(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};XAe(l)||(d={...d,...j_e(e,d)}),d.duration&&(d.duration=Xl(d.duration)),d.repeatDelay&&(d.repeatDelay=Xl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!a&&t.get()!==void 0){const h=Y1(d.keyframes,l);if(h!==void 0)return Ln.update(()=>{d.onUpdate(h),d.onComplete()}),new YAe([])}return!a&&uL.supports(d)?new uL(d):new KO(d)},ZAe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),JAe=e=>LE(e)?e[e.length-1]||0:e;function YO(e,t){e.indexOf(t)===-1&&e.push(t)}function XO(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ZO{constructor(){this.subscriptions=[]}add(t){return YO(this.subscriptions,t),()=>XO(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dL=30,eTe=e=>!isNaN(parseFloat(e));class tTe{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=il.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=il.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=eTe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ZO);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=il.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dL);return dte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mv(e,t){return new tTe(e,t)}function nTe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Mv(n))}function rTe(e,t){const n=Q1(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const l=JAe(a[o]);nTe(e,o,l)}}const JO=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sTe="framerAppearId",jte="data-"+JO(sTe);function wte(e){return e.props[jte]}const Js=e=>!!(e&&e.getVelocity);function iTe(e){return!!(Js(e)&&e.add)}function GE(e,t){const n=e.getValue("willChange");if(iTe(n))return n.add(t)}function aTe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Nte(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;r&&(o=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const f in c){const h=e.getValue(f,(a=e.latestValues[f])!==null&&a!==void 0?a:null),m=c[f];if(m===void 0||d&&aTe(d,f))continue;const g={delay:n,...MO(o||{},f)};let p=!1;if(window.MotionHandoffAnimation){const b=wte(e);if(b){const y=window.MotionHandoffAnimation(b,f,Ln);y!==null&&(g.startTime=y,p=!0)}}GE(e,f),h.start(QO(f,h,m,e.shouldReduceMotion&&Hf.has(f)?{type:!1}:g,e,p));const v=h.animation;v&&u.push(v)}return l&&Promise.all(u).then(()=>{Ln.update(()=>{l&&rTe(e,l)})}),u}function QE(e,t,n={}){var r;const i=Q1(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(Nte(e,i,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=a;return oTe(e,t,d+u,f,h,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(n.delay)])}function oTe(e,t,n=0,r=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(e.variantChildren).sort(lTe).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(QE(u,t,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function lTe(e,t){return e.sortNodePosition(t)}function cTe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>QE(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=QE(e,t,n);else{const i=typeof t=="function"?Q1(e,t,n.custom):t;r=Promise.all(Nte(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const uTe=IO.length;function Ste(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Ste(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<uTe;n++){const r=IO[n],i=e.props[r];(Dv(i)||i===!1)&&(t[r]=i)}return t}const dTe=[...OO].reverse(),fTe=OO.length;function hTe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>cTe(e,n,r)))}function mTe(e){let t=hTe(e),n=fL(),r=!0;const i=c=>(u,d)=>{var f;const h=Q1(e,d,c==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:g,...p}=h;u={...u,...p,...g}}return u};function a(c){t=c(e)}function o(c){const{props:u}=e,d=Ste(e.parent)||{},f=[],h=new Set;let m={},g=1/0;for(let v=0;v<fTe;v++){const b=dTe[v],y=n[b],j=u[b]!==void 0?u[b]:d[b],N=Dv(j),w=b===c?y.isActive:null;w===!1&&(g=v);let S=j===d[b]&&j!==u[b]&&N;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...m},!y.isActive&&w===null||!j&&!y.prevProp||G1(j)||typeof j=="boolean")continue;const k=pTe(y.prevProp,j);let C=k||b===c&&y.isActive&&!S&&N||v>g&&N,A=!1;const D=Array.isArray(j)?j:[j];let P=D.reduce(i(b),{});w===!1&&(P={});const{prevResolvedValues:_={}}=y,O={..._,...P},M=F=>{C=!0,h.has(F)&&(A=!0,h.delete(F)),y.needsAnimating[F]=!0;const E=e.getValue(F);E&&(E.liveStyle=!1)};for(const F in O){const E=P[F],B=_[F];if(m.hasOwnProperty(F))continue;let L=!1;LE(E)&&LE(B)?L=!Ree(E,B):L=E!==B,L?E!=null?M(F):h.add(F):E!==void 0&&h.has(F)?M(F):y.protectedKeys[F]=!0}y.prevProp=j,y.prevResolvedValues=P,y.isActive&&(m={...m,...P}),r&&e.blockInitialAnimation&&(C=!1),C&&(!(S&&k)||A)&&f.push(...D.map(F=>({animation:F,options:{type:b}})))}if(h.size){const v={};h.forEach(b=>{const y=e.getBaseTarget(b),j=e.getValue(b);j&&(j.liveStyle=!0),v[b]=y??null}),f.push({animation:v})}let p=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(f):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),n[c].isActive=u;const f=o(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=fL(),r=!0}}}function pTe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ree(t,e):!1}function dd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fL(){return{animate:dd(!0),whileInView:dd(),whileHover:dd(),whileTap:dd(),whileDrag:dd(),whileFocus:dd(),exit:dd()}}class td{constructor(t){this.isMounted=!1,this.node=t}update(){}}class gTe extends td{constructor(t){super(t),t.animationState||(t.animationState=mTe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();G1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let xTe=0;class vTe extends td{constructor(){super(...arguments),this.id=xTe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const yTe={animation:{Feature:gTe},exit:{Feature:vTe}};function bTe(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const lo={x:!1,y:!1};function Cte(){return lo.x||lo.y}function hL(e){return t=>{t.pointerType==="touch"||Cte()||e(t)}}function jTe(e,t,n={}){const r=new AbortController,i={passive:!0,...n,signal:r.signal},a=hL(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const u=hL(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return bTe(e).forEach(o=>{o.addEventListener("pointerenter",a,i)}),()=>r.abort()}function wTe(e){return e==="x"||e==="y"?lo[e]?null:(lo[e]=!0,()=>{lo[e]=!1}):lo.x||lo.y?null:(lo.x=lo.y=!0,()=>{lo.x=lo.y=!1})}const kte=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Jy(e){return{point:{x:e.pageX,y:e.pageY}}}const NTe=e=>t=>kte(t)&&e(t,Jy(t));function Wl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wu(e,t,n,r){return Wl(e,t,NTe(n),r)}const mL=(e,t)=>Math.abs(e-t);function STe(e,t){const n=mL(e.x,t.x),r=mL(e.y,t.y);return Math.sqrt(n**2+r**2)}class Pte{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Tk(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=STe(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:p}=As;this.history.push({...g,timestamp:p});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ak(h,this.transformPagePoint),Ln.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Tk(f.type==="pointercancel"?this.lastMoveEventInfo:Ak(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),g&&g(f,v)},!kte(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Jy(t),l=Ak(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=As;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,Tk(l,this.history)),this.removeListeners=ju(wu(this.contextWindow,"pointermove",this.handlePointerMove),wu(this.contextWindow,"pointerup",this.handlePointerUp),wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Vu(this.updatePoint)}}function Ak(e,t){return t?{point:t(e.point)}:e}function pL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Tk({point:e},t){return{point:e,delta:pL(e,Ete(t)),offset:pL(e,CTe(t)),velocity:kTe(t,.1)}}function CTe(e){return e[0]}function Ete(e){return e[e.length-1]}function kTe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Ete(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Xl(t)));)n--;if(!r)return{x:0,y:0};const a=Zl(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function $h(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const _te=1e-4,PTe=1-_te,ETe=1+_te,Ate=.01,_Te=0-Ate,ATe=0+Ate;function ya(e){return e.max-e.min}function TTe(e,t,n){return Math.abs(e-t)<=n}function gL(e,t,n,r=.5){e.origin=r,e.originPoint=gr(t.min,t.max,e.origin),e.scale=ya(n)/ya(t),e.translate=gr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=PTe&&e.scale<=ETe||isNaN(e.scale))&&(e.scale=1),(e.translate>=_Te&&e.translate<=ATe||isNaN(e.translate))&&(e.translate=0)}function Ix(e,t,n,r){gL(e.x,t.x,n.x,r?r.originX:void 0),gL(e.y,t.y,n.y,r?r.originY:void 0)}function xL(e,t,n){e.min=n.min+t.min,e.max=e.min+ya(t)}function DTe(e,t,n){xL(e.x,t.x,n.x),xL(e.y,t.y,n.y)}function vL(e,t,n){e.min=t.min-n.min,e.max=e.min+ya(t)}function Mx(e,t,n){vL(e.x,t.x,n.x),vL(e.y,t.y,n.y)}function OTe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?gr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?gr(n,e,r.max):Math.min(e,n)),e}function yL(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ITe(e,{top:t,left:n,bottom:r,right:i}){return{x:yL(e.x,n,i),y:yL(e.y,t,r)}}function bL(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function MTe(e,t){return{x:bL(e.x,t.x),y:bL(e.y,t.y)}}function RTe(e,t){let n=.5;const r=ya(e),i=ya(t);return i>r?n=Xm(t.min,t.max-r,e.min):r>i&&(n=Xm(e.min,e.max-i,t.min)),hc(0,1,n)}function $Te(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const YE=.35;function FTe(e=YE){return e===!1?e=0:e===!0&&(e=YE),{x:jL(e,"left","right"),y:jL(e,"top","bottom")}}function jL(e,t,n){return{min:wL(e,t),max:wL(e,n)}}function wL(e,t){return typeof e=="number"?e:e[t]||0}const NL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fh=()=>({x:NL(),y:NL()}),SL=()=>({min:0,max:0}),Tr=()=>({x:SL(),y:SL()});function Ta(e){return[e("x"),e("y")]}function Tte({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function LTe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function zTe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Dk(e){return e===void 0||e===1}function XE({scale:e,scaleX:t,scaleY:n}){return!Dk(e)||!Dk(t)||!Dk(n)}function bd(e){return XE(e)||Dte(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Dte(e){return CL(e.x)||CL(e.y)}function CL(e){return e&&e!=="0%"}function jw(e,t,n){const r=e-n,i=t*r;return n+i}function kL(e,t,n,r,i){return i!==void 0&&(e=jw(e,i,r)),jw(e,n,r)+t}function ZE(e,t=0,n=1,r,i){e.min=kL(e.min,t,n,r,i),e.max=kL(e.max,t,n,r,i)}function Ote(e,{x:t,y:n}){ZE(e.x,t.translate,t.scale,t.originPoint),ZE(e.y,n.translate,n.scale,n.originPoint)}const PL=.999999999999,EL=1.0000000000001;function BTe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&zh(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ote(e,o)),r&&bd(a.latestValues)&&zh(e,a.latestValues))}t.x<EL&&t.x>PL&&(t.x=1),t.y<EL&&t.y>PL&&(t.y=1)}function Lh(e,t){e.min=e.min+t,e.max=e.max+t}function _L(e,t,n,r,i=.5){const a=gr(e.min,e.max,i);ZE(e,t,n,a,r)}function zh(e,t){_L(e.x,t.x,t.scaleX,t.scale,t.originX),_L(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ite(e,t){return Tte(zTe(e.getBoundingClientRect(),t))}function VTe(e,t,n){const r=Ite(e,n),{scroll:i}=t;return i&&(Lh(r.x,i.offset.x),Lh(r.y,i.offset.y)),r}const Mte=({current:e})=>e?e.ownerDocument.defaultView:null,qTe=new WeakMap;class UTe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jy(d).point)},a=(d,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wTe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ta(v=>{let b=this.getAxisMotionValue(v).get()||0;if(sl.test(b)){const{projection:y}=this.visualElement;if(y&&y.layout){const j=y.layout.layoutBox[v];j&&(b=ya(j)*(parseFloat(b)/100))}}this.originPoint[v]=b}),g&&Ln.postRender(()=>g(d,f)),GE(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=f;if(m&&this.currentDirection===null){this.currentDirection=WTe(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),p&&p(d,f)},l=(d,f)=>this.stop(d,f),c=()=>Ta(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Pte(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Mte(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Ln.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Zb(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=OTe(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&$h(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=ITe(i.layoutBox,n):this.constraints=!1,this.elastic=FTe(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ta(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$Te(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!$h(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=VTe(r,i.root,this.visualElement.getTransformPagePoint());let o=MTe(i.layout.layoutBox,a);if(n){const l=n(LTe(o));this.hasMutatedConstraints=!!l,l&&(o=Tte(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ta(d=>{if(!Zb(d,n,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return GE(this.visualElement,t),r.start(QO(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ta(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ta(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ta(n=>{const{drag:r}=this.getProps();if(!Zb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-gr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$h(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ta(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=RTe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ta(o=>{if(!Zb(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(gr(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;qTe.set(this.visualElement,this);const t=this.visualElement.current,n=wu(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();$h(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ln.read(r);const o=Wl(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ta(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=YE,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Zb(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function WTe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class HTe extends td{constructor(t){super(t),this.removeGroupControls=ei,this.removeListeners=ei,this.controls=new UTe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const AL=e=>(t,n)=>{e&&Ln.postRender(()=>e(t,n))};class KTe extends td{constructor(){super(...arguments),this.removePointerDownListener=ei}onPointerDown(t){this.session=new Pte(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mte(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:AL(t),onStart:AL(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&Ln.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=wu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const X1=x.createContext(null);function GTe(){const e=x.useContext(X1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=x.useId();x.useEffect(()=>r(i),[]);const a=x.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,a]:[!0]}const eI=x.createContext({}),Rte=x.createContext({}),n0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Vg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(At.test(e))e=parseFloat(e);else return e;const n=TL(e,t.target.x),r=TL(e,t.target.y);return`${n}% ${r}%`}},QTe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=qu.parse(e);if(i.length>5)return r;const a=qu.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const u=gr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}},ww={};function YTe(e){Object.assign(ww,e)}const{schedule:tI}=Fee(queueMicrotask,!1);class XTe extends x.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;YTe(ZTe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),n0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Ln.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),tI.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $te(e){const[t,n]=GTe(),r=x.useContext(eI);return s.jsx(XTe,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(Rte),isPresent:t,safeToRemove:n})}const ZTe={borderRadius:{...Vg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vg,borderTopRightRadius:Vg,borderBottomLeftRadius:Vg,borderBottomRightRadius:Vg,boxShadow:QTe},Fte=["TopLeft","TopRight","BottomLeft","BottomRight"],JTe=Fte.length,DL=e=>typeof e=="string"?parseFloat(e):e,OL=e=>typeof e=="number"||At.test(e);function eDe(e,t,n,r,i,a){i?(e.opacity=gr(0,n.opacity!==void 0?n.opacity:1,tDe(r)),e.opacityExit=gr(t.opacity!==void 0?t.opacity:1,0,nDe(r))):a&&(e.opacity=gr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<JTe;o++){const l=`border${Fte[o]}Radius`;let c=IL(t,l),u=IL(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||OL(c)===OL(u)?(e[l]=Math.max(gr(DL(c),DL(u),r),0),(sl.test(u)||sl.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=gr(t.rotate||0,n.rotate||0,r))}function IL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const tDe=Lte(0,.5,Wee),nDe=Lte(.5,.95,ei);function Lte(e,t,n){return r=>r<e?0:r>t?1:n(Xm(e,t,r))}function ML(e,t){e.min=t.min,e.max=t.max}function ka(e,t){ML(e.x,t.x),ML(e.y,t.y)}function RL(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function $L(e,t,n,r,i){return e-=t,e=jw(e,1/n,r),i!==void 0&&(e=jw(e,1/i,r)),e}function rDe(e,t=0,n=1,r=.5,i,a=e,o=e){if(sl.test(t)&&(t=parseFloat(t),t=gr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=gr(a.min,a.max,r);e===a&&(l-=t),e.min=$L(e.min,t,n,l,i),e.max=$L(e.max,t,n,l,i)}function FL(e,t,[n,r,i],a,o){rDe(e,t[n],t[r],t[i],t.scale,a,o)}const sDe=["x","scaleX","originX"],iDe=["y","scaleY","originY"];function LL(e,t,n,r){FL(e.x,t,sDe,n?n.x:void 0,r?r.x:void 0),FL(e.y,t,iDe,n?n.y:void 0,r?r.y:void 0)}function zL(e){return e.translate===0&&e.scale===1}function zte(e){return zL(e.x)&&zL(e.y)}function BL(e,t){return e.min===t.min&&e.max===t.max}function aDe(e,t){return BL(e.x,t.x)&&BL(e.y,t.y)}function VL(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bte(e,t){return VL(e.x,t.x)&&VL(e.y,t.y)}function qL(e){return ya(e.x)/ya(e.y)}function UL(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class oDe{constructor(){this.members=[]}add(t){YO(this.members,t),t.scheduleRender()}remove(t){if(XO(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lDe(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:m,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const cDe=(e,t)=>e.depth-t.depth;class uDe{constructor(){this.children=[],this.isDirty=!1}add(t){YO(this.children,t),this.isDirty=!0}remove(t){XO(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(cDe),this.isDirty=!1,this.children.forEach(t)}}function r0(e){const t=Js(e)?e.get():e;return ZAe(t)?t.toValue():t}function dDe(e,t){const n=il.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(Vu(r),e(a-t))};return Ln.read(r,!0),()=>Vu(r)}function fDe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function hDe(e,t,n){const r=Js(e)?e:Mv(e);return r.start(QO("",r,t,n)),r.animation}const jd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},fx=typeof window<"u"&&window.MotionDebug!==void 0,Ok=["","X","Y","Z"],mDe={visibility:"hidden"},WL=1e3;let pDe=0;function Ik(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Vte(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=wte(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ln,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Vte(r)}function qte({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=pDe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fx&&(jd.totalNodes=jd.resolvedTargetDeltas=jd.recalculatedProjection=0),this.nodes.forEach(vDe),this.nodes.forEach(NDe),this.nodes.forEach(SDe),this.nodes.forEach(yDe),fx&&window.MotionDebug.record(jd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new uDe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ZO),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fDe(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=dDe(h,250),n0.hasAnimatedSinceResize&&(n0.hasAnimatedSinceResize=!1,this.nodes.forEach(KL))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||d.getDefaultTransition()||_De,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!Bte(this.targetLayout,g)||m,j=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,j);const N={...MO(p,"layout"),onPlay:v,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else h||KL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CDe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vte(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(HL);return}this.isUpdating||this.nodes.forEach(jDe),this.isUpdating=!1,this.nodes.forEach(wDe),this.nodes.forEach(gDe),this.nodes.forEach(xDe),this.clearAllSnapshots();const l=il.now();As.delta=hc(0,1e3/60,l-As.timestamp),As.timestamp=l,As.isProcessing=!0,Ck.update.process(As),Ck.preRender.process(As),Ck.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bDe),this.sharedNodes.forEach(kDe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!zte(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||bd(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),ADe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Tr();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(TDe))){const{scroll:d}=this.root;d&&(Lh(c.x,d.offset.x),Lh(c.y,d.offset.y))}return c}removeElementScroll(o){var l;const c=Tr();if(ka(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ka(c,o),Lh(c.x,f.offset.x),Lh(c.y,f.offset.y))}return c}applyTransform(o,l=!1){const c=Tr();ka(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&zh(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),bd(d.latestValues)&&zh(c,d.latestValues)}return bd(this.latestValues)&&zh(c,this.latestValues),c}removeTransform(o){const l=Tr();ka(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!bd(u.latestValues))continue;XE(u.latestValues)&&u.updateSnapshot();const d=Tr(),f=u.measurePageBox();ka(d,f),LL(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return bd(this.latestValues)&&LL(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=As.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tr(),this.relativeTargetOrigin=Tr(),Mx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ka(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tr(),this.targetWithTransforms=Tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DTe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ka(this.target,this.layout.layoutBox),Ote(this.target,this.targetDelta)):ka(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tr(),this.relativeTargetOrigin=Tr(),Mx(this.relativeTargetOrigin,this.target,m.target),ka(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fx&&jd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||XE(this.parent.latestValues)||Dte(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===As.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;ka(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;BTe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Tr());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RL(this.prevProjectionDelta.x,this.projectionDelta.x),RL(this.prevProjectionDelta.y,this.projectionDelta.y)),Ix(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!UL(this.projectionDelta.x,this.prevProjectionDelta.x)||!UL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),fx&&jd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fh(),this.projectionDelta=Fh(),this.projectionDeltaWithTransform=Fh()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Fh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Tr(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,v=this.getStack(),b=!v||v.members.length<=1,y=!!(p&&!b&&this.options.crossfade===!0&&!this.path.some(EDe));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const w=N/1e3;GL(f.x,o.x,w),GL(f.y,o.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PDe(this.relativeTarget,this.relativeTargetOrigin,h,w),j&&aDe(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Tr()),ka(j,this.relativeTarget)),p&&(this.animationValues=d,eDe(d,u,this.latestValues,w,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ln.update(()=>{n0.hasAnimatedSinceResize=!0,this.currentAnimation=hDe(0,WL,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Ute(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Tr();const f=ya(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=ya(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}ka(l,c),zh(l,d),Ix(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new oDe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Ik("z",o,u,this.animationValues);for(let d=0;d<Ok.length;d++)Ik(`rotate${Ok[d]}`,o,u,this.animationValues),Ik(`skew${Ok[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return mDe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=r0(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=r0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!bd(this.latestValues)&&(p.transform=d?d({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=lDe(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in ww){if(h[p]===void 0)continue;const{correct:v,applyTo:b}=ww[p],y=u.transform==="none"?h[p]:v(h[p],f);if(b){const j=b.length;for(let N=0;N<j;N++)u[b[N]]=y}else u[p]=y}return this.options.layoutId&&(u.pointerEvents=f===this?r0(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(HL),this.root.sharedNodes.clear()}}}function gDe(e){e.updateLayout()}function xDe(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?Ta(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],m=ya(h);h.min=r[f].min,h.max=h.min+m}):Ute(a,n.layoutBox,r)&&Ta(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],m=ya(r[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=Fh();Ix(l,r,n.layoutBox);const c=Fh();o?Ix(c,e.applyTransform(i,!0),n.measuredBox):Ix(c,r,n.layoutBox);const u=!zte(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=Tr();Mx(g,n.layoutBox,h.layoutBox);const p=Tr();Mx(p,r,m.layoutBox),Bte(g,p)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function vDe(e){fx&&jd.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function yDe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function bDe(e){e.clearSnapshot()}function HL(e){e.clearMeasurements()}function jDe(e){e.isLayoutDirty=!1}function wDe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function KL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function NDe(e){e.resolveTargetDelta()}function SDe(e){e.calcProjection()}function CDe(e){e.resetSkewAndRotation()}function kDe(e){e.removeLeadSnapshot()}function GL(e,t,n){e.translate=gr(t.translate,0,n),e.scale=gr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function QL(e,t,n,r){e.min=gr(t.min,n.min,r),e.max=gr(t.max,n.max,r)}function PDe(e,t,n,r){QL(e.x,t.x,n.x,r),QL(e.y,t.y,n.y,r)}function EDe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _De={duration:.45,ease:[.4,0,.1,1]},YL=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XL=YL("applewebkit/")&&!YL("chrome/")?Math.round:ei;function ZL(e){e.min=XL(e.min),e.max=XL(e.max)}function ADe(e){ZL(e.x),ZL(e.y)}function Ute(e,t,n){return e==="position"||e==="preserve-aspect"&&!TTe(qL(t),qL(n),.2)}function TDe(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const DDe=qte({attachResizeListener:(e,t)=>Wl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Mk={current:void 0},Wte=qte({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Mk.current){const e=new DDe({});e.mount(window),e.setOptions({layoutScroll:!0}),Mk.current=e}return Mk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ODe={pan:{Feature:KTe},drag:{Feature:HTe,ProjectionNode:Wte,MeasureLayout:$te}};function JL(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n);const i=r[n?"onHoverStart":"onHoverEnd"];i&&Ln.postRender(()=>i(t,Jy(t)))}class IDe extends td{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=jTe(t,r=>(JL(this.node,r,!0),i=>JL(this.node,i,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class MDe extends td{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ju(Wl(this.node.current,"focus",()=>this.onFocus()),Wl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Hte=(e,t)=>t?e===t?!0:Hte(e,t.parentElement):!1;function Rk(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Jy(n))}class RDe extends td{constructor(){super(...arguments),this.removeStartListeners=ei,this.removeEndListeners=ei,this.removeAccessibleListeners=ei,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=wu(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps(),h=!f&&!Hte(this.node.current,l.target)?d:u;h&&Ln.update(()=>h(l,c))},{passive:!(r.onTap||r.onPointerUp)}),o=wu(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ju(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Rk("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Ln.postRender(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Wl(this.node.current,"keyup",o),Rk("down",(l,c)=>{this.startPress(l,c)})},n=Wl(this.node.current,"keydown",t),r=()=>{this.isPressing&&Rk("cancel",(a,o)=>this.cancelPress(a,o))},i=Wl(this.node.current,"blur",r);this.removeAccessibleListeners=ju(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ln.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Cte()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ln.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=wu(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Wl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ju(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const JE=new WeakMap,$k=new WeakMap,$De=e=>{const t=JE.get(e.target);t&&t(e)},FDe=e=>{e.forEach($De)};function LDe({root:e,...t}){const n=e||document;$k.has(n)||$k.set(n,{});const r=$k.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(FDe,{root:e,...t})),r[i]}function zDe(e,t,n){const r=LDe(t);return JE.set(e,n),r.observe(e),()=>{JE.delete(e),r.unobserve(e)}}const BDe={some:0,all:1};class VDe extends td{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:BDe[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return zDe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(qDe(t,n))&&this.startObserver()}unmount(){}}function qDe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const UDe={inView:{Feature:VDe},tap:{Feature:RDe},focus:{Feature:MDe},hover:{Feature:IDe}},WDe={layout:{ProjectionNode:Wte,MeasureLayout:$te}},nI=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Z1=x.createContext({}),rI=typeof window<"u",Kte=rI?x.useLayoutEffect:x.useEffect,Gte=x.createContext({strict:!1});function HDe(e,t,n,r,i){var a,o;const{visualElement:l}=x.useContext(Z1),c=x.useContext(Gte),u=x.useContext(X1),d=x.useContext(nI).reducedMotion,f=x.useRef();r=r||c.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,m=x.useContext(Rte);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&KDe(f.current,n,i,m);const g=x.useRef(!1);x.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const p=n[jte],v=x.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,p)));return Kte(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),tI.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),x.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,p)}),v.current=!1))}),h}function KDe(e,t,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Qte(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&$h(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function Qte(e){if(e)return e.options.allowProjection!==!1?e.projection:Qte(e.parent)}function GDe(e,t,n){return x.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):$h(n)&&(n.current=r))},[t])}function J1(e){return G1(e.animate)||IO.some(t=>Dv(e[t]))}function Yte(e){return!!(J1(e)||e.variants)}function QDe(e,t){if(J1(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Dv(n)?n:void 0,animate:Dv(r)?r:void 0}}return e.inherit!==!1?t:{}}function YDe(e){const{initial:t,animate:n}=QDe(e,x.useContext(Z1));return x.useMemo(()=>({initial:t,animate:n}),[e3(t),e3(n)])}function e3(e){return Array.isArray(e)?e.join(" "):e}const t3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zm={};for(const e in t3)Zm[e]={isEnabled:t=>t3[e].some(n=>!!t[n])};function XDe(e){for(const t in e)Zm[t]={...Zm[t],...e[t]}}const ZDe=Symbol.for("motionComponentSymbol");function JDe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&XDe(e);function a(l,c){let u;const d={...x.useContext(nI),...l,layoutId:eOe(l)},{isStatic:f}=d,h=YDe(l),m=r(l,f);if(!f&&rI){tOe();const g=nOe(d);u=g.MeasureLayout,h.visualElement=HDe(i,m,d,t,g.ProjectionNode)}return s.jsxs(Z1.Provider,{value:h,children:[u&&h.visualElement?s.jsx(u,{visualElement:h.visualElement,...d}):null,n(i,l,GDe(m,h.visualElement,c),m,f,h.visualElement)]})}const o=x.forwardRef(a);return o[ZDe]=i,o}function eOe({layoutId:e}){const t=x.useContext(eI).id;return t&&e!==void 0?t+"-"+e:e}function tOe(e,t){x.useContext(Gte).strict}function nOe(e){const{drag:t,layout:n}=Zm;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const rOe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sI(e){return typeof e!="string"||e.includes("-")?!1:!!(rOe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Xte(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const Zte=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jte(e,t,n,r){Xte(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Zte.has(i)?i:JO(i),t.attrs[i])}function ene(e,{layout:t,layoutId:n}){return Hf.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ww[e]||e==="opacity")}function iI(e,t,n){var r;const{style:i}=e,a={};for(const o in i)(Js(i[o])||t.style&&Js(t.style[o])||ene(o,e)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function tne(e,t,n){const r=iI(e,t,n);for(const i in e)if(Js(e[i])||Js(t[i])){const a=Yy.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function aI(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}function sOe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,a){const o={latestValues:iOe(r,i,a,e),renderState:t()};return n&&(o.mount=l=>n(r,l,o)),o}const nne=e=>(t,n)=>{const r=x.useContext(Z1),i=x.useContext(X1),a=()=>sOe(e,t,r,i);return n?a():aI(a)};function iOe(e,t,n,r){const i={},a=r(e,{});for(const h in a)i[h]=r0(a[h]);let{initial:o,animate:l}=e;const c=J1(e),u=Yte(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?l:o;if(f&&typeof f!="boolean"&&!G1(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const g=DO(e,h[m]);if(g){const{transitionEnd:p,transition:v,...b}=g;for(const y in b){let j=b[y];if(Array.isArray(j)){const N=d?j.length-1:0;j=j[N]}j!==null&&(i[y]=j)}for(const y in p)i[y]=p[y]}}}return i}const oI=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rne=()=>({...oI(),attrs:{}}),sne=(e,t)=>t&&typeof e=="number"?t.transform(e):e,aOe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oOe=Yy.length;function lOe(e,t,n){let r="",i=!0;for(let a=0;a<oOe;a++){const o=Yy[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=sne(l,VO[o]);if(!c){i=!1;const d=aOe[o]||o;r+=`${d}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function lI(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(Hf.has(c)){o=!0;continue}else if(Yee(c)){i[c]=u;continue}else{const d=sne(u,VO[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(o||n?r.transform=lOe(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}function n3(e,t,n){return typeof e=="string"?e:At.transform(t+n*e)}function cOe(e,t,n){const r=n3(t,e.x,e.width),i=n3(n,e.y,e.height);return`${r} ${i}`}const uOe={offset:"stroke-dashoffset",array:"stroke-dasharray"},dOe={offset:"strokeDashoffset",array:"strokeDasharray"};function fOe(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?uOe:dOe;e[a.offset]=At.transform(-r);const o=At.transform(t),l=At.transform(n);e[a.array]=`${o} ${l}`}function cI(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,f){if(lI(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:g}=e;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=cOe(g,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&fOe(h,o,l,c,!1)}const uI=e=>typeof e=="string"&&e.toLowerCase()==="svg",hOe={useVisualState:nne({scrapeMotionValuesFromProps:tne,createRenderState:rne,onMount:(e,t,{renderState:n,latestValues:r})=>{Ln.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ln.render(()=>{cI(n,r,uI(t.tagName),e.transformTemplate),Jte(t,n)})}})},mOe={useVisualState:nne({scrapeMotionValuesFromProps:iI,createRenderState:oI})};function ine(e,t,n){for(const r in t)!Js(t[r])&&!ene(r,n)&&(e[r]=t[r])}function pOe({transformTemplate:e},t){return x.useMemo(()=>{const n=oI();return lI(n,t,e),Object.assign({},n.vars,n.style)},[t])}function gOe(e,t){const n=e.style||{},r={};return ine(r,n,e),Object.assign(r,pOe(e,t)),r}function xOe(e,t){const n={},r=gOe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const vOe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vOe.has(e)}let ane=e=>!Nw(e);function yOe(e){e&&(ane=t=>t.startsWith("on")?!Nw(t):e(t))}try{yOe(require("@emotion/is-prop-valid").default)}catch{}function bOe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(ane(i)||n===!0&&Nw(i)||!t&&!Nw(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function jOe(e,t,n,r){const i=x.useMemo(()=>{const a=rne();return cI(a,t,uI(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};ine(a,e.style,e),i.style={...a,...i.style}}return i}function wOe(e=!1){return(n,r,i,{latestValues:a},o)=>{const c=(sI(n)?jOe:xOe)(r,a,o,n),u=bOe(r,typeof n=="string",e),d=n!==x.Fragment?{...u,...c,ref:i}:{},{children:f}=r,h=x.useMemo(()=>Js(f)?f.get():f,[f]);return x.createElement(n,{...d,children:h})}}function NOe(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...sI(r)?hOe:mOe,preloadedFeatures:e,useRender:wOe(i),createVisualElement:t,Component:r};return JDe(o)}}const e_={current:null},one={current:!1};function SOe(){if(one.current=!0,!!rI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>e_.current=e.matches;e.addListener(t),t()}else e_.current=!1}function COe(e,t,n){for(const r in t){const i=t[r],a=n[r];if(Js(i))e.addValue(r,i);else if(Js(a))e.addValue(r,Mv(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Mv(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const r3=new WeakMap,kOe=[...Jee,Ks,qu],POe=e=>kOe.find(Zee(e)),s3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EOe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=LO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=il.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ln.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=J1(n),this.isVariantNode=Yte(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const m=f[h];c[h]!==void 0&&Js(m)&&m.set(c[h],!1)}}mount(t){this.current=t,r3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),one.current||SOe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:e_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){r3.delete(this.current),this.projection&&this.projection.unmount(),Vu(this.notifyUpdate),Vu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Hf.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zm){const n=Zm[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<s3.length;r++){const i=s3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=COe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Mv(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Gee(i)||Kee(i))?i=parseFloat(i):!POe(i)&&qu.test(n)&&(i=ote(t,n)),this.setBaseTarget(t,Js(i)?i.get():i)),Js(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=DO(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Js(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ZO),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class lne extends EOe{constructor(){super(...arguments),this.KeyframeResolver=lte}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Js(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function _Oe(e){return window.getComputedStyle(e)}class AOe extends lne{constructor(){super(...arguments),this.type="html",this.renderInstance=Xte}readValueFromInstance(t,n){if(Hf.has(n)){const r=qO(n);return r&&r.default||0}else{const r=_Oe(t),i=(Yee(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Ite(t,n)}build(t,n,r){lI(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return iI(t,n,r)}}class TOe extends lne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hf.has(n)){const r=qO(n);return r&&r.default||0}return n=Zte.has(n)?n:JO(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return tne(t,n,r)}build(t,n,r){cI(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){Jte(t,n,r,i)}mount(t){this.isSVGTag=uI(t.tagName),super.mount(t)}}const DOe=(e,t)=>sI(e)?new TOe(t):new AOe(t,{allowProjection:e!==x.Fragment}),OOe=NOe({...yTe,...UDe,...ODe,...WDe},DOe),Xi=g_e(OOe);class IOe extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function MOe({children:e,isPresent:t}){const n=x.useId(),r=x.useRef(null),i=x.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=x.useContext(nI);return x.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u}=i.current;if(t||!r.current||!o||!l)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),s.jsx(IOe,{isPresent:t,childRef:r,sizeRef:i,children:x.cloneElement(e,{ref:r})})}const ROe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=aI($Oe),c=x.useId(),u=x.useCallback(f=>{l.set(f,!0);for(const h of l.values())if(!h)return;r&&r()},[l,r]),d=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:u,register:f=>(l.set(f,!1),()=>l.delete(f))}),a?[Math.random(),u]:[n,u]);return x.useMemo(()=>{l.forEach((f,h)=>l.set(h,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=s.jsx(MOe,{isPresent:n,children:e})),s.jsx(X1.Provider,{value:d,children:e})};function $Oe(){return new Map}const Jb=e=>e.key||"";function i3(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const FOe=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=x.useMemo(()=>i3(e),[e]),c=l.map(Jb),u=x.useRef(!0),d=x.useRef(l),f=aI(()=>new Map),[h,m]=x.useState(l),[g,p]=x.useState(l);Kte(()=>{u.current=!1,d.current=l;for(let y=0;y<g.length;y++){const j=Jb(g[y]);c.includes(j)?f.delete(j):f.get(j)!==!0&&f.set(j,!1)}},[g,c.length,c.join("-")]);const v=[];if(l!==h){let y=[...l];for(let j=0;j<g.length;j++){const N=g[j],w=Jb(N);c.includes(w)||(y.splice(j,0,N),v.push(N))}o==="wait"&&v.length&&(y=v),p(i3(y)),m(l);return}const{forceRender:b}=x.useContext(eI);return s.jsx(s.Fragment,{children:g.map(y=>{const j=Jb(y),N=l===g||c.includes(j),w=()=>{if(f.has(j))f.set(j,!0);else return;let S=!0;f.forEach(k=>{k||(S=!1)}),S&&(b==null||b(),p(d.current),i&&i())};return s.jsx(ROe,{isPresent:N,initial:!u.current||r?void 0:!1,custom:N?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:N?void 0:w,children:y},j)})})},cne=x.createContext(void 0),a3={dashboard:{title:"Dashboard",schedule:!0,cost:!0,risk:!0,resource:!0},wbs:{title:"Work Breakdown Structure",schedule:!0},gantt:{title:"Gantt Chart",schedule:!0},kanban:{title:"Kanban Board",schedule:!0},calendar:{title:"Calendar",schedule:!0},stakeholders:{title:"Stakeholders"},resources:{title:"Resources",resource:!0},risks:{title:"Risk Register",risk:!0},issues:{title:"Issue Log",risk:!0},"change-requests":{title:"Change Requests"},cost:{title:"Cost Management",cost:!0},analytics:{title:"Analytics",cost:!0,schedule:!0},documents:{title:"Documents",document:!0},reports:{title:"Reports"},"email-templates":{title:"Email Templates"},"ai-assistant":{title:"AI Assistant"},settings:{title:"Settings"},admin:{title:"Admin Dashboard"},pmo:{title:"PMO"}};function LOe(e){const t=e.split("/")[1]||"dashboard";return t===""||t==="/"?"dashboard":t.startsWith("pmo")?"pmo":["dashboard","wbs","gantt","kanban","calendar","stakeholders","resources","risks","issues","change-requests","cost","analytics","documents","reports","email-templates","ai-assistant","settings","admin"].includes(t)?t:"dashboard"}function zOe({children:e}){const[t]=yr(),[n,r]=x.useState("dashboard");x.useEffect(()=>{const o=LOe(t);r(o)},[t]);const i=a3[n]||a3.dashboard,a={currentPage:n,pageTitle:i.title,isScheduleRelated:!!i.schedule,isCostRelated:!!i.cost,isRiskRelated:!!i.risk,isResourceRelated:!!i.resource,isDocumentRelated:!!i.document,showPortfolioSignals:n==="dashboard"||n==="analytics",showUpcomingEvents:["dashboard","calendar","gantt","wbs"].includes(n),showCadencePlaybook:["dashboard","reports"].includes(n),showResourceSnapshot:["dashboard","resources","wbs","gantt"].includes(n),showRiskSnapshot:["dashboard","risks","issues"].includes(n),showCostSnapshot:["dashboard","cost","analytics"].includes(n),showWBSLinkage:["wbs","gantt","kanban","risks","issues","stakeholders"].includes(n),showAIAssistantGuide:n==="ai-assistant",showDocumentStats:n==="documents",showDocumentDetails:n==="documents"};return s.jsx(cne.Provider,{value:a,children:e})}function BOe(){const e=x.useContext(cne);if(e===void 0)throw new Error("usePage must be used within a PageProvider");return e}function wt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ki(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ir(e,t){const n=wt(e);return isNaN(t)?Ki(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Io(e,t){const n=wt(e);if(isNaN(t))return Ki(e,NaN);if(!t)return n;const r=n.getDate(),i=Ki(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function VOe(e){const t=wt(e).getDay();return t===0||t===6}const dI=6048e5,qOe=864e5,ej=43200,o3=1440;let UOe={};function Jp(){return UOe}function eo(e,t){var l,c,u,d;const n=Jp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=wt(e),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Af(e){return eo(e,{weekStartsOn:1})}function une(e){const t=wt(e),n=t.getFullYear(),r=Ki(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Af(r),a=Ki(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Af(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Jm(e){const t=wt(e);return t.setHours(0,0,0,0),t}function ep(e){const t=wt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function za(e,t){const n=Jm(e),r=Jm(t),i=+n-ep(n),a=+r-ep(r);return Math.round((i-a)/qOe)}function WOe(e){const t=une(e),n=Ki(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Af(n)}function t_(e,t){const n=t*7;return Ir(e,n)}function HOe(e,t){return Io(e,t*12)}function KOe(e){let t;return e.forEach(function(n){const r=wt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function GOe(e){let t;return e.forEach(n=>{const r=wt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function s0(e,t){const n=wt(e),r=wt(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function eS(e){return Ki(e,Date.now())}function Ds(e,t){const n=Jm(e),r=Jm(t);return+n==+r}function fI(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function n_(e){if(!fI(e)&&typeof e!="number")return!1;const t=wt(e);return!isNaN(Number(t))}function QOe(e,t){const n=wt(e);let r=wt(t);if(!n_(n)||!n_(r))return NaN;const i=za(n,r),a=i<0?-1:1,o=Math.trunc(i/7);let l=o*5;for(r=Ir(r,o*7);!Ds(n,r);)l+=VOe(r)?0:a,r=Ir(r,a);return l===0?0:l}function tp(e,t){const n=wt(e),r=wt(t),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function YOe(e,t,n){const r=eo(e,n),i=eo(t,n),a=+r-ep(r),o=+i-ep(i);return Math.round((a-o)/dI)}function i0(e,t){const n=wt(e),r=wt(t),i=l3(n,r),a=Math.abs(za(n,r));n.setDate(n.getDate()-i*a);const o=+(l3(n,r)===-i),l=i*(a-o);return l===0?0:l}function l3(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function XOe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function ZOe(e,t){return+wt(e)-+wt(t)}function JOe(e){const t=wt(e);return t.setHours(23,59,59,999),t}function tS(e){const t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function eIe(e){const t=wt(e);return+JOe(t)==+tS(t)}function tIe(e,t){const n=wt(e),r=wt(t),i=s0(n,r),a=Math.abs(tp(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=s0(n,r)===-i;eIe(wt(e))&&a===1&&s0(e,r)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function nIe(e,t,n){const r=ZOe(e,t)/1e3;return XOe(n==null?void 0:n.roundingMethod)(r)}function rIe(e,t){const n=wt(e.start),r=wt(e.end);let i=+n>+r;const a=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0),o.setDate(1);let l=1;const c=[];for(;+o<=a;)c.push(wt(o)),o.setMonth(o.getMonth()+l);return i?c.reverse():c}function $s(e){const t=wt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function dne(e){const t=wt(e),n=Ki(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function hI(e,t){var l,c,u,d;const n=Jp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=wt(e),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function fne(e){return hI(e,{weekStartsOn:1})}const sIe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iIe=(e,t,n)=>{let r;const i=sIe[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Fk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const aIe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oIe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lIe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cIe={date:Fk({formats:aIe,defaultWidth:"full"}),time:Fk({formats:oIe,defaultWidth:"full"}),dateTime:Fk({formats:lIe,defaultWidth:"full"})},uIe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dIe=(e,t,n,r)=>uIe[e];function qg(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const fIe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hIe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mIe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pIe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gIe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xIe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vIe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},yIe={ordinalNumber:vIe,era:qg({values:fIe,defaultWidth:"wide"}),quarter:qg({values:hIe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:qg({values:mIe,defaultWidth:"wide"}),day:qg({values:pIe,defaultWidth:"wide"}),dayPeriod:qg({values:gIe,defaultWidth:"wide",formattingValues:xIe,defaultFormattingWidth:"wide"})};function Ug(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jIe(l,f=>f.test(o)):bIe(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function bIe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function jIe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function wIe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const NIe=/^(\d+)(th|st|nd|rd)?/i,SIe=/\d+/i,CIe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kIe={any:[/^b/i,/^(a|c)/i]},PIe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EIe={any:[/1/i,/2/i,/3/i,/4/i]},_Ie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AIe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TIe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DIe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},OIe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},IIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MIe={ordinalNumber:wIe({matchPattern:NIe,parsePattern:SIe,valueCallback:e=>parseInt(e,10)}),era:Ug({matchPatterns:CIe,defaultMatchWidth:"wide",parsePatterns:kIe,defaultParseWidth:"any"}),quarter:Ug({matchPatterns:PIe,defaultMatchWidth:"wide",parsePatterns:EIe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ug({matchPatterns:_Ie,defaultMatchWidth:"wide",parsePatterns:AIe,defaultParseWidth:"any"}),day:Ug({matchPatterns:TIe,defaultMatchWidth:"wide",parsePatterns:DIe,defaultParseWidth:"any"}),dayPeriod:Ug({matchPatterns:OIe,defaultMatchWidth:"any",parsePatterns:IIe,defaultParseWidth:"any"})},mI={code:"en-US",formatDistance:iIe,formatLong:cIe,formatRelative:dIe,localize:yIe,match:MIe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RIe(e){const t=wt(e);return za(t,dne(t))+1}function hne(e){const t=wt(e),n=+Af(t)-+WOe(t);return Math.round(n/dI)+1}function mne(e,t){var d,f,h,m;const n=wt(e),r=n.getFullYear(),i=Jp(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(h=i.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ki(e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=eo(o,t),c=Ki(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=eo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function $Ie(e,t){var l,c,u,d;const n=Jp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=mne(e,t),a=Ki(e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),eo(a,t)}function pne(e,t){const n=wt(e),r=+eo(n,t)-+$Ie(n,t);return Math.round(r/dI)+1}function Dn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Mc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Dn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Dn(n+1,2)},d(e,t){return Dn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Dn(e.getHours()%12||12,t.length)},H(e,t){return Dn(e.getHours(),t.length)},m(e,t){return Dn(e.getMinutes(),t.length)},s(e,t){return Dn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Dn(i,t.length)}},lh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},c3={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Mc.y(e,t)},Y:function(e,t,n,r){const i=mne(e,r),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return Dn(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Dn(a,t.length)},R:function(e,t){const n=une(e);return Dn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Dn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Dn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Dn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Mc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Dn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=pne(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Dn(i,t.length)},I:function(e,t,n){const r=hne(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Dn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Mc.d(e,t)},D:function(e,t,n){const r=RIe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Dn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Dn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Dn(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Dn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=lh.noon:r===0?i=lh.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=lh.evening:r>=12?i=lh.afternoon:r>=4?i=lh.morning:i=lh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Mc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Mc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Dn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Dn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Mc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Mc.s(e,t)},S:function(e,t){return Mc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return d3(r);case"XXXX":case"XX":return wd(r);case"XXXXX":case"XXX":default:return wd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return d3(r);case"xxxx":case"xx":return wd(r);case"xxxxx":case"xxx":default:return wd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+u3(r,":");case"OOOO":default:return"GMT"+wd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+u3(r,":");case"zzzz":default:return"GMT"+wd(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Dn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Dn(r,t.length)}};function u3(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+Dn(a,2)}function d3(e,t){return e%60===0?(e>0?"-":"+")+Dn(Math.abs(e)/60,2):wd(e,t)}function wd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Dn(Math.trunc(r/60),2),a=Dn(r%60,2);return n+i+t+a}const f3=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gne=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},FIe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return f3(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",f3(r,t)).replace("{{time}}",gne(i,t))},LIe={p:gne,P:FIe},zIe=/^D+$/,BIe=/^Y+$/,VIe=["D","DD","YY","YYYY"];function qIe(e){return zIe.test(e)}function UIe(e){return BIe.test(e)}function WIe(e,t,n){const r=HIe(e,t,n);if(console.warn(r),VIe.includes(e))throw new RangeError(r)}function HIe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const KIe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GIe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,QIe=/^'([^]*?)'?$/,YIe=/''/g,XIe=/[a-zA-Z]/;function en(e,t,n){var d,f,h,m,g,p,v,b;const r=Jp(),i=(n==null?void 0:n.locale)??r.locale??mI,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((p=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((b=(v=r.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??0,l=wt(e);if(!n_(l))throw new RangeError("Invalid time value");let c=t.match(GIe).map(y=>{const j=y[0];if(j==="p"||j==="P"){const N=LIe[j];return N(y,i.formatLong)}return y}).join("").match(KIe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const j=y[0];if(j==="'")return{isToken:!1,value:ZIe(y)};if(c3[j])return{isToken:!0,value:y};if(j.match(XIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(y=>{if(!y.isToken)return y.value;const j=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&UIe(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&qIe(j))&&WIe(j,t,String(e));const N=c3[j[0]];return N(l,j,i.localize,u)}).join("")}function ZIe(e){const t=e.match(QIe);return t?t[1].replace(YIe,"'"):e}function JIe(e,t,n){const r=Jp(),i=(n==null?void 0:n.locale)??r.locale??mI,a=2520,o=s0(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=wt(t),u=wt(e)):(c=wt(e),u=wt(t));const d=nIe(u,c),f=(ep(u)-ep(c))/1e3,h=Math.round((d-f)/60);let m;if(h<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):h===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",h,l);if(h<45)return i.formatDistance("xMinutes",h,l);if(h<90)return i.formatDistance("aboutXHours",1,l);if(h<o3){const g=Math.round(h/60);return i.formatDistance("aboutXHours",g,l)}else{if(h<a)return i.formatDistance("xDays",1,l);if(h<ej){const g=Math.round(h/o3);return i.formatDistance("xDays",g,l)}else if(h<ej*2)return m=Math.round(h/ej),i.formatDistance("aboutXMonths",m,l)}if(m=tIe(u,c),m<12){const g=Math.round(h/ej);return i.formatDistance("xMonths",g,l)}else{const g=m%12,p=Math.trunc(m/12);return g<3?i.formatDistance("aboutXYears",p,l):g<9?i.formatDistance("overXYears",p,l):i.formatDistance("almostXYears",p+1,l)}}function xne(e,t){return JIe(e,eS(e),t)}function eMe(e){const t=wt(e),n=t.getFullYear(),r=t.getMonth(),i=Ki(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function tMe(e){return Math.trunc(+wt(e)/1e3)}function nMe(e){const t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function rMe(e,t){return YOe(nMe(e),$s(e),t)+1}function Sw(e,t){const n=wt(e),r=wt(t);return n.getTime()>r.getTime()}function Rx(e,t){const n=wt(e),r=wt(t);return+n<+r}function sMe(e,t,n){const r=eo(e,n),i=eo(t,n);return+r==+i}function pI(e,t){const n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function iMe(e,t){const n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()}function aMe(e,t){return sMe(e,eS(e),t)}function oMe(e){return Ds(e,eS(e))}function lMe(e){return Ds(e,Ir(eS(e),1))}function Lk(e,t){return Ir(e,-t)}function zk(e,t){const n=wt(e),r=n.getFullYear(),i=n.getDate(),a=Ki(e,0);a.setFullYear(r,t,15),a.setHours(0,0,0,0);const o=eMe(a);return n.setMonth(t,Math.min(i,o)),n}function h3(e,t){const n=wt(e);return isNaN(+n)?Ki(e,NaN):(n.setFullYear(t),n)}function tj({icon:e,label:t,value:n,subtext:r,status:i="neutral"}){const a={success:"text-green-600 dark:text-green-400",warning:"text-amber-600 dark:text-amber-400",danger:"text-red-600 dark:text-red-400",neutral:"text-foreground"};return s.jsxs("div",{className:"flex items-center justify-between py-2.5 border-b last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center shrink-0",children:e}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:t}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})]}),s.jsx("span",{className:`text-sm font-semibold tabular-nums ${a[i]}`,children:n})]})}function cMe(){const{selectedProjectId:e,selectedProject:t}=jt(),{data:n=[],isLoading:r}=je({queryKey:["/api/projects",e,"tasks"],enabled:!!e,refetchInterval:15*60*1e3}),{data:i=[],isLoading:a}=je({queryKey:["/api/projects",e,"costs"],enabled:!!e,refetchInterval:15*60*1e3}),{data:o=[],isLoading:l}=je({queryKey:["/api/projects",e,"resources"],enabled:!!e,refetchInterval:15*60*1e3});if(r||a||l)return s.jsxs(ie,{"data-testid":"widget-portfolio-signals",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(vf,{className:"h-4 w-4"}),"Portfolio Signals"]})}),s.jsx(ce,{className:"space-y-3",children:[1,2,3,4].map(w=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-8 w-8 rounded-full"}),s.jsx(Ke,{className:"h-4 w-24"})]}),s.jsx(Ke,{className:"h-4 w-12"})]},w))})]});const u=t!=null&&t.endDate?new Date(t.endDate):null,d=u?Math.max(0,QOe(u,new Date)):null,f=i.reduce((w,S)=>w+Number(S.budgeted||0),0),h=i.reduce((w,S)=>w+Number(S.actual||0),0),m=f>0?Math.round(h/f*100):0,g=o.length>0?Math.round(o.reduce((w,S)=>w+(S.availability||0),0)/o.length):100,p=o.filter(w=>(w.availability||0)>100).length,v=n.filter(w=>w.status==="completed").length,b=n.length>0?Math.round(v/n.length*100):0,y=n.filter(w=>w.isCriticalPath).length,j=()=>m>90?"danger":m>75?"warning":"success",N=()=>g<50?"danger":g<70?"warning":"success";return s.jsxs(ie,{"data-testid":"widget-portfolio-signals",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(vf,{className:"h-4 w-4"}),"Portfolio Signals"]}),s.jsxs(ae,{variant:"secondary",className:"text-xs gap-1",children:[s.jsx(Mm,{className:"h-3 w-3"}),"15m"]})]})}),s.jsxs(ce,{className:"space-y-1",children:[s.jsx(tj,{icon:s.jsx(Br,{className:"h-4 w-4 text-muted-foreground"}),label:"Days to Project End",value:d!==null?`${d} days`:"N/A",subtext:u?en(u,"MMM d, yyyy"):"No end date",status:d!==null&&d<30?"warning":"neutral"}),s.jsx(tj,{icon:s.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}),label:"Budget Burn",value:`${m}%`,subtext:`$${h.toLocaleString()} of $${f.toLocaleString()}`,status:j()}),s.jsx(tj,{icon:s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"}),label:"Resource Availability",value:`${g}%`,subtext:p>0?`${p} over-allocated`:"All within capacity",status:N()}),s.jsx(tj,{icon:b>=50?s.jsx(ri,{className:"h-4 w-4 text-green-500"}):s.jsx(Gu,{className:"h-4 w-4 text-amber-500"}),label:"Task Completion",value:`${b}%`,subtext:`${v} of ${n.length} tasks`,status:b>=75?"success":b>=50?"warning":"danger"}),y>0&&s.jsx("div",{className:"pt-2",children:s.jsxs(ae,{variant:"destructive",className:"w-full justify-center",children:[y," Critical Path Task",y!==1?"s":""]})})]})]})}const r_={meeting:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",icon:s.jsx(Gme,{className:"h-3 w-3"})},review:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",icon:s.jsx(SK,{className:"h-3 w-3"})},deadline:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",icon:s.jsx(ft,{className:"h-3 w-3"})},deliverable:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",icon:s.jsx(Kr,{className:"h-3 w-3"})},milestone:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300",icon:s.jsx(u1,{className:"h-3 w-3"})},shutdown:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",icon:s.jsx(ft,{className:"h-3 w-3"})},holiday:{bg:"bg-teal-100 dark:bg-teal-900/30",text:"text-teal-700 dark:text-teal-300",icon:s.jsx(Hme,{className:"h-3 w-3"})},other:{bg:"bg-muted",text:"text-muted-foreground",icon:s.jsx(Br,{className:"h-3 w-3"})}};function uMe(e){return oMe(e)?"Today":lMe(e)?"Tomorrow":aMe(e)?en(e,"EEEE"):en(e,"MMM d")}function dMe(){return s.jsxs(ie,{"data-testid":"widget-event-legend",children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm",children:"Legend"})}),s.jsx(ce,{children:s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(r_).map(([e,t])=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`h-5 w-5 rounded flex items-center justify-center ${t.bg}`,children:s.jsx("span",{className:t.text,children:t.icon})}),s.jsx("span",{className:"text-xs capitalize",children:e})]},e))})})]})}function fMe(){var h;const{selectedProjectId:e}=jt(),{data:t=[],isLoading:n}=je({queryKey:["/api/projects",e,"tasks"],enabled:!!e,refetchInterval:15*60*1e3}),{data:r=[],isLoading:i}=je({queryKey:["/api/projects",e,"events"],enabled:!!e,refetchInterval:15*60*1e3});if(n||i)return s.jsxs(ie,{"data-testid":"widget-upcoming-events",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Br,{className:"h-4 w-4"}),"Upcoming Events"]})}),s.jsx(ce,{className:"space-y-2",children:[1,2,3].map(m=>s.jsxs("div",{className:"flex items-center gap-2 py-1.5",children:[s.jsx(Ke,{className:"h-6 w-6 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ke,{className:"h-4 w-3/4 mb-1"}),s.jsx(Ke,{className:"h-3 w-1/2"})]})]},m))})]});const o=new Date,l=Ir(o,14),c=t.filter(m=>m.endDate&&new Date(m.endDate)>=o&&new Date(m.endDate)<=l).filter(m=>m.status!=="completed").map(m=>({id:`task-${m.id}`,title:m.name,date:new Date(m.endDate),type:m.isMilestone?"milestone":"deadline"})),u=r.filter(m=>m.startDate&&new Date(m.startDate)>=o&&new Date(m.startDate)<=l).map(m=>({id:`event-${m.id}`,title:m.title,date:new Date(m.startDate),type:m.type||"other"})),d=[...c,...u].sort((m,g)=>m.date.getTime()-g.date.getTime()).slice(0,6),f=Intl.DateTimeFormat().resolvedOptions().timeZone;return s.jsxs(ie,{"data-testid":"widget-upcoming-events",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Br,{className:"h-4 w-4"}),"Upcoming Events"]}),s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(bn,{className:"h-3 w-3"}),(h=f.split("/").pop())==null?void 0:h.replace("_"," ")]})]})}),s.jsx(ce,{children:d.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No upcoming events in the next 2 weeks"}):s.jsx("div",{className:"space-y-2",children:d.map(m=>{const g=r_[m.type]||r_.other;return s.jsxs("div",{className:"flex items-start gap-2 py-1.5 border-b last:border-0","data-testid":`event-item-${m.id}`,children:[s.jsx("div",{className:`h-6 w-6 rounded flex items-center justify-center shrink-0 ${g.bg}`,children:s.jsx("span",{className:g.text,children:g.icon})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:m.title}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[uMe(m.date),"  ",en(m.date,"h:mm a")]})]}),s.jsx(ae,{variant:"secondary",className:"text-xs shrink-0 capitalize",children:m.type})]},m.id)})})})]})}const m3=[{id:"daily-standup",title:"Daily Standup",schedule:"Weekdays 9:00 AM",icon:s.jsx(Cn,{className:"h-4 w-4"}),isPinned:!0},{id:"weekly-review",title:"Weekly Progress Review",schedule:"Fridays 2:00 PM",icon:s.jsx(Ka,{className:"h-4 w-4"}),isPinned:!0},{id:"risk-review",title:"Risk Review Meeting",schedule:"Bi-weekly Tuesdays",icon:s.jsx(ft,{className:"h-4 w-4"}),isPinned:!1},{id:"monthly-report",title:"Monthly Status Report",schedule:"Last Friday of month",icon:s.jsx(Sn,{className:"h-4 w-4"}),isPinned:!1}],p3=[{id:"review-1",title:"Engineering Drawing Package",owner:"John Smith",dueDate:"Tomorrow",type:"approval"},{id:"review-2",title:"Procurement Schedule",owner:"Sarah Johnson",dueDate:"Dec 2",type:"review"},{id:"review-3",title:"HSE Plan Update",owner:"Mike Chen",dueDate:"Dec 5",type:"sign-off"}];function hMe(){const{selectedProject:e}=jt(),t=m3.filter(r=>r.isPinned),n=m3.filter(r=>!r.isPinned);return s.jsxs(ie,{"data-testid":"widget-cadence-playbook",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),"Cadence Playbook"]}),s.jsx(H,{variant:"ghost",size:"sm",className:"h-6 text-xs",children:"Edit"})]})}),s.jsxs(ce,{className:"space-y-3",children:[t.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Q4,{className:"h-3 w-3"}),"Pinned Routines"]}),t.map(r=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50","data-testid":`cadence-item-${r.id}`,children:[s.jsx("div",{className:"h-7 w-7 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:r.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:r.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.schedule})]}),s.jsx(Q4,{className:"h-3 w-3 text-primary shrink-0"})]},r.id))]}),n.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Other Routines"}),n.map(r=>s.jsxs("div",{className:"flex items-center gap-2 py-1.5 border-b last:border-0","data-testid":`cadence-item-${r.id}`,children:[s.jsx("div",{className:"h-6 w-6 rounded-full bg-muted flex items-center justify-center shrink-0",children:r.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm truncate",children:r.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.schedule})]})]},r.id))]})]})]})}function mMe(){return s.jsxs(ie,{"data-testid":"widget-reviews",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(X4,{className:"h-4 w-4"}),"Next Approvals on Deck"]})}),s.jsx(ce,{children:p3.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No pending approvals"}):s.jsx("div",{className:"space-y-2",children:p3.map(e=>s.jsxs("div",{className:"flex items-start gap-2 py-1.5 border-b last:border-0","data-testid":`review-item-${e.id}`,children:[s.jsx("div",{className:"h-6 w-6 rounded bg-muted flex items-center justify-center shrink-0 mt-0.5",children:s.jsx(X4,{className:"h-3.5 w-3.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:e.title}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.owner,"  Due ",e.dueDate]})]}),s.jsx(ae,{variant:e.type==="approval"?"default":"secondary",className:"text-xs shrink-0 capitalize",children:e.type})]},e.id))})})]})}var gI="Progress",xI=100,[pMe]=Er(gI),[gMe,xMe]=pMe(gI),vne=x.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=vMe,...o}=e;(i||i===0)&&!g3(i)&&console.error(yMe(`${i}`,"Progress"));const l=g3(i)?i:xI;r!==null&&!x3(r,l)&&console.error(bMe(`${r}`,"Progress"));const c=x3(r,l)?r:null,u=Cw(c)?a(c,l):void 0;return s.jsx(gMe,{scope:n,value:c,max:l,children:s.jsx(Qe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Cw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":jne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});vne.displayName=gI;var yne="ProgressIndicator",bne=x.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=xMe(yne,n);return s.jsx(Qe.div,{"data-state":jne(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});bne.displayName=yne;function vMe(e,t){return`${Math.round(e/t*100)}%`}function jne(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Cw(e){return typeof e=="number"}function g3(e){return Cw(e)&&!isNaN(e)&&e>0}function x3(e,t){return Cw(e)&&!isNaN(e)&&e<=t&&e>=0}function yMe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${xI}\`.`}function bMe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${xI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var wne=vne,jMe=bne;const fn=x.forwardRef(({className:e,value:t,...n},r)=>s.jsx(wne,{ref:r,className:he("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(jMe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));fn.displayName=wne.displayName;function nj({icon:e,label:t,value:n,subValue:r,trend:i}){return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e,s.jsx("span",{className:"text-sm",children:t})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"text-sm font-semibold tabular-nums flex items-center gap-1",children:[n,i==="up"&&s.jsx(ri,{className:"h-3 w-3 text-green-500"}),i==="down"&&s.jsx(Gu,{className:"h-3 w-3 text-red-500"})]}),r&&s.jsx("span",{className:"text-xs text-muted-foreground",children:r})]})]})}function wMe(){const{selectedProjectId:e}=jt(),{data:t=[],isLoading:n}=je({queryKey:["/api/projects",e,"resources"],enabled:!!e,refetchInterval:15*60*1e3});if(n)return s.jsxs(ie,{"data-testid":"widget-resource-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Cn,{className:"h-4 w-4"}),"Resource Snapshot"]})}),s.jsx(ce,{className:"space-y-3",children:[1,2,3,4].map(h=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4"}),s.jsx(Ke,{className:"h-4 w-20"})]}),s.jsx(Ke,{className:"h-4 w-12"})]},h))})]});const r=t.filter(h=>h.type==="human"),i=t.filter(h=>h.type==="equipment"),a=t.filter(h=>h.type==="material"),o=t.length,l=t.length>0?Math.round(t.reduce((h,m)=>h+(m.availability||0),0)/t.length):0,c=t.filter(h=>(h.availability||0)>100).length,u=t.filter(h=>(h.availability||0)<50).length,d=t.reduce((h,m)=>{const g=parseFloat(m.rate||m.costPerHour||"0");return h+g},0),f=h=>h>=1e3?`$${(h/1e3).toFixed(1)}K`:`$${h.toFixed(0)}`;return s.jsxs(ie,{"data-testid":"widget-resource-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Cn,{className:"h-4 w-4"}),"Resource Snapshot"]})}),s.jsxs(ce,{className:"space-y-1",children:[s.jsx(nj,{icon:s.jsx(Cn,{className:"h-4 w-4 text-blue-500"}),label:"Team Members",value:r.length,subValue:`of ${o} total`}),s.jsx(nj,{icon:s.jsx(Qa,{className:"h-4 w-4 text-amber-500"}),label:"Equipment",value:i.length}),s.jsx(nj,{icon:s.jsx(Kr,{className:"h-4 w-4 text-green-500"}),label:"Materials",value:a.length}),s.jsx(nj,{icon:s.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}),label:"Hourly Rate Total",value:f(d),subValue:"/hr combined"}),s.jsxs("div",{className:"pt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg Availability"}),s.jsxs("span",{className:"text-xs font-medium",children:[l,"%"]})]}),s.jsx(fn,{value:l,className:"h-1.5"})]}),(c>0||u>0)&&s.jsxs("div",{className:"pt-2 flex flex-wrap gap-2",children:[c>0&&s.jsxs(ae,{variant:"destructive",className:"text-xs gap-1",children:[s.jsx(bt,{className:"h-3 w-3"}),c," Over-allocated"]}),u>0&&s.jsxs(ae,{variant:"secondary",className:"text-xs gap-1",children:[u," Under-utilized"]})]})]})]})}function ch({label:e,value:t,icon:n,badgeVariant:r}){return s.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[n,s.jsx("span",{className:"text-sm",children:e})]}),s.jsx(ae,{variant:r||"secondary",className:"tabular-nums",children:t})]})}function NMe(){const{selectedProjectId:e}=jt(),{data:t=[],isLoading:n}=je({queryKey:["/api/projects",e,"risks"],enabled:!!e,refetchInterval:15*60*1e3}),{data:r=[],isLoading:i}=je({queryKey:["/api/projects",e,"issues"],enabled:!!e,refetchInterval:15*60*1e3});if(n||i)return s.jsxs(ie,{"data-testid":"widget-risk-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Risk & Issue Snapshot"]})}),s.jsx(ce,{className:"space-y-3",children:[1,2,3,4].map(p=>s.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[s.jsx(Ke,{className:"h-4 w-24"}),s.jsx(Ke,{className:"h-5 w-8"})]},p))})]});const o=t.filter(p=>p.status!=="closed"),l=t.filter(p=>(p.impact==="critical"||p.impact==="high")&&p.status!=="closed"),c=t.filter(p=>p.status==="mitigating"),u=r.filter(p=>p.status==="open"||p.status==="in-progress"),d=r.filter(p=>(p.priority==="critical"||p.priority==="high")&&p.status!=="closed"&&p.status!=="resolved"),f=r.filter(p=>p.targetResolutionDate&&new Date(p.targetResolutionDate)<new Date&&p.status!=="closed"&&p.status!=="resolved"),h=t.reduce((p,v)=>p+parseFloat(v.riskExposure||"0"),0),m=o.length>0?(o.reduce((p,v)=>p+(v.probability||0),0)/o.length).toFixed(1):"0",g=p=>p>=1e6?`$${(p/1e6).toFixed(1)}M`:p>=1e3?`$${(p/1e3).toFixed(0)}K`:`$${p.toFixed(0)}`;return s.jsxs(ie,{"data-testid":"widget-risk-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Risk & Issue Snapshot"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),"Risk Watchlist"]}),s.jsx(ch,{label:"Open Risks",value:o.length,icon:s.jsx(ft,{className:"h-3.5 w-3.5 text-amber-500"})}),l.length>0&&s.jsx(ch,{label:"Critical/High",value:l.length,icon:s.jsx(d1,{className:"h-3.5 w-3.5 text-red-500"}),badgeVariant:"destructive"}),s.jsx(ch,{label:"In Mitigation",value:c.length,icon:s.jsx(ul,{className:"h-3.5 w-3.5 text-blue-500"})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(u1,{className:"h-3 w-3"}),"Issue Tracker"]}),s.jsx(ch,{label:"Open Issues",value:u.length,icon:s.jsx(ft,{className:"h-3.5 w-3.5 text-orange-500"})}),d.length>0&&s.jsx(ch,{label:"Critical/High",value:d.length,badgeVariant:"destructive"}),f.length>0&&s.jsx(ch,{label:"Overdue",value:f.length,icon:s.jsx(Gu,{className:"h-3.5 w-3.5 text-red-500"}),badgeVariant:"destructive"})]}),s.jsxs("div",{className:"pt-2 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg Risk Score"}),s.jsxs("span",{className:"text-sm font-semibold",children:[m,"/5"]})]}),h>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Exposure"}),s.jsx("span",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:g(h)})]})]})]})]})}function v3({value:e,label:t,thresholds:n}){const r=()=>e<n.warning?"text-green-600 dark:text-green-400":e<n.danger?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400",i=()=>e<n.warning?"bg-green-100 dark:bg-green-900/30":e<n.danger?"bg-amber-100 dark:bg-amber-900/30":"bg-red-100 dark:bg-red-900/30";return s.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg bg-muted/50",children:[s.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${i()}`,children:s.jsx("span",{className:`text-lg font-bold tabular-nums ${r()}`,children:e.toFixed(2)})}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:t})]})}function SMe(){const{selectedProjectId:e,selectedProject:t}=jt(),{data:n=[],isLoading:r}=je({queryKey:["/api/projects",e,"costs"],enabled:!!e,refetchInterval:15*60*1e3}),{data:i=[],isLoading:a}=je({queryKey:["/api/projects",e,"tasks"],enabled:!!e,refetchInterval:15*60*1e3});if(r||a)return s.jsxs(ie,{"data-testid":"widget-cost-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(ur,{className:"h-4 w-4"}),"Cost & EVM Snapshot"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{className:"h-20 flex-1 rounded-lg"}),s.jsx(Ke,{className:"h-20 flex-1 rounded-lg"})]}),[1,2,3].map(j=>s.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[s.jsx(Ke,{className:"h-4 w-24"}),s.jsx(Ke,{className:"h-4 w-16"})]},j))]})]});const l=parseFloat((t==null?void 0:t.budget)||"0")||n.reduce((j,N)=>j+Number(N.budgeted||0),0),c=n.reduce((j,N)=>j+Number(N.actual||0),0),u=l-c,d=l>0?c/l*100:0,f=i.reduce((j,N)=>j+parseFloat(N.baselineCost||"0"),0),h=i.reduce((j,N)=>j+parseFloat(N.earnedValue||"0"),0),m=i.reduce((j,N)=>j+parseFloat(N.actualCost||"0"),0),g=m>0?h/m:1,p=f>0?h/f:1,v=g>0?l/g:l,b=l-v,y=j=>j>=1e6?`$${(j/1e6).toFixed(1)}M`:j>=1e3?`$${(j/1e3).toFixed(0)}K`:`$${j.toFixed(0)}`;return s.jsxs(ie,{"data-testid":"widget-cost-snapshot",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(ur,{className:"h-4 w-4"}),"Cost & EVM Snapshot"]}),s.jsx(ae,{variant:"outline",className:"text-xs",children:(t==null?void 0:t.currency)||"USD"})]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(v3,{value:g,label:"CPI",thresholds:{warning:.95,danger:.85}}),s.jsx(v3,{value:p,label:"SPI",thresholds:{warning:.95,danger:.85}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Budget Burn"}),s.jsxs("span",{className:"font-medium tabular-nums",children:[d.toFixed(1),"%"]})]}),s.jsx(fn,{value:Math.min(d,100),className:"h-2"})]}),s.jsxs("div",{className:"space-y-1 pt-1",children:[s.jsxs("div",{className:"flex items-center justify-between py-1 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u1,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Budget"})]}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:y(l)})]}),s.jsxs("div",{className:"flex items-center justify-between py-1 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ka,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Actual Cost"})]}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:y(c)})]}),s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[u>=0?s.jsx(ri,{className:"h-3.5 w-3.5 text-green-500"}):s.jsx(Gu,{className:"h-3.5 w-3.5 text-red-500"}),s.jsx("span",{className:"text-sm",children:"Variance"})]}),s.jsxs("span",{className:`text-sm font-semibold tabular-nums ${u>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[u>=0?"+":"",y(u)]})]})]}),b!==0&&s.jsxs("div",{className:"pt-2 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Est. at Completion"}),s.jsx("span",{className:"text-sm font-semibold",children:y(v)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Variance at Completion"}),s.jsxs("span",{className:`text-sm font-semibold ${b>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[b>=0?"+":"",y(b)]})]})]})]})]})}function Bk({icon:e,label:t,count:n,onClick:r}){return s.jsxs("div",{className:`flex items-center justify-between py-2 border-b last:border-0 ${r?"cursor-pointer hover-elevate rounded-md px-2 -mx-2":""}`,onClick:r,"data-testid":`linkage-item-${t.toLowerCase().replace(/\s/g,"-")}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e,s.jsx("span",{className:"text-sm",children:t})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"secondary",className:"tabular-nums",children:n}),r&&s.jsx(qa,{className:"h-3.5 w-3.5 text-muted-foreground"})]})]})}function CMe(){const{selectedProjectId:e}=jt(),[,t]=yr(),{data:n=[],isLoading:r}=je({queryKey:["/api/projects",e,"tasks"],enabled:!!e}),{data:i=[]}=je({queryKey:["/api/projects",e,"task-documents"],enabled:!!e}),{data:a=[]}=je({queryKey:["/api/projects",e,"task-risks"],enabled:!!e}),{data:o=[]}=je({queryKey:["/api/projects",e,"task-issues"],enabled:!!e});if(r)return s.jsxs(ie,{"data-testid":"widget-wbs-linkage",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"WBS Linkages"]})}),s.jsx(ce,{className:"space-y-2",children:[1,2,3,4].map(g=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx(Ke,{className:"h-4 w-28"}),s.jsx(Ke,{className:"h-5 w-8"})]},g))})]});const l=n.length,c=n.filter(g=>g.isMilestone).length,u=n.filter(g=>g.isCriticalPath).length,d=n.filter(g=>g.parentId!==null).length,f=new Set(i.map(g=>g.documentId)).size,h=new Set(a.map(g=>g.riskId)).size,m=new Set(o.map(g=>g.issueId)).size;return s.jsxs(ie,{"data-testid":"widget-wbs-linkage",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"WBS Linkages"]}),s.jsxs(H,{variant:"ghost",size:"sm",className:"h-6 text-xs gap-1",onClick:()=>t("/wbs"),children:["View WBS",s.jsx(NK,{className:"h-3 w-3"})]})]})}),s.jsxs(ce,{className:"space-y-1",children:[s.jsx("div",{className:"pb-2 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Total WBS Items"}),s.jsx("span",{className:"text-lg font-bold tabular-nums",children:l})]})}),s.jsx(Bk,{icon:s.jsx(Sn,{className:"h-4 w-4 text-blue-500"}),label:"Linked Documents",count:f,onClick:()=>t("/sop")}),s.jsx(Bk,{icon:s.jsx(ft,{className:"h-4 w-4 text-amber-500"}),label:"Linked Risks",count:h,onClick:()=>t("/risks")}),s.jsx(Bk,{icon:s.jsx(ft,{className:"h-4 w-4 text-red-500"}),label:"Linked Issues",count:m,onClick:()=>t("/issues")}),s.jsxs("div",{className:"pt-2 border-t space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Milestones"}),s.jsx(ae,{variant:"outline",className:"tabular-nums",children:c})]}),s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Critical Path"}),s.jsx(ae,{variant:"destructive",className:"tabular-nums",children:u})]}),s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"With Dependencies"}),s.jsx(ae,{variant:"secondary",className:"tabular-nums",children:d})]})]})]})]})}var vI="Collapsible",[kMe,Nne]=Er(vI),[PMe,yI]=kMe(vI),Sne=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,u]=ni({prop:r,defaultProp:i,onChange:o});return s.jsx(PMe,{scope:n,disabled:a,contentId:Gr(),open:c,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:s.jsx(Qe.div,{"data-state":NI(c),"data-disabled":a?"":void 0,...l,ref:t})})});Sne.displayName=vI;var Cne="CollapsibleTrigger",bI=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=yI(Cne,n);return s.jsx(Qe.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":NI(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:Re(e.onClick,i.onOpenToggle)})});bI.displayName=Cne;var jI="CollapsibleContent",wI=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yI(jI,e.__scopeCollapsible);return s.jsx(Yr,{present:n||i.open,children:({present:a})=>s.jsx(EMe,{...r,ref:t,present:a})})});wI.displayName=jI;var EMe=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=e,o=yI(jI,n),[l,c]=x.useState(r),u=x.useRef(null),d=kt(t,u),f=x.useRef(0),h=f.current,m=x.useRef(0),g=m.current,p=o.open||l,v=x.useRef(p),b=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),zr(()=>{const y=u.current;if(y){b.current=b.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const j=y.getBoundingClientRect();f.current=j.height,m.current=j.width,v.current||(y.style.transitionDuration=b.current.transitionDuration,y.style.animationName=b.current.animationName),c(r)}},[o.open,r]),s.jsx(Qe.div,{"data-state":NI(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...a,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:p&&i})});function NI(e){return e?"open":"closed"}var kne=Sne,_Me=bI,AMe=wI;const Vk=kne,qk=bI,Uk=wI,Pne=x.createContext(void 0);function TMe({children:e}){const[t,n]=x.useState(null),r=x.useCallback(a=>{n(a)},[]),i=x.useCallback(()=>{n(null)},[]);return s.jsx(Pne.Provider,{value:{setExamplePrompt:r,pendingPrompt:t,clearPendingPrompt:i},children:e})}function Ene(){const e=x.useContext(Pne);if(e===void 0)throw new Error("useAIPrompt must be used within an AIPromptProvider");return e}function DMe(){const[e,t]=x.useState(!0),[n,r]=x.useState(!0),[i,a]=x.useState(!1),{setExamplePrompt:o}=Ene(),l=[{icon:Ka,label:"Project Analytics",description:"Analyze progress, metrics, and KPIs"},{icon:ft,label:"Risk Analysis",description:"Identify and track project risks"},{icon:Cn,label:"Resource Management",description:"Review allocation and availability"},{icon:ur,label:"Cost Tracking",description:"Monitor budget and expenses"},{icon:JT,label:"Task Management",description:"Help with WBS and schedules"}],c=["What are the top 5 risks in this project?","Show me a summary of project status","Which tasks are behind schedule?","What's the current budget variance?","List all open issues by priority","Who are the key stakeholders?","Analyze resource utilization","What milestones are coming up?"],u=[{keys:["Enter"],description:"Send message"},{keys:["Shift","Enter"],description:"New line"},{keys:["/Ctrl","K"],description:"New conversation"}];return s.jsxs(ie,{"data-testid":"widget-ai-assistant-guide",children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs(Se,{className:"text-base flex items-center gap-2",children:[s.jsx(Yl,{className:"h-4 w-4 text-primary"}),"AI Assistant Guide"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs(Vk,{open:e,onOpenChange:t,children:[s.jsxs(qk,{className:"flex items-center gap-2 w-full text-left hover-elevate p-1 rounded","data-testid":"button-toggle-capabilities",children:[e?s.jsx(ar,{className:"h-3 w-3"}):s.jsx(qa,{className:"h-3 w-3"}),s.jsx(Qme,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Capabilities"})]}),s.jsx(Uk,{children:s.jsx("div",{className:"mt-2 space-y-1",children:l.map((d,f)=>s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded hover-elevate",children:[s.jsx(d.icon,{className:"h-4 w-4 text-primary flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium",children:d.label}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.description})]})]},f))})})]}),s.jsxs(Vk,{open:n,onOpenChange:r,children:[s.jsxs(qk,{className:"flex items-center gap-2 w-full text-left hover-elevate p-1 rounded","data-testid":"button-toggle-prompts",children:[n?s.jsx(ar,{className:"h-3 w-3"}):s.jsx(qa,{className:"h-3 w-3"}),s.jsx(_K,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Try Asking"})]}),s.jsx(Uk,{children:s.jsx("div",{className:"mt-2 space-y-1",children:c.map((d,f)=>s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>o(d),className:"w-full justify-start text-xs font-normal","data-testid":`button-example-prompt-${f}`,children:['"',d,'"']},f))})})]}),s.jsxs(Vk,{open:i,onOpenChange:a,children:[s.jsxs(qk,{className:"flex items-center gap-2 w-full text-left hover-elevate p-1 rounded","data-testid":"button-toggle-shortcuts",children:[i?s.jsx(ar,{className:"h-3 w-3"}):s.jsx(qa,{className:"h-3 w-3"}),s.jsx(_me,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Shortcuts"})]}),s.jsx(Uk,{children:s.jsx("div",{className:"mt-2 space-y-1",children:u.map((d,f)=>s.jsxs("div",{className:"flex items-center justify-between p-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:d.description}),s.jsx("div",{className:"flex gap-1",children:d.keys.map((h,m)=>s.jsx(ae,{variant:"secondary",className:"text-xs px-1.5 py-0",children:h},m))})]},f))})})]}),s.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 mt-3",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Pro Tips"}),s.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("li",{children:" Be specific about what you want to analyze"}),s.jsx("li",{children:" Ask follow-up questions for more details"}),s.jsx("li",{children:" Reference tasks, risks, or issues by name"})]})]})]})]})}const SI=x.createContext(void 0);function OMe({children:e}){const{selectedProjectId:t}=jt(),[n,r]=x.useState(null),{data:i=[],isLoading:a}=je({queryKey:["/api/projects",t,"documents"],enabled:!!t,refetchInterval:15*60*1e3}),o=x.useMemo(()=>n&&i.find(c=>c.id===n)||null,[i,n]),l={documents:i,isLoading:a,selectedDocumentId:n,selectedDocument:o,setSelectedDocumentId:r};return s.jsx(SI.Provider,{value:l,children:e})}function IMe(){const e=x.useContext(SI);if(e===void 0)throw new Error("useDocuments must be used within a DocumentProvider");return e}function _ne(){return x.useContext(SI)}function fd({label:e,value:t,icon:n,badgeVariant:r}){return s.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[n,s.jsx("span",{className:"text-sm",children:e})]}),s.jsx(ae,{variant:r||"secondary",className:"tabular-nums",children:t})]})}function MMe(){const e=_ne(),t=(e==null?void 0:e.documents)||[];if((e==null?void 0:e.isLoading)??!1)return s.jsxs(ie,{"data-testid":"widget-document-stats",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),"Document Statistics"]})}),s.jsx(ce,{className:"space-y-3",children:[1,2,3,4].map(m=>s.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[s.jsx(Ke,{className:"h-4 w-24"}),s.jsx(Ke,{className:"h-5 w-8"})]},m))})]});const r=t.length,i=t.filter(m=>m.status==="draft"),a=t.filter(m=>m.status==="ifa"),o=t.filter(m=>m.status==="ifc"),l=t.filter(m=>m.status==="as-built"),c=t.filter(m=>m.status==="superseded"),u=t.filter(m=>m.fileUrl),d=t.filter(m=>["drawing","specification","datasheet","calculation","report"].includes(m.documentType||"")),f=t.filter(m=>["sop","procedure","work-instruction","checklist"].includes(m.documentType||"")),h=t.filter(m=>["invoice","rfp","contract","purchase-order","quote","warranty"].includes(m.documentType||""));return s.jsxs(ie,{"data-testid":"widget-document-stats",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),"Document Statistics"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 flex items-center gap-2",children:[s.jsx(Sn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl font-bold",children:r}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Documents"})]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 flex items-center gap-2",children:[s.jsx(uv,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl font-bold",children:o.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Issued for Construction"})]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-amber-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl font-bold",children:a.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending Approval"})]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 flex items-center gap-2",children:[s.jsx(G4,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl font-bold",children:u.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"With Files"})]})]})]}),s.jsxs("div",{className:"border-t pt-3 space-y-1",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(G4,{className:"h-3 w-3"}),"Status Breakdown"]}),s.jsx(fd,{label:"Draft",value:i.length,icon:s.jsx(bn,{className:"h-3.5 w-3.5 text-amber-500"}),badgeVariant:"secondary"}),s.jsx(fd,{label:"IFA (For Approval)",value:a.length,icon:s.jsx(bt,{className:"h-3.5 w-3.5 text-blue-500"}),badgeVariant:"outline"}),s.jsx(fd,{label:"IFC (For Construction)",value:o.length,icon:s.jsx(s1,{className:"h-3.5 w-3.5 text-green-500"}),badgeVariant:"default"}),s.jsx(fd,{label:"As-Built",value:l.length,icon:s.jsx(SK,{className:"h-3.5 w-3.5 text-emerald-600"}),badgeVariant:"default"})]}),s.jsxs("div",{className:"border-t pt-2 space-y-1",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Sn,{className:"h-3 w-3"}),"Document Categories"]}),s.jsx(fd,{label:"Technical",value:d.length,icon:s.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500"})}),s.jsx(fd,{label:"Procedures",value:f.length,icon:s.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-amber-500"})}),s.jsx(fd,{label:"Commercial",value:h.length,icon:s.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500"})})]}),s.jsxs("div",{className:"border-t pt-2 space-y-1",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quick Stats"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[s.jsxs("div",{className:"p-2 rounded-md bg-muted/50",children:[s.jsx("p",{className:"text-lg font-semibold",children:u.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"With Files"})]}),s.jsxs("div",{className:"p-2 rounded-md bg-muted/50",children:[s.jsx("p",{className:"text-lg font-semibold",children:c.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Superseded"})]})]})]})]})]})}const y3={draft:{label:"Draft",variant:"secondary"},ifa:{label:"Issued for Approval",variant:"outline"},ifc:{label:"Issued for Construction",variant:"default"},"as-built":{label:"As-Built",variant:"default"},superseded:{label:"Superseded",variant:"destructive"},cancelled:{label:"Cancelled",variant:"destructive"}},RMe={civil:"Civil",structural:"Structural",mechanical:"Mechanical",electrical:"Electrical",instrumentation:"Instrumentation",piping:"Piping",process:"Process",hse:"HSE","project-controls":"Project Controls",construction:"Construction",commissioning:"Commissioning",general:"General"},$Me={drawing:"Drawing",specification:"Specification",datasheet:"Datasheet",calculation:"Calculation",report:"Report",sop:"SOP",procedure:"Procedure","work-instruction":"Work Instruction",checklist:"Checklist",invoice:"Invoice",rfp:"RFP",contract:"Contract","purchase-order":"Purchase Order",quote:"Quote",warranty:"Warranty","vendor-doc":"Vendor Document",certificate:"Certificate","lessons-learned":"Lessons Learned",bulletin:"Bulletin","meeting-minutes":"Meeting Minutes",transmittal:"Transmittal",rfi:"RFI",ncr:"NCR",letter:"Letter",email:"Email",memo:"Memo"};function FMe(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function LMe(){const e=_ne();if(!e)return null;const{selectedDocument:t}=e;if(!t)return s.jsxs(ie,{"data-testid":"widget-document-details",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),"Document Details"]})}),s.jsx(ce,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a document from the list to view its details"})]})})]});const n=y3[t.status||"draft"]||y3.draft,r=RMe[t.discipline||"general"]||t.discipline||"General",i=$Me[t.documentType||"drawing"]||t.documentType||"Document";return s.jsxs(ie,{"data-testid":"widget-document-details",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),"Document Details"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Document Number"}),s.jsx("p",{className:"text-sm font-medium",children:t.documentNumber})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Title"}),s.jsx("p",{className:"text-sm",children:t.title})]}),s.jsx(nl,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Wme,{className:"h-3 w-3"}),"Type"]}),s.jsx("p",{className:"text-sm",children:i})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Discipline"}),s.jsx("p",{className:"text-sm",children:r})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Revision"}),s.jsx("p",{className:"text-sm font-medium",children:t.revision||"A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Status"}),s.jsx(ae,{variant:n.variant,className:"mt-0.5",children:n.label})]})]}),t.description&&s.jsxs(s.Fragment,{children:[s.jsx(nl,{}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})]}),t.fileUrl&&s.jsxs(s.Fragment,{children:[s.jsx(nl,{}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uv,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs",children:"Attached File"}),t.sizeBytes&&s.jsx("p",{className:"text-xs text-muted-foreground",children:FMe(t.sizeBytes)})]})]}),s.jsx(H,{variant:"ghost",size:"icon","data-testid":"button-download-file",children:s.jsx(ds,{className:"h-4 w-4"})})]})]}),t.createdAt&&s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(bn,{className:"h-3 w-3"}),"Created ",en(new Date(t.createdAt),"MMM d, yyyy")]})})]})]})}function zMe({className:e,isCollapsed:t=!1,onCollapse:n,onExpand:r}){const{selectedProjectId:i}=jt(),{currentPage:a,showPortfolioSignals:o,showUpcomingEvents:l,showCadencePlaybook:c,showResourceSnapshot:u,showRiskSnapshot:d,showCostSnapshot:f,showWBSLinkage:h,showAIAssistantGuide:m,showDocumentStats:g,showDocumentDetails:p}=BOe();return i?t?s.jsx("aside",{className:"w-12 border-l bg-background flex flex-col items-center py-4","data-testid":"sidebar-right-collapsed","aria-label":"Context sidebar (collapsed)",children:s.jsx(H,{variant:"ghost",size:"icon",onClick:r,className:"mb-4","aria-label":"Expand sidebar","data-testid":"button-expand-sidebar",children:s.jsx(zme,{className:"h-4 w-4"})})}):s.jsxs(Xi.aside,{className:`border-l bg-background flex flex-col ${e}`,"data-testid":"sidebar-right","aria-label":"Context sidebar",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:a==="dashboard"?"Overview":a.replace("-"," ")}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,"aria-label":"Collapse sidebar","data-testid":"button-collapse-sidebar",children:s.jsx(Lme,{className:"h-3.5 w-3.5"})})})]}),s.jsx(On,{className:"flex-1",children:s.jsx("div",{className:"p-4 space-y-4",children:s.jsxs(FOe,{mode:"popLayout",children:[o&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:s.jsx(cMe,{})},"portfolio-signals"),f&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.05},children:s.jsx(SMe,{})},"cost-snapshot"),u&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.1},children:s.jsx(wMe,{})},"resource-snapshot"),d&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.15},children:s.jsx(NMe,{})},"risk-snapshot"),h&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.2},children:s.jsx(CMe,{})},"wbs-linkage"),l&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.25},children:s.jsx(fMe,{})},"upcoming-events"),l&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.3},children:s.jsx(dMe,{})},"event-legend"),c&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.35},children:s.jsx(hMe,{})},"cadence-playbook"),c&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.4},children:s.jsx(mMe,{})},"reviews"),m&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:s.jsx(DMe,{})},"ai-assistant-guide"),g&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:s.jsx(MMe,{})},"document-stats"),p&&s.jsx(Xi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:.05},children:s.jsx(LMe,{})},"document-details")]})})})]}):s.jsx("aside",{className:`w-80 border-l bg-background p-4 ${e}`,"data-testid":"sidebar-right","aria-label":"Context sidebar",children:s.jsx("div",{className:"flex items-center justify-center h-32 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a project to view insights"})})})}const{createElement:np,createContext:BMe,forwardRef:Ane,useCallback:Ii,useContext:Tne,useEffect:rf,useImperativeHandle:Dne,useLayoutEffect:VMe,useMemo:qMe,useRef:Fi,useState:om}=$N,b3=$N[`useId${Math.random()}`.slice(0,5)],UMe=VMe,nS=BMe(null);nS.displayName="PanelGroupContext";const sf=UMe,WMe=typeof b3=="function"?b3:()=>null;let HMe=0;function CI(e=null){const t=WMe(),n=Fi(e||t||null);return n.current===null&&(n.current=""+HMe++),e??n.current}function One({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:a,id:o,maxSize:l,minSize:c,onCollapse:u,onExpand:d,onResize:f,order:h,style:m,tagName:g="div",...p}){const v=Tne(nS);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:b,expandPanel:y,getPanelSize:j,getPanelStyle:N,groupId:w,isPanelCollapsed:S,reevaluatePanelConstraints:k,registerPanel:C,resizePanel:A,unregisterPanel:D}=v,P=CI(o),_=Fi({callbacks:{onCollapse:u,onExpand:d,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:l,minSize:c},id:P,idIsFromProps:o!==void 0,order:h});Fi({didLogMissingDefaultSizeWarning:!1}),sf(()=>{const{callbacks:M,constraints:T}=_.current,R={...T};_.current.id=P,_.current.idIsFromProps=o!==void 0,_.current.order=h,M.onCollapse=u,M.onExpand=d,M.onResize=f,T.collapsedSize=n,T.collapsible=r,T.defaultSize=i,T.maxSize=l,T.minSize=c,(R.collapsedSize!==T.collapsedSize||R.collapsible!==T.collapsible||R.maxSize!==T.maxSize||R.minSize!==T.minSize)&&k(_.current,R)}),sf(()=>{const M=_.current;return C(M),()=>{D(M)}},[h,P,C,D]),Dne(a,()=>({collapse:()=>{b(_.current)},expand:M=>{y(_.current,M)},getId(){return P},getSize(){return j(_.current)},isCollapsed(){return S(_.current)},isExpanded(){return!S(_.current)},resize:M=>{A(_.current,M)}}),[b,y,j,S,P,A]);const O=N(_.current,i);return np(g,{...p,children:e,className:t,id:o,style:{...O,...m},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":w,"data-panel-id":P,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1)})}const Ine=Ane((e,t)=>np(One,{...e,forwardedRef:t}));One.displayName="Panel";Ine.displayName="forwardRef(Panel)";let s_=null,$d=null;function KMe(e,t){if(t){const n=(t&Lne)!==0,r=(t&zne)!==0,i=(t&Bne)!==0,a=(t&Vne)!==0;if(n)return i?"se-resize":a?"ne-resize":"e-resize";if(r)return i?"sw-resize":a?"nw-resize":"w-resize";if(i)return"s-resize";if(a)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function GMe(){$d!==null&&(document.head.removeChild($d),s_=null,$d=null)}function Wk(e,t){const n=KMe(e,t);s_!==n&&(s_=n,$d===null&&($d=document.createElement("style"),document.head.appendChild($d)),$d.innerHTML=`*{cursor: ${n}!important;}`)}function Mne(e){return e.type==="keydown"}function Rne(e){return e.type.startsWith("pointer")}function $ne(e){return e.type.startsWith("mouse")}function rS(e){if(Rne(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if($ne(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function QMe(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function YMe(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function XMe(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:N3(e),b:N3(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;Jt(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:w3(j3(n.a)),b:w3(j3(n.b))};if(i.a===i.b){const a=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let l=a.length;for(;l--;){const c=a[l];if(c===o.a)return 1;if(c===o.b)return-1}}return Math.sign(i.a-i.b)}const ZMe=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function JMe(e){var t;const n=getComputedStyle((t=Fne(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function eRe(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||JMe(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ZMe.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function j3(e){let t=e.length;for(;t--;){const n=e[t];if(Jt(n,"Missing node"),eRe(n))return n}return null}function w3(e){return e&&Number(getComputedStyle(e).zIndex)||0}function N3(e){const t=[];for(;e;)t.push(e),e=Fne(e);return t}function Fne(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Lne=1,zne=2,Bne=4,Vne=8,tRe=QMe()==="coarse";let ko=[],lm=!1,Gc=new Map,sS=new Map;const Rv=new Set;function nRe(e,t,n,r,i){var a;const{ownerDocument:o}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},c=(a=Gc.get(o))!==null&&a!==void 0?a:0;return Gc.set(o,c+1),Rv.add(l),kw(),function(){var d;sS.delete(e),Rv.delete(l);const f=(d=Gc.get(o))!==null&&d!==void 0?d:1;if(Gc.set(o,f-1),kw(),f===1&&Gc.delete(o),ko.includes(l)){const h=ko.indexOf(l);h>=0&&ko.splice(h,1),PI(),i("up",!0,null)}}}function S3(e){const{target:t}=e,{x:n,y:r}=rS(e);lm=!0,kI({target:t,x:n,y:r}),kw(),ko.length>0&&(Pw("down",e),e.preventDefault(),e.stopPropagation())}function Wg(e){const{x:t,y:n}=rS(e);if(lm&&e.buttons===0&&(lm=!1,Pw("up",e)),!lm){const{target:r}=e;kI({target:r,x:t,y:n})}Pw("move",e),PI(),ko.length>0&&e.preventDefault()}function uh(e){const{target:t}=e,{x:n,y:r}=rS(e);sS.clear(),lm=!1,ko.length>0&&e.preventDefault(),Pw("up",e),kI({target:t,x:n,y:r}),PI(),kw()}function kI({target:e,x:t,y:n}){ko.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Rv.forEach(i=>{const{element:a,hitAreaMargins:o}=i,l=a.getBoundingClientRect(),{bottom:c,left:u,right:d,top:f}=l,h=tRe?o.coarse:o.fine;if(t>=u-h&&t<=d+h&&n>=f-h&&n<=c+h){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&XMe(r,a)>0){let g=r,p=!1;for(;g&&!g.contains(a);){if(YMe(g.getBoundingClientRect(),l)){p=!0;break}g=g.parentElement}if(p)return}ko.push(i)}})}function Hk(e,t){sS.set(e,t)}function PI(){let e=!1,t=!1;ko.forEach(r=>{const{direction:i}=r;i==="horizontal"?e=!0:t=!0});let n=0;sS.forEach(r=>{n|=r}),e&&t?Wk("intersection",n):e?Wk("horizontal",n):t?Wk("vertical",n):GMe()}function kw(){Gc.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",uh),n.removeEventListener("pointerdown",S3),n.removeEventListener("pointerleave",Wg),n.removeEventListener("pointermove",Wg)}),window.removeEventListener("pointerup",uh),window.removeEventListener("pointercancel",uh),Rv.size>0&&(lm?(ko.length>0&&Gc.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",uh),n.addEventListener("pointerleave",Wg),n.addEventListener("pointermove",Wg))}),window.addEventListener("pointerup",uh),window.addEventListener("pointercancel",uh)):Gc.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",S3,{capture:!0}),n.addEventListener("pointermove",Wg))}))}function Pw(e,t){Rv.forEach(n=>{const{setResizeHandlerState:r}=n,i=ko.includes(n);r(e,i,t)})}function rRe(){const[e,t]=om(0);return Ii(()=>t(n=>n+1),[])}function Jt(e,t){if(!e)throw console.error(t),Error(t)}const EI=10;function Tf(e,t,n=EI){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Bl(e,t,n=EI){return Tf(e,t,n)===0}function ra(e,t,n){return Tf(e,t,n)===0}function sRe(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],a=t[r];if(!ra(i,a,n))return!1}return!0}function Bh({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];Jt(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:i=0,collapsible:a,maxSize:o=100,minSize:l=0}=r;if(Tf(n,l)<0)if(a){const c=(i+l)/2;Tf(n,c)<0?n=i:n=l}else n=l;return n=Math.min(o,n),n=parseFloat(n.toFixed(EI)),n}function hx({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:a}){if(ra(e,0))return t;const o=[...t],[l,c]=r;Jt(l!=null,"Invalid first pivot index"),Jt(c!=null,"Invalid second pivot index");let u=0;if(a==="keyboard"){{const f=e<0?c:l,h=n[f];Jt(h,`Panel constraints not found for index ${f}`);const{collapsedSize:m=0,collapsible:g,minSize:p=0}=h;if(g){const v=t[f];if(Jt(v!=null,`Previous layout not found for panel index ${f}`),ra(v,m)){const b=p-v;Tf(b,Math.abs(e))>0&&(e=e<0?0-b:b)}}}{const f=e<0?l:c,h=n[f];Jt(h,`No panel constraints found for index ${f}`);const{collapsedSize:m=0,collapsible:g,minSize:p=0}=h;if(g){const v=t[f];if(Jt(v!=null,`Previous layout not found for panel index ${f}`),ra(v,p)){const b=v-m;Tf(b,Math.abs(e))>0&&(e=e<0?0-b:b)}}}}{const f=e<0?1:-1;let h=e<0?c:l,m=0;for(;;){const p=t[h];Jt(p!=null,`Previous layout not found for panel index ${h}`);const b=Bh({panelConstraints:n,panelIndex:h,size:100})-p;if(m+=b,h+=f,h<0||h>=n.length)break}const g=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-g:g}{let h=e<0?l:c;for(;h>=0&&h<n.length;){const m=Math.abs(e)-Math.abs(u),g=t[h];Jt(g!=null,`Previous layout not found for panel index ${h}`);const p=g-m,v=Bh({panelConstraints:n,panelIndex:h,size:p});if(!ra(g,v)&&(u+=g-v,o[h]=v,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(sRe(i,o))return i;{const f=e<0?c:l,h=t[f];Jt(h!=null,`Previous layout not found for panel index ${f}`);const m=h+u,g=Bh({panelConstraints:n,panelIndex:f,size:m});if(o[f]=g,!ra(g,m)){let p=m-g,b=e<0?c:l;for(;b>=0&&b<n.length;){const y=o[b];Jt(y!=null,`Previous layout not found for panel index ${b}`);const j=y+p,N=Bh({panelConstraints:n,panelIndex:b,size:j});if(ra(y,N)||(p-=N-y,o[b]=N),ra(p,0))break;e>0?b--:b++}}}const d=o.reduce((f,h)=>h+f,0);return ra(d,100)?o:i}function iRe({layout:e,panelsArray:t,pivotIndices:n}){let r=0,i=100,a=0,o=0;const l=n[0];Jt(l!=null,"No pivot index found"),t.forEach((f,h)=>{const{constraints:m}=f,{maxSize:g=100,minSize:p=0}=m;h===l?(r=p,i=g):(a+=p,o+=g)});const c=Math.min(i,100-a),u=Math.max(r,100-o),d=e[l];return{valueMax:c,valueMin:u,valueNow:d}}function $v(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function qne(e,t,n=document){const i=$v(e,n).findIndex(a=>a.getAttribute("data-panel-resize-handle-id")===t);return i??null}function Une(e,t,n){const r=qne(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function Wne(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function iS(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function aRe(e,t,n,r=document){var i,a,o,l;const c=iS(t,r),u=$v(e,r),d=c?u.indexOf(c):-1,f=(i=(a=n[d])===null||a===void 0?void 0:a.id)!==null&&i!==void 0?i:null,h=(o=(l=n[d+1])===null||l===void 0?void 0:l.id)!==null&&o!==void 0?o:null;return[f,h]}function oRe({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:i,panelGroupElement:a,setLayout:o}){Fi({didWarnAboutMissingResizeHandle:!1}),sf(()=>{if(!a)return;const l=$v(n,a);for(let c=0;c<i.length-1;c++){const{valueMax:u,valueMin:d,valueNow:f}=iRe({layout:r,panelsArray:i,pivotIndices:[c,c+1]}),h=l[c];if(h!=null){const m=i[c];Jt(m,`No panel data found for index "${c}"`),h.setAttribute("aria-controls",m.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(d)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((c,u)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[n,r,i,a]),rf(()=>{if(!a)return;const l=t.current;Jt(l,"Eager values not found");const{panelDataArray:c}=l,u=Wne(n,a);Jt(u!=null,`No group found for id "${n}"`);const d=$v(n,a);Jt(d,`No resize handles found for group id "${n}"`);const f=d.map(h=>{const m=h.getAttribute("data-panel-resize-handle-id");Jt(m,"Resize handle element has no handle id attribute");const[g,p]=aRe(n,m,c,a);if(g==null||p==null)return()=>{};const v=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();const y=c.findIndex(j=>j.id===g);if(y>=0){const j=c[y];Jt(j,`No panel data found for index ${y}`);const N=r[y],{collapsedSize:w=0,collapsible:S,minSize:k=0}=j.constraints;if(N!=null&&S){const C=hx({delta:ra(N,w)?k-w:w-N,initialLayout:r,panelConstraints:c.map(A=>A.constraints),pivotIndices:Une(n,m,a),prevLayout:r,trigger:"keyboard"});r!==C&&o(C)}}break}}};return h.addEventListener("keydown",v),()=>{h.removeEventListener("keydown",v)}});return()=>{f.forEach(h=>h())}},[a,e,t,n,r,i,o])}function C3(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Hne(e,t){const n=e==="horizontal",{x:r,y:i}=rS(t);return n?r:i}function lRe(e,t,n,r,i){const a=n==="horizontal",o=iS(t,i);Jt(o,`No resize handle element found for id "${t}"`);const l=o.getAttribute("data-panel-group-id");Jt(l,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=r;const u=Hne(n,e),d=Wne(l,i);Jt(d,`No group element found for id "${l}"`);const f=d.getBoundingClientRect(),h=a?f.width:f.height;return(u-c)/h*100}function cRe(e,t,n,r,i,a){if(Mne(e)){const o=n==="horizontal";let l=0;e.shiftKey?l=100:i!=null?l=i:l=10;let c=0;switch(e.key){case"ArrowDown":c=o?0:l;break;case"ArrowLeft":c=o?-l:0;break;case"ArrowRight":c=o?l:0;break;case"ArrowUp":c=o?0:-l;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return r==null?0:lRe(e,t,n,r,a)}function uRe({panelDataArray:e}){const t=Array(e.length),n=e.map(a=>a.constraints);let r=0,i=100;for(let a=0;a<e.length;a++){const o=n[a];Jt(o,`Panel constraints not found for index ${a}`);const{defaultSize:l}=o;l!=null&&(r++,t[a]=l,i-=l)}for(let a=0;a<e.length;a++){const o=n[a];Jt(o,`Panel constraints not found for index ${a}`);const{defaultSize:l}=o;if(l!=null)continue;const c=e.length-r,u=i/c;r++,t[a]=u,i-=u}return t}function dh(e,t,n){t.forEach((r,i)=>{const a=e[i];Jt(a,`Panel data not found for index ${i}`);const{callbacks:o,constraints:l,id:c}=a,{collapsedSize:u=0,collapsible:d}=l,f=n[c];if(f==null||r!==f){n[c]=r;const{onCollapse:h,onExpand:m,onResize:g}=o;g&&g(r,f),d&&(h||m)&&(m&&(f==null||Bl(f,u))&&!Bl(r,u)&&m(),h&&(f==null||!Bl(f,u))&&Bl(r,u)&&h())}})}function rj(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function dRe({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:i,precision:a=3}){const o=n[i];let l;return o==null?l=e!=null?e.toPrecision(a):"1":r.length===1?l="1":l=o.toPrecision(a),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function fRe(e,t=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}function k3(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Kne(e){return`react-resizable-panels:${e}`}function Gne(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:i,order:a}=t;return i?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Qne(e,t){try{const n=Kne(e),r=t.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function hRe(e,t,n){var r,i;const a=(r=Qne(e,n))!==null&&r!==void 0?r:{},o=Gne(t);return(i=a[o])!==null&&i!==void 0?i:null}function mRe(e,t,n,r,i){var a;const o=Kne(e),l=Gne(t),c=(a=Qne(e,i))!==null&&a!==void 0?a:{};c[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(c))}catch(u){console.error(u)}}function P3({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((a,o)=>a+o,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!ra(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const o=n[a];Jt(o!=null,`No layout data found for index ${a}`);const l=100/r*o;n[a]=l}let i=0;for(let a=0;a<t.length;a++){const o=n[a];Jt(o!=null,`No layout data found for index ${a}`);const l=Bh({panelConstraints:t,panelIndex:a,size:o});o!=l&&(i+=o-l,n[a]=l)}if(!ra(i,0))for(let a=0;a<t.length;a++){const o=n[a];Jt(o!=null,`No layout data found for index ${a}`);const l=o+i,c=Bh({panelConstraints:t,panelIndex:a,size:l});if(o!==c&&(i-=c-o,n[a]=c,ra(i,0)))break}return n}const pRe=100,mx={getItem:e=>(k3(mx),mx.getItem(e)),setItem:(e,t)=>{k3(mx),mx.setItem(e,t)}},E3={};function Yne({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:i,id:a=null,onLayout:o=null,keyboardResizeBy:l=null,storage:c=mx,style:u,tagName:d="div",...f}){const h=CI(a),m=Fi(null),[g,p]=om(null),[v,b]=om([]),y=rRe(),j=Fi({}),N=Fi(new Map),w=Fi(0),S=Fi({autoSaveId:e,direction:r,dragState:g,id:h,keyboardResizeBy:l,onLayout:o,storage:c}),k=Fi({layout:v,panelDataArray:[],panelDataArrayChanged:!1});Fi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Dne(i,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:$}=k.current;return $},setLayout:$=>{const{onLayout:z}=S.current,{layout:Y,panelDataArray:ne}=k.current,te=P3({layout:$,panelConstraints:ne.map(pe=>pe.constraints)});C3(Y,te)||(b(te),k.current.layout=te,z&&z(te),dh(ne,te,j.current))}}),[]),sf(()=>{S.current.autoSaveId=e,S.current.direction=r,S.current.dragState=g,S.current.id=h,S.current.onLayout=o,S.current.storage=c}),oRe({committedValuesRef:S,eagerValuesRef:k,groupId:h,layout:v,panelDataArray:k.current.panelDataArray,setLayout:b,panelGroupElement:m.current}),rf(()=>{const{panelDataArray:$}=k.current;if(e){if(v.length===0||v.length!==$.length)return;let z=E3[e];z==null&&(z=fRe(mRe,pRe),E3[e]=z);const Y=[...$],ne=new Map(N.current);z(e,Y,ne,v,c)}},[e,v,c]),rf(()=>{});const C=Ii($=>{const{onLayout:z}=S.current,{layout:Y,panelDataArray:ne}=k.current;if($.constraints.collapsible){const te=ne.map(ye=>ye.constraints),{collapsedSize:pe=0,panelSize:J,pivotIndices:xe}=hd(ne,$,Y);if(Jt(J!=null,`Panel size not found for panel "${$.id}"`),!Bl(J,pe)){N.current.set($.id,J);const re=bh(ne,$)===ne.length-1?J-pe:pe-J,ue=hx({delta:re,initialLayout:Y,panelConstraints:te,pivotIndices:xe,prevLayout:Y,trigger:"imperative-api"});rj(Y,ue)||(b(ue),k.current.layout=ue,z&&z(ue),dh(ne,ue,j.current))}}},[]),A=Ii(($,z)=>{const{onLayout:Y}=S.current,{layout:ne,panelDataArray:te}=k.current;if($.constraints.collapsible){const pe=te.map(ke=>ke.constraints),{collapsedSize:J=0,panelSize:xe=0,minSize:ye=0,pivotIndices:re}=hd(te,$,ne),ue=z??ye;if(Bl(xe,J)){const ke=N.current.get($.id),$e=ke!=null&&ke>=ue?ke:ue,gt=bh(te,$)===te.length-1?xe-$e:$e-xe,He=hx({delta:gt,initialLayout:ne,panelConstraints:pe,pivotIndices:re,prevLayout:ne,trigger:"imperative-api"});rj(ne,He)||(b(He),k.current.layout=He,Y&&Y(He),dh(te,He,j.current))}}},[]),D=Ii($=>{const{layout:z,panelDataArray:Y}=k.current,{panelSize:ne}=hd(Y,$,z);return Jt(ne!=null,`Panel size not found for panel "${$.id}"`),ne},[]),P=Ii(($,z)=>{const{panelDataArray:Y}=k.current,ne=bh(Y,$);return dRe({defaultSize:z,dragState:g,layout:v,panelData:Y,panelIndex:ne})},[g,v]),_=Ii($=>{const{layout:z,panelDataArray:Y}=k.current,{collapsedSize:ne=0,collapsible:te,panelSize:pe}=hd(Y,$,z);return Jt(pe!=null,`Panel size not found for panel "${$.id}"`),te===!0&&Bl(pe,ne)},[]),O=Ii($=>{const{layout:z,panelDataArray:Y}=k.current,{collapsedSize:ne=0,collapsible:te,panelSize:pe}=hd(Y,$,z);return Jt(pe!=null,`Panel size not found for panel "${$.id}"`),!te||Tf(pe,ne)>0},[]),M=Ii($=>{const{panelDataArray:z}=k.current;z.push($),z.sort((Y,ne)=>{const te=Y.order,pe=ne.order;return te==null&&pe==null?0:te==null?-1:pe==null?1:te-pe}),k.current.panelDataArrayChanged=!0,y()},[y]);sf(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:$,onLayout:z,storage:Y}=S.current,{layout:ne,panelDataArray:te}=k.current;let pe=null;if($){const xe=hRe($,te,Y);xe&&(N.current=new Map(Object.entries(xe.expandToSizes)),pe=xe.layout)}pe==null&&(pe=uRe({panelDataArray:te}));const J=P3({layout:pe,panelConstraints:te.map(xe=>xe.constraints)});C3(ne,J)||(b(J),k.current.layout=J,z&&z(J),dh(te,J,j.current))}}),sf(()=>{const $=k.current;return()=>{$.layout=[]}},[]);const T=Ii($=>{let z=!1;const Y=m.current;return Y&&window.getComputedStyle(Y,null).getPropertyValue("direction")==="rtl"&&(z=!0),function(te){te.preventDefault();const pe=m.current;if(!pe)return()=>null;const{direction:J,dragState:xe,id:ye,keyboardResizeBy:re,onLayout:ue}=S.current,{layout:ke,panelDataArray:$e}=k.current,{initialLayout:Ve}=xe??{},gt=Une(ye,$,pe);let He=cRe(te,$,J,xe,re,pe);const be=J==="horizontal";be&&z&&(He=-He);const xt=$e.map(de=>de.constraints),sn=hx({delta:He,initialLayout:Ve??ke,panelConstraints:xt,pivotIndices:gt,prevLayout:ke,trigger:Mne(te)?"keyboard":"mouse-or-touch"}),K=!rj(ke,sn);(Rne(te)||$ne(te))&&w.current!=He&&(w.current=He,!K&&He!==0?be?Hk($,He<0?Lne:zne):Hk($,He<0?Bne:Vne):Hk($,0)),K&&(b(sn),k.current.layout=sn,ue&&ue(sn),dh($e,sn,j.current))}},[]),R=Ii(($,z)=>{const{onLayout:Y}=S.current,{layout:ne,panelDataArray:te}=k.current,pe=te.map(ke=>ke.constraints),{panelSize:J,pivotIndices:xe}=hd(te,$,ne);Jt(J!=null,`Panel size not found for panel "${$.id}"`);const re=bh(te,$)===te.length-1?J-z:z-J,ue=hx({delta:re,initialLayout:ne,panelConstraints:pe,pivotIndices:xe,prevLayout:ne,trigger:"imperative-api"});rj(ne,ue)||(b(ue),k.current.layout=ue,Y&&Y(ue),dh(te,ue,j.current))},[]),F=Ii(($,z)=>{const{layout:Y,panelDataArray:ne}=k.current,{collapsedSize:te=0,collapsible:pe}=z,{collapsedSize:J=0,collapsible:xe,maxSize:ye=100,minSize:re=0}=$.constraints,{panelSize:ue}=hd(ne,$,Y);ue!=null&&(pe&&xe&&Bl(ue,te)?Bl(te,J)||R($,J):ue<re?R($,re):ue>ye&&R($,ye))},[R]),E=Ii(($,z)=>{const{direction:Y}=S.current,{layout:ne}=k.current;if(!m.current)return;const te=iS($,m.current);Jt(te,`Drag handle element not found for id "${$}"`);const pe=Hne(Y,z);p({dragHandleId:$,dragHandleRect:te.getBoundingClientRect(),initialCursorPosition:pe,initialLayout:ne})},[]),B=Ii(()=>{p(null)},[]),L=Ii($=>{const{panelDataArray:z}=k.current,Y=bh(z,$);Y>=0&&(z.splice(Y,1),delete j.current[$.id],k.current.panelDataArrayChanged=!0,y())},[y]),I=qMe(()=>({collapsePanel:C,direction:r,dragState:g,expandPanel:A,getPanelSize:D,getPanelStyle:P,groupId:h,isPanelCollapsed:_,isPanelExpanded:O,reevaluatePanelConstraints:F,registerPanel:M,registerResizeHandle:T,resizePanel:R,startDragging:E,stopDragging:B,unregisterPanel:L,panelGroupElement:m.current}),[C,g,r,A,D,P,h,_,O,F,M,T,R,E,B,L]),q={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return np(nS.Provider,{value:I},np(d,{...f,children:t,className:n,id:a,ref:m,style:{...q,...u},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h}))}const Xne=Ane((e,t)=>np(Yne,{...e,forwardedRef:t}));Yne.displayName="PanelGroup";Xne.displayName="forwardRef(PanelGroup)";function bh(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function hd(e,t,n){const r=bh(e,t),a=r===e.length-1?[r-1,r]:[r,r+1],o=n[r];return{...t.constraints,panelSize:o,pivotIndices:a}}function gRe({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){rf(()=>{if(e||n==null||r==null)return;const i=iS(t,r);if(i==null)return;const a=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const l=i.getAttribute("data-panel-group-id");Jt(l,`No group element found for id "${l}"`);const c=$v(l,r),u=qne(l,t,r);Jt(u!==null,`No resize element found for id "${t}"`);const d=o.shiftKey?u>0?u-1:c.length-1:u+1<c.length?u+1:0;c[d].focus();break}}};return i.addEventListener("keydown",a),()=>{i.removeEventListener("keydown",a)}},[r,e,t,n])}function Zne({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:a,onDragging:o,onFocus:l,style:c={},tabIndex:u=0,tagName:d="div",...f}){var h,m;const g=Fi(null),p=Fi({onDragging:o});rf(()=>{p.current.onDragging=o});const v=Tne(nS);if(v===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:y,registerResizeHandle:j,startDragging:N,stopDragging:w,panelGroupElement:S}=v,k=CI(i),[C,A]=om("inactive"),[D,P]=om(!1),[_,O]=om(null),M=Fi({state:C});sf(()=>{M.current.state=C}),rf(()=>{if(n)O(null);else{const E=j(k);O(()=>E)}},[n,k,j]);const T=(h=r==null?void 0:r.coarse)!==null&&h!==void 0?h:15,R=(m=r==null?void 0:r.fine)!==null&&m!==void 0?m:5;return rf(()=>{if(n||_==null)return;const E=g.current;return Jt(E,"Element ref not attached"),nRe(k,E,b,{coarse:T,fine:R},(L,I,q)=>{if(I)switch(L){case"down":{A("drag"),Jt(q,'Expected event to be defined for "down" action'),N(k,q);const{onDragging:$}=p.current;$&&$(!0);break}case"move":{const{state:$}=M.current;$!=="drag"&&A("hover"),Jt(q,'Expected event to be defined for "move" action'),_(q);break}case"up":{A("hover"),w();const{onDragging:$}=p.current;$&&$(!1);break}}else A("inactive")})},[T,b,n,R,j,k,_,N,w]),gRe({disabled:n,handleId:k,resizeHandler:_,panelGroupElement:S}),np(d,{...f,children:e,className:t,id:i,onBlur:()=>{P(!1),a==null||a()},onFocus:()=>{P(!0),l==null||l()},ref:g,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:u,"data-panel-group-direction":b,"data-panel-group-id":y,"data-resize-handle":"","data-resize-handle-active":C==="drag"?"pointer":D?"keyboard":void 0,"data-resize-handle-state":C,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":k})}Zne.displayName="PanelResizeHandle";const Jne=({className:e,...t})=>s.jsx(Xne,{className:he("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),Ew=Ine,ere=({withHandle:e,className:t,...n})=>s.jsx(Zne,{className:he("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&s.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:s.jsx(Cme,{className:"h-2.5 w-2.5"})})}),tre=x.createContext(void 0);function xRe({children:e}){const[t]=yr(),{selectedProjectId:n}=jt(),[r,i]=x.useState(),[a,o]=x.useState(),[l,c]=x.useState(),[u,d]=x.useState(),[f,h]=x.useState([]),[m,g]=x.useState(),p=()=>t.startsWith("/wbs")?"wbs":t.startsWith("/kanban")?"kanban":t.startsWith("/risks")?"risks":t.startsWith("/issues")?"issues":t.startsWith("/resources")?"resources":t.startsWith("/calendar")?"calendar":t.startsWith("/stakeholders")?"stakeholders":t.startsWith("/cost")?"cost":t.startsWith("/documents")?"documents":t.startsWith("/ai-assistant")?"ai-assistant":"dashboard",v={currentPage:p(),selectedTaskId:r,selectedRiskId:a,selectedIssueId:l,selectedResourceId:u,selectedProjectId:n||void 0,selectedItemIds:f,pageData:m},b=()=>{const y=[];return y.push(`Current page: ${p()}`),n&&y.push(`Project ID: ${n}`),r&&y.push(`Selected task ID: ${r}`),a&&y.push(`Selected risk ID: ${a}`),l&&y.push(`Selected issue ID: ${l}`),u&&y.push(`Selected resource ID: ${u}`),f.length>0&&y.push(`Selected ${f.length} item(s): ${f.join(", ")}`),y.join(" | ")};return x.useEffect(()=>{p()},[t]),s.jsx(tre.Provider,{value:{context:v,setSelectedTaskId:i,setSelectedRiskId:o,setSelectedIssueId:c,setSelectedResourceId:d,setSelectedItemIds:h,setPageData:g,getContextDescription:b},children:e})}function vRe(){const e=x.useContext(tre);if(!e)throw new Error("useAIContext must be used within AIContextProvider");return e}const nre=x.createContext(void 0);function yRe({children:e}){const[t,n]=x.useState([]),[r,i]=x.useState([]),[a,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[f,h]=x.useState([]),[m,g]=x.useState([]),[p]=yr(),v=x.useRef({selectedProjects:t,selectedContacts:r,selectedStakeholders:a,selectedResources:l,selectedPrograms:u,selectedIssues:f,selectedRisks:m});x.useEffect(()=>{v.current={selectedProjects:t,selectedContacts:r,selectedStakeholders:a,selectedResources:l,selectedPrograms:u,selectedIssues:f,selectedRisks:m}},[t,r,a,l,u,f,m]);const b=x.useCallback(()=>{n([]),i([]),o([]),c([]),d([]),h([]),g([])},[]),y=x.useCallback(()=>{const j=v.current;return p.startsWith("/projects")?{items:j.selectedProjects,type:"projects",clearFn:()=>n([])}:p.startsWith("/contacts")?{items:j.selectedContacts,type:"contacts",clearFn:()=>i([])}:p.startsWith("/stakeholders")?{items:j.selectedStakeholders,type:"stakeholders",clearFn:()=>o([])}:p.startsWith("/resources")?{items:j.selectedResources,type:"resources",clearFn:()=>c([])}:p.startsWith("/pmo/programs")||p.startsWith("/programs")?{items:j.selectedPrograms,type:"programs",clearFn:()=>d([])}:p.startsWith("/issues")?{items:j.selectedIssues,type:"issues",clearFn:()=>h([])}:p.startsWith("/risks")?{items:j.selectedRisks,type:"risks",clearFn:()=>g([])}:null},[p]);return s.jsx(nre.Provider,{value:{selectedProjects:t,setSelectedProjects:n,selectedContacts:r,setSelectedContacts:i,selectedStakeholders:a,setSelectedStakeholders:o,selectedResources:l,setSelectedResources:c,selectedPrograms:u,setSelectedPrograms:d,selectedIssues:f,setSelectedIssues:h,selectedRisks:m,setSelectedRisks:g,clearAllSelections:b,getCurrentSelections:y},children:e})}function eg(){const e=x.useContext(nre);if(e===void 0)throw new Error("useSelection must be used within a SelectionProvider");return e}const rre=x.createContext(void 0);function bRe({children:e}){const[t,n]=x.useState(()=>{if(typeof window>"u")return 25;const a=localStorage.getItem("rightSidebarWidth");if(a){const u=parseFloat(a);if(!isNaN(u)&&u>=20&&u<=40)return u}const c=320/window.innerWidth*100;return Math.max(20,Math.min(35,c))}),r=a=>{n(a),a>3&&localStorage.setItem("rightSidebarWidth",a.toString())},i=t<3;return s.jsx(rre.Provider,{value:{width:t,setWidth:r,isCollapsed:i},children:e})}function sre(){const e=x.useContext(rre);if(e===void 0)throw new Error("useRightSidebar must be used within a RightSidebarProvider");return e}const jRe=e=>{switch(e){case"projects":return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"contacts":return[{label:"Assign to Project",action:"assign",icon:s.jsx(cv,{className:"h-4 w-4"}),variant:"default"},{label:"Export Selected",action:"export",icon:s.jsx(CK,{className:"h-4 w-4"}),variant:"secondary"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"stakeholders":return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"resources":return[{label:"Add to Group",action:"add-to-group",icon:s.jsx(cv,{className:"h-4 w-4"}),variant:"secondary"},{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"issues":return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"risks":return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];case"programs":return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}];default:return[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"default"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}]}},i_=new Map;function eb(e,t){return i_.set(e,t),()=>{i_.delete(e)}}function wRe(e,t,n){const r=i_.get(e);r&&r(t,n)}function NRe(){const{getCurrentSelections:e,selectedProjects:t,selectedContacts:n,selectedStakeholders:r,selectedResources:i,selectedPrograms:a,selectedIssues:o,selectedRisks:l}=eg(),{state:c,isMobile:u}=E1(),{width:d,isCollapsed:f}=sre(),[h]=yr(),[m,g]=x.useState(null),[p,v]=x.useState(0);if(x.useEffect(()=>{if(typeof window>"u")return;const P=()=>v(window.innerWidth);return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),x.useEffect(()=>{const P=e();g(P)},[e,h,t,n,r,i,a,o,l]),!m||m.items.length===0)return null;const{items:b,type:y,clearFn:j}=m,N=b.length,w=jRe(y),S=P=>{wRe(y,P,b)},k=()=>u||c==="collapsed"?"0":"var(--sidebar-width)",C=()=>{if(u||p<1024||f)return"0";const P=p||(typeof window<"u"?window.innerWidth:0);return`${d/100*P}px`},A=k(),D=C();return s.jsx("div",{className:he("fixed bottom-0 z-50","h-14 md:h-16","border-t bg-background shadow-lg","transition-[left,right] duration-200 ease-linear","backdrop-blur-sm bg-background/95"),style:{left:A,right:D,transitionProperty:"left, right",transitionDuration:"200ms",transitionTimingFunction:"linear"},children:s.jsxs("div",{className:"flex h-full items-center justify-between px-4 md:px-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-sm font-medium text-foreground",children:[s.jsx("span",{className:"font-semibold text-primary",children:N})," ",`${(O=>({projects:"project",contacts:"contact",stakeholders:"stakeholder",resources:"resource",programs:"program",issues:"issue",risks:"risk"})[O]||O.slice(0,-1))(y)}${N!==1?"s":""}`," selected"]}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:j,className:"h-8 text-muted-foreground hover:text-foreground",children:[s.jsx(Fn,{className:"h-4 w-4 mr-1.5"}),"Clear"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[w.slice(0,2).map(P=>s.jsxs(H,{variant:P.variant||"outline",size:"sm",onClick:()=>S(P.action),className:he("h-9 px-4 font-medium transition-all",P.variant==="default"&&"bg-primary text-primary-foreground hover:bg-primary/90",P.variant==="destructive"&&"bg-destructive text-destructive-foreground hover:bg-destructive/90",P.variant==="secondary"&&"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[P.icon,s.jsx("span",{className:"ml-2",children:P.label})]},P.action)),w.length>2&&s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"outline",size:"sm",className:"h-9 px-3",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsx(Nn,{align:"end",className:"w-48",children:w.slice(2).map(P=>s.jsxs(ct,{onClick:()=>S(P.action),className:he(P.variant==="destructive"&&"text-destructive focus:text-destructive"),children:[P.icon,s.jsx("span",{className:"ml-2",children:P.label})]},P.action))})]})]})]})})}function SRe(){const[e,t]=x.useState(navigator.onLine),[n,r]=x.useState(!1),[i,a]=x.useState(navigator.onLine?Date.now():null),[o,l]=x.useState(navigator.onLine?null:Date.now());return x.useEffect(()=>{const u=async()=>{console.log("[Offline] Connection restored"),t(!0),r(!0),a(Date.now());try{const{syncOfflineActions:f}=await BP(async()=>{const{syncOfflineActions:h}=await import("./backgroundSync-B1-DJbPH.js");return{syncOfflineActions:h}},[]);await f()}catch(f){console.error("[Offline] Failed to sync on reconnect:",f)}"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SYNC_REQUEST"})},d=()=>{console.log("[Offline] Connection lost"),t(!1),l(Date.now())};return window.addEventListener("online",u),window.addEventListener("offline",d),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",d)}},[]),{isOnline:e,wasOffline:n,lastOnlineTime:i,lastOfflineTime:o,syncWhenOnline:async()=>{if(!e){console.log("[Offline] Cannot sync - currently offline");return}try{const{syncOfflineActions:u}=await BP(async()=>{const{syncOfflineActions:d}=await import("./backgroundSync-B1-DJbPH.js");return{syncOfflineActions:d}},[]);await u(),r(!1)}catch(u){console.error("[Offline] Failed to sync:",u)}}}}function CRe(){const{isOnline:e,wasOffline:t,syncWhenOnline:n}=SRe(),[r,i]=x.useState(!1);if(e&&!t)return null;const a=async()=>{i(!0);try{await n()}finally{i(!1)}};return e?t?s.jsxs($t,{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-auto z-50 border-green-500 bg-green-50 dark:bg-green-950",children:[s.jsx(Xme,{className:"h-4 w-4 text-green-600"}),s.jsxs(Ft,{className:"flex items-center gap-2",children:[s.jsx("span",{children:"Connection restored."}),s.jsx(H,{size:"sm",variant:"outline",onClick:a,disabled:r,className:"h-7",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Mm,{className:"h-3 w-3 mr-1 animate-spin"}),"Syncing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Mm,{className:"h-3 w-3 mr-1"}),"Sync Now"]})})]})]}):null:s.jsxs($t,{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-auto z-50 border-amber-500 bg-amber-50 dark:bg-amber-950",children:[s.jsx(Yme,{className:"h-4 w-4 text-amber-600"}),s.jsx(Ft,{className:"flex items-center gap-2",children:s.jsx("span",{children:"You are offline. Changes will be synced when connection is restored."})})]})}function kRe(){const[e,t]=x.useState(null),[n,r]=x.useState(!1),[i,a]=x.useState(!1);x.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){a(!0);return}const c=u=>{u.preventDefault(),t(u),setTimeout(()=>{r(!0)},3e3)};return window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",()=>{a(!0),r(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const o=async()=>{if(!e)return;await e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"?(console.log("[Install] User accepted install prompt"),a(!0)):console.log("[Install] User dismissed install prompt"),r(!1),t(null)},l=()=>{r(!1),sessionStorage.setItem("installPromptDismissed","true")};return i||!n||!e||sessionStorage.getItem("installPromptDismissed")==="true"?null:s.jsx(zt,{open:n,onOpenChange:r,children:s.jsxs(Rt,{className:"sm:max-w-md",children:[s.jsxs(Bt,{children:[s.jsxs(Vt,{className:"flex items-center gap-2",children:[s.jsx(ds,{className:"h-5 w-5"}),"Install Ganttium"]}),s.jsx(ir,{children:"Install Ganttium as an app for a better experience. You'll be able to:"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:"Access your projects offline (up to 7 days)"}),s.jsx("li",{children:"Faster loading with cached data"}),s.jsx("li",{children:"Native app-like experience"}),s.jsx("li",{children:"Receive push notifications"})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsxs(H,{variant:"outline",onClick:l,children:[s.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Not Now"]}),s.jsxs(H,{onClick:o,children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"Install"]})]})]})]})})}const sj=(e,t,n,r)=>{typeof window>"u"||!window.gtag||window.gtag("event",e,{event_category:t,event_label:n,value:r})},PRe=()=>{const[e]=yr(),t=x.useRef(e);x.useEffect(()=>{e!==t.current&&(t.current=e)},[e])};class ERe extends x.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("Uncaught error:",t,n),this.setState({errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md border-destructive/50 shadow-lg",children:[s.jsxs(Ne,{className:"text-center pb-2",children:[s.jsx("div",{className:"mx-auto bg-destructive/10 p-3 rounded-full w-fit mb-2",children:s.jsx(ft,{className:"h-8 w-8 text-destructive"})}),s.jsx(Se,{className:"text-xl",children:"Something went wrong"})]}),s.jsxs(ce,{className:"text-center space-y-4",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"An unexpected error occurred while rendering this page."}),this.state.error&&s.jsxs("div",{className:"bg-muted/50 p-3 rounded-md text-left overflow-auto max-h-40 text-xs font-mono border",children:[s.jsx("p",{className:"font-semibold text-destructive mb-1",children:this.state.error.toString()}),this.state.errorInfo&&s.jsx("pre",{className:"text-muted-foreground opacity-70 whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]}),s.jsxs(Gp,{className:"flex justify-center gap-2",children:[s.jsxs(H,{variant:"outline",onClick:this.handleGoHome,children:[s.jsx(Pme,{className:"mr-2 h-4 w-4"}),"Go Home"]}),s.jsxs(H,{onClick:this.handleReload,children:[s.jsx(Mm,{className:"mr-2 h-4 w-4"}),"Reload Page"]})]})]})}):this.props.children}}var yc="Accordion",_Re=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[_I,ARe,TRe]=Fp(yc),[aS]=Er(yc,[TRe,Nne]),AI=Nne(),ire=Q.forwardRef((e,t)=>{const{type:n,...r}=e,i=r,a=r;return s.jsx(_I.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?s.jsx(MRe,{...a,ref:t}):s.jsx(IRe,{...i,ref:t})})});ire.displayName=yc;var[are,DRe]=aS(yc),[ore,ORe]=aS(yc,{collapsible:!1}),IRe=Q.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=e,[l,c]=ni({prop:n,defaultProp:r,onChange:i});return s.jsx(are,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Q.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(ore,{scope:e.__scopeAccordion,collapsible:a,children:s.jsx(lre,{...o,ref:t})})})}),MRe=Q.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=e,[o=[],l]=ni({prop:n,defaultProp:r,onChange:i}),c=Q.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=Q.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return s.jsx(are,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(ore,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(lre,{...a,ref:t})})})}),[RRe,oS]=aS(yc),lre=Q.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=e,l=Q.useRef(null),c=kt(l,t),u=ARe(n),f=Yu(i)==="ltr",h=Re(e.onKeyDown,m=>{var C;if(!_Re.includes(m.key))return;const g=m.target,p=u().filter(A=>{var D;return!((D=A.ref.current)!=null&&D.disabled)}),v=p.findIndex(A=>A.ref.current===g),b=p.length;if(v===-1)return;m.preventDefault();let y=v;const j=0,N=b-1,w=()=>{y=v+1,y>N&&(y=j)},S=()=>{y=v-1,y<j&&(y=N)};switch(m.key){case"Home":y=j;break;case"End":y=N;break;case"ArrowRight":a==="horizontal"&&(f?w():S());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(f?S():w());break;case"ArrowUp":a==="vertical"&&S();break}const k=y%b;(C=p[k].ref.current)==null||C.focus()});return s.jsx(RRe,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(_I.Slot,{scope:n,children:s.jsx(Qe.div,{...o,"data-orientation":a,ref:c,onKeyDown:r?void 0:h})})})}),_w="AccordionItem",[$Re,TI]=aS(_w),cre=Q.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...i}=e,a=oS(_w,n),o=DRe(_w,n),l=AI(n),c=Gr(),u=r&&o.value.includes(r)||!1,d=a.disabled||e.disabled;return s.jsx($Re,{scope:n,open:u,disabled:d,triggerId:c,children:s.jsx(kne,{"data-orientation":a.orientation,"data-state":pre(u),...l,...i,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});cre.displayName=_w;var ure="AccordionHeader",dre=Q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=oS(yc,n),a=TI(ure,n);return s.jsx(Qe.h3,{"data-orientation":i.orientation,"data-state":pre(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});dre.displayName=ure;var a_="AccordionTrigger",fre=Q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=oS(yc,n),a=TI(a_,n),o=ORe(a_,n),l=AI(n);return s.jsx(_I.ItemSlot,{scope:n,children:s.jsx(_Me,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...r,ref:t})})});fre.displayName=a_;var hre="AccordionContent",mre=Q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=oS(yc,n),a=TI(hre,n),o=AI(n);return s.jsx(AMe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});mre.displayName=hre;function pre(e){return e?"open":"closed"}var FRe=ire,LRe=cre,zRe=dre,gre=fre,xre=mre;const BRe=FRe,Nd=x.forwardRef(({className:e,...t},n)=>s.jsx(LRe,{ref:n,className:he("border-b",e),...t}));Nd.displayName="AccordionItem";const Sd=x.forwardRef(({className:e,children:t,...n},r)=>s.jsx(zRe,{className:"flex",children:s.jsxs(gre,{ref:r,className:he("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,s.jsx(ar,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Sd.displayName=gre.displayName;const Cd=x.forwardRef(({className:e,children:t,...n},r)=>s.jsx(xre,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:he("pb-4 pt-0",e),children:t})}));Cd.displayName=xre.displayName;function Pa({icon:e,title:t,description:n}){return s.jsxs(ie,{className:"hover-elevate",children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-md bg-primary/10 text-primary",children:e}),s.jsx(Se,{className:"text-lg",children:t})]})}),s.jsx(ce,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:n})})]})}function ij({name:e,price:t,description:n,features:r,badge:i,highlighted:a}){return s.jsxs(ie,{className:`relative ${a?"border-primary shadow-lg":""}`,children:[i&&s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:s.jsx(ae,{children:i})}),s.jsxs(Ne,{children:[s.jsx(Se,{className:"text-xl",children:e}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-3xl font-bold",children:t}),t!=="Custom"&&s.jsx("span",{className:"text-muted-foreground",children:"/month"})]}),s.jsx(it,{children:n})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsx("ul",{className:"space-y-2",children:r.map((o,l)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(Sr,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),s.jsx("span",{children:o})]},l))}),s.jsxs(H,{className:"w-full",variant:a?"default":"outline",children:["Get Started",s.jsx(yf,{className:"h-4 w-4 ml-2"})]})]})]})}function VRe(){const{theme:e,toggleTheme:t}=Mee();x.useEffect(()=>{sj("page_view","marketing","landing_page")},[]);const n=()=>{sj("cta_click","marketing","sign_in_button"),window.location.href="/login"},r=()=>{sj("cta_click","marketing","get_started_button"),window.location.href="/login"},i=()=>{sj("cta_click","marketing","view_demo_button")};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-bold text-xl",children:"Ganttium"})]}),s.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[s.jsx("a",{href:"#features",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Features"}),s.jsx("a",{href:"#pricing",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Pricing"}),s.jsx("a",{href:"#faq",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"FAQ"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-theme-toggle",children:e==="light"?s.jsx(AK,{className:"h-4 w-4"}):s.jsx(IK,{className:"h-4 w-4"})}),s.jsx(H,{onClick:n,"data-testid":"button-login",children:"Sign In"})]})]})}),s.jsxs("section",{className:"py-20 md:py-32 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-primary/5"}),s.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[s.jsxs(ae,{variant:"secondary",className:"mb-4",children:[s.jsx(U4,{className:"h-3 w-3 mr-1 inline"}),"Trusted by 100+ EPC Firms"]}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight mb-6",children:["Streamline Your EPC Projects",s.jsx("br",{}),s.jsx("span",{className:"text-primary",children:"From Concept to Completion"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"A comprehensive Project Management Information System designed for Engineering, Procurement, and Construction projects. Track WBS, manage costs, assess risks, and collaborate in real-time."}),s.jsxs("div",{className:"flex items-center justify-center gap-8 mb-8 text-sm text-muted-foreground flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ri,{className:"h-4 w-4 text-primary"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-foreground",children:"1,000+"})," Projects Managed"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-4 w-4 text-primary"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-foreground",children:"500+"})," Active Users"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 text-primary"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-foreground",children:"99.9%"})," Uptime"]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[s.jsxs(H,{size:"lg",onClick:r,"data-testid":"button-get-started",children:["Get Started Free",s.jsx(yf,{className:"h-5 w-5 ml-2"})]}),s.jsx(H,{size:"lg",variant:"outline",onClick:i,children:"View Demo"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:[s.jsx(Jd,{className:"h-3 w-3 inline mr-1"}),"No credit card required. Free tier includes 3 projects."]})]})]}),s.jsx("section",{className:"py-8 border-b",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-8 flex-wrap opacity-60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ul,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm",children:"SOC 2 Compliant"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jd,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm",children:"Enterprise Security"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U4,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm",children:"ISO 27001 Certified"})]})]})})}),s.jsx("section",{id:"features",className:"py-20 bg-muted/50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Everything You Need for EPC Success"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"From work breakdown structures to earned value analysis, we provide the tools engineering firms need to deliver projects on time and within budget."})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(Pa,{icon:s.jsx(Is,{className:"h-5 w-5"}),title:"5-Level WBS Management",description:"Create and manage hierarchical work breakdown structures with up to 5 levels of detail. Drag-and-drop organization with automatic WBS code generation."}),s.jsx(Pa,{icon:s.jsx(Ka,{className:"h-5 w-5"}),title:"Gantt Charts",description:"Interactive Gantt charts with all dependency types (FS, SS, FF, SF). Visualize critical path, track progress, and identify schedule risks."}),s.jsx(Pa,{icon:s.jsx(Br,{className:"h-5 w-5"}),title:"Kanban & Calendar Views",description:"Multiple view options including Kanban boards for agile workflows and calendar views for deadline tracking and resource planning."}),s.jsx(Pa,{icon:s.jsx(ul,{className:"h-5 w-5"}),title:"Risk & Issue Management",description:"Comprehensive logs for risks, issues, and change requests. Track mitigation strategies, assign owners, and monitor status."}),s.jsx(Pa,{icon:s.jsx(Ka,{className:"h-5 w-5"}),title:"Cost Analytics",description:"Multi-currency support with earned value analysis. Track PV, EV, AC, CPI, SPI, and variance across all cost categories."}),s.jsx(Pa,{icon:s.jsx(Cn,{className:"h-5 w-5"}),title:"Resource Management",description:"Assign team members to tasks, track utilization, and balance workloads. Stakeholder management with RACI matrix support."}),s.jsx(Pa,{icon:s.jsx(F0,{className:"h-5 w-5"}),title:"AI-Powered Assistant",description:"OpenAI-powered assistant that understands your project context. Get insights, generate reports, and automate routine tasks."}),s.jsx(Pa,{icon:s.jsx(d1,{className:"h-5 w-5"}),title:"Real-Time Collaboration",description:"WebSocket-based updates ensure your team always sees the latest changes. See who's online and get instant notifications."}),s.jsx(Pa,{icon:s.jsx(Nme,{className:"h-5 w-5"}),title:"Offline PWA Support",description:"Work offline with Progressive Web App capabilities. Changes sync automatically when you reconnect."}),s.jsx(Pa,{icon:s.jsx(xme,{className:"h-5 w-5"}),title:"Cloud Storage Integration",description:"Connect your Google Drive, OneDrive, or Dropbox accounts. Sync project documents and attachments seamlessly."}),s.jsx(Pa,{icon:s.jsx(Sn,{className:"h-5 w-5"}),title:"Professional Reports",description:"Generate PDF reports for project status, risk registers, and earned value analysis. Send email notifications with customizable templates."}),s.jsx(Pa,{icon:s.jsx(Hi,{className:"h-5 w-5"}),title:"Multi-Tenant Architecture",description:"Designed for organizations managing multiple projects. Role-based access control with organization-level isolation."})]})]})}),s.jsx("section",{id:"pricing",className:"py-20",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Simple, Transparent Pricing"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Start free and scale as you grow. All plans include core project management features."})]}),s.jsxs("div",{className:"grid gap-8 md:grid-cols-4 max-w-6xl mx-auto",children:[s.jsx(ij,{name:"Free",price:"$0",description:"Perfect for small teams",features:["3 projects","100 tasks per project","10K AI tokens/month","512MB storage","50 emails/month","Basic support"]}),s.jsx(ij,{name:"Starter",price:"$29",description:"For growing teams",features:["10 projects","500 tasks per project","50K AI tokens/month","2GB storage","500 emails/month","Priority support","Cloud storage integration"]}),s.jsx(ij,{name:"Professional",price:"$79",description:"For established organizations",features:["50 projects","1,000 tasks per project","200K AI tokens/month","10GB storage","2K emails/month","Advanced reports","Cloud storage integration"],badge:"Most Popular",highlighted:!0}),s.jsx(ij,{name:"Enterprise",price:"Custom",description:"For large enterprises",features:["100 projects","10K tasks per project","1M AI tokens/month","50GB storage","Unlimited emails","Dedicated support","Custom integrations","White-label option"]})]})]})}),s.jsx("section",{id:"about",className:"py-20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Built for Engineering Excellence"}),s.jsx("p",{className:"text-muted-foreground mb-8",children:"Ganttium was designed from the ground up for EPC (Engineering, Procurement, and Construction) projects. We understand the unique challenges of managing complex engineering projects with multiple stakeholders, strict deadlines, and significant budgets."}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:"100+"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Organizations Supported"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:"1000+"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Projects Managed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:"99.9%"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime SLA"})]})]})]})})}),s.jsx("section",{id:"faq",className:"py-20 bg-muted/50",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Frequently Asked Questions"}),s.jsx("p",{className:"text-muted-foreground",children:"Everything you need to know about Ganttium"})]}),s.jsxs(BRe,{type:"single",collapsible:!0,className:"w-full",children:[s.jsxs(Nd,{value:"item-1",children:[s.jsx(Sd,{children:"What is EPC Project Management?"}),s.jsx(Cd,{children:"EPC stands for Engineering, Procurement, and Construction. Our platform is specifically designed for managing complex engineering projects with multiple phases, stakeholders, and deliverables. Unlike generic project management tools, Ganttium understands the unique workflows and compliance requirements of EPC projects."})]}),s.jsxs(Nd,{value:"item-2",children:[s.jsx(Sd,{children:"How does Ganttium differ from MS Project or Primavera P6?"}),s.jsx(Cd,{children:"Ganttium is purpose-built for EPC projects with features like NCR (Non-Conformance Report) tracking, HSE (Health, Safety, Environment) compliance, and EPC-specific cost structures built-in. Unlike desktop software, Ganttium offers real-time collaboration, cloud storage integration, and mobile access. Plus, our AI assistant helps automate routine project management tasks."})]}),s.jsxs(Nd,{value:"item-3",children:[s.jsx(Sd,{children:"Can I try Ganttium before committing?"}),s.jsx(Cd,{children:"Absolutely! Our Free tier includes 3 projects with full access to core features. No credit card required. You can upgrade to a paid plan anytime when you're ready to scale. All plans include a 14-day free trial of premium features."})]}),s.jsxs(Nd,{value:"item-4",children:[s.jsx(Sd,{children:"Is my data secure?"}),s.jsx(Cd,{children:"Yes. We're SOC 2 compliant and ISO 27001 certified. All data is encrypted in transit and at rest. We use enterprise-grade security practices including role-based access control, audit logging, and regular security audits. Your data is never shared with third parties."})]}),s.jsxs(Nd,{value:"item-5",children:[s.jsx(Sd,{children:"Can I integrate Ganttium with other tools?"}),s.jsx(Cd,{children:"Yes! Ganttium integrates with Google Drive, OneDrive, and Dropbox for document management. We also support API access for Enterprise customers who need custom integrations with their existing systems like ERP, accounting software, or other project management tools."})]}),s.jsxs(Nd,{value:"item-6",children:[s.jsx(Sd,{children:"What kind of support do you offer?"}),s.jsx(Cd,{children:"Free tier users get access to our knowledge base and community forum. Starter and Professional plans include priority email support with 24-hour response time. Enterprise customers get dedicated account management, phone support, and custom onboarding assistance."})]})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-4 text-center",children:s.jsx(ie,{className:"max-w-3xl mx-auto bg-primary/5 border-primary/20",children:s.jsxs(ce,{className:"pt-6",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Project Management?"}),s.jsx("p",{className:"text-muted-foreground mb-8",children:"Join hundreds of engineering teams already using Ganttium to deliver projects on time and within budget."}),s.jsxs(H,{size:"lg",onClick:r,"data-testid":"button-cta-final",children:["Start Your Free Trial",s.jsx(yf,{className:"h-5 w-5 ml-2"})]})]})})})}),s.jsx("footer",{className:"border-t py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"grid gap-8 md:grid-cols-4 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Is,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-semibold",children:"Ganttium"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"EPC Project Management Information System"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),s.jsxs("nav",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("a",{href:"#features",className:"block hover:text-foreground transition-colors",children:"Features"}),s.jsx("a",{href:"#pricing",className:"block hover:text-foreground transition-colors",children:"Pricing"}),s.jsx("a",{href:"#faq",className:"block hover:text-foreground transition-colors",children:"FAQ"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),s.jsxs("nav",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("a",{href:"#about",className:"block hover:text-foreground transition-colors",children:"About"}),s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Blog"}),s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Careers"}),s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Contact"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Legal"}),s.jsxs("nav",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Terms"}),s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Privacy"}),s.jsx("a",{href:"#",className:"block hover:text-foreground transition-colors",children:"Security"})]})]})]}),s.jsxs("div",{className:"border-t pt-8 flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:" 2025 Ganttium. All rights reserved."}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground"})]})]})})]})}function Ts({title:e,value:t,change:n,icon:r,className:i}){const a=n!==void 0&&n>0,o=n!==void 0&&n<0;return s.jsxs(ie,{className:he("hover-elevate",i),"data-testid":`card-metric-${e.toLowerCase().replace(/\s+/g,"-")}`,children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-1 md:pb-2 p-3 md:p-6 gap-1",children:[s.jsx(Se,{className:"text-xs md:text-sm font-medium text-muted-foreground truncate",children:e}),r&&s.jsx(r,{className:"h-3 w-3 md:h-4 md:w-4 text-muted-foreground shrink-0"})]}),s.jsxs(ce,{className:"p-3 md:p-6 pt-0",children:[s.jsx("div",{className:"text-lg md:text-2xl font-bold","data-testid":`text-metric-value-${e.toLowerCase().replace(/\s+/g,"-")}`,children:t}),n!==void 0&&s.jsxs("p",{className:he("text-xs mt-1 hidden md:block",a&&"text-chart-3",o&&"text-destructive"),children:[a&&"+",n,"% from last month"]})]})]})}var qRe=Array.isArray,Yi=qRe,URe=typeof Vl=="object"&&Vl&&Vl.Object===Object&&Vl,vre=URe,WRe=vre,HRe=typeof self=="object"&&self&&self.Object===Object&&self,KRe=WRe||HRe||Function("return this")(),jl=KRe,GRe=jl,QRe=GRe.Symbol,tb=QRe,_3=tb,yre=Object.prototype,YRe=yre.hasOwnProperty,XRe=yre.toString,Hg=_3?_3.toStringTag:void 0;function ZRe(e){var t=YRe.call(e,Hg),n=e[Hg];try{e[Hg]=void 0;var r=!0}catch{}var i=XRe.call(e);return r&&(t?e[Hg]=n:delete e[Hg]),i}var JRe=ZRe,e4e=Object.prototype,t4e=e4e.toString;function n4e(e){return t4e.call(e)}var r4e=n4e,A3=tb,s4e=JRe,i4e=r4e,a4e="[object Null]",o4e="[object Undefined]",T3=A3?A3.toStringTag:void 0;function l4e(e){return e==null?e===void 0?o4e:a4e:T3&&T3 in Object(e)?s4e(e):i4e(e)}var bc=l4e;function c4e(e){return e!=null&&typeof e=="object"}var jc=c4e,u4e=bc,d4e=jc,f4e="[object Symbol]";function h4e(e){return typeof e=="symbol"||d4e(e)&&u4e(e)==f4e}var tg=h4e,m4e=Yi,p4e=tg,g4e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x4e=/^\w*$/;function v4e(e,t){if(m4e(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||p4e(e)?!0:x4e.test(e)||!g4e.test(e)||t!=null&&e in Object(t)}var DI=v4e;function y4e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nd=y4e;const ng=yn(nd);var b4e=bc,j4e=nd,w4e="[object AsyncFunction]",N4e="[object Function]",S4e="[object GeneratorFunction]",C4e="[object Proxy]";function k4e(e){if(!j4e(e))return!1;var t=b4e(e);return t==N4e||t==S4e||t==w4e||t==C4e}var OI=k4e;const Ot=yn(OI);var P4e=jl,E4e=P4e["__core-js_shared__"],_4e=E4e,Kk=_4e,D3=function(){var e=/[^.]+$/.exec(Kk&&Kk.keys&&Kk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function A4e(e){return!!D3&&D3 in e}var T4e=A4e,D4e=Function.prototype,O4e=D4e.toString;function I4e(e){if(e!=null){try{return O4e.call(e)}catch{}try{return e+""}catch{}}return""}var bre=I4e,M4e=OI,R4e=T4e,$4e=nd,F4e=bre,L4e=/[\\^$.*+?()[\]{}|]/g,z4e=/^\[object .+?Constructor\]$/,B4e=Function.prototype,V4e=Object.prototype,q4e=B4e.toString,U4e=V4e.hasOwnProperty,W4e=RegExp("^"+q4e.call(U4e).replace(L4e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function H4e(e){if(!$4e(e)||R4e(e))return!1;var t=M4e(e)?W4e:z4e;return t.test(F4e(e))}var K4e=H4e;function G4e(e,t){return e==null?void 0:e[t]}var Q4e=G4e,Y4e=K4e,X4e=Q4e;function Z4e(e,t){var n=X4e(e,t);return Y4e(n)?n:void 0}var Kf=Z4e,J4e=Kf,e$e=J4e(Object,"create"),lS=e$e,O3=lS;function t$e(){this.__data__=O3?O3(null):{},this.size=0}var n$e=t$e;function r$e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var s$e=r$e,i$e=lS,a$e="__lodash_hash_undefined__",o$e=Object.prototype,l$e=o$e.hasOwnProperty;function c$e(e){var t=this.__data__;if(i$e){var n=t[e];return n===a$e?void 0:n}return l$e.call(t,e)?t[e]:void 0}var u$e=c$e,d$e=lS,f$e=Object.prototype,h$e=f$e.hasOwnProperty;function m$e(e){var t=this.__data__;return d$e?t[e]!==void 0:h$e.call(t,e)}var p$e=m$e,g$e=lS,x$e="__lodash_hash_undefined__";function v$e(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=g$e&&t===void 0?x$e:t,this}var y$e=v$e,b$e=n$e,j$e=s$e,w$e=u$e,N$e=p$e,S$e=y$e;function rg(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rg.prototype.clear=b$e;rg.prototype.delete=j$e;rg.prototype.get=w$e;rg.prototype.has=N$e;rg.prototype.set=S$e;var C$e=rg;function k$e(){this.__data__=[],this.size=0}var P$e=k$e;function E$e(e,t){return e===t||e!==e&&t!==t}var II=E$e,_$e=II;function A$e(e,t){for(var n=e.length;n--;)if(_$e(e[n][0],t))return n;return-1}var cS=A$e,T$e=cS,D$e=Array.prototype,O$e=D$e.splice;function I$e(e){var t=this.__data__,n=T$e(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():O$e.call(t,n,1),--this.size,!0}var M$e=I$e,R$e=cS;function $$e(e){var t=this.__data__,n=R$e(t,e);return n<0?void 0:t[n][1]}var F$e=$$e,L$e=cS;function z$e(e){return L$e(this.__data__,e)>-1}var B$e=z$e,V$e=cS;function q$e(e,t){var n=this.__data__,r=V$e(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var U$e=q$e,W$e=P$e,H$e=M$e,K$e=F$e,G$e=B$e,Q$e=U$e;function sg(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sg.prototype.clear=W$e;sg.prototype.delete=H$e;sg.prototype.get=K$e;sg.prototype.has=G$e;sg.prototype.set=Q$e;var uS=sg,Y$e=Kf,X$e=jl,Z$e=Y$e(X$e,"Map"),MI=Z$e,I3=C$e,J$e=uS,eFe=MI;function tFe(){this.size=0,this.__data__={hash:new I3,map:new(eFe||J$e),string:new I3}}var nFe=tFe;function rFe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var sFe=rFe,iFe=sFe;function aFe(e,t){var n=e.__data__;return iFe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var dS=aFe,oFe=dS;function lFe(e){var t=oFe(this,e).delete(e);return this.size-=t?1:0,t}var cFe=lFe,uFe=dS;function dFe(e){return uFe(this,e).get(e)}var fFe=dFe,hFe=dS;function mFe(e){return hFe(this,e).has(e)}var pFe=mFe,gFe=dS;function xFe(e,t){var n=gFe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var vFe=xFe,yFe=nFe,bFe=cFe,jFe=fFe,wFe=pFe,NFe=vFe;function ig(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ig.prototype.clear=yFe;ig.prototype.delete=bFe;ig.prototype.get=jFe;ig.prototype.has=wFe;ig.prototype.set=NFe;var RI=ig,jre=RI,SFe="Expected a function";function $I(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(SFe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new($I.Cache||jre),n}$I.Cache=jre;var wre=$I;const CFe=yn(wre);var kFe=wre,PFe=500;function EFe(e){var t=kFe(e,function(r){return n.size===PFe&&n.clear(),r}),n=t.cache;return t}var _Fe=EFe,AFe=_Fe,TFe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DFe=/\\(\\)?/g,OFe=AFe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(TFe,function(n,r,i,a){t.push(i?a.replace(DFe,"$1"):r||n)}),t}),IFe=OFe;function MFe(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var FI=MFe,M3=tb,RFe=FI,$Fe=Yi,FFe=tg,R3=M3?M3.prototype:void 0,$3=R3?R3.toString:void 0;function Nre(e){if(typeof e=="string")return e;if($Fe(e))return RFe(e,Nre)+"";if(FFe(e))return $3?$3.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var LFe=Nre,zFe=LFe;function BFe(e){return e==null?"":zFe(e)}var Sre=BFe,VFe=Yi,qFe=DI,UFe=IFe,WFe=Sre;function HFe(e,t){return VFe(e)?e:qFe(e,t)?[e]:UFe(WFe(e))}var Cre=HFe,KFe=tg;function GFe(e){if(typeof e=="string"||KFe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var fS=GFe,QFe=Cre,YFe=fS;function XFe(e,t){t=QFe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[YFe(t[n++])];return n&&n==r?e:void 0}var LI=XFe,ZFe=LI;function JFe(e,t,n){var r=e==null?void 0:ZFe(e,t);return r===void 0?n:r}var kre=JFe;const ga=yn(kre);function eLe(e){return e==null}var tLe=eLe;const qt=yn(tLe);var nLe=bc,rLe=Yi,sLe=jc,iLe="[object String]";function aLe(e){return typeof e=="string"||!rLe(e)&&sLe(e)&&nLe(e)==iLe}var oLe=aLe;const nb=yn(oLe);var Pre={exports:{}},Mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=Symbol.for("react.element"),BI=Symbol.for("react.portal"),hS=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),lLe=Symbol.for("react.server_context"),vS=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),bS=Symbol.for("react.suspense_list"),jS=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),cLe=Symbol.for("react.offscreen"),Ere;Ere=Symbol.for("react.module.reference");function ro(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zI:switch(e=e.type,e){case hS:case pS:case mS:case yS:case bS:return e;default:switch(e=e&&e.$$typeof,e){case lLe:case xS:case vS:case wS:case jS:case gS:return e;default:return t}}case BI:return t}}}Mn.ContextConsumer=xS;Mn.ContextProvider=gS;Mn.Element=zI;Mn.ForwardRef=vS;Mn.Fragment=hS;Mn.Lazy=wS;Mn.Memo=jS;Mn.Portal=BI;Mn.Profiler=pS;Mn.StrictMode=mS;Mn.Suspense=yS;Mn.SuspenseList=bS;Mn.isAsyncMode=function(){return!1};Mn.isConcurrentMode=function(){return!1};Mn.isContextConsumer=function(e){return ro(e)===xS};Mn.isContextProvider=function(e){return ro(e)===gS};Mn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zI};Mn.isForwardRef=function(e){return ro(e)===vS};Mn.isFragment=function(e){return ro(e)===hS};Mn.isLazy=function(e){return ro(e)===wS};Mn.isMemo=function(e){return ro(e)===jS};Mn.isPortal=function(e){return ro(e)===BI};Mn.isProfiler=function(e){return ro(e)===pS};Mn.isStrictMode=function(e){return ro(e)===mS};Mn.isSuspense=function(e){return ro(e)===yS};Mn.isSuspenseList=function(e){return ro(e)===bS};Mn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hS||e===pS||e===mS||e===yS||e===bS||e===cLe||typeof e=="object"&&e!==null&&(e.$$typeof===wS||e.$$typeof===jS||e.$$typeof===gS||e.$$typeof===xS||e.$$typeof===vS||e.$$typeof===Ere||e.getModuleId!==void 0)};Mn.typeOf=ro;Pre.exports=Mn;var uLe=Pre.exports,dLe=bc,fLe=jc,hLe="[object Number]";function mLe(e){return typeof e=="number"||fLe(e)&&dLe(e)==hLe}var _re=mLe;const pLe=yn(_re);var gLe=_re;function xLe(e){return gLe(e)&&e!=+e}var vLe=xLe;const ag=yn(vLe);var pi=function(t){return t===0?0:t>0?1:-1},Fd=function(t){return nb(t)&&t.indexOf("%")===t.length-1},Ge=function(t){return pLe(t)&&!ag(t)},as=function(t){return Ge(t)||nb(t)},yLe=0,Gf=function(t){var n=++yLe;return"".concat(t||"").concat(n)},gi=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ge(t)&&!nb(t))return r;var a;if(Fd(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return ag(a)&&(a=r),i&&a>n&&(a=n),a},Qc=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},bLe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},ss=function(t,n){return Ge(t)&&Ge(n)?function(r){return t+r*(n-t)}:function(){return n}};function Aw(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):ga(r,t))===n})}function cm(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function o_(e){"@babel/helpers - typeof";return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o_(e)}var jLe=["viewBox","children"],wLe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],F3=["points","pathLength"],Gk={svg:jLe,polygon:F3,polyline:F3},VI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Tw=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),!ng(r))return null;var i={};return Object.keys(r).forEach(function(a){VI.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},NLe=function(t,n,r){return function(i){return t(n,r,i),null}},Df=function(t,n,r){if(!ng(t)||o_(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];VI.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=NLe(o,n,r))}),i},SLe=["children"],CLe=["children"];function L3(e,t){if(e==null)return{};var n=kLe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function l_(e){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l_(e)}var z3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Jl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},B3=null,Qk=null,qI=function e(t){if(t===B3&&Array.isArray(Qk))return Qk;var n=[];return x.Children.forEach(t,function(r){qt(r)||(uLe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Qk=n,B3=t,n};function xa(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return Jl(i)}):r=[Jl(t)],qI(e).forEach(function(i){var a=ga(i,"type.displayName")||ga(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function sa(e,t){var n=xa(e,t);return n&&n[0]}var V3=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!Ge(r)||r<=0||!Ge(i)||i<=0)},PLe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ELe=function(t){return t&&t.type&&nb(t.type)&&PLe.indexOf(t.type)>=0},Are=function(t){return t&&l_(t)==="object"&&"clipDot"in t},_Le=function(t,n,r,i){var a,o=(a=Gk==null?void 0:Gk[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Ot(t)&&(i&&o.includes(n)||wLe.includes(n))||r&&VI.includes(n)},yt=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(x.isValidElement(t)&&(i=t.props),!ng(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;_Le((l=i)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=i[o])}),a},c_=function e(t,n){if(t===n)return!0;var r=x.Children.count(t);if(r!==x.Children.count(n))return!1;if(r===0)return!0;if(r===1)return q3(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!q3(a,o))return!1}return!0},q3=function(t,n){if(qt(t)&&qt(n))return!0;if(!qt(t)&&!qt(n)){var r=t.props||{},i=r.children,a=L3(r,SLe),o=n.props||{},l=o.children,c=L3(o,CLe);return i&&l?cm(a,c)&&c_(i,l):!i&&!l?cm(a,c):!1}return!1},U3=function(t,n){var r=[],i={};return qI(t).forEach(function(a,o){if(ELe(a))r.push(a);else if(a){var l=Jl(a.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(a,l,o);r.push(f),i[l]=!0}}}),r},ALe=function(t){var n=t&&t.type;return n&&z3[n]?z3[n]:null},TLe=function(t,n){return qI(n).indexOf(t)},DLe=["children","width","height","viewBox","className","style","title","desc"];function u_(){return u_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u_.apply(this,arguments)}function OLe(e,t){if(e==null)return{};var n=ILe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ILe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function d_(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,u=OLe(e,DLe),d=i||{width:n,height:r,x:0,y:0},f=Ut("recharts-surface",a);return Q.createElement("svg",u_({},yt(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Q.createElement("title",null,l),Q.createElement("desc",null,c),t)}var MLe=["children","className"];function f_(){return f_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f_.apply(this,arguments)}function RLe(e,t){if(e==null)return{};var n=$Le(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Le(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var cn=Q.forwardRef(function(e,t){var n=e.children,r=e.className,i=RLe(e,MLe),a=Ut("recharts-layer",r);return Q.createElement("g",f_({className:a},yt(i,!0),{ref:t}),n)}),Po=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function FLe(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var LLe=FLe,zLe=LLe;function BLe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:zLe(e,t,n)}var VLe=BLe,qLe="\\ud800-\\udfff",ULe="\\u0300-\\u036f",WLe="\\ufe20-\\ufe2f",HLe="\\u20d0-\\u20ff",KLe=ULe+WLe+HLe,GLe="\\ufe0e\\ufe0f",QLe="\\u200d",YLe=RegExp("["+QLe+qLe+KLe+GLe+"]");function XLe(e){return YLe.test(e)}var Tre=XLe;function ZLe(e){return e.split("")}var JLe=ZLe,Dre="\\ud800-\\udfff",e3e="\\u0300-\\u036f",t3e="\\ufe20-\\ufe2f",n3e="\\u20d0-\\u20ff",r3e=e3e+t3e+n3e,s3e="\\ufe0e\\ufe0f",i3e="["+Dre+"]",h_="["+r3e+"]",m_="\\ud83c[\\udffb-\\udfff]",a3e="(?:"+h_+"|"+m_+")",Ore="[^"+Dre+"]",Ire="(?:\\ud83c[\\udde6-\\uddff]){2}",Mre="[\\ud800-\\udbff][\\udc00-\\udfff]",o3e="\\u200d",Rre=a3e+"?",$re="["+s3e+"]?",l3e="(?:"+o3e+"(?:"+[Ore,Ire,Mre].join("|")+")"+$re+Rre+")*",c3e=$re+Rre+l3e,u3e="(?:"+[Ore+h_+"?",h_,Ire,Mre,i3e].join("|")+")",d3e=RegExp(m_+"(?="+m_+")|"+u3e+c3e,"g");function f3e(e){return e.match(d3e)||[]}var h3e=f3e,m3e=JLe,p3e=Tre,g3e=h3e;function x3e(e){return p3e(e)?g3e(e):m3e(e)}var v3e=x3e,y3e=VLe,b3e=Tre,j3e=v3e,w3e=Sre;function N3e(e){return function(t){t=w3e(t);var n=b3e(t)?j3e(t):void 0,r=n?n[0]:t.charAt(0),i=n?y3e(n,1).join(""):t.slice(1);return r[e]()+i}}var S3e=N3e,C3e=S3e,k3e=C3e("toUpperCase"),P3e=k3e;const NS=yn(P3e);function Gn(e){return function(){return e}}const Fre=Math.cos,Dw=Math.sin,Fo=Math.sqrt,Ow=Math.PI,SS=2*Ow,p_=Math.PI,g_=2*p_,kd=1e-6,E3e=g_-kd;function Lre(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _3e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Lre;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class A3e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Lre:_3e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-t,u=i-n,d=o-t,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>kd)if(!(Math.abs(f*c-u*d)>kd)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=i-l,p=c*c+u*u,v=m*m+g*g,b=Math.sqrt(p),y=Math.sqrt(h),j=a*Math.tan((p_-Math.acos((p+h-v)/(2*b*y)))/2),N=j/y,w=j/b;Math.abs(N-1)>kd&&this._append`L${t+N*d},${n+N*f}`,this._append`A${a},${a},0,0,${+(f*m>d*g)},${this._x1=t+w*c},${this._y1=n+w*u}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=t+l,d=n+c,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>kd||Math.abs(this._y1-d)>kd)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%g_+g_),h>E3e?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>kd&&this._append`A${r},${r},0,${+(h>=p_)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function UI(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new A3e(t)}function WI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zre(e){this._context=e}zre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function CS(e){return new zre(e)}function Bre(e){return e[0]}function Vre(e){return e[1]}function qre(e,t){var n=Gn(!0),r=null,i=CS,a=null,o=UI(l);e=typeof e=="function"?e:e===void 0?Bre:Gn(e),t=typeof t=="function"?t:t===void 0?Vre:Gn(t);function l(c){var u,d=(c=WI(c)).length,f,h=!1,m;for(r==null&&(a=i(m=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,c),+t(f,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Gn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Gn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Gn(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function aj(e,t,n){var r=null,i=Gn(!0),a=null,o=CS,l=null,c=UI(u);e=typeof e=="function"?e:e===void 0?Bre:Gn(+e),t=typeof t=="function"?t:Gn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Vre:Gn(+n);function u(f){var h,m,g,p=(f=WI(f)).length,v,b=!1,y,j=new Array(p),N=new Array(p);for(a==null&&(l=o(y=c())),h=0;h<=p;++h){if(!(h<p&&i(v=f[h],h,f))===b)if(b=!b)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(j[g],N[g]);l.lineEnd(),l.areaEnd()}b&&(j[h]=+e(v,h,f),N[h]=+t(v,h,f),l.point(r?+r(v,h,f):j[h],n?+n(v,h,f):N[h]))}if(y)return l=null,y+""||null}function d(){return qre().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Gn(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Gn(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Gn(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Gn(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Gn(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(l=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=l=null:l=o(a=f),u):a},u}class Ure{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function T3e(e){return new Ure(e,!0)}function D3e(e){return new Ure(e,!1)}const HI={draw(e,t){const n=Fo(t/Ow);e.moveTo(n,0),e.arc(0,0,n,0,SS)}},O3e={draw(e,t){const n=Fo(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Wre=Fo(1/3),I3e=Wre*2,M3e={draw(e,t){const n=Fo(t/I3e),r=n*Wre;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},R3e={draw(e,t){const n=Fo(t),r=-n/2;e.rect(r,r,n,n)}},$3e=.8908130915292852,Hre=Dw(Ow/10)/Dw(7*Ow/10),F3e=Dw(SS/10)*Hre,L3e=-Fre(SS/10)*Hre,z3e={draw(e,t){const n=Fo(t*$3e),r=F3e*n,i=L3e*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=SS*a/5,l=Fre(o),c=Dw(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*i,c*r+l*i)}e.closePath()}},Yk=Fo(3),B3e={draw(e,t){const n=-Fo(t/(Yk*3));e.moveTo(0,n*2),e.lineTo(-Yk*n,-n),e.lineTo(Yk*n,-n),e.closePath()}},Ea=-.5,_a=Fo(3)/2,x_=1/Fo(12),V3e=(x_/2+1)*3,q3e={draw(e,t){const n=Fo(t/V3e),r=n/2,i=n*x_,a=r,o=n*x_+n,l=-a,c=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(Ea*r-_a*i,_a*r+Ea*i),e.lineTo(Ea*a-_a*o,_a*a+Ea*o),e.lineTo(Ea*l-_a*c,_a*l+Ea*c),e.lineTo(Ea*r+_a*i,Ea*i-_a*r),e.lineTo(Ea*a+_a*o,Ea*o-_a*a),e.lineTo(Ea*l+_a*c,Ea*c-_a*l),e.closePath()}};function U3e(e,t){let n=null,r=UI(i);e=typeof e=="function"?e:Gn(e||HI),t=typeof t=="function"?t:Gn(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Gn(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Gn(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Iw(){}function Mw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Kre(e){this._context=e}Kre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function W3e(e){return new Kre(e)}function Gre(e){this._context=e}Gre.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H3e(e){return new Gre(e)}function Qre(e){this._context=e}Qre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K3e(e){return new Qre(e)}function Yre(e){this._context=e}Yre.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function G3e(e){return new Yre(e)}function W3(e){return e<0?-1:1}function H3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(W3(a)+W3(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function K3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Xk(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Rw(e){this._context=e}Rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xk(this,this._t0,K3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xk(this,K3(this,n=H3(this,e,t)),n);break;default:Xk(this,this._t0,n=H3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Xre(e){this._context=new Zre(e)}(Xre.prototype=Object.create(Rw.prototype)).point=function(e,t){Rw.prototype.point.call(this,t,e)};function Zre(e){this._context=e}Zre.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Q3e(e){return new Rw(e)}function Y3e(e){return new Xre(e)}function Jre(e){this._context=e}Jre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=G3(e),i=G3(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function G3(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function X3e(e){return new Jre(e)}function kS(e,t){this._context=e,this._t=t}kS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Z3e(e){return new kS(e,.5)}function J3e(e){return new kS(e,0)}function e5e(e){return new kS(e,1)}function rp(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function v_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function t5e(e,t){return e[t]}function n5e(e){const t=[];return t.key=e,t}function r5e(){var e=Gn([]),t=v_,n=rp,r=t5e;function i(a){var o=Array.from(e.apply(this,arguments),n5e),l,c=o.length,u=-1,d;for(const f of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(f,o[l].key,u,a)]).data=f;for(l=0,d=WI(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Gn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Gn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?v_:typeof a=="function"?a:Gn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??rp,i):n},i}function s5e(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}rp(e,t)}}function i5e(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}rp(e,t)}}function a5e(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[r][1]||0,h=d[r-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],v=p[r][1]||0,b=p[r-1][1]||0;m+=v-b}c+=f,u+=m*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,rp(e,t)}}function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}var o5e=["type","size","sizeType"];function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y_.apply(this,arguments)}function Q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(n),!0).forEach(function(r){l5e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l5e(e,t,n){return t=c5e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c5e(e){var t=u5e(e,"string");return Fv(t)=="symbol"?t:t+""}function u5e(e,t){if(Fv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d5e(e,t){if(e==null)return{};var n=f5e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f5e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var ese={symbolCircle:HI,symbolCross:O3e,symbolDiamond:M3e,symbolSquare:R3e,symbolStar:z3e,symbolTriangle:B3e,symbolWye:q3e},h5e=Math.PI/180,m5e=function(t){var n="symbol".concat(NS(t));return ese[n]||HI},p5e=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*h5e;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},g5e=function(t,n){ese["symbol".concat(NS(t))]=n},KI=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=d5e(t,o5e),u=Y3(Y3({},c),{},{type:r,size:a,sizeType:l}),d=function(){var v=m5e(r),b=U3e().type(v).size(p5e(a,l,r));return b()},f=u.className,h=u.cx,m=u.cy,g=yt(u,!0);return h===+h&&m===+m&&a===+a?Q.createElement("path",y_({},g,{className:Ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};KI.registerSymbol=g5e;function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b_.apply(this,arguments)}function X3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function x5e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(n),!0).forEach(function(r){Lv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nse(r.key),r)}}function b5e(e,t,n){return t&&y5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j5e(e,t,n){return t=$w(t),w5e(e,tse()?Reflect.construct(t,n||[],$w(e).constructor):t.apply(e,n))}function w5e(e,t){if(t&&(sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N5e(e)}function N5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tse=function(){return!!e})()}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(e)}function S5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j_(e,t)}function j_(e,t){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j_(e,t)}function Lv(e,t,n){return t=nse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nse(e){var t=C5e(e,"string");return sp(t)=="symbol"?t:t+""}function C5e(e,t){if(sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Aa=32,GI=function(e){function t(){return v5e(this,t),j5e(this,t,arguments)}return S5e(t,e),b5e(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Aa/2,o=Aa/6,l=Aa/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Aa,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Aa,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Aa/8,"h").concat(Aa,"v").concat(Aa*3/4,"h").concat(-Aa,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(r.legendIcon)){var u=x5e({},r);return delete u.legendIcon,Q.cloneElement(r.legendIcon,u)}return Q.createElement(KI,{fill:c,cx:a,cy:a,size:Aa,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Aa,height:Aa},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,g){var p=m.formatter||c,v=Ut(Lv(Lv({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Ot(m.value)?null:m.value;Po(!Ot(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return Q.createElement("li",b_({className:v,style:f,key:"legend-item-".concat(g)},Df(r.props,m,g)),Q.createElement(d_,{width:o,height:o,viewBox:d,style:h},r.renderIcon(m)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(b,m,g):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Lv(GI,"displayName","Legend");Lv(GI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var k5e=uS;function P5e(){this.__data__=new k5e,this.size=0}var E5e=P5e;function _5e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var A5e=_5e;function T5e(e){return this.__data__.get(e)}var D5e=T5e;function O5e(e){return this.__data__.has(e)}var I5e=O5e,M5e=uS,R5e=MI,$5e=RI,F5e=200;function L5e(e,t){var n=this.__data__;if(n instanceof M5e){var r=n.__data__;if(!R5e||r.length<F5e-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $5e(r)}return n.set(e,t),this.size=n.size,this}var z5e=L5e,B5e=uS,V5e=E5e,q5e=A5e,U5e=D5e,W5e=I5e,H5e=z5e;function og(e){var t=this.__data__=new B5e(e);this.size=t.size}og.prototype.clear=V5e;og.prototype.delete=q5e;og.prototype.get=U5e;og.prototype.has=W5e;og.prototype.set=H5e;var rse=og,K5e="__lodash_hash_undefined__";function G5e(e){return this.__data__.set(e,K5e),this}var Q5e=G5e;function Y5e(e){return this.__data__.has(e)}var X5e=Y5e,Z5e=RI,J5e=Q5e,eze=X5e;function Fw(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Z5e;++t<n;)this.add(e[t])}Fw.prototype.add=Fw.prototype.push=J5e;Fw.prototype.has=eze;var sse=Fw;function tze(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var ise=tze;function nze(e,t){return e.has(t)}var ase=nze,rze=sse,sze=ise,ize=ase,aze=1,oze=2;function lze(e,t,n,r,i,a){var o=n&aze,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=n&oze?new rze:void 0;for(a.set(e,t),a.set(t,e);++f<l;){var g=e[f],p=t[f];if(r)var v=o?r(p,g,f,t,e,a):r(g,p,f,e,t,a);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!sze(t,function(b,y){if(!ize(m,y)&&(g===b||i(g,b,n,r,a)))return m.push(y)})){h=!1;break}}else if(!(g===p||i(g,p,n,r,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var ose=lze,cze=jl,uze=cze.Uint8Array,dze=uze;function fze(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var hze=fze;function mze(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var QI=mze,Z3=tb,J3=dze,pze=II,gze=ose,xze=hze,vze=QI,yze=1,bze=2,jze="[object Boolean]",wze="[object Date]",Nze="[object Error]",Sze="[object Map]",Cze="[object Number]",kze="[object RegExp]",Pze="[object Set]",Eze="[object String]",_ze="[object Symbol]",Aze="[object ArrayBuffer]",Tze="[object DataView]",e5=Z3?Z3.prototype:void 0,Zk=e5?e5.valueOf:void 0;function Dze(e,t,n,r,i,a,o){switch(n){case Tze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Aze:return!(e.byteLength!=t.byteLength||!a(new J3(e),new J3(t)));case jze:case wze:case Cze:return pze(+e,+t);case Nze:return e.name==t.name&&e.message==t.message;case kze:case Eze:return e==t+"";case Sze:var l=xze;case Pze:var c=r&yze;if(l||(l=vze),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=bze,o.set(e,t);var d=gze(l(e),l(t),r,i,a,o);return o.delete(e),d;case _ze:if(Zk)return Zk.call(e)==Zk.call(t)}return!1}var Oze=Dze;function Ize(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var lse=Ize,Mze=lse,Rze=Yi;function $ze(e,t,n){var r=t(e);return Rze(e)?r:Mze(r,n(e))}var Fze=$ze;function Lze(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var zze=Lze;function Bze(){return[]}var Vze=Bze,qze=zze,Uze=Vze,Wze=Object.prototype,Hze=Wze.propertyIsEnumerable,t5=Object.getOwnPropertySymbols,Kze=t5?function(e){return e==null?[]:(e=Object(e),qze(t5(e),function(t){return Hze.call(e,t)}))}:Uze,Gze=Kze;function Qze(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Yze=Qze,Xze=bc,Zze=jc,Jze="[object Arguments]";function eBe(e){return Zze(e)&&Xze(e)==Jze}var tBe=eBe,n5=tBe,nBe=jc,cse=Object.prototype,rBe=cse.hasOwnProperty,sBe=cse.propertyIsEnumerable,iBe=n5(function(){return arguments}())?n5:function(e){return nBe(e)&&rBe.call(e,"callee")&&!sBe.call(e,"callee")},YI=iBe,Lw={exports:{}};function aBe(){return!1}var oBe=aBe;Lw.exports;(function(e,t){var n=jl,r=oBe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Lw,Lw.exports);var use=Lw.exports,lBe=9007199254740991,cBe=/^(?:0|[1-9]\d*)$/;function uBe(e,t){var n=typeof e;return t=t??lBe,!!t&&(n=="number"||n!="symbol"&&cBe.test(e))&&e>-1&&e%1==0&&e<t}var XI=uBe,dBe=9007199254740991;function fBe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dBe}var ZI=fBe,hBe=bc,mBe=ZI,pBe=jc,gBe="[object Arguments]",xBe="[object Array]",vBe="[object Boolean]",yBe="[object Date]",bBe="[object Error]",jBe="[object Function]",wBe="[object Map]",NBe="[object Number]",SBe="[object Object]",CBe="[object RegExp]",kBe="[object Set]",PBe="[object String]",EBe="[object WeakMap]",_Be="[object ArrayBuffer]",ABe="[object DataView]",TBe="[object Float32Array]",DBe="[object Float64Array]",OBe="[object Int8Array]",IBe="[object Int16Array]",MBe="[object Int32Array]",RBe="[object Uint8Array]",$Be="[object Uint8ClampedArray]",FBe="[object Uint16Array]",LBe="[object Uint32Array]",nr={};nr[TBe]=nr[DBe]=nr[OBe]=nr[IBe]=nr[MBe]=nr[RBe]=nr[$Be]=nr[FBe]=nr[LBe]=!0;nr[gBe]=nr[xBe]=nr[_Be]=nr[vBe]=nr[ABe]=nr[yBe]=nr[bBe]=nr[jBe]=nr[wBe]=nr[NBe]=nr[SBe]=nr[CBe]=nr[kBe]=nr[PBe]=nr[EBe]=!1;function zBe(e){return pBe(e)&&mBe(e.length)&&!!nr[hBe(e)]}var BBe=zBe;function VBe(e){return function(t){return e(t)}}var dse=VBe,zw={exports:{}};zw.exports;(function(e,t){var n=vre,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(zw,zw.exports);var qBe=zw.exports,UBe=BBe,WBe=dse,r5=qBe,s5=r5&&r5.isTypedArray,HBe=s5?WBe(s5):UBe,fse=HBe,KBe=Yze,GBe=YI,QBe=Yi,YBe=use,XBe=XI,ZBe=fse,JBe=Object.prototype,e6e=JBe.hasOwnProperty;function t6e(e,t){var n=QBe(e),r=!n&&GBe(e),i=!n&&!r&&YBe(e),a=!n&&!r&&!i&&ZBe(e),o=n||r||i||a,l=o?KBe(e.length,String):[],c=l.length;for(var u in e)(t||e6e.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||XBe(u,c)))&&l.push(u);return l}var n6e=t6e,r6e=Object.prototype;function s6e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||r6e;return e===n}var i6e=s6e;function a6e(e,t){return function(n){return e(t(n))}}var hse=a6e,o6e=hse,l6e=o6e(Object.keys,Object),c6e=l6e,u6e=i6e,d6e=c6e,f6e=Object.prototype,h6e=f6e.hasOwnProperty;function m6e(e){if(!u6e(e))return d6e(e);var t=[];for(var n in Object(e))h6e.call(e,n)&&n!="constructor"&&t.push(n);return t}var p6e=m6e,g6e=OI,x6e=ZI;function v6e(e){return e!=null&&x6e(e.length)&&!g6e(e)}var rb=v6e,y6e=n6e,b6e=p6e,j6e=rb;function w6e(e){return j6e(e)?y6e(e):b6e(e)}var PS=w6e,N6e=Fze,S6e=Gze,C6e=PS;function k6e(e){return N6e(e,C6e,S6e)}var P6e=k6e,i5=P6e,E6e=1,_6e=Object.prototype,A6e=_6e.hasOwnProperty;function T6e(e,t,n,r,i,a){var o=n&E6e,l=i5(e),c=l.length,u=i5(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:A6e.call(t,h)))return!1}var m=a.get(e),g=a.get(t);if(m&&g)return m==t&&g==e;var p=!0;a.set(e,t),a.set(t,e);for(var v=o;++f<c;){h=l[f];var b=e[h],y=t[h];if(r)var j=o?r(y,b,h,t,e,a):r(b,y,h,e,t,a);if(!(j===void 0?b===y||i(b,y,n,r,a):j)){p=!1;break}v||(v=h=="constructor")}if(p&&!v){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(p=!1)}return a.delete(e),a.delete(t),p}var D6e=T6e,O6e=Kf,I6e=jl,M6e=O6e(I6e,"DataView"),R6e=M6e,$6e=Kf,F6e=jl,L6e=$6e(F6e,"Promise"),z6e=L6e,B6e=Kf,V6e=jl,q6e=B6e(V6e,"Set"),mse=q6e,U6e=Kf,W6e=jl,H6e=U6e(W6e,"WeakMap"),K6e=H6e,w_=R6e,N_=MI,S_=z6e,C_=mse,k_=K6e,pse=bc,lg=bre,a5="[object Map]",G6e="[object Object]",o5="[object Promise]",l5="[object Set]",c5="[object WeakMap]",u5="[object DataView]",Q6e=lg(w_),Y6e=lg(N_),X6e=lg(S_),Z6e=lg(C_),J6e=lg(k_),Pd=pse;(w_&&Pd(new w_(new ArrayBuffer(1)))!=u5||N_&&Pd(new N_)!=a5||S_&&Pd(S_.resolve())!=o5||C_&&Pd(new C_)!=l5||k_&&Pd(new k_)!=c5)&&(Pd=function(e){var t=pse(e),n=t==G6e?e.constructor:void 0,r=n?lg(n):"";if(r)switch(r){case Q6e:return u5;case Y6e:return a5;case X6e:return o5;case Z6e:return l5;case J6e:return c5}return t});var eVe=Pd,Jk=rse,tVe=ose,nVe=Oze,rVe=D6e,d5=eVe,f5=Yi,h5=use,sVe=fse,iVe=1,m5="[object Arguments]",p5="[object Array]",oj="[object Object]",aVe=Object.prototype,g5=aVe.hasOwnProperty;function oVe(e,t,n,r,i,a){var o=f5(e),l=f5(t),c=o?p5:d5(e),u=l?p5:d5(t);c=c==m5?oj:c,u=u==m5?oj:u;var d=c==oj,f=u==oj,h=c==u;if(h&&h5(e)){if(!h5(t))return!1;o=!0,d=!1}if(h&&!d)return a||(a=new Jk),o||sVe(e)?tVe(e,t,n,r,i,a):nVe(e,t,c,n,r,i,a);if(!(n&iVe)){var m=d&&g5.call(e,"__wrapped__"),g=f&&g5.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,v=g?t.value():t;return a||(a=new Jk),i(p,v,n,r,a)}}return h?(a||(a=new Jk),rVe(e,t,n,r,i,a)):!1}var lVe=oVe,cVe=lVe,x5=jc;function gse(e,t,n,r,i){return e===t?!0:e==null||t==null||!x5(e)&&!x5(t)?e!==e&&t!==t:cVe(e,t,n,r,gse,i)}var JI=gse,uVe=rse,dVe=JI,fVe=1,hVe=2;function mVe(e,t,n,r){var i=n.length,a=i,o=!r;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new uVe;if(r)var h=r(u,d,c,e,t,f);if(!(h===void 0?dVe(d,u,fVe|hVe,r,f):h))return!1}}return!0}var pVe=mVe,gVe=nd;function xVe(e){return e===e&&!gVe(e)}var xse=xVe,vVe=xse,yVe=PS;function bVe(e){for(var t=yVe(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,vVe(i)]}return t}var jVe=bVe;function wVe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var vse=wVe,NVe=pVe,SVe=jVe,CVe=vse;function kVe(e){var t=SVe(e);return t.length==1&&t[0][2]?CVe(t[0][0],t[0][1]):function(n){return n===e||NVe(n,e,t)}}var PVe=kVe;function EVe(e,t){return e!=null&&t in Object(e)}var _Ve=EVe,AVe=Cre,TVe=YI,DVe=Yi,OVe=XI,IVe=ZI,MVe=fS;function RVe(e,t,n){t=AVe(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=MVe(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&IVe(i)&&OVe(o,i)&&(DVe(e)||TVe(e)))}var $Ve=RVe,FVe=_Ve,LVe=$Ve;function zVe(e,t){return e!=null&&LVe(e,t,FVe)}var BVe=zVe,VVe=JI,qVe=kre,UVe=BVe,WVe=DI,HVe=xse,KVe=vse,GVe=fS,QVe=1,YVe=2;function XVe(e,t){return WVe(e)&&HVe(t)?KVe(GVe(e),t):function(n){var r=qVe(n,e);return r===void 0&&r===t?UVe(n,e):VVe(t,r,QVe|YVe)}}var ZVe=XVe;function JVe(e){return e}var cg=JVe;function e8e(e){return function(t){return t==null?void 0:t[e]}}var t8e=e8e,n8e=LI;function r8e(e){return function(t){return n8e(t,e)}}var s8e=r8e,i8e=t8e,a8e=s8e,o8e=DI,l8e=fS;function c8e(e){return o8e(e)?i8e(l8e(e)):a8e(e)}var u8e=c8e,d8e=PVe,f8e=ZVe,h8e=cg,m8e=Yi,p8e=u8e;function g8e(e){return typeof e=="function"?e:e==null?h8e:typeof e=="object"?m8e(e)?f8e(e[0],e[1]):d8e(e):p8e(e)}var wl=g8e;function x8e(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var yse=x8e;function v8e(e){return e!==e}var y8e=v8e;function b8e(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var j8e=b8e,w8e=yse,N8e=y8e,S8e=j8e;function C8e(e,t,n){return t===t?S8e(e,t,n):w8e(e,N8e,n)}var k8e=C8e,P8e=k8e;function E8e(e,t){var n=e==null?0:e.length;return!!n&&P8e(e,t,0)>-1}var _8e=E8e;function A8e(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var T8e=A8e;function D8e(){}var O8e=D8e,eP=mse,I8e=O8e,M8e=QI,R8e=1/0,$8e=eP&&1/M8e(new eP([,-0]))[1]==R8e?function(e){return new eP(e)}:I8e,F8e=$8e,L8e=sse,z8e=_8e,B8e=T8e,V8e=ase,q8e=F8e,U8e=QI,W8e=200;function H8e(e,t,n){var r=-1,i=z8e,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=B8e;else if(a>=W8e){var u=t?null:q8e(e);if(u)return U8e(u);o=!1,i=V8e,c=new L8e}else c=t?[]:l;e:for(;++r<a;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else i(c,f,n)||(c!==l&&c.push(f),l.push(d))}return l}var K8e=H8e,G8e=wl,Q8e=K8e;function Y8e(e,t){return e&&e.length?Q8e(e,G8e(t)):[]}var X8e=Y8e;const v5=yn(X8e);function bse(e,t,n){return t===!0?v5(e,n):Ot(t)?v5(e,t):e}function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}var Z8e=["ref"];function y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y5(Object(n),!0).forEach(function(r){ES(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wse(r.key),r)}}function eqe(e,t,n){return t&&b5(e.prototype,t),n&&b5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tqe(e,t,n){return t=Bw(t),nqe(e,jse()?Reflect.construct(t,n||[],Bw(e).constructor):t.apply(e,n))}function nqe(e,t){if(t&&(ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rqe(e)}function rqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jse=function(){return!!e})()}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(e)}function sqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P_(e,t)}function P_(e,t){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P_(e,t)}function ES(e,t,n){return t=wse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wse(e){var t=iqe(e,"string");return ip(t)=="symbol"?t:t+""}function iqe(e,t){if(ip(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function aqe(e,t){if(e==null)return{};var n=oqe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oqe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lqe(e){return e.value}function cqe(e,t){if(Q.isValidElement(e))return Q.cloneElement(e,t);if(typeof e=="function")return Q.createElement(e,t);t.ref;var n=aqe(t,Z8e);return Q.createElement(GI,n)}var j5=1,Nu=function(e){function t(){var n;J8e(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=tqe(this,t,[].concat(i)),ES(n,"lastBoundingBox",{width:-1,height:-1}),n}return sqe(t,e),eqe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>j5||Math.abs(i.height-this.lastBoundingBox.height)>j5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?kl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return kl(kl({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=kl(kl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},cqe(a,kl(kl({},this.props),{},{payload:bse(d,u,lqe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=kl(kl({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Ge(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(x.PureComponent);ES(Nu,"displayName","Legend");ES(Nu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var w5=tb,uqe=YI,dqe=Yi,N5=w5?w5.isConcatSpreadable:void 0;function fqe(e){return dqe(e)||uqe(e)||!!(N5&&e&&e[N5])}var hqe=fqe,mqe=lse,pqe=hqe;function Nse(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=pqe),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?Nse(l,t-1,n,r,i):mqe(i,l):r||(i[i.length]=l)}return i}var Sse=Nse;function gqe(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var xqe=gqe,vqe=xqe,yqe=vqe(),bqe=yqe,jqe=bqe,wqe=PS;function Nqe(e,t){return e&&jqe(e,t,wqe)}var Cse=Nqe,Sqe=rb;function Cqe(e,t){return function(n,r){if(n==null)return n;if(!Sqe(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var kqe=Cqe,Pqe=Cse,Eqe=kqe,_qe=Eqe(Pqe),eM=_qe,Aqe=eM,Tqe=rb;function Dqe(e,t){var n=-1,r=Tqe(e)?Array(e.length):[];return Aqe(e,function(i,a,o){r[++n]=t(i,a,o)}),r}var kse=Dqe;function Oqe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Iqe=Oqe,S5=tg;function Mqe(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,a=S5(e),o=t!==void 0,l=t===null,c=t===t,u=S5(t);if(!l&&!u&&!a&&e>t||a&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var Rqe=Mqe,$qe=Rqe;function Fqe(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++r<o;){var c=$qe(i[r],a[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Lqe=Fqe,tP=FI,zqe=LI,Bqe=wl,Vqe=kse,qqe=Iqe,Uqe=dse,Wqe=Lqe,Hqe=cg,Kqe=Yi;function Gqe(e,t,n){t.length?t=tP(t,function(a){return Kqe(a)?function(o){return zqe(o,a.length===1?a[0]:a)}:a}):t=[Hqe];var r=-1;t=tP(t,Uqe(Bqe));var i=Vqe(e,function(a,o,l){var c=tP(t,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return qqe(i,function(a,o){return Wqe(a,o,n)})}var Qqe=Gqe;function Yqe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Xqe=Yqe,Zqe=Xqe,C5=Math.max;function Jqe(e,t,n){return t=C5(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=C5(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(o),Zqe(e,this,l)}}var eUe=Jqe;function tUe(e){return function(){return e}}var nUe=tUe,rUe=Kf,sUe=function(){try{var e=rUe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Pse=sUe,iUe=nUe,k5=Pse,aUe=cg,oUe=k5?function(e,t){return k5(e,"toString",{configurable:!0,enumerable:!1,value:iUe(t),writable:!0})}:aUe,lUe=oUe,cUe=800,uUe=16,dUe=Date.now;function fUe(e){var t=0,n=0;return function(){var r=dUe(),i=uUe-(r-n);if(n=r,i>0){if(++t>=cUe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hUe=fUe,mUe=lUe,pUe=hUe,gUe=pUe(mUe),xUe=gUe,vUe=cg,yUe=eUe,bUe=xUe;function jUe(e,t){return bUe(yUe(e,t,vUe),e+"")}var wUe=jUe,NUe=II,SUe=rb,CUe=XI,kUe=nd;function PUe(e,t,n){if(!kUe(n))return!1;var r=typeof t;return(r=="number"?SUe(n)&&CUe(t,n.length):r=="string"&&t in n)?NUe(n[t],e):!1}var _S=PUe,EUe=Sse,_Ue=Qqe,AUe=wUe,P5=_S,TUe=AUe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&P5(e,t[0],t[1])?t=[]:n>2&&P5(t[0],t[1],t[2])&&(t=[t[0]]),_Ue(e,EUe(t,1),[])}),DUe=TUe;const tM=yn(DUe);function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E_.apply(this,arguments)}function OUe(e,t){return $Ue(e)||RUe(e,t)||MUe(e,t)||IUe()}function IUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MUe(e,t){if(e){if(typeof e=="string")return E5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E5(e,t)}}function E5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RUe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function $Ue(e){if(Array.isArray(e))return e}function _5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(n),!0).forEach(function(r){FUe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FUe(e,t,n){return t=LUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LUe(e){var t=zUe(e,"string");return zv(t)=="symbol"?t:t+""}function zUe(e,t){if(zv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BUe(e){return Array.isArray(e)&&as(e[0])&&as(e[1])?e.join(" ~ "):e}var VUe=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,b=t.accessibilityLayer,y=b===void 0?!1:b,j=function(){if(d&&d.length){var _={padding:0,margin:0},O=(h?tM(d,h):d).map(function(M,T){if(M.type==="none")return null;var R=nP({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),F=M.formatter||f||BUe,E=M.value,B=M.name,L=E,I=B;if(F&&L!=null&&I!=null){var q=F(E,B,M,T,d);if(Array.isArray(q)){var $=OUe(q,2);L=$[0],I=$[1]}else L=q}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:R},as(I)?Q.createElement("span",{className:"recharts-tooltip-item-name"},I):null,as(I)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},L),Q.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:_},O)}return null},N=nP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=nP({margin:0},u),S=!qt(p),k=S?p:"",C=Ut("recharts-default-tooltip",m),A=Ut("recharts-tooltip-label",g);S&&v&&d!==void 0&&d!==null&&(k=v(p,d));var D=y?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",E_({className:C,style:N},D),Q.createElement("p",{className:A,style:w},Q.isValidElement(k)?k:"".concat(k)),j())};function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function lj(e,t,n){return t=qUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qUe(e){var t=UUe(e,"string");return Bv(t)=="symbol"?t:t+""}function UUe(e,t){if(Bv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kg="recharts-tooltip-wrapper",WUe={visibility:"hidden"};function HUe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Ut(Kg,lj(lj(lj(lj({},"".concat(Kg,"-right"),Ge(n)&&t&&Ge(t.x)&&n>=t.x),"".concat(Kg,"-left"),Ge(n)&&t&&Ge(t.x)&&n<t.x),"".concat(Kg,"-bottom"),Ge(r)&&t&&Ge(t.y)&&r>=t.y),"".concat(Kg,"-top"),Ge(r)&&t&&Ge(t.y)&&r<t.y))}function A5(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(a&&Ge(a[r]))return a[r];var d=n[r]-l-i,f=n[r]+i;if(t[r])return o[r]?d:f;if(o[r]){var h=d,m=c[r];return h<m?Math.max(f,c[r]):Math.max(d,c[r])}var g=f+l,p=c[r]+u;return g>p?Math.max(d,c[r]):Math.max(f,c[r])}function KUe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function GUe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&n?(d=A5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=A5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=KUe({translateX:d,translateY:f,useTranslate3d:l})):u=WUe,{cssProperties:u,cssClasses:HUe({translateX:d,translateY:f,coordinate:n})}}function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(r){A_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_se(r.key),r)}}function XUe(e,t,n){return t&&YUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZUe(e,t,n){return t=Vw(t),JUe(e,Ese()?Reflect.construct(t,n||[],Vw(e).constructor):t.apply(e,n))}function JUe(e,t){if(t&&(ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e9e(e)}function e9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ese(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ese=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vw(e)}function t9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}function __(e,t){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},__(e,t)}function A_(e,t,n){return t=_se(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _se(e){var t=n9e(e,"string");return ap(t)=="symbol"?t:t+""}function n9e(e,t){if(ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var O5=1,r9e=function(e){function t(){var n;QUe(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ZUe(this,t,[].concat(i)),A_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),A_(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return t9e(t,e),XUe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>O5||Math.abs(r.height-this.state.lastBoundingBox.height)>O5)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,m=i.offset,g=i.position,p=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,y=i.wrapperStyle,j=GUe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),N=j.cssClasses,w=j.cssProperties,S=D5(D5({transition:h&&a?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return Q.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(C){r.wrapperNode=C}},u)}}])}(x.PureComponent),s9e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},rd={isSsr:s9e()};function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function M5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(r){nM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a9e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tse(r.key),r)}}function o9e(e,t,n){return t&&a9e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l9e(e,t,n){return t=qw(t),c9e(e,Ase()?Reflect.construct(t,n||[],qw(e).constructor):t.apply(e,n))}function c9e(e,t){if(t&&(op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u9e(e)}function u9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ase(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ase=function(){return!!e})()}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qw(e)}function d9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T_(e,t)}function T_(e,t){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T_(e,t)}function nM(e,t,n){return t=Tse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tse(e){var t=f9e(e,"string");return op(t)=="symbol"?t:t+""}function f9e(e,t){if(op(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function h9e(e){return e.dataKey}function m9e(e,t){return Q.isValidElement(e)?Q.cloneElement(e,t):typeof e=="function"?Q.createElement(e,t):Q.createElement(VUe,t)}var Qs=function(e){function t(){return i9e(this,t),l9e(this,t,arguments)}return d9e(t,e),o9e(t,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,m=i.offset,g=i.payload,p=i.payloadUniqBy,v=i.position,b=i.reverseDirection,y=i.useTranslate3d,j=i.viewBox,N=i.wrapperStyle,w=g??[];f&&w.length&&(w=bse(g.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),p,h9e));var S=w.length>0;return Q.createElement(r9e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:a,coordinate:d,hasPayload:S,offset:m,position:v,reverseDirection:b,useTranslate3d:y,viewBox:j,wrapperStyle:N},m9e(u,M5(M5({},this.props),{},{payload:w})))}}])}(x.PureComponent);nM(Qs,"displayName","Tooltip");nM(Qs,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var p9e=jl,g9e=function(){return p9e.Date.now()},x9e=g9e,v9e=/\s/;function y9e(e){for(var t=e.length;t--&&v9e.test(e.charAt(t)););return t}var b9e=y9e,j9e=b9e,w9e=/^\s+/;function N9e(e){return e&&e.slice(0,j9e(e)+1).replace(w9e,"")}var S9e=N9e,C9e=S9e,R5=nd,k9e=tg,$5=NaN,P9e=/^[-+]0x[0-9a-f]+$/i,E9e=/^0b[01]+$/i,_9e=/^0o[0-7]+$/i,A9e=parseInt;function T9e(e){if(typeof e=="number")return e;if(k9e(e))return $5;if(R5(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=R5(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=C9e(e);var n=E9e.test(e);return n||_9e.test(e)?A9e(e.slice(2),n?2:8):P9e.test(e)?$5:+e}var Dse=T9e,D9e=nd,rP=x9e,F5=Dse,O9e="Expected a function",I9e=Math.max,M9e=Math.min;function R9e(e,t,n){var r,i,a,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(O9e);t=F5(t)||0,D9e(n)&&(d=!!n.leading,f="maxWait"in n,a=f?I9e(F5(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h);function m(S){var k=r,C=i;return r=i=void 0,u=S,o=e.apply(C,k),o}function g(S){return u=S,l=setTimeout(b,t),d?m(S):o}function p(S){var k=S-c,C=S-u,A=t-k;return f?M9e(A,a-C):A}function v(S){var k=S-c,C=S-u;return c===void 0||k>=t||k<0||f&&C>=a}function b(){var S=rP();if(v(S))return y(S);l=setTimeout(b,p(S))}function y(S){return l=void 0,h&&r?m(S):(r=i=void 0,o)}function j(){l!==void 0&&clearTimeout(l),u=0,r=c=i=l=void 0}function N(){return l===void 0?o:y(rP())}function w(){var S=rP(),k=v(S);if(r=arguments,i=this,c=S,k){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(b,t),m(c)}return l===void 0&&(l=setTimeout(b,t)),o}return w.cancel=j,w.flush=N,w}var $9e=R9e,F9e=$9e,L9e=nd,z9e="Expected a function";function B9e(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(z9e);return L9e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),F9e(e,t,{leading:r,maxWait:t,trailing:i})}var V9e=B9e;const Ose=yn(V9e);function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function L5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(n),!0).forEach(function(r){q9e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q9e(e,t,n){return t=U9e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U9e(e){var t=W9e(e,"string");return Vv(t)=="symbol"?t:t+""}function W9e(e,t){if(Vv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H9e(e,t){return Y9e(e)||Q9e(e,t)||G9e(e,t)||K9e()}function K9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G9e(e,t){if(e){if(typeof e=="string")return z5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z5(e,t)}}function z5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q9e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Y9e(e){if(Array.isArray(e))return e}var af=x.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,b=e.className,y=e.onResize,j=e.style,N=j===void 0?{}:j,w=x.useRef(null),S=x.useRef();S.current=y,x.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=x.useState({containerWidth:i.width,containerHeight:i.height}),C=H9e(k,2),A=C[0],D=C[1],P=x.useCallback(function(O,M){D(function(T){var R=Math.round(O),F=Math.round(M);return T.containerWidth===R&&T.containerHeight===F?T:{containerWidth:R,containerHeight:F}})},[]);x.useEffect(function(){var O=function(B){var L,I=B[0].contentRect,q=I.width,$=I.height;P(q,$),(L=S.current)===null||L===void 0||L.call(S,q,$)};p>0&&(O=Ose(O,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(O),T=w.current.getBoundingClientRect(),R=T.width,F=T.height;return P(R,F),M.observe(w.current),function(){M.disconnect()}},[P,p]);var _=x.useMemo(function(){var O=A.containerWidth,M=A.containerHeight;if(O<0||M<0)return null;Po(Fd(o)||Fd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Po(!n||n>0,"The aspect(%s) must be greater than zero.",n);var T=Fd(o)?O:o,R=Fd(c)?M:c;n&&n>0&&(T?R=T/n:R&&(T=R*n),h&&R>h&&(R=h)),Po(T>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,R,o,c,d,f,n);var F=!Array.isArray(m)&&Jl(m.type).endsWith("Chart");return Q.Children.map(m,function(E){return Q.isValidElement(E)?x.cloneElement(E,cj({width:T,height:R},F?{style:cj({height:"100%",width:"100%",maxHeight:R,maxWidth:T},E.props.style)}:{})):E})},[n,m,c,h,f,d,A,o]);return Q.createElement("div",{id:v?"".concat(v):void 0,className:Ut("recharts-responsive-container",b),style:cj(cj({},N),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:w},_)}),ug=function(t){return null};ug.displayName="Cell";function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}function B5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B5(Object(n),!0).forEach(function(r){X9e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X9e(e,t,n){return t=Z9e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z9e(e){var t=J9e(e,"string");return qv(t)=="symbol"?t:t+""}function J9e(e,t){if(qv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fh={widthCache:{},cacheCount:0},eWe=2e3,tWe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},V5="recharts_measurement_span";function nWe(e){var t=D_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var $x=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||rd.isSsr)return{width:0,height:0};var r=nWe(n),i=JSON.stringify({text:t,copyStyle:r});if(fh.widthCache[i])return fh.widthCache[i];try{var a=document.getElementById(V5);a||(a=document.createElement("span"),a.setAttribute("id",V5),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=D_(D_({},tWe),r);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return fh.widthCache[i]=c,++fh.cacheCount>eWe&&(fh.cacheCount=0,fh.widthCache={}),c}catch{return{width:0,height:0}}},rWe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function Uw(e,t){return oWe(e)||aWe(e,t)||iWe(e,t)||sWe()}function sWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iWe(e,t){if(e){if(typeof e=="string")return q5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q5(e,t)}}function q5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function oWe(e){if(Array.isArray(e))return e}function lWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uWe(r.key),r)}}function cWe(e,t,n){return t&&U5(e.prototype,t),n&&U5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uWe(e){var t=dWe(e,"string");return Uv(t)=="symbol"?t:t+""}function dWe(e,t){if(Uv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var W5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fWe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,hWe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ise={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mWe=Object.keys(Ise),Vh="NaN";function pWe(e,t){return e*Ise[t]}var uj=function(){function e(t,n){lWe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!fWe.test(n)&&(this.num=NaN,this.unit=""),mWe.includes(n)&&(this.num=pWe(t,n),this.unit="px")}return cWe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=hWe.exec(n))!==null&&r!==void 0?r:[],a=Uw(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function Mse(e){if(e.includes(Vh))return Vh;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=W5.exec(t))!==null&&n!==void 0?n:[],i=Uw(r,4),a=i[1],o=i[2],l=i[3],c=uj.parse(a??""),u=uj.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Vh;t=t.replace(W5,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=H5.exec(t))!==null&&f!==void 0?f:[],m=Uw(h,4),g=m[1],p=m[2],v=m[3],b=uj.parse(g??""),y=uj.parse(v??""),j=p==="+"?b.add(y):b.subtract(y);if(j.isNaN())return Vh;t=t.replace(H5,j.toString())}return t}var K5=/\(([^()]*)\)/;function gWe(e){for(var t=e;t.includes("(");){var n=K5.exec(t),r=Uw(n,2),i=r[1];t=t.replace(K5,Mse(i))}return t}function xWe(e){var t=e.replace(/\s+/g,"");return t=gWe(t),t=Mse(t),t}function vWe(e){try{return xWe(e)}catch{return Vh}}function sP(e){var t=vWe(e.slice(5,-1));return t===Vh?"":t}var yWe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bWe=["dx","dy","angle","className","breakAll"];function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O_.apply(this,arguments)}function G5(e,t){if(e==null)return{};var n=jWe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jWe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Q5(e,t){return CWe(e)||SWe(e,t)||NWe(e,t)||wWe()}function wWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NWe(e,t){if(e){if(typeof e=="string")return Y5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y5(e,t)}}function Y5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function CWe(e){if(Array.isArray(e))return e}var Rse=/[ \f\n\r\t\v\u2028\u2029]+/,$se=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var a=[];qt(n)||(r?a=n.toString().split(""):a=n.toString().split(Rse));var o=a.map(function(c){return{word:c,width:$x(c,i).width}}),l=r?0:$x("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},kWe=function(t,n,r,i,a){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Ge(o),f=l,h=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(R,F){var E=F.word,B=F.width,L=R[R.length-1];if(L&&(i==null||a||L.width+B+r<Number(i)))L.words.push(E),L.width+=B+r;else{var I={words:[E],width:B};R.push(I)}return R},[])},m=h(n),g=function(T){return T.reduce(function(R,F){return R.width>F.width?R:F})};if(!d)return m;for(var p="",v=function(T){var R=f.slice(0,T),F=$se({breakAll:u,style:c,children:R+p}).wordsWithComputedWidth,E=h(F),B=E.length>o||g(E).width>Number(i);return[B,E]},b=0,y=f.length-1,j=0,N;b<=y&&j<=f.length-1;){var w=Math.floor((b+y)/2),S=w-1,k=v(S),C=Q5(k,2),A=C[0],D=C[1],P=v(w),_=Q5(P,1),O=_[0];if(!A&&!O&&(b=w+1),A&&O&&(y=w-1),!A&&O){N=D;break}j++}return N||m},X5=function(t){var n=qt(t)?[]:t.toString().split(Rse);return[{words:n}]},PWe=function(t){var n=t.width,r=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!rd.isSsr){var c,u,d=$se({breakAll:o,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return X5(i);return kWe({breakAll:o,children:i,maxLines:l,style:a},c,u,n,r)}return X5(i)},Z5="#808080",Of=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,b=v===void 0?Z5:v,y=G5(t,yWe),j=x.useMemo(function(){return PWe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),N=y.dx,w=y.dy,S=y.angle,k=y.className,C=y.breakAll,A=G5(y,bWe);if(!as(r)||!as(a))return null;var D=r+(Ge(N)?N:0),P=a+(Ge(w)?w:0),_;switch(p){case"start":_=sP("calc(".concat(u,")"));break;case"middle":_=sP("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:_=sP("calc(".concat(j.length-1," * -").concat(l,")"));break}var O=[];if(f){var M=j[0].width,T=y.width;O.push("scale(".concat((Ge(T)?T/M:1)/M,")"))}return S&&O.push("rotate(".concat(S,", ").concat(D,", ").concat(P,")")),O.length&&(A.transform=O.join(" ")),Q.createElement("text",O_({},yt(A,!0),{x:D,y:P,className:Ut("recharts-text",k),textAnchor:m,fill:b.includes("url")?Z5:b}),j.map(function(R,F){var E=R.words.join(C?"":" ");return Q.createElement("tspan",{x:D,dy:F===0?_:l,key:"".concat(E,"-").concat(F)},E)}))};function Su(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function EWe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rM(e){let t,n,r;e.length!==2?(t=Su,n=(l,c)=>Su(e(l),c),r=(l,c)=>e(l)-c):(t=e===Su||e===EWe?e:_We,n=e,r=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:o,right:a}}function _We(){return 0}function Fse(e){return e===null?NaN:+e}function*AWe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const TWe=rM(Su),sb=TWe.right;rM(Fse).center;class J5 extends Map{constructor(t,n=IWe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ez(this,t))}has(t){return super.has(ez(this,t))}set(t,n){return super.set(DWe(this,t),n)}delete(t){return super.delete(OWe(this,t))}}function ez({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function DWe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function OWe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function IWe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MWe(e=Su){if(e===Su)return Lse;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Lse(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const RWe=Math.sqrt(50),$We=Math.sqrt(10),FWe=Math.sqrt(2);function Ww(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=RWe?10:a>=$We?5:a>=FWe?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Ww(e,t,n*2):[l,c,u]}function I_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Ww(t,e,n):Ww(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function M_(e,t,n){return t=+t,e=+e,n=+n,Ww(e,t,n)[2]}function R_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?M_(t,e,n):M_(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function tz(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function nz(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function zse(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Lse:MWe(i);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*f/c+h)),g=Math.min(r,Math.floor(t+(c-u)*f/c+h));zse(e,t,m,g,i)}const a=e[t];let o=n,l=r;for(Gg(e,n,t),i(e[r],a)>0&&Gg(e,n,r);o<l;){for(Gg(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?Gg(e,n,l):(++l,Gg(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Gg(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function LWe(e,t,n){if(e=Float64Array.from(AWe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return nz(e);if(t>=1)return tz(e);var r,i=(r-1)*t,a=Math.floor(i),o=tz(zse(e,a).subarray(0,a+1)),l=nz(e.subarray(a+1));return o+(l-o)*(i-a)}}function zWe(e,t,n=Fse){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function BWe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function so(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $_=Symbol("implicit");function sM(){var e=new J5,t=[],n=[],r=$_;function i(a){let o=e.get(a);if(o===void 0){if(r!==$_)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new J5;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sM(t,n).unknown(r)},so.apply(i,arguments),i}function Wv(){var e=sM().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=i<r,g=m?i:r,p=m?r:i;a=(p-g)/Math.max(1,h-c+u*2),l&&(a=Math.floor(a)),g+=(p-g-a*(h-c))*d,o=a*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=BWe(h).map(function(b){return g+a*b});return n(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Wv(t(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},so.apply(f(),arguments)}function Bse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Bse(t())},e}function Fx(){return Bse(Wv.apply(null,arguments).paddingInner(1))}function iM(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vse(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ib(){}var Hv=.7,Hw=1/Hv,um="\\s*([+-]?\\d+)\\s*",Kv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VWe=/^#([0-9a-f]{3,8})$/,qWe=new RegExp(`^rgb\\(${um},${um},${um}\\)$`),UWe=new RegExp(`^rgb\\(${al},${al},${al}\\)$`),WWe=new RegExp(`^rgba\\(${um},${um},${um},${Kv}\\)$`),HWe=new RegExp(`^rgba\\(${al},${al},${al},${Kv}\\)$`),KWe=new RegExp(`^hsl\\(${Kv},${al},${al}\\)$`),GWe=new RegExp(`^hsla\\(${Kv},${al},${al},${Kv}\\)$`),rz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iM(ib,Gv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sz,formatHex:sz,formatHex8:QWe,formatHsl:YWe,formatRgb:iz,toString:iz});function sz(){return this.rgb().formatHex()}function QWe(){return this.rgb().formatHex8()}function YWe(){return qse(this).formatHsl()}function iz(){return this.rgb().formatRgb()}function Gv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VWe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?az(t):n===3?new Bi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qWe.exec(e))?new Bi(t[1],t[2],t[3],1):(t=UWe.exec(e))?new Bi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WWe.exec(e))?dj(t[1],t[2],t[3],t[4]):(t=HWe.exec(e))?dj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KWe.exec(e))?cz(t[1],t[2]/100,t[3]/100,1):(t=GWe.exec(e))?cz(t[1],t[2]/100,t[3]/100,t[4]):rz.hasOwnProperty(e)?az(rz[e]):e==="transparent"?new Bi(NaN,NaN,NaN,0):null}function az(e){return new Bi(e>>16&255,e>>8&255,e&255,1)}function dj(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bi(e,t,n,r)}function XWe(e){return e instanceof ib||(e=Gv(e)),e?(e=e.rgb(),new Bi(e.r,e.g,e.b,e.opacity)):new Bi}function F_(e,t,n,r){return arguments.length===1?XWe(e):new Bi(e,t,n,r??1)}function Bi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}iM(Bi,F_,Vse(ib,{brighter(e){return e=e==null?Hw:Math.pow(Hw,e),new Bi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new Bi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bi(of(this.r),of(this.g),of(this.b),Kw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oz,formatHex:oz,formatHex8:ZWe,formatRgb:lz,toString:lz}));function oz(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}`}function ZWe(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}${Ld((isNaN(this.opacity)?1:this.opacity)*255)}`}function lz(){const e=Kw(this.opacity);return`${e===1?"rgb(":"rgba("}${of(this.r)}, ${of(this.g)}, ${of(this.b)}${e===1?")":`, ${e})`}`}function Kw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function of(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ld(e){return e=of(e),(e<16?"0":"")+e.toString(16)}function cz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yo(e,t,n,r)}function qse(e){if(e instanceof yo)return new yo(e.h,e.s,e.l,e.opacity);if(e instanceof ib||(e=Gv(e)),!e)return new yo;if(e instanceof yo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new yo(o,l,c,e.opacity)}function JWe(e,t,n,r){return arguments.length===1?qse(e):new yo(e,t,n,r??1)}function yo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}iM(yo,JWe,Vse(ib,{brighter(e){return e=e==null?Hw:Math.pow(Hw,e),new yo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new yo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Bi(iP(e>=240?e-240:e+120,i,r),iP(e,i,r),iP(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new yo(uz(this.h),fj(this.s),fj(this.l),Kw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kw(this.opacity);return`${e===1?"hsl(":"hsla("}${uz(this.h)}, ${fj(this.s)*100}%, ${fj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uz(e){return e=(e||0)%360,e<0?e+360:e}function fj(e){return Math.max(0,Math.min(1,e||0))}function iP(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const aM=e=>()=>e;function eHe(e,t){return function(n){return e+n*t}}function tHe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nHe(e){return(e=+e)==1?Use:function(t,n){return n-t?tHe(t,n,e):aM(isNaN(t)?n:t)}}function Use(e,t){var n=t-e;return n?eHe(e,n):aM(isNaN(e)?t:e)}const dz=function e(t){var n=nHe(t);function r(i,a){var o=n((i=F_(i)).r,(a=F_(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=Use(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function rHe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function sHe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iHe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=dg(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function aHe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gw(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oHe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=dg(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var L_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aP=new RegExp(L_.source,"g");function lHe(e){return function(){return e}}function cHe(e){return function(t){return e(t)+""}}function uHe(e,t){var n=L_.lastIndex=aP.lastIndex=0,r,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=L_.exec(e))&&(i=aP.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Gw(r,i)})),n=aP.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?cHe(c[0].x):lHe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function dg(e,t){var n=typeof t,r;return t==null||n==="boolean"?aM(t):(n==="number"?Gw:n==="string"?(r=Gv(t))?(t=r,dz):uHe:t instanceof Gv?dz:t instanceof Date?aHe:sHe(t)?rHe:Array.isArray(t)?iHe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oHe:Gw)(e,t)}function oM(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function dHe(e,t){t===void 0&&(t=e,e=dg);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function fHe(e){return function(){return e}}function Qw(e){return+e}var fz=[0,1];function xi(e){return e}function z_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fHe(isNaN(t)?NaN:.5)}function hHe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function mHe(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=z_(i,r),a=n(o,a)):(r=z_(r,i),a=n(a,o)),function(l){return a(r(l))}}function pHe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=z_(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=sb(e,l,1,r)-1;return a[c](i[c](l))}}function ab(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function AS(){var e=fz,t=fz,n=dg,r,i,a,o=xi,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==xi&&(o=hHe(e[0],e[h-1])),l=h>2?pHe:mHe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=l(t,e.map(r),Gw)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Qw),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=oM,d()},f.clamp=function(h){return arguments.length?(o=h?!0:xi,d()):o!==xi},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,m){return r=h,i=m,d()}}function lM(){return AS()(xi,xi)}function gHe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function lp(e){return e=Yw(Math.abs(e)),e?e[1]:NaN}function xHe(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function vHe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yHe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qv(e){if(!(t=yHe.exec(e)))throw new Error("invalid format: "+e);var t;return new cM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qv.prototype=cM.prototype;function cM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bHe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Wse;function jHe(e,t){var n=Yw(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Wse=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Yw(e,Math.max(0,t+a-1))[0]}function hz(e,t){var n=Yw(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gHe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hz(e*100,t),r:hz,s:jHe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pz(e){return e}var gz=Array.prototype.map,xz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wHe(e){var t=e.grouping===void 0||e.thousands===void 0?pz:xHe(gz.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?pz:vHe(gz.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Qv(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,v=f.zero,b=f.width,y=f.comma,j=f.precision,N=f.trim,w=f.type;w==="n"?(y=!0,w="g"):mz[w]||(j===void 0&&(j=12),N=!0,w="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var S=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=p==="$"?r:/[%p]/.test(w)?o:"",C=mz[w],A=/[defgprs%]/.test(w);j=j===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function D(P){var _=S,O=k,M,T,R;if(w==="c")O=C(P)+O,P="";else{P=+P;var F=P<0||1/P<0;if(P=isNaN(P)?c:C(Math.abs(P),j),N&&(P=bHe(P)),F&&+P==0&&g!=="+"&&(F=!1),_=(F?g==="("?g:l:g==="-"||g==="("?"":g)+_,O=(w==="s"?xz[8+Wse/3]:"")+O+(F&&g==="("?")":""),A){for(M=-1,T=P.length;++M<T;)if(R=P.charCodeAt(M),48>R||R>57){O=(R===46?i+P.slice(M+1):P.slice(M))+O,P=P.slice(0,M);break}}}y&&!v&&(P=t(P,1/0));var E=_.length+P.length+O.length,B=E<b?new Array(b-E+1).join(h):"";switch(y&&v&&(P=t(B+P,B.length?b-O.length:1/0),B=""),m){case"<":P=_+P+O+B;break;case"=":P=_+B+P+O;break;case"^":P=B.slice(0,E=B.length>>1)+_+P+O+B.slice(E);break;default:P=B+_+P+O;break}return a(P)}return D.toString=function(){return f+""},D}function d(f,h){var m=u((f=Qv(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(lp(h)/3)))*3,p=Math.pow(10,-g),v=xz[8+g/3];return function(b){return m(p*b)+v}}return{format:u,formatPrefix:d}}var hj,uM,Hse;NHe({thousands:",",grouping:[3],currency:["$",""]});function NHe(e){return hj=wHe(e),uM=hj.format,Hse=hj.formatPrefix,hj}function SHe(e){return Math.max(0,-lp(Math.abs(e)))}function CHe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lp(t)/3)))*3-lp(Math.abs(e)))}function kHe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lp(t)-lp(e))+1}function Kse(e,t,n,r){var i=R_(e,t,n),a;switch(r=Qv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=CHe(i,o))&&(r.precision=a),Hse(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=kHe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=SHe(i))&&(r.precision=a-(r.type==="%")*2);break}}return uM(r)}function sd(e){var t=e.domain;return e.ticks=function(n){var r=t();return I_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Kse(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=M_(o,l,n),u===c)return r[i]=o,r[a]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Xw(){var e=lM();return e.copy=function(){return ab(e,Xw())},so.apply(e,arguments),sd(e)}function Gse(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Qw),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Gse(e).unknown(t)},e=arguments.length?Array.from(e,Qw):[0,1],sd(n)}function Qse(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function vz(e){return Math.log(e)}function yz(e){return Math.exp(e)}function PHe(e){return-Math.log(-e)}function EHe(e){return-Math.exp(-e)}function _He(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AHe(e){return e===10?_He:e===Math.E?Math.exp:t=>Math.pow(e,t)}function THe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function bz(e){return(t,n)=>-e(-t,n)}function dM(e){const t=e(vz,yz),n=t.domain;let r=10,i,a;function o(){return i=THe(r),a=AHe(r),n()[0]<0?(i=bz(i),a=bz(a),e(PHe,EHe)):e(vz,yz),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),m=i(d),g,p;const v=l==null?10:+l;let b=[];if(!(r%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(p=h<0?g/a(-h):g*a(h),!(p<u)){if(p>d)break;b.push(p)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(p=h>0?g/a(-h):g*a(h),!(p<u)){if(p>d)break;b.push(p)}b.length*2<v&&(b=I_(u,d,v))}else b=I_(h,m,Math.min(m-h,v)).map(a);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Qv(c)).precision==null&&(c.trim=!0),c=uM(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},t.nice=()=>n(Qse(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function Yse(){const e=dM(AS()).domain([1,10]);return e.copy=()=>ab(e,Yse()).base(e.base()),so.apply(e,arguments),e}function jz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function wz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fM(e){var t=1,n=e(jz(t),wz(t));return n.constant=function(r){return arguments.length?e(jz(t=+r),wz(t)):t},sd(n)}function Xse(){var e=fM(AS());return e.copy=function(){return ab(e,Xse()).constant(e.constant())},so.apply(e,arguments)}function Nz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function DHe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function OHe(e){return e<0?-e*e:e*e}function hM(e){var t=e(xi,xi),n=1;function r(){return n===1?e(xi,xi):n===.5?e(DHe,OHe):e(Nz(n),Nz(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},sd(t)}function mM(){var e=hM(AS());return e.copy=function(){return ab(e,mM()).exponent(e.exponent())},so.apply(e,arguments),e}function IHe(){return mM.apply(null,arguments).exponent(.5)}function Sz(e){return Math.sign(e)*e*e}function MHe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Zse(){var e=lM(),t=[0,1],n=!1,r;function i(a){var o=MHe(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(Sz(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Qw)).map(Sz)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Zse(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},so.apply(i,arguments),sd(i)}function Jse(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=zWe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[sb(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Su),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Jse().domain(e).range(t).unknown(r)},so.apply(a,arguments)}function eie(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[sb(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return eie().domain([e,t]).range(i).unknown(a)},so.apply(sd(o),arguments)}function tie(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[sb(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return tie().domain(e).range(t).unknown(n)},so.apply(i,arguments)}const oP=new Date,lP=new Date;function ls(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<o);return c},i.filter=a=>ls(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(oP.setTime(+a),lP.setTime(+o),e(oP),e(lP),Math.floor(n(oP,lP))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Zw=ls(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ls(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zw);Zw.range;const Hl=1e3,Ba=Hl*60,Kl=Ba*60,mc=Kl*24,pM=mc*7,Cz=mc*30,cP=mc*365,zd=ls(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hl)},(e,t)=>(t-e)/Hl,e=>e.getUTCSeconds());zd.range;const gM=ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hl)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getMinutes());gM.range;const xM=ls(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCMinutes());xM.range;const vM=ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hl-e.getMinutes()*Ba)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getHours());vM.range;const yM=ls(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getUTCHours());yM.range;const ob=ls(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/mc,e=>e.getDate()-1);ob.range;const TS=ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mc,e=>e.getUTCDate()-1);TS.range;const nie=ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mc,e=>Math.floor(e/mc));nie.range;function Qf(e){return ls(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/pM)}const DS=Qf(0),Jw=Qf(1),RHe=Qf(2),$He=Qf(3),cp=Qf(4),FHe=Qf(5),LHe=Qf(6);DS.range;Jw.range;RHe.range;$He.range;cp.range;FHe.range;LHe.range;function Yf(e){return ls(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pM)}const OS=Yf(0),eN=Yf(1),zHe=Yf(2),BHe=Yf(3),up=Yf(4),VHe=Yf(5),qHe=Yf(6);OS.range;eN.range;zHe.range;BHe.range;up.range;VHe.range;qHe.range;const bM=ls(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bM.range;const jM=ls(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jM.range;const pc=ls(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());pc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ls(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});pc.range;const gc=ls(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ls(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});gc.range;function rie(e,t,n,r,i,a){const o=[[zd,1,Hl],[zd,5,5*Hl],[zd,15,15*Hl],[zd,30,30*Hl],[a,1,Ba],[a,5,5*Ba],[a,15,15*Ba],[a,30,30*Ba],[i,1,Kl],[i,3,3*Kl],[i,6,6*Kl],[i,12,12*Kl],[r,1,mc],[r,2,2*mc],[n,1,pM],[t,1,Cz],[t,3,3*Cz],[e,1,cP]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=rM(([,,v])=>v).right(o,h);if(m===o.length)return e.every(R_(u/cP,d/cP,f));if(m===0)return Zw.every(Math.max(R_(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[UHe,WHe]=rie(gc,jM,OS,nie,yM,xM),[HHe,KHe]=rie(pc,bM,DS,ob,vM,gM);function uP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function GHe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Yg(i),d=Xg(i),f=Yg(a),h=Xg(a),m=Yg(o),g=Xg(o),p=Yg(l),v=Xg(l),b=Yg(c),y=Xg(c),j={a:F,A:E,b:B,B:L,c:null,d:Tz,e:Tz,f:xKe,g:PKe,G:_Ke,H:mKe,I:pKe,j:gKe,L:sie,m:vKe,M:yKe,p:I,q,Q:Iz,s:Mz,S:bKe,u:jKe,U:wKe,V:NKe,w:SKe,W:CKe,x:null,X:null,y:kKe,Y:EKe,Z:AKe,"%":Oz},N={a:$,A:z,b:Y,B:ne,c:null,d:Dz,e:Dz,f:IKe,g:UKe,G:HKe,H:TKe,I:DKe,j:OKe,L:aie,m:MKe,M:RKe,p:te,q:pe,Q:Iz,s:Mz,S:$Ke,u:FKe,U:LKe,V:zKe,w:BKe,W:VKe,x:null,X:null,y:qKe,Y:WKe,Z:KKe,"%":Oz},w={a:D,A:P,b:_,B:O,c:M,d:_z,e:_z,f:uKe,g:Ez,G:Pz,H:Az,I:Az,j:aKe,L:cKe,m:iKe,M:oKe,p:A,q:sKe,Q:fKe,s:hKe,S:lKe,u:JHe,U:eKe,V:tKe,w:ZHe,W:nKe,x:T,X:R,y:Ez,Y:Pz,Z:rKe,"%":dKe};j.x=S(n,j),j.X=S(r,j),j.c=S(t,j),N.x=S(n,N),N.X=S(r,N),N.c=S(t,N);function S(J,xe){return function(ye){var re=[],ue=-1,ke=0,$e=J.length,Ve,gt,He;for(ye instanceof Date||(ye=new Date(+ye));++ue<$e;)J.charCodeAt(ue)===37&&(re.push(J.slice(ke,ue)),(gt=kz[Ve=J.charAt(++ue)])!=null?Ve=J.charAt(++ue):gt=Ve==="e"?" ":"0",(He=xe[Ve])&&(Ve=He(ye,gt)),re.push(Ve),ke=ue+1);return re.push(J.slice(ke,ue)),re.join("")}}function k(J,xe){return function(ye){var re=Qg(1900,void 0,1),ue=C(re,J,ye+="",0),ke,$e;if(ue!=ye.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(xe&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(ke=dP(Qg(re.y,0,1)),$e=ke.getUTCDay(),ke=$e>4||$e===0?eN.ceil(ke):eN(ke),ke=TS.offset(ke,(re.V-1)*7),re.y=ke.getUTCFullYear(),re.m=ke.getUTCMonth(),re.d=ke.getUTCDate()+(re.w+6)%7):(ke=uP(Qg(re.y,0,1)),$e=ke.getDay(),ke=$e>4||$e===0?Jw.ceil(ke):Jw(ke),ke=ob.offset(ke,(re.V-1)*7),re.y=ke.getFullYear(),re.m=ke.getMonth(),re.d=ke.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),$e="Z"in re?dP(Qg(re.y,0,1)).getUTCDay():uP(Qg(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-($e+5)%7:re.w+re.U*7-($e+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,dP(re)):uP(re)}}function C(J,xe,ye,re){for(var ue=0,ke=xe.length,$e=ye.length,Ve,gt;ue<ke;){if(re>=$e)return-1;if(Ve=xe.charCodeAt(ue++),Ve===37){if(Ve=xe.charAt(ue++),gt=w[Ve in kz?xe.charAt(ue++):Ve],!gt||(re=gt(J,ye,re))<0)return-1}else if(Ve!=ye.charCodeAt(re++))return-1}return re}function A(J,xe,ye){var re=u.exec(xe.slice(ye));return re?(J.p=d.get(re[0].toLowerCase()),ye+re[0].length):-1}function D(J,xe,ye){var re=m.exec(xe.slice(ye));return re?(J.w=g.get(re[0].toLowerCase()),ye+re[0].length):-1}function P(J,xe,ye){var re=f.exec(xe.slice(ye));return re?(J.w=h.get(re[0].toLowerCase()),ye+re[0].length):-1}function _(J,xe,ye){var re=b.exec(xe.slice(ye));return re?(J.m=y.get(re[0].toLowerCase()),ye+re[0].length):-1}function O(J,xe,ye){var re=p.exec(xe.slice(ye));return re?(J.m=v.get(re[0].toLowerCase()),ye+re[0].length):-1}function M(J,xe,ye){return C(J,t,xe,ye)}function T(J,xe,ye){return C(J,n,xe,ye)}function R(J,xe,ye){return C(J,r,xe,ye)}function F(J){return o[J.getDay()]}function E(J){return a[J.getDay()]}function B(J){return c[J.getMonth()]}function L(J){return l[J.getMonth()]}function I(J){return i[+(J.getHours()>=12)]}function q(J){return 1+~~(J.getMonth()/3)}function $(J){return o[J.getUTCDay()]}function z(J){return a[J.getUTCDay()]}function Y(J){return c[J.getUTCMonth()]}function ne(J){return l[J.getUTCMonth()]}function te(J){return i[+(J.getUTCHours()>=12)]}function pe(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var xe=S(J+="",j);return xe.toString=function(){return J},xe},parse:function(J){var xe=k(J+="",!1);return xe.toString=function(){return J},xe},utcFormat:function(J){var xe=S(J+="",N);return xe.toString=function(){return J},xe},utcParse:function(J){var xe=k(J+="",!0);return xe.toString=function(){return J},xe}}}var kz={"-":"",_:" ",0:"0"},Ss=/^\s*\d+/,QHe=/^%/,YHe=/[\\^$*+?|[\]().{}]/g;function jn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function XHe(e){return e.replace(YHe,"\\$&")}function Yg(e){return new RegExp("^(?:"+e.map(XHe).join("|")+")","i")}function Xg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ZHe(e,t,n){var r=Ss.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function JHe(e,t,n){var r=Ss.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function eKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function tKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function nKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Pz(e,t,n){var r=Ss.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ez(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function rKe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sKe(e,t,n){var r=Ss.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function iKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _z(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function aKe(e,t,n){var r=Ss.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Az(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function oKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function lKe(e,t,n){var r=Ss.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cKe(e,t,n){var r=Ss.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function uKe(e,t,n){var r=Ss.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function dKe(e,t,n){var r=QHe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fKe(e,t,n){var r=Ss.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function hKe(e,t,n){var r=Ss.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Tz(e,t){return jn(e.getDate(),t,2)}function mKe(e,t){return jn(e.getHours(),t,2)}function pKe(e,t){return jn(e.getHours()%12||12,t,2)}function gKe(e,t){return jn(1+ob.count(pc(e),e),t,3)}function sie(e,t){return jn(e.getMilliseconds(),t,3)}function xKe(e,t){return sie(e,t)+"000"}function vKe(e,t){return jn(e.getMonth()+1,t,2)}function yKe(e,t){return jn(e.getMinutes(),t,2)}function bKe(e,t){return jn(e.getSeconds(),t,2)}function jKe(e){var t=e.getDay();return t===0?7:t}function wKe(e,t){return jn(DS.count(pc(e)-1,e),t,2)}function iie(e){var t=e.getDay();return t>=4||t===0?cp(e):cp.ceil(e)}function NKe(e,t){return e=iie(e),jn(cp.count(pc(e),e)+(pc(e).getDay()===4),t,2)}function SKe(e){return e.getDay()}function CKe(e,t){return jn(Jw.count(pc(e)-1,e),t,2)}function kKe(e,t){return jn(e.getFullYear()%100,t,2)}function PKe(e,t){return e=iie(e),jn(e.getFullYear()%100,t,2)}function EKe(e,t){return jn(e.getFullYear()%1e4,t,4)}function _Ke(e,t){var n=e.getDay();return e=n>=4||n===0?cp(e):cp.ceil(e),jn(e.getFullYear()%1e4,t,4)}function AKe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+jn(t/60|0,"0",2)+jn(t%60,"0",2)}function Dz(e,t){return jn(e.getUTCDate(),t,2)}function TKe(e,t){return jn(e.getUTCHours(),t,2)}function DKe(e,t){return jn(e.getUTCHours()%12||12,t,2)}function OKe(e,t){return jn(1+TS.count(gc(e),e),t,3)}function aie(e,t){return jn(e.getUTCMilliseconds(),t,3)}function IKe(e,t){return aie(e,t)+"000"}function MKe(e,t){return jn(e.getUTCMonth()+1,t,2)}function RKe(e,t){return jn(e.getUTCMinutes(),t,2)}function $Ke(e,t){return jn(e.getUTCSeconds(),t,2)}function FKe(e){var t=e.getUTCDay();return t===0?7:t}function LKe(e,t){return jn(OS.count(gc(e)-1,e),t,2)}function oie(e){var t=e.getUTCDay();return t>=4||t===0?up(e):up.ceil(e)}function zKe(e,t){return e=oie(e),jn(up.count(gc(e),e)+(gc(e).getUTCDay()===4),t,2)}function BKe(e){return e.getUTCDay()}function VKe(e,t){return jn(eN.count(gc(e)-1,e),t,2)}function qKe(e,t){return jn(e.getUTCFullYear()%100,t,2)}function UKe(e,t){return e=oie(e),jn(e.getUTCFullYear()%100,t,2)}function WKe(e,t){return jn(e.getUTCFullYear()%1e4,t,4)}function HKe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?up(e):up.ceil(e),jn(e.getUTCFullYear()%1e4,t,4)}function KKe(){return"+0000"}function Oz(){return"%"}function Iz(e){return+e}function Mz(e){return Math.floor(+e/1e3)}var hh,lie,cie;GKe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GKe(e){return hh=GHe(e),lie=hh.format,hh.parse,cie=hh.utcFormat,hh.utcParse,hh}function QKe(e){return new Date(e)}function YKe(e){return e instanceof Date?+e:+new Date(+e)}function wM(e,t,n,r,i,a,o,l,c,u){var d=lM(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),y=u("%b %d"),j=u("%B"),N=u("%Y");function w(S){return(c(S)<S?m:l(S)<S?g:o(S)<S?p:a(S)<S?v:r(S)<S?i(S)<S?b:y:n(S)<S?j:N)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,YKe)):h().map(QKe)},d.ticks=function(S){var k=h();return e(k[0],k[k.length-1],S??10)},d.tickFormat=function(S,k){return k==null?w:u(k)},d.nice=function(S){var k=h();return(!S||typeof S.range!="function")&&(S=t(k[0],k[k.length-1],S??10)),S?h(Qse(k,S)):d},d.copy=function(){return ab(d,wM(e,t,n,r,i,a,o,l,c,u))},d}function XKe(){return so.apply(wM(HHe,KHe,pc,bM,DS,ob,vM,gM,zd,lie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZKe(){return so.apply(wM(UHe,WHe,gc,jM,OS,TS,yM,xM,zd,cie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function IS(){var e=0,t=1,n,r,i,a,o=xi,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(a(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(dg),u.rangeRound=d(oM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function id(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uie(){var e=sd(IS()(xi));return e.copy=function(){return id(e,uie())},wc.apply(e,arguments)}function die(){var e=dM(IS()).domain([1,10]);return e.copy=function(){return id(e,die()).base(e.base())},wc.apply(e,arguments)}function fie(){var e=fM(IS());return e.copy=function(){return id(e,fie()).constant(e.constant())},wc.apply(e,arguments)}function NM(){var e=hM(IS());return e.copy=function(){return id(e,NM()).exponent(e.exponent())},wc.apply(e,arguments)}function JKe(){return NM.apply(null,arguments).exponent(.5)}function hie(){var e=[],t=xi;function n(r){if(r!=null&&!isNaN(r=+r))return t((sb(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Su),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>LWe(e,a/r))},n.copy=function(){return hie(t).domain(e)},wc.apply(n,arguments)}function MS(){var e=0,t=.5,n=1,r=1,i,a,o,l,c,u=xi,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-a)*(r*p<r*a?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,i=d(e=+e),a=d(t=+t),o=d(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(v){var b,y,j;return arguments.length?([b,y,j]=v,u=dHe(p,[b,y,j]),m):[u(0),u(.5),u(1)]}}return m.range=g(dg),m.rangeRound=g(oM),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,i=p(e),a=p(t),o=p(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m}}function mie(){var e=sd(MS()(xi));return e.copy=function(){return id(e,mie())},wc.apply(e,arguments)}function pie(){var e=dM(MS()).domain([.1,1,10]);return e.copy=function(){return id(e,pie()).base(e.base())},wc.apply(e,arguments)}function gie(){var e=fM(MS());return e.copy=function(){return id(e,gie()).constant(e.constant())},wc.apply(e,arguments)}function SM(){var e=hM(MS());return e.copy=function(){return id(e,SM()).exponent(e.exponent())},wc.apply(e,arguments)}function e7e(){return SM.apply(null,arguments).exponent(.5)}const Rz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Wv,scaleDiverging:mie,scaleDivergingLog:pie,scaleDivergingPow:SM,scaleDivergingSqrt:e7e,scaleDivergingSymlog:gie,scaleIdentity:Gse,scaleImplicit:$_,scaleLinear:Xw,scaleLog:Yse,scaleOrdinal:sM,scalePoint:Fx,scalePow:mM,scaleQuantile:Jse,scaleQuantize:eie,scaleRadial:Zse,scaleSequential:uie,scaleSequentialLog:die,scaleSequentialPow:NM,scaleSequentialQuantile:hie,scaleSequentialSqrt:JKe,scaleSequentialSymlog:fie,scaleSqrt:IHe,scaleSymlog:Xse,scaleThreshold:tie,scaleTime:XKe,scaleUtc:ZKe,tickFormat:Kse},Symbol.toStringTag,{value:"Module"}));var t7e=tg;function n7e(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(o!=null&&(l===void 0?o===o&&!t7e(o):n(o,l)))var l=o,c=a}return c}var RS=n7e;function r7e(e,t){return e>t}var xie=r7e,s7e=RS,i7e=xie,a7e=cg;function o7e(e){return e&&e.length?s7e(e,a7e,i7e):void 0}var l7e=o7e;const ou=yn(l7e);function c7e(e,t){return e<t}var vie=c7e,u7e=RS,d7e=vie,f7e=cg;function h7e(e){return e&&e.length?u7e(e,f7e,d7e):void 0}var m7e=h7e;const $S=yn(m7e);var p7e=FI,g7e=wl,x7e=kse,v7e=Yi;function y7e(e,t){var n=v7e(e)?p7e:x7e;return n(e,g7e(t))}var b7e=y7e,j7e=Sse,w7e=b7e;function N7e(e,t){return j7e(w7e(e,t),1)}var S7e=N7e;const C7e=yn(S7e);var k7e=JI;function P7e(e,t){return k7e(e,t)}var E7e=P7e;const If=yn(E7e);var fg=1e9,_7e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kM,cr=!0,to="[DecimalError] ",lf=to+"Invalid argument: ",CM=to+"Exponent out of range: ",hg=Math.floor,Ed=Math.pow,A7e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ca,cs=1e7,rr=7,yie=9007199254740991,tN=hg(yie/rr),dt={};dt.absoluteValue=dt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dt.comparedTo=dt.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};dt.decimalPlaces=dt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*rr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};dt.dividedBy=dt.div=function(e){return ec(this,new this.constructor(e))};dt.dividedToIntegerBy=dt.idiv=function(e){var t=this,n=t.constructor;return Vn(ec(t,new n(e),0,1),n.precision)};dt.equals=dt.eq=function(e){return!this.cmp(e)};dt.exponent=function(){return Qr(this)};dt.greaterThan=dt.gt=function(e){return this.cmp(e)>0};dt.greaterThanOrEqualTo=dt.gte=function(e){return this.cmp(e)>=0};dt.isInteger=dt.isint=function(){return this.e>this.d.length-2};dt.isNegative=dt.isneg=function(){return this.s<0};dt.isPositive=dt.ispos=function(){return this.s>0};dt.isZero=function(){return this.s===0};dt.lessThan=dt.lt=function(e){return this.cmp(e)<0};dt.lessThanOrEqualTo=dt.lte=function(e){return this.cmp(e)<1};dt.logarithm=dt.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ca))throw Error(to+"NaN");if(n.s<1)throw Error(to+(n.s?"NaN":"-Infinity"));return n.eq(ca)?new r(0):(cr=!1,t=ec(Yv(n,a),Yv(e,a),a),cr=!0,Vn(t,i))};dt.minus=dt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wie(t,e):bie(t,(e.s=-e.s,e))};dt.modulo=dt.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(to+"NaN");return n.s?(cr=!1,t=ec(n,e,0,1).times(e),cr=!0,n.minus(t)):Vn(new r(n),i)};dt.naturalExponential=dt.exp=function(){return jie(this)};dt.naturalLogarithm=dt.ln=function(){return Yv(this)};dt.negated=dt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dt.plus=dt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bie(t,e):wie(t,(e.s=-e.s,e))};dt.precision=dt.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(lf+e);if(t=Qr(i)+1,r=i.d.length-1,n=r*rr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};dt.squareRoot=dt.sqrt=function(){var e,t,n,r,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(to+"NaN")}for(e=Qr(l),cr=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Xo(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=hg((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=r,r=a.plus(ec(l,a,o+2)).times(.5),Xo(a.d).slice(0,o)===(t=Xo(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Vn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return cr=!0,Vn(r,n)};dt.times=dt.mul=function(e){var t,n,r,i,a,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,c=h.length,u=m.length,c<u&&(a=h,h=m,m=a,o=c,c=u,u=o),a=[],o=c+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=a[i]+m[r]*h[i-r-1]+t,a[i--]=l%cs|0,t=l/cs|0;a[i]=(a[i]+t)%cs|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,cr?Vn(e,f.precision):e};dt.toDecimalPlaces=dt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ml(e,0,fg),t===void 0?t=r.rounding:ml(t,0,8),Vn(n,e+Qr(n)+1,t))};dt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Mf(r,!0):(ml(e,0,fg),t===void 0?t=i.rounding:ml(t,0,8),r=Vn(new i(r),e+1,t),n=Mf(r,!0,e+1)),n};dt.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Mf(i):(ml(e,0,fg),t===void 0?t=a.rounding:ml(t,0,8),r=Vn(new a(i),e+Qr(i)+1,t),n=Mf(r.abs(),!1,e+Qr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};dt.toInteger=dt.toint=function(){var e=this,t=e.constructor;return Vn(new t(e),Qr(e)+1,t.rounding)};dt.toNumber=function(){return+this};dt.toPower=dt.pow=function(e){var t,n,r,i,a,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ca);if(l=new c(l),!l.s){if(e.s<1)throw Error(to+"Infinity");return l}if(l.eq(ca))return l;if(r=c.precision,e.eq(ca))return Vn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=d<0?-d:d)<=yie){for(i=new c(ca),t=Math.ceil(r/rr+4),cr=!1;n%2&&(i=i.times(l),Fz(i.d,t)),n=hg(n/2),n!==0;)l=l.times(l),Fz(l.d,t);return cr=!0,e.s<0?new c(ca).div(i):Vn(i,r)}}else if(a<0)throw Error(to+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,cr=!1,i=e.times(Yv(l,r+u)),cr=!0,i=jie(i),i.s=a,i};dt.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Qr(i),r=Mf(i,n<=a.toExpNeg||n>=a.toExpPos)):(ml(e,1,fg),t===void 0?t=a.rounding:ml(t,0,8),i=Vn(new a(i),e,t),n=Qr(i),r=Mf(i,e<=n||n<=a.toExpNeg,e)),r};dt.toSignificantDigits=dt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ml(e,1,fg),t===void 0?t=r.rounding:ml(t,0,8)),Vn(new r(n),e,t)};dt.toString=dt.valueOf=dt.val=dt.toJSON=dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qr(e),n=e.constructor;return Mf(e,t<=n.toExpNeg||t>=n.toExpPos)};function bie(e,t){var n,r,i,a,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),cr?Vn(t,f):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(r=c,a=-a,l=u.length):(r=u,i=o,l=c.length),o=Math.ceil(f/rr),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/cs|0,c[a]%=cs;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,cr?Vn(t,f):t}function ml(e,t,n){if(e!==~~e||e<t||e>n)throw Error(lf+e)}function Xo(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=rr-r.length,n&&(a+=qc(n)),a+=r;o=e[t],r=o+"",n=rr-r.length,n&&(a+=qc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ec=function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%cs|0,o=a/cs|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*cs+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,c,u,d,f,h,m,g,p,v,b,y,j,N,w,S,k,C,A=r.constructor,D=r.s==i.s?1:-1,P=r.d,_=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(to+"Division by zero");for(c=r.e-i.e,k=_.length,w=P.length,m=new A(D),g=m.d=[],u=0;_[u]==(P[u]||0);)++u;if(_[u]>(P[u]||0)&&--c,a==null?y=a=A.precision:o?y=a+(Qr(r)-Qr(i))+1:y=a,y<0)return new A(0);if(y=y/rr+2|0,u=0,k==1)for(d=0,_=_[0],y++;(u<w||d)&&y--;u++)j=d*cs+(P[u]||0),g[u]=j/_|0,d=j%_|0;else{for(d=cs/(_[0]+1)|0,d>1&&(_=e(_,d),P=e(P,d),k=_.length,w=P.length),N=k,p=P.slice(0,k),v=p.length;v<k;)p[v++]=0;C=_.slice(),C.unshift(0),S=_[0],_[1]>=cs/2&&++S;do d=0,l=t(_,p,k,v),l<0?(b=p[0],k!=v&&(b=b*cs+(p[1]||0)),d=b/S|0,d>1?(d>=cs&&(d=cs-1),f=e(_,d),h=f.length,v=p.length,l=t(f,p,h,v),l==1&&(d--,n(f,k<h?C:_,h))):(d==0&&(l=d=1),f=_.slice()),h=f.length,h<v&&f.unshift(0),n(p,f,v),l==-1&&(v=p.length,l=t(_,p,k,v),l<1&&(d++,n(p,k<v?C:_,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=P[N]||0:(p=[P[N]],v=1);while((N++<w||p[0]!==void 0)&&y--)}return g[0]||g.shift(),m.e=c,Vn(m,o?a+Qr(m)+1:a)}}();function jie(e,t){var n,r,i,a,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Qr(e)>16)throw Error(CM+Qr(e));if(!e.s)return new d(ca);for(cr=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Ed(2,u))/Math.LN10*2+5|0,l+=r,n=i=a=new d(ca),d.precision=l;;){if(i=Vn(i.times(e),l),n=n.times(++c),o=a.plus(ec(i,n,l)),Xo(o.d).slice(0,l)===Xo(a.d).slice(0,l)){for(;u--;)a=Vn(a.times(a),l);return d.precision=f,t==null?(cr=!0,Vn(a,f)):a}a=o}}function Qr(e){for(var t=e.e*rr,n=e.d[0];n>=10;n/=10)t++;return t}function fP(e,t,n){if(t>e.LN10.sd())throw cr=!0,n&&(e.precision=n),Error(to+"LN10 precision limit exceeded");return Vn(new e(e.LN10),t)}function qc(e){for(var t="";e--;)t+="0";return t}function Yv(e,t){var n,r,i,a,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(to+(m.s?"NaN":"-Infinity"));if(m.eq(ca))return new p(0);if(t==null?(cr=!1,u=v):u=t,m.eq(10))return t==null&&(cr=!0),fP(p,u);if(u+=h,p.precision=u,n=Xo(g),r=n.charAt(0),a=Qr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=Xo(m.d),r=n.charAt(0),f++;a=Qr(m),r>1?(m=new p("0."+n),a++):m=new p(r+"."+n.slice(1))}else return c=fP(p,u+2,v).times(a+""),m=Yv(new p(r+"."+n.slice(1)),u-h).plus(c),p.precision=v,t==null?(cr=!0,Vn(m,v)):m;for(l=o=m=ec(m.minus(ca),m.plus(ca),u),d=Vn(m.times(m),u),i=3;;){if(o=Vn(o.times(d),u),c=l.plus(ec(o,new p(i),u)),Xo(c.d).slice(0,u)===Xo(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(fP(p,u+2,v).times(a+""))),l=ec(l,new p(f),u),p.precision=v,t==null?(cr=!0,Vn(l,v)):l;l=c,i+=2}}function $z(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=hg(n/rr),e.d=[],r=(n+1)%rr,n<0&&(r+=rr),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=rr;r<i;)e.d.push(+t.slice(r,r+=rr));t=t.slice(r),r=rr-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),cr&&(e.e>tN||e.e<-tN))throw Error(CM+n)}else e.s=0,e.e=0,e.d=[0];return e}function Vn(e,t,n){var r,i,a,o,l,c,u,d,f=e.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=rr,i=t,u=f[d=0];else{if(d=Math.ceil((r+1)/rr),a=f.length,d>=a)return e;for(u=a=f[d],o=1;a>=10;a/=10)o++;r%=rr,i=r-rr+o}if(n!==void 0&&(a=Ed(10,o-i-1),l=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/Ed(10,o-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(a=Qr(e),f.length=1,t=t-a-1,f[0]=Ed(10,(rr-t%rr)%rr),e.e=hg(-t/rr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=Ed(10,rr-r),f[d]=i>0?(u/Ed(10,o-i)%Ed(10,i)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==cs&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=cs)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(cr&&(e.e>tN||e.e<-tN))throw Error(CM+Qr(e));return e}function wie(e,t){var n,r,i,a,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),cr?Vn(t,m):t;if(c=e.d,f=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(m/rr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}o=0}for(d&&(n=c,c=f,f=n,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=cs-1;--c[a],c[i]+=cs}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,cr?Vn(t,m):t):new h(0)}function Mf(e,t,n){var r,i=Qr(e),a=Xo(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+qc(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+qc(-i-1)+a,n&&(r=n-o)>0&&(a+=qc(r))):i>=o?(a+=qc(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+qc(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=qc(r))),e.s<0?"-"+a:a}function Fz(e,t){if(e.length>t)return e.length=t,!0}function Nie(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(lf+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return $z(o,a.toString())}else if(typeof a!="string")throw Error(lf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,A7e.test(a))$z(o,a);else throw Error(lf+a)}if(i.prototype=dt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Nie,i.config=i.set=T7e,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function T7e(e){if(!e||typeof e!="object")throw Error(to+"Object expected");var t,n,r,i=["precision",1,fg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(hg(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(lf+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(lf+n+": "+r);return this}var kM=Nie(_7e);ca=new kM(1);const $n=kM;function D7e(e){return R7e(e)||M7e(e)||I7e(e)||O7e()}function O7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I7e(e,t){if(e){if(typeof e=="string")return B_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B_(e,t)}}function M7e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function R7e(e){if(Array.isArray(e))return B_(e)}function B_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $7e=function(t){return t},Sie={},Cie=function(t){return t===Sie},Lz=function(t){return function n(){return arguments.length===0||arguments.length===1&&Cie(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},F7e=function e(t,n){return t===1?n:Lz(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==Sie}).length;return o>=t?n.apply(void 0,i):e(t-o,Lz(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return Cie(f)?c.shift():f});return n.apply(void 0,D7e(d).concat(c))}))})},FS=function(t){return F7e(t.length,t)},V_=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},L7e=FS(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),z7e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return $7e;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},q_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},kie=function(t){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=t.apply(void 0,a)),r}};function B7e(e){var t;return e===0?t=1:t=Math.floor(new $n(e).abs().log(10).toNumber())+1,t}function V7e(e,t,n){for(var r=new $n(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var q7e=FS(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),U7e=FS(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),W7e=FS(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const LS={rangeStep:V7e,getDigitCount:B7e,interpolateNumber:q7e,uninterpolateNumber:U7e,uninterpolateTruncation:W7e};function U_(e){return G7e(e)||K7e(e)||Pie(e)||H7e()}function H7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K7e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function G7e(e){if(Array.isArray(e))return W_(e)}function Xv(e,t){return X7e(e)||Y7e(e,t)||Pie(e,t)||Q7e()}function Q7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pie(e,t){if(e){if(typeof e=="string")return W_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W_(e,t)}}function W_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y7e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function X7e(e){if(Array.isArray(e))return e}function Eie(e){var t=Xv(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function _ie(e,t,n){if(e.lte(0))return new $n(0);var r=LS.getDigitCount(e.toNumber()),i=new $n(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new $n(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new $n(Math.ceil(c))}function Z7e(e,t,n){var r=1,i=new $n(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new $n(10).pow(LS.getDigitCount(e)-1),i=new $n(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new $n(Math.floor(e)))}else e===0?i=new $n(Math.floor((t-1)/2)):n||(i=new $n(Math.floor(e)));var o=Math.floor((t-1)/2),l=z7e(L7e(function(c){return i.add(new $n(c-o).mul(r)).toNumber()}),V_);return l(0,t)}function Aie(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new $n(0),tickMin:new $n(0),tickMax:new $n(0)};var a=_ie(new $n(t).sub(e).div(n-1),r,i),o;e<=0&&t>=0?o=new $n(0):(o=new $n(e).add(t).div(2),o=o.sub(new $n(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new $n(t).sub(o).div(a).toNumber()),u=l+c+1;return u>n?Aie(e,t,n,r,i+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:a,tickMin:o.sub(new $n(l).mul(a)),tickMax:o.add(new $n(c).mul(a))})}function J7e(e){var t=Xv(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Eie([n,r]),c=Xv(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(U_(V_(0,i-1).map(function(){return 1/0}))):[].concat(U_(V_(0,i-1).map(function(){return-1/0})),[d]);return n>r?q_(f):f}if(u===d)return Z7e(u,i,a);var h=Aie(u,d,o,a),m=h.step,g=h.tickMin,p=h.tickMax,v=LS.rangeStep(g,p.add(new $n(.1).mul(m)),m);return n>r?q_(v):v}function eGe(e,t){var n=Xv(e,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Eie([r,i]),l=Xv(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(t,2),f=_ie(new $n(u).sub(c).div(d-1),a,0),h=[].concat(U_(LS.rangeStep(new $n(c),new $n(u).sub(new $n(.99).mul(f)),f)),[u]);return r>i?q_(h):h}var tGe=kie(J7e),nGe=kie(eGe),rGe="Invariant failed";function Rf(e,t){throw new Error(rGe)}var sGe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function nN(){return nN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nN.apply(this,arguments)}function iGe(e,t){return cGe(e)||lGe(e,t)||oGe(e,t)||aGe()}function aGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oGe(e,t){if(e){if(typeof e=="string")return zz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zz(e,t)}}function zz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lGe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function cGe(e){if(Array.isArray(e))return e}function uGe(e,t){if(e==null)return{};var n=dGe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dGe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oie(r.key),r)}}function mGe(e,t,n){return t&&hGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pGe(e,t,n){return t=rN(t),gGe(e,Tie()?Reflect.construct(t,n||[],rN(e).constructor):t.apply(e,n))}function gGe(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xGe(e)}function xGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tie=function(){return!!e})()}function rN(e){return rN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rN(e)}function vGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H_(e,t)}function H_(e,t){return H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H_(e,t)}function Die(e,t,n){return t=Oie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oie(e){var t=yGe(e,"string");return dp(t)=="symbol"?t:t+""}function yGe(e,t){if(dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lb=function(e){function t(){return fGe(this,t),pGe(this,t,arguments)}return vGe(t,e),mGe(t,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=uGe(r,sGe),m=yt(h,!1);this.props.direction==="x"&&d.type!=="number"&&Rf();var g=c.map(function(p){var v=u(p,l),b=v.x,y=v.y,j=v.value,N=v.errorVal;if(!N)return null;var w=[],S,k;if(Array.isArray(N)){var C=iGe(N,2);S=C[0],k=C[1]}else S=k=N;if(a==="vertical"){var A=d.scale,D=y+i,P=D+o,_=D-o,O=A(j-S),M=A(j+k);w.push({x1:M,y1:P,x2:M,y2:_}),w.push({x1:O,y1:D,x2:M,y2:D}),w.push({x1:O,y1:P,x2:O,y2:_})}else if(a==="horizontal"){var T=f.scale,R=b+i,F=R-o,E=R+o,B=T(j-S),L=T(j+k);w.push({x1:F,y1:L,x2:E,y2:L}),w.push({x1:R,y1:B,x2:R,y2:L}),w.push({x1:F,y1:B,x2:E,y2:B})}return Q.createElement(cn,nN({className:"recharts-errorBar",key:"bar-".concat(w.map(function(I){return"".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))},m),w.map(function(I){return Q.createElement("line",nN({},I,{key:"line-".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))}))});return Q.createElement(cn,{className:"recharts-errorBars"},g)}}])}(Q.Component);Die(lb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Die(lb,"displayName","ErrorBar");function Zv(e){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zv(e)}function Bz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bz(Object(n),!0).forEach(function(r){bGe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bGe(e,t,n){return t=jGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jGe(e){var t=wGe(e,"string");return Zv(t)=="symbol"?t:t+""}function wGe(e,t){if(Zv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iie=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=sa(n,Nu);if(!o)return null;var l=Nu.defaultProps,c=l!==void 0?md(md({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?md(md({},h),f.props):{},g=m.dataKey,p=m.name,v=m.legendType,b=m.hide;return{inactive:b,dataKey:g,type:c.iconType||v||"square",color:PM(f),value:p||g,payload:m}}),md(md(md({},c),Nu.getWithHeight(o,i)),{},{payload:u,item:o})};function Jv(e){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jv(e)}function Vz(e){return kGe(e)||CGe(e)||SGe(e)||NGe()}function NGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SGe(e,t){if(e){if(typeof e=="string")return K_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(e,t)}}function CGe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kGe(e){if(Array.isArray(e))return K_(e)}function K_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(n),!0).forEach(function(r){dm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dm(e,t,n){return t=PGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PGe(e){var t=EGe(e,"string");return Jv(t)=="symbol"?t:t+""}function EGe(e,t){if(Jv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(e,t,n){return qt(e)||qt(t)?n:as(t)?ga(e,t,n):Ot(t)?t(e):n}function Lx(e,t,n,r){var i=C7e(e,function(l){return $r(l,t)});if(n==="number"){var a=i.filter(function(l){return Ge(l)||parseFloat(l)});return a.length?[$S(a),ou(a)]:[1/0,-1/0]}var o=r?i.filter(function(l){return!qt(l)}):i;return o.map(function(l){return as(l)||l instanceof Date?l:""})}var _Ge=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(pi(f-d)!==pi(h-f)){var g=[];if(pi(h-f)===pi(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var v=h+c[1]-c[0];g[0]=Math.min(f,(v+f)/2),g[1]=Math.max(f,(v+f)/2)}var b=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>b[0]&&t<=b[1]||t>=g[0]&&t<=g[1]){o=i[u].index;break}}else{var y=Math.min(d,h),j=Math.max(d,h);if(t>(y+f)/2&&t<=(j+f)/2){o=i[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N===l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2){o=r[N].index;break}return o},PM=function(t){var n,r=t,i=r.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Cr(Cr({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},AGe=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,v=g.cateAxisId,b=p.filter(function(k){return Jl(k.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,j=y!==void 0?Cr(Cr({},y),b[0].props):b[0].props,N=j.barSize,w=j[v];o[w]||(o[w]=[]);var S=qt(N)?n:N;o[w].push({item:b[0],stackList:b.slice(1),barSize:qt(S)?void 0:gi(S,r,0)})}}return o},TGe=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=gi(n,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=i/c,g=o.reduce(function(N,w){return N+w.barSize||0},0);g+=(c-1)*u,g>=i&&(g-=(c-1)*u,u=0),g>=i&&m>0&&(h=!0,m*=.9,g=c*m);var p=(i-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(N,w){var S={item:w.item,position:{offset:v.offset+v.size+u,size:h?m:w.barSize}},k=[].concat(Vz(N),[S]);return v=k[k.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){k.push({item:C,position:v})}),k},f)}else{var b=gi(r,i,0,!0);i-2*b-(c-1)*u<=0&&(u=0);var y=(i-2*b-(c-1)*u)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;d=o.reduce(function(N,w,S){var k=[].concat(Vz(N),[{item:w.item,position:{offset:b+(y+u)*S+(y-j)/2,size:j}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){k.push({item:C,position:k[k.length-1].position})}),k},f)}return d},DGe=function(t,n,r,i){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=Iie({children:a,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&Ge(t[m]))return Cr(Cr({},t),{},dm({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&Ge(t[g]))return Cr(Cr({},t),{},dm({},g,t[g]+(h||0)))}return t},OGe=function(t,n,r){return qt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Mie=function(t,n,r,i,a){var o=n.props.children,l=xa(o,lb).filter(function(u){return OGe(i,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=$r(d,r);if(qt(f))return u;var h=Array.isArray(f)?[$S(f),ou(f)]:[f,f],m=c.reduce(function(g,p){var v=$r(d,p,0),b=h[0]-Math.abs(Array.isArray(v)?v[0]:v),y=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},IGe=function(t,n,r,i,a){var o=n.map(function(l){return Mie(t,l,r,a,i)}).filter(function(l){return!qt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Rie=function(t,n,r,i,a){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&Mie(t,c,u,i)||Lx(t,u,r,a)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},$ie=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Fie=function(t,n,r,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},Gl=function(t,n,r){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?pi(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!ag(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:a?a[f]:f,index:h,offset:u}})},hP=new WeakMap,mj=function(t,n){if(typeof n!="function")return t;hP.has(t)||hP.set(t,new WeakMap);var r=hP.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Lie=function(t,n,r){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Wv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Xw(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Fx(),realScaleType:"point"}:a==="category"?{scale:Wv(),realScaleType:"band"}:{scale:Xw(),realScaleType:"linear"};if(nb(i)){var c="scale".concat(NS(i));return{scale:(Rz[c]||Fx)(),realScaleType:Rz[c]?c:"point"}}return Ot(i)?{scale:i}:{scale:Fx(),realScaleType:"point"}},Uz=1e-4,zie=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),a=Math.min(i[0],i[1])-Uz,o=Math.max(i[0],i[1])+Uz,l=t(n[0]),c=t(n[r-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[r-1]])}},MGe=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},RGe=function(t,n){if(!n||n.length!==2||!Ge(n[0])||!Ge(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!Ge(t[0])||t[0]<r)&&(a[0]=r),(!Ge(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},$Ge=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,o=0,l=0;l<n;++l){var c=ag(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=a,t[l][r][1]=a+c,a=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},FGe=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var l=ag(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=a,t[o][r][1]=a+l,a=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},LGe={sign:$Ge,expand:s5e,none:rp,silhouette:i5e,wiggle:a5e,positive:FGe},zGe=function(t,n,r){var i=n.map(function(l){return l.props.dataKey}),a=LGe[r],o=r5e().keys(i).value(function(l,c){return+$r(l,c,0)}).order(v_).offset(a);return o(t)},BGe=function(t,n,r,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Cr(Cr({},h.type.defaultProps),h.props):h.props,p=g.stackId,v=g.hide;if(v)return f;var b=g[r],y=f[b]||{hasStack:!1,stackGroups:{}};if(as(p)){var j=y.stackGroups[p]||{numericAxisId:r,cateAxisId:i,items:[]};j.items.push(h),y.hasStack=!0,y.stackGroups[p]=j}else y.stackGroups[Gf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Cr(Cr({},f),{},dm({},b,y))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var b=m.stackGroups[v];return Cr(Cr({},p),{},dm({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:zGe(t,b.items,a)}))},g)}return Cr(Cr({},f),{},dm({},h,m))},d)},Bie=function(t,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=tGe(u,a,l);return t.domain([$S(d),ou(d)]),{niceTicks:d}}if(a&&i==="number"){var f=t.domain(),h=nGe(f,a,l);return{niceTicks:h}}return null};function sN(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!qt(i[t.dataKey])){var l=Aw(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=$r(i,qt(o)?t.dataKey:o);return qt(c)?null:t.scale(c)}var Wz=function(t){var n=t.axis,r=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=$r(o,n.dataKey,n.domain[l]);return qt(c)?null:n.scale(c)-a/2+i},VGe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},qGe=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Cr(Cr({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(as(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},UGe=function(t){return t.reduce(function(n,r){return[$S(r.concat([n[0]]).filter(Ge)),ou(r.concat([n[1]]).filter(Ge))]},[1/0,-1/0])},Vie=function(t,n,r){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(u,d){var f=UGe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Hz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,G_=function(t,n,r){if(Ot(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(Ge(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(Hz.test(t[0])){var a=+Hz.exec(t[0])[1];i[0]=n[0]-a}else Ot(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Ge(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(Kz.test(t[1])){var o=+Kz.exec(t[1])[1];i[1]=n[1]+o}else Ot(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},iN=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var a=tM(n,function(f){return f.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Gz=function(t,n,r){return!t||!t.length||If(t,ga(r,"type.defaultProps.domain"))?n:t},qie=function(t,n){var r=t.type.defaultProps?Cr(Cr({},t.type.defaultProps),t.props):t.props,i=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Cr(Cr({},yt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:PM(t),value:$r(n,i),type:c,payload:n,chartType:u,hide:d})};function ey(e){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function Qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(n),!0).forEach(function(r){Uie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uie(e,t,n){return t=WGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WGe(e){var t=HGe(e,"string");return ey(t)=="symbol"?t:t+""}function HGe(e,t){if(ey(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KGe(e,t){return XGe(e)||YGe(e,t)||QGe(e,t)||GGe()}function GGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QGe(e,t){if(e){if(typeof e=="string")return Yz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yz(e,t)}}function Yz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YGe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function XGe(e){if(Array.isArray(e))return e}var aN=Math.PI/180,ZGe=function(t){return t*180/Math.PI},Xn=function(t,n,r,i){return{x:t+Math.cos(-aN*i)*r,y:n+Math.sin(-aN*i)*r}},Wie=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},JGe=function(t,n,r,i,a){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=gi(t.cx,o,o/2),f=gi(t.cy,l,l/2),h=Wie(o,l,r),m=gi(t.innerRadius,h,0),g=gi(t.outerRadius,h,h*.8),p=Object.keys(n);return p.reduce(function(v,b){var y=n[b],j=y.domain,N=y.reversed,w;if(qt(y.range))i==="angleAxis"?w=[c,u]:i==="radiusAxis"&&(w=[m,g]),N&&(w=[w[1],w[0]]);else{w=y.range;var S=w,k=KGe(S,2);c=k[0],u=k[1]}var C=Lie(y,a),A=C.realScaleType,D=C.scale;D.domain(j).range(w),zie(D);var P=Bie(D,Rl(Rl({},y),{},{realScaleType:A})),_=Rl(Rl(Rl({},y),P),{},{range:w,radius:g,realScaleType:A,scale:D,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return Rl(Rl({},v),{},Uie({},b,_))},{})},eQe=function(t,n){var r=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},tQe=function(t,n){var r=t.x,i=t.y,a=n.cx,o=n.cy,l=eQe({x:r,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:ZGe(u),angleInRadian:u}},nQe=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},rQe=function(t,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},Xz=function(t,n){var r=t.x,i=t.y,a=tQe({x:r,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=nQe(n),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?Rl(Rl({},n),{},{radius:o,angle:rQe(m,n)}):null},Hie=function(t){return!x.isValidElement(t)&&!Ot(t)&&typeof t!="boolean"?t.className:""};function ty(e){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ty(e)}var sQe=["offset"];function iQe(e){return cQe(e)||lQe(e)||oQe(e)||aQe()}function aQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oQe(e,t){if(e){if(typeof e=="string")return Q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(e,t)}}function lQe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cQe(e){if(Array.isArray(e))return Q_(e)}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uQe(e,t){if(e==null)return{};var n=dQe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dQe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Zz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zz(Object(n),!0).forEach(function(r){fQe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fQe(e,t,n){return t=hQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hQe(e){var t=mQe(e,"string");return ty(t)=="symbol"?t:t+""}function mQe(e,t){if(ty(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ny.apply(this,arguments)}var pQe=function(t){var n=t.value,r=t.formatter,i=qt(t.children)?n:t.children;return Ot(r)?r(i):i},gQe=function(t,n){var r=pi(n-t),i=Math.min(Math.abs(n-t),360);return r*i},xQe=function(t,n,r){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,v=(f+h)/2,b=gQe(m,g),y=b>=0?1:-1,j,N;i==="insideStart"?(j=m+y*o,N=p):i==="insideEnd"?(j=g-y*o,N=!p):i==="end"&&(j=g+y*o,N=p),N=b<=0?N:!N;var w=Xn(u,d,v,j),S=Xn(u,d,v,j+(N?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),C=qt(t.id)?Gf("recharts-radial-line-"):t.id;return Q.createElement("text",ny({},r,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",l)}),Q.createElement("defs",null,Q.createElement("path",{id:C,d:k})),Q.createElement("textPath",{xlinkHref:"#".concat(C)},n))},vQe=function(t){var n=t.viewBox,r=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,h=(d+f)/2;if(i==="outside"){var m=Xn(o,l,u+r,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,b=Xn(o,l,v,h),y=b.x,j=b.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},yQe=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*i,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,v=p*i,b=p>0?"end":"start",y=p>0?"start":"end";if(a==="top"){var j={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:m};return Jr(Jr({},j),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var N={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return Jr(Jr({},N),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var w={x:l-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Jr(Jr({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(a==="right"){var S={x:l+u+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Jr(Jr({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var k=r?{width:u,height:d}:{};return a==="insideLeft"?Jr({x:l+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},k):a==="insideRight"?Jr({x:l+u-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},k):a==="insideTop"?Jr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},k):a==="insideBottom"?Jr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},k):a==="insideTopLeft"?Jr({x:l+v,y:c+h,textAnchor:y,verticalAnchor:g},k):a==="insideTopRight"?Jr({x:l+u-v,y:c+h,textAnchor:b,verticalAnchor:g},k):a==="insideBottomLeft"?Jr({x:l+v,y:c+d-h,textAnchor:y,verticalAnchor:m},k):a==="insideBottomRight"?Jr({x:l+u-v,y:c+d-h,textAnchor:b,verticalAnchor:m},k):ng(a)&&(Ge(a.x)||Fd(a.x))&&(Ge(a.y)||Fd(a.y))?Jr({x:l+gi(a.x,u),y:c+gi(a.y,d),textAnchor:"end",verticalAnchor:"end"},k):Jr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},bQe=function(t){return"cx"in t&&Ge(t.cx)};function fs(e){var t=e.offset,n=t===void 0?5:t,r=uQe(e,sQe),i=Jr({offset:n},r),a=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!a||qt(l)&&qt(c)&&!x.isValidElement(u)&&!Ot(u))return null;if(x.isValidElement(u))return x.cloneElement(u,i);var m;if(Ot(u)){if(m=x.createElement(u,i),x.isValidElement(m))return m}else m=pQe(i);var g=bQe(a),p=yt(i,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return xQe(i,m,p);var v=g?vQe(i):yQe(i);return Q.createElement(Of,ny({className:Ut("recharts-label",f)},p,v,{breakAll:h}),m)}fs.displayName="Label";var Kie=function(t){var n=t.cx,r=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,v=t.height,b=t.clockWise,y=t.labelViewBox;if(y)return y;if(Ge(p)&&Ge(v)){if(Ge(f)&&Ge(h))return{x:f,y:h,width:p,height:v};if(Ge(m)&&Ge(g))return{x:m,y:g,width:p,height:v}}return Ge(f)&&Ge(h)?{x:f,y:h,width:0,height:0}:Ge(n)&&Ge(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},jQe=function(t,n){return t?t===!0?Q.createElement(fs,{key:"label-implicit",viewBox:n}):as(t)?Q.createElement(fs,{key:"label-implicit",viewBox:n,value:t}):x.isValidElement(t)?t.type===fs?x.cloneElement(t,{key:"label-implicit",viewBox:n}):Q.createElement(fs,{key:"label-implicit",content:t,viewBox:n}):Ot(t)?Q.createElement(fs,{key:"label-implicit",content:t,viewBox:n}):ng(t)?Q.createElement(fs,ny({viewBox:n},t,{key:"label-implicit"})):null:null},wQe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=Kie(t),o=xa(i,fs).map(function(c,u){return x.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var l=jQe(t.label,n||a);return[l].concat(iQe(o))};fs.parseViewBox=Kie;fs.renderCallByParent=wQe;function NQe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var SQe=NQe;const CQe=yn(SQe);function ry(e){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ry(e)}var kQe=["valueAccessor"],PQe=["data","dataKey","clockWise","id","textBreakAll"];function EQe(e){return DQe(e)||TQe(e)||AQe(e)||_Qe()}function _Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AQe(e,t){if(e){if(typeof e=="string")return Y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(e,t)}}function TQe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DQe(e){if(Array.isArray(e))return Y_(e)}function Y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oN(){return oN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oN.apply(this,arguments)}function Jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(n),!0).forEach(function(r){OQe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OQe(e,t,n){return t=IQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IQe(e){var t=MQe(e,"string");return ry(t)=="symbol"?t:t+""}function MQe(e,t){if(ry(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tB(e,t){if(e==null)return{};var n=RQe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RQe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var $Qe=function(t){return Array.isArray(t.value)?CQe(t.value):t.value};function ol(e){var t=e.valueAccessor,n=t===void 0?$Qe:t,r=tB(e,kQe),i=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=tB(r,PQe);return!i||!i.length?null:Q.createElement(cn,{className:"recharts-label-list"},i.map(function(d,f){var h=qt(a)?n(d,f):$r(d&&d.payload,a),m=qt(l)?{}:{id:"".concat(l,"-").concat(f)};return Q.createElement(fs,oN({},yt(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:fs.parseViewBox(qt(o)?d:eB(eB({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}ol.displayName="LabelList";function FQe(e,t){return e?e===!0?Q.createElement(ol,{key:"labelList-implicit",data:t}):Q.isValidElement(e)||Ot(e)?Q.createElement(ol,{key:"labelList-implicit",data:t,content:e}):ng(e)?Q.createElement(ol,oN({data:t},e,{key:"labelList-implicit"})):null:null}function LQe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=xa(r,ol).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=FQe(e.label,t);return[a].concat(EQe(i))}ol.renderCallByParent=LQe;function sy(e){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X_.apply(this,arguments)}function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(r){zQe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zQe(e,t,n){return t=BQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BQe(e){var t=VQe(e,"string");return sy(t)=="symbol"?t:t+""}function VQe(e,t){if(sy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qQe=function(t,n){var r=pi(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},pj=function(t){var n=t.cx,r=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/aN,h=u?a:a+o*f,m=Xn(n,r,d,h),g=Xn(n,r,i,h),p=u?a-o*f:a,v=Xn(n,r,d*Math.cos(f*aN),p);return{center:m,circleTangency:g,lineTangency:v,theta:f}},Gie=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=qQe(o,l),u=o+c,d=Xn(n,r,a,o),f=Xn(n,r,a,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=Xn(n,r,i,o),g=Xn(n,r,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},UQe=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=pi(d-u),h=pj({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,v=pj({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=v.circleTangency,y=v.lineTangency,j=v.theta,N=c?Math.abs(u-d):Math.abs(u-d)-p-j;if(N<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Gie({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var S=pj({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=S.circleTangency,C=S.lineTangency,A=S.theta,D=pj({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=D.circleTangency,_=D.lineTangency,O=D.theta,M=c?Math.abs(u-d):Math.abs(u-d)-A-O;if(M<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},WQe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qie=function(t){var n=rB(rB({},WQe),t),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(o<a||d===f)return null;var m=Ut("recharts-sector",h),g=o-a,p=gi(l,g,0,!0),v;return p>0&&Math.abs(d-f)<360?v=UQe({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=Gie({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:d,endAngle:f}),Q.createElement("path",X_({},yt(n,!0),{className:m,d:v,role:"img"}))};function iy(e){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iy(e)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z_.apply(this,arguments)}function sB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sB(Object(n),!0).forEach(function(r){HQe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HQe(e,t,n){return t=KQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KQe(e){var t=GQe(e,"string");return iy(t)=="symbol"?t:t+""}function GQe(e,t){if(iy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aB={curveBasisClosed:H3e,curveBasisOpen:K3e,curveBasis:W3e,curveBumpX:T3e,curveBumpY:D3e,curveLinearClosed:G3e,curveLinear:CS,curveMonotoneX:Q3e,curveMonotoneY:Y3e,curveNatural:X3e,curveStep:Z3e,curveStepAfter:e5e,curveStepBefore:J3e},gj=function(t){return t.x===+t.x&&t.y===+t.y},Zg=function(t){return t.x},Jg=function(t){return t.y},QQe=function(t,n){if(Ot(t))return t;var r="curve".concat(NS(t));return(r==="curveMonotone"||r==="curveBump")&&n?aB["".concat(r).concat(n==="vertical"?"Y":"X")]:aB[r]||CS},YQe=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=QQe(r,l),f=u?a.filter(function(p){return gj(p)}):a,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return gj(p)}):o,g=f.map(function(p,v){return iB(iB({},p),{},{base:m[v]})});return l==="vertical"?h=aj().y(Jg).x1(Zg).x0(function(p){return p.base.x}):h=aj().x(Zg).y1(Jg).y0(function(p){return p.base.y}),h.defined(gj).curve(d),h(g)}return l==="vertical"&&Ge(o)?h=aj().y(Jg).x1(Zg).x0(o):Ge(o)?h=aj().x(Zg).y1(Jg).y0(o):h=qre().x(Zg).y(Jg),h.defined(gj).curve(d),h(f)},cf=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?YQe(t):i;return Q.createElement("path",Z_({},yt(t,!1),Tw(t),{className:Ut("recharts-curve",n),d:o,ref:a}))},Yie={exports:{}},XQe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZQe=XQe,JQe=ZQe;function Xie(){}function Zie(){}Zie.resetWarningCache=Xie;var eYe=function(){function e(r,i,a,o,l,c){if(c!==JQe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zie,resetWarningCache:Xie};return n.PropTypes=n,n};Yie.exports=eYe();var tYe=Yie.exports;const Pn=yn(tYe);var nYe=Object.getOwnPropertyNames,rYe=Object.getOwnPropertySymbols,sYe=Object.prototype.hasOwnProperty;function oB(e,t){return function(r,i,a){return e(r,i,a)&&t(r,i,a)}}function xj(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var a=i.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=e(n,r,i);return a.delete(n),a.delete(r),c}}function lB(e){return nYe(e).concat(rYe(e))}var iYe=Object.hasOwn||function(e,t){return sYe.call(e,t)};function Xf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var aYe="__v",oYe="__o",lYe="_owner",cB=Object.getOwnPropertyDescriptor,uB=Object.keys;function cYe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function uYe(e,t){return Xf(e.getTime(),t.getTime())}function dYe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function fYe(e,t){return e===t}function dB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,f,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var hYe=Xf;function mYe(e,t,n){var r=uB(e),i=r.length;if(uB(t).length!==i)return!1;for(;i-- >0;)if(!Jie(e,t,n,r[i]))return!1;return!0}function ex(e,t,n){var r=lB(e),i=r.length;if(lB(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=r[i],!Jie(e,t,n,a)||(o=cB(e,a),l=cB(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function pYe(e,t){return Xf(e.valueOf(),t.valueOf())}function gYe(e,t){return e.source===t.source&&e.flags===t.flags}function fB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function xYe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function vYe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Jie(e,t,n,r){return(r===lYe||r===oYe||r===aYe)&&(e.$$typeof||t.$$typeof)?!0:iYe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var yYe="[object Arguments]",bYe="[object Boolean]",jYe="[object Date]",wYe="[object Error]",NYe="[object Map]",SYe="[object Number]",CYe="[object Object]",kYe="[object RegExp]",PYe="[object Set]",EYe="[object String]",_Ye="[object URL]",AYe=Array.isArray,hB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,mB=Object.assign,TYe=Object.prototype.toString.call.bind(Object.prototype.toString);function DYe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var b=typeof g;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(g,p,v):b==="function"?i(g,p,v):!1;var y=g.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(g,p,v);if(AYe(g))return t(g,p,v);if(hB!=null&&hB(g))return f(g,p,v);if(y===Date)return n(g,p,v);if(y===RegExp)return u(g,p,v);if(y===Map)return a(g,p,v);if(y===Set)return d(g,p,v);var j=TYe(g);return j===jYe?n(g,p,v):j===kYe?u(g,p,v):j===NYe?a(g,p,v):j===PYe?d(g,p,v):j===CYe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):j===_Ye?h(g,p,v):j===wYe?r(g,p,v):j===yYe?l(g,p,v):j===bYe||j===SYe||j===EYe?c(g,p,v):!1}}function OYe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?ex:cYe,areDatesEqual:uYe,areErrorsEqual:dYe,areFunctionsEqual:fYe,areMapsEqual:r?oB(dB,ex):dB,areNumbersEqual:hYe,areObjectsEqual:r?ex:mYe,arePrimitiveWrappersEqual:pYe,areRegExpsEqual:gYe,areSetsEqual:r?oB(fB,ex):fB,areTypedArraysEqual:r?ex:xYe,areUrlsEqual:vYe};if(n&&(i=mB({},i,n(i))),t){var a=xj(i.areArraysEqual),o=xj(i.areMapsEqual),l=xj(i.areObjectsEqual),c=xj(i.areSetsEqual);i=mB({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function IYe(e){return function(t,n,r,i,a,o,l){return e(t,n,l)}}function MYe(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return n(c,u,{cache:h,equals:i,meta:m,strict:a})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var RYe=ad();ad({strict:!0});ad({circular:!0});ad({circular:!0,strict:!0});ad({createInternalComparator:function(){return Xf}});ad({strict:!0,createInternalComparator:function(){return Xf}});ad({circular:!0,createInternalComparator:function(){return Xf}});ad({circular:!0,createInternalComparator:function(){return Xf},strict:!0});function ad(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=OYe(e),c=DYe(l),u=r?r(c):IYe(c);return MYe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function $Ye(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function pB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):$Ye(i)};requestAnimationFrame(r)}function J_(e){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J_(e)}function FYe(e){return VYe(e)||BYe(e)||zYe(e)||LYe()}function LYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zYe(e,t){if(e){if(typeof e=="string")return gB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gB(e,t)}}function gB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BYe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VYe(e){if(Array.isArray(e))return e}function qYe(){var e={},t=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=FYe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){pB(i.bind(null,u),c);return}i(c),pB(i.bind(null,u));return}J_(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function ay(e){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay(e)}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(n),!0).forEach(function(r){eae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eae(e,t,n){return t=UYe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UYe(e){var t=WYe(e,"string");return ay(t)==="symbol"?t:String(t)}function WYe(e,t){if(ay(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ay(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HYe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},KYe=function(t){return t},GYe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},zx=function(t,n){return Object.keys(n).reduce(function(r,i){return vB(vB({},r),{},eae({},i,t(i,n[i])))},{})},yB=function(t,n,r){return t.map(function(i){return"".concat(GYe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function QYe(e,t){return ZYe(e)||XYe(e,t)||tae(e,t)||YYe()}function YYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XYe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ZYe(e){if(Array.isArray(e))return e}function JYe(e){return nXe(e)||tXe(e)||tae(e)||eXe()}function eXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tae(e,t){if(e){if(typeof e=="string")return eA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eA(e,t)}}function tXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nXe(e){if(Array.isArray(e))return eA(e)}function eA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lN=1e-4,nae=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},rae=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},bB=function(t,n){return function(r){var i=nae(t,n);return rae(i,r)}},rXe=function(t,n){return function(r){var i=nae(t,n),a=[].concat(JYe(i.map(function(o,l){return o*l}).slice(1)),[0]);return rae(a,r)}},jB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=QYe(u,4);i=d[0],a=d[1],o=d[2],l=d[3]}}}var f=bB(i,o),h=bB(a,l),m=rXe(i,o),g=function(b){return b>1?1:b<0?0:b},p=function(b){for(var y=b>1?1:b,j=y,N=0;N<8;++N){var w=f(j)-y,S=m(j);if(Math.abs(w-y)<lN||S<lN)return h(j);j=g(j-w/S)}return h(j)};return p.isStepper=!1,p},sXe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*r,g=h*a,p=h+(m-g)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<lN&&Math.abs(p)<lN?[f,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},iXe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jB(i);case"spring":return sXe();default:if(i.split("(")[0]==="cubic-bezier")return jB(i)}return typeof i=="function"?i:null};function oy(e){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function wB(e){return lXe(e)||oXe(e)||sae(e)||aXe()}function aXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lXe(e){if(Array.isArray(e))return nA(e)}function NB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(n),!0).forEach(function(r){tA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tA(e,t,n){return t=cXe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cXe(e){var t=uXe(e,"string");return oy(t)==="symbol"?t:String(t)}function uXe(e,t){if(oy(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(oy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dXe(e,t){return mXe(e)||hXe(e,t)||sae(e,t)||fXe()}function fXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sae(e,t){if(e){if(typeof e=="string")return nA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nA(e,t)}}function nA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hXe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function mXe(e){if(Array.isArray(e))return e}var cN=function(t,n,r){return t+(n-t)*r},rA=function(t){var n=t.from,r=t.to;return n!==r},pXe=function e(t,n,r){var i=zx(function(a,o){if(rA(o)){var l=t(o.from,o.to,o.velocity),c=dXe(l,2),u=c[0],d=c[1];return Es(Es({},o),{},{from:u,velocity:d})}return o},n);return r<1?zx(function(a,o){return rA(o)?Es(Es({},o),{},{velocity:cN(o.velocity,i[a].velocity,r),from:cN(o.from,i[a].from,r)}):o},n):e(t,i,r-1)};const gXe=function(e,t,n,r,i){var a=HYe(e,t),o=a.reduce(function(v,b){return Es(Es({},v),{},tA({},b,[e[b],t[b]]))},{}),l=a.reduce(function(v,b){return Es(Es({},v),{},tA({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return zx(function(b,y){return y.from},l)},m=function(){return!Object.values(l).filter(rA).length},g=function(b){u||(u=b);var y=b-u,j=y/n.dt;l=pXe(n,l,j),i(Es(Es(Es({},e),t),h())),u=b,m()||(c=requestAnimationFrame(f))},p=function(b){d||(d=b);var y=(b-d)/r,j=zx(function(w,S){return cN.apply(void 0,wB(S).concat([n(y)]))},o);if(i(Es(Es(Es({},e),t),j)),y<1)c=requestAnimationFrame(f);else{var N=zx(function(w,S){return cN.apply(void 0,wB(S).concat([n(1)]))},o);i(Es(Es(Es({},e),t),N))}};return f=n.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}var xXe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function vXe(e,t){if(e==null)return{};var n=yXe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function mP(e){return NXe(e)||wXe(e)||jXe(e)||bXe()}function bXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jXe(e,t){if(e){if(typeof e=="string")return sA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(e,t)}}function wXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NXe(e){if(Array.isArray(e))return sA(e)}function sA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){px(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function px(e,t,n){return t=iae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CXe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iae(r.key),r)}}function kXe(e,t,n){return t&&CXe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iae(e){var t=PXe(e,"string");return fp(t)==="symbol"?t:String(t)}function PXe(e,t){if(fp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EXe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iA(e,t)}function iA(e,t){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iA(e,t)}function _Xe(e){var t=AXe();return function(){var r=uN(e),i;if(t){var a=uN(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return aA(this,i)}}function aA(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oA(e)}function oA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AXe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uN(e){return uN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uN(e)}var Mo=function(e){EXe(n,e);var t=_Xe(n);function n(r,i){var a;SXe(this,n),a=t.call(this,r,i);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(oA(a)),a.changeStyle=a.changeStyle.bind(oA(a)),!l||m<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:d}),aA(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof h=="function")return a.state={style:u},aA(a);a.state={style:c?px({},c,u):u}}else a.state={style:{}};return a}return kXe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,h=this.state.style;if(l){if(!o){var m={style:c?px({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(RYe(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:i.to;if(this.state&&h){var v={style:c?px({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(v)}this.runAnimation(ao(ao({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,m=gXe(o,l,iXe(u),c,this.changeStyle),g=function(){a.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,v,b){if(b===0)return p;var y=v.duration,j=v.easing,N=j===void 0?"ease":j,w=v.style,S=v.properties,k=v.onAnimationEnd,C=b>0?o[b-1]:v,A=S||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(mP(p),[a.runJSAnimation.bind(a,{from:C.style,to:w,duration:y,easing:N}),y]);var D=yB(A,y,N),P=ao(ao(ao({},C.style),w),{},{transition:D});return[].concat(mP(p),[P,y,k]).filter(KYe)};return this.manager.start([c].concat(mP(o.reduce(m,[d,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=qYe());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,m=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var p=l?px({},l,c):c,v=yB(Object.keys(p),o,u);g.start([d,a,ao(ao({},p),{},{transition:v}),o,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=vXe(i,xXe),u=x.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var f=function(m){var g=m.props,p=g.style,v=p===void 0?{}:p,b=g.className,y=x.cloneElement(m,ao(ao({},c),{},{style:ao(ao({},v),d),className:b}));return y};return u===1?f(x.Children.only(a)):Q.createElement("div",null,x.Children.map(a,function(h){return f(h)}))}}]),n}(x.PureComponent);Mo.displayName="Animate";Mo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Mo.propTypes={from:Pn.oneOfType([Pn.object,Pn.string]),to:Pn.oneOfType([Pn.object,Pn.string]),attributeName:Pn.string,duration:Pn.number,begin:Pn.number,easing:Pn.oneOfType([Pn.string,Pn.func]),steps:Pn.arrayOf(Pn.shape({duration:Pn.number.isRequired,style:Pn.object.isRequired,easing:Pn.oneOfType([Pn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pn.func]),properties:Pn.arrayOf("string"),onAnimationEnd:Pn.func})),children:Pn.oneOfType([Pn.node,Pn.func]),isActive:Pn.bool,canBegin:Pn.bool,onAnimationEnd:Pn.func,shouldReAnimate:Pn.bool,onAnimationStart:Pn.func,onAnimationReStart:Pn.func};function ly(e){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(e)}function dN(){return dN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dN.apply(this,arguments)}function TXe(e,t){return MXe(e)||IXe(e,t)||OXe(e,t)||DXe()}function DXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OXe(e,t){if(e){if(typeof e=="string")return CB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CB(e,t)}}function CB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IXe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function MXe(e){if(Array.isArray(e))return e}function kB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(n),!0).forEach(function(r){RXe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RXe(e,t,n){return t=$Xe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Xe(e){var t=FXe(e,"string");return ly(t)=="symbol"?t:t+""}function FXe(e,t){if(ly(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EB=function(t,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=a[h]>o?o:a[h];d="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(n)),d+="L ".concat(t+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*f[1])),d+="L ".concat(t+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+r-c*f[2],",").concat(n+i)),d+="L ".concat(t+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+i-l*f[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var g=Math.min(o,a);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+i-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+i,`
            L `).concat(t+c*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+i-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},LXe=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},zXe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EM=function(t){var n=PB(PB({},zXe),t),r=x.useRef(),i=x.useState(-1),a=TXe(i,2),o=a[0],l=a[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,m=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var j=Ut("recharts-rectangle",m);return y?Q.createElement(Mo,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:y},function(N){var w=N.width,S=N.height,k=N.x,C=N.y;return Q.createElement(Mo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:b,easing:g},Q.createElement("path",dN({},yt(n,!0),{className:j,d:EB(k,C,w,S,h),ref:r})))}):Q.createElement("path",dN({},yt(n,!0),{className:j,d:EB(c,u,d,f,h)}))},BXe=["points","className","baseLinePoints","connectNulls"];function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qh.apply(this,arguments)}function VXe(e,t){if(e==null)return{};var n=qXe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qXe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _B(e){return KXe(e)||HXe(e)||WXe(e)||UXe()}function UXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WXe(e,t){if(e){if(typeof e=="string")return lA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lA(e,t)}}function HXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KXe(e){if(Array.isArray(e))return lA(e)}function lA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var AB=function(t){return t&&t.x===+t.x&&t.y===+t.y},GXe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){AB(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),AB(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Bx=function(t,n){var r=GXe(t);n&&(r=[r.reduce(function(a,o){return[].concat(_B(a),_B(o))},[])]);var i=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},QXe=function(t,n,r){var i=Bx(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Bx(n.reverse(),r).slice(1))},YXe=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,a=t.connectNulls,o=VXe(t,BXe);if(!n||!n.length)return null;var l=Ut("recharts-polygon",r);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=QXe(n,i,a);return Q.createElement("g",{className:l},Q.createElement("path",qh({},yt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?Q.createElement("path",qh({},yt(o,!0),{fill:"none",d:Bx(n,a)})):null,c?Q.createElement("path",qh({},yt(o,!0),{fill:"none",d:Bx(i,a)})):null)}var d=Bx(n,a);return Q.createElement("path",qh({},yt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(this,arguments)}var cb=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,o=Ut("recharts-dot",a);return n===+n&&r===+r&&i===+i?Q.createElement("circle",cA({},yt(t,!1),Tw(t),{className:o,cx:n,cy:r,r:i})):null};function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}var XXe=["x","y","top","left","width","height","className"];function uA(){return uA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uA.apply(this,arguments)}function TB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZXe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TB(Object(n),!0).forEach(function(r){JXe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JXe(e,t,n){return t=eZe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eZe(e){var t=tZe(e,"string");return cy(t)=="symbol"?t:t+""}function tZe(e,t){if(cy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nZe(e,t){if(e==null)return{};var n=rZe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rZe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var sZe=function(t,n,r,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},iZe=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=nZe(t,XXe),v=ZXe({x:r,y:a,top:l,left:u,width:f,height:m},p);return!Ge(r)||!Ge(a)||!Ge(f)||!Ge(m)||!Ge(l)||!Ge(u)?null:Q.createElement("path",uA({},yt(v,!0),{className:Ut("recharts-cross",g),d:sZe(r,a,f,m,l,u)}))},aZe=RS,oZe=xie,lZe=wl;function cZe(e,t){return e&&e.length?aZe(e,lZe(t),oZe):void 0}var uZe=cZe;const dZe=yn(uZe);var fZe=RS,hZe=wl,mZe=vie;function pZe(e,t){return e&&e.length?fZe(e,hZe(t),mZe):void 0}var gZe=pZe;const xZe=yn(gZe);var vZe=["cx","cy","angle","ticks","axisLine"],yZe=["ticks","tick","angle","tickFormatter","stroke"];function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}function DB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(n),!0).forEach(function(r){zS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OB(e,t){if(e==null)return{};var n=bZe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bZe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oae(r.key),r)}}function wZe(e,t,n){return t&&IB(e.prototype,t),n&&IB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NZe(e,t,n){return t=fN(t),SZe(e,aae()?Reflect.construct(t,n||[],fN(e).constructor):t.apply(e,n))}function SZe(e,t){if(t&&(hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CZe(e)}function CZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aae=function(){return!!e})()}function fN(e){return fN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fN(e)}function kZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dA(e,t)}function dA(e,t){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dA(e,t)}function zS(e,t,n){return t=oae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oae(e){var t=PZe(e,"string");return hp(t)=="symbol"?t:t+""}function PZe(e,t){if(hp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BS=function(e){function t(){return jZe(this,t),NZe(this,t,arguments)}return kZe(t,e),wZe(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return Xn(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=dZe(l,function(d){return d.coordinate||0}),u=xZe(l,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=OB(r,vZe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Xn(i,a,d[0],o),h=Xn(i,a,d[1],o),m=pd(pd(pd({},yt(u,!1)),{},{fill:"none"},yt(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return Q.createElement("line",Vx({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=OB(i,yZe),f=this.getTickTextAnchor(),h=yt(d,!1),m=yt(o,!1),g=a.map(function(p,v){var b=r.getTickValueCoord(p),y=pd(pd(pd(pd({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},b),{},{payload:p});return Q.createElement(cn,Vx({className:Ut("recharts-polar-radius-axis-tick",Hie(o)),key:"tick-".concat(p.coordinate)},Df(r.props,p,v)),t.renderTickItem(o,y,c?c(p.value,v):p.value))});return Q.createElement(cn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,o=r.tick;return!i||!i.length?null:Q.createElement(cn,{className:Ut("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),fs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return Q.isValidElement(r)?o=Q.cloneElement(r,i):Ot(r)?o=r(i):o=Q.createElement(Of,Vx({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(x.PureComponent);zS(BS,"displayName","PolarRadiusAxis");zS(BS,"axisType","radiusAxis");zS(BS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ad.apply(this,arguments)}function MB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MB(Object(n),!0).forEach(function(r){VS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cae(r.key),r)}}function _Ze(e,t,n){return t&&RB(e.prototype,t),n&&RB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function AZe(e,t,n){return t=hN(t),TZe(e,lae()?Reflect.construct(t,n||[],hN(e).constructor):t.apply(e,n))}function TZe(e,t){if(t&&(mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DZe(e)}function DZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lae=function(){return!!e})()}function hN(e){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hN(e)}function OZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fA(e,t)}function fA(e,t){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fA(e,t)}function VS(e,t,n){return t=cae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cae(e){var t=IZe(e,"string");return mp(t)=="symbol"?t:t+""}function IZe(e,t){if(mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MZe=Math.PI/180,$B=1e-5,qS=function(e){function t(){return EZe(this,t),AZe(this,t,arguments)}return OZe(t,e),_Ze(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=Xn(a,o,l,r.coordinate),h=Xn(a,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*MZe),o;return a>$B?o=i==="outer"?"start":"end":a<-$B?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=gd(gd({},yt(this.props,!1)),{},{fill:"none"},yt(l,!1));if(c==="circle")return Q.createElement(cb,Ad({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:o}));var d=this.props.ticks,f=d.map(function(h){return Xn(i,a,o,h.coordinate)});return Q.createElement(YXe,Ad({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=yt(this.props,!1),f=yt(o,!1),h=gd(gd({},d),{},{fill:"none"},yt(l,!1)),m=a.map(function(g,p){var v=r.getTickLineCoord(g),b=r.getTickTextAnchor(g),y=gd(gd(gd({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:v.x2,y:v.y2});return Q.createElement(cn,Ad({className:Ut("recharts-polar-angle-axis-tick",Hie(o)),key:"tick-".concat(g.coordinate)},Df(r.props,g,p)),l&&Q.createElement("line",Ad({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,y,c?c(g.value,p):g.value))});return Q.createElement(cn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!i||!i.length?null:Q.createElement(cn,{className:Ut("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var o;return Q.isValidElement(r)?o=Q.cloneElement(r,i):Ot(r)?o=r(i):o=Q.createElement(Of,Ad({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(x.PureComponent);VS(qS,"displayName","PolarAngleAxis");VS(qS,"axisType","angleAxis");VS(qS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var RZe=hse,$Ze=RZe(Object.getPrototypeOf,Object),FZe=$Ze,LZe=bc,zZe=FZe,BZe=jc,VZe="[object Object]",qZe=Function.prototype,UZe=Object.prototype,uae=qZe.toString,WZe=UZe.hasOwnProperty,HZe=uae.call(Object);function KZe(e){if(!BZe(e)||LZe(e)!=VZe)return!1;var t=zZe(e);if(t===null)return!0;var n=WZe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&uae.call(n)==HZe}var GZe=KZe;const QZe=yn(GZe);var YZe=bc,XZe=jc,ZZe="[object Boolean]";function JZe(e){return e===!0||e===!1||XZe(e)&&YZe(e)==ZZe}var eJe=JZe;const tJe=yn(eJe);function uy(e){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mN.apply(this,arguments)}function nJe(e,t){return aJe(e)||iJe(e,t)||sJe(e,t)||rJe()}function rJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sJe(e,t){if(e){if(typeof e=="string")return FB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FB(e,t)}}function FB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iJe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function aJe(e){if(Array.isArray(e))return e}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){oJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oJe(e,t,n){return t=lJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lJe(e){var t=cJe(e,"string");return uy(t)=="symbol"?t:t+""}function cJe(e,t){if(uy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BB=function(t,n,r,i,a){var o=r-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+a),l+="L ".concat(t+r-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},uJe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dJe=function(t){var n=zB(zB({},uJe),t),r=x.useRef(),i=x.useState(-1),a=nJe(i,2),o=a[0],l=a[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var y=Ut("recharts-trapezoid",m);return b?Q.createElement(Mo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(j){var N=j.upperWidth,w=j.lowerWidth,S=j.height,k=j.x,C=j.y;return Q.createElement(Mo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},Q.createElement("path",mN({},yt(n,!0),{className:y,d:BB(k,C,N,w,S),ref:r})))}):Q.createElement("g",null,Q.createElement("path",mN({},yt(n,!0),{className:y,d:BB(c,u,d,f,h)})))},fJe=["option","shapeType","propTransformer","activeClassName","isActive"];function dy(e){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}function hJe(e,t){if(e==null)return{};var n=mJe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mJe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function VB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VB(Object(n),!0).forEach(function(r){pJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pJe(e,t,n){return t=gJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gJe(e){var t=xJe(e,"string");return dy(t)=="symbol"?t:t+""}function xJe(e,t){if(dy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vJe(e,t){return pN(pN({},t),e)}function yJe(e,t){return e==="symbols"}function qB(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Q.createElement(EM,n);case"trapezoid":return Q.createElement(dJe,n);case"sector":return Q.createElement(Qie,n);case"symbols":if(yJe(t))return Q.createElement(KI,n);break;default:return null}}function bJe(e){return x.isValidElement(e)?e.props:e}function dae(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?vJe:r,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=hJe(e,fJe),u;if(x.isValidElement(t))u=x.cloneElement(t,pN(pN({},c),bJe(t)));else if(Ot(t))u=t(c);else if(QZe(t)&&!tJe(t)){var d=i(t,c);u=Q.createElement(qB,{shapeType:n,elementProps:d})}else{var f=c;u=Q.createElement(qB,{shapeType:n,elementProps:f})}return l?Q.createElement(cn,{className:o},u):u}function US(e,t){return t!=null&&"trapezoids"in e.props}function WS(e,t){return t!=null&&"sectors"in e.props}function fy(e,t){return t!=null&&"points"in e.props}function jJe(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&a}function wJe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function NJe(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function SJe(e,t){var n;return US(e,t)?n=jJe:WS(e,t)?n=wJe:fy(e,t)&&(n=NJe),n}function CJe(e,t){var n;return US(e,t)?n="trapezoids":WS(e,t)?n="sectors":fy(e,t)&&(n="points"),n}function kJe(e,t){if(US(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(WS(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return fy(e,t)?t.payload:{}}function PJe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=CJe(n,t),a=kJe(n,t),o=r.filter(function(c,u){var d=If(a,c),f=n.props[i].filter(function(g){var p=SJe(n,t);return p(g,t)}),h=n.props[i].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var a0;function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uh.apply(this,arguments)}function UB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UB(Object(n),!0).forEach(function(r){Fa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hae(r.key),r)}}function _Je(e,t,n){return t&&WB(e.prototype,t),n&&WB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function AJe(e,t,n){return t=gN(t),TJe(e,fae()?Reflect.construct(t,n||[],gN(e).constructor):t.apply(e,n))}function TJe(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DJe(e)}function DJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fae=function(){return!!e})()}function gN(e){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gN(e)}function OJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hA(e,t)}function hA(e,t){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hA(e,t)}function Fa(e,t,n){return t=hae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hae(e){var t=IJe(e,"string");return pp(t)=="symbol"?t:t+""}function IJe(e,t){if(pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nl=function(e){function t(n){var r;return EJe(this,t),r=AJe(this,t,[n]),Fa(r,"pieRef",null),Fa(r,"sectorRefs",[]),Fa(r,"id",Gf("recharts-pie-")),Fa(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ot(i)&&i()}),Fa(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ot(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return OJe(t,e),_Je(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=yt(this.props,!1),f=yt(o,!1),h=yt(l,!1),m=o&&o.offsetRadius||20,g=r.map(function(p,v){var b=(p.startAngle+p.endAngle)/2,y=Xn(p.cx,p.cy,p.outerRadius+m,b),j=Kn(Kn(Kn(Kn({},d),p),{},{stroke:"none"},f),{},{index:v,textAnchor:t.getTextAnchor(y.x,p.cx)},y),N=Kn(Kn(Kn(Kn({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Xn(p.cx,p.cy,p.outerRadius,b),y]}),w=c;return qt(c)&&qt(u)?w="value":qt(c)&&(w=u),Q.createElement(cn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,j,$r(p,w)))});return Q.createElement(cn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,m=f?o:h,g=Kn(Kn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Q.createElement(cn,Uh({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Df(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),Q.createElement(dae,Uh({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return Q.createElement(Mo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],b=a&&a[0],y=b.startAngle;return a.forEach(function(j,N){var w=h&&h[N],S=N>0?ga(j,"paddingAngle",0):0;if(w){var k=ss(w.endAngle-w.startAngle,j.endAngle-j.startAngle),C=Kn(Kn({},j),{},{startAngle:y+S,endAngle:y+k(p)+S});v.push(C),y=C.endAngle}else{var A=j.endAngle,D=j.startAngle,P=ss(0,A-D),_=P(p),O=Kn(Kn({},j),{},{startAngle:y+S,endAngle:y+_+S});v.push(O),y=O.endAngle}}),Q.createElement(cn,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!If(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,g=this.state.isAnimationFinished;if(a||!o||!o.length||!Ge(u)||!Ge(d)||!Ge(f)||!Ge(h))return null;var p=Ut("recharts-pie",l);return Q.createElement(cn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(b){r.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),fs.renderCallByParent(this.props,null,!1),(!m||g)&&ol.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(Q.isValidElement(r))return Q.cloneElement(r,i);if(Ot(r))return r(i);var o=Ut("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Q.createElement(cf,Uh({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,a){if(Q.isValidElement(r))return Q.cloneElement(r,i);var o=a;if(Ot(r)&&(o=r(i),Q.isValidElement(o)))return o;var l=Ut("recharts-pie-label-text",typeof r!="boolean"&&!Ot(r)?r.className:"");return Q.createElement(Of,Uh({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);a0=Nl;Fa(Nl,"displayName","Pie");Fa(Nl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!rd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Fa(Nl,"parseDeltaAngle",function(e,t){var n=pi(t-e),r=Math.min(Math.abs(t-e),360);return n*r});Fa(Nl,"getRealPieData",function(e){var t=e.data,n=e.children,r=yt(e,!1),i=xa(n,ug);return t&&t.length?t.map(function(a,o){return Kn(Kn(Kn({payload:a},r),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return Kn(Kn({},r),a.props)}):[]});Fa(Nl,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,a=t.height,o=Wie(i,a),l=r+gi(e.cx,i,i/2),c=n+gi(e.cy,a,a/2),u=gi(e.innerRadius,o,0),d=gi(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Fa(Nl,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Kn(Kn({},t.type.defaultProps),t.props):t.props,i=a0.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,m=Math.abs(r.minAngle),g=a0.parseCoordinateOfPie(r,n),p=a0.parseDeltaAngle(o,l),v=Math.abs(p),b=u;qt(u)&&qt(f)?(Po(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):qt(u)&&(Po(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var y=i.filter(function(C){return $r(C,b,0)!==0}).length,j=(v>=360?y:y-1)*c,N=v-y*m-j,w=i.reduce(function(C,A){var D=$r(A,b,0);return C+(Ge(D)?D:0)},0),S;if(w>0){var k;S=i.map(function(C,A){var D=$r(C,b,0),P=$r(C,d,A),_=(Ge(D)?D:0)/w,O;A?O=k.endAngle+pi(p)*c*(D!==0?1:0):O=o;var M=O+pi(p)*((D!==0?m:0)+_*N),T=(O+M)/2,R=(g.innerRadius+g.outerRadius)/2,F=[{name:P,value:D,payload:C,dataKey:b,type:h}],E=Xn(g.cx,g.cy,R,T);return k=Kn(Kn(Kn({percent:_,cornerRadius:a,name:P,tooltipPayload:F,midAngle:T,middleRadius:R,tooltipPosition:E},C),g),{},{value:$r(C,b),startAngle:O,endAngle:M,payload:C,paddingAngle:pi(p)*c}),k})}return Kn(Kn({},g),{},{sectors:S,data:i})});var MJe=Math.ceil,RJe=Math.max;function $Je(e,t,n,r){for(var i=-1,a=RJe(MJe((t-e)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=e,e+=n;return o}var FJe=$Je,LJe=Dse,HB=1/0,zJe=17976931348623157e292;function BJe(e){if(!e)return e===0?e:0;if(e=LJe(e),e===HB||e===-HB){var t=e<0?-1:1;return t*zJe}return e===e?e:0}var mae=BJe,VJe=FJe,qJe=_S,pP=mae;function UJe(e){return function(t,n,r){return r&&typeof r!="number"&&qJe(t,n,r)&&(n=r=void 0),t=pP(t),n===void 0?(n=t,t=0):n=pP(n),r=r===void 0?t<n?1:-1:pP(r),VJe(t,n,r,e)}}var WJe=UJe,HJe=WJe,KJe=HJe(),GJe=KJe;const xN=yn(GJe);function hy(e){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(e)}function KB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function GB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(n),!0).forEach(function(r){pae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pae(e,t,n){return t=QJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QJe(e){var t=YJe(e,"string");return hy(t)=="symbol"?t:t+""}function YJe(e,t){if(hy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XJe=["Webkit","Moz","O","ms"],ZJe=function(t,n){var r=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=XJe.reduce(function(a,o){return GB(GB({},a),{},pae({},o+r,n))},{});return i[t]=n,i};function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vN.apply(this,arguments)}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(r){ea(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xae(r.key),r)}}function eet(e,t,n){return t&&YB(e.prototype,t),n&&YB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tet(e,t,n){return t=yN(t),net(e,gae()?Reflect.construct(t,n||[],yN(e).constructor):t.apply(e,n))}function net(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ret(e)}function ret(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gae=function(){return!!e})()}function yN(e){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(e)}function set(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mA(e,t)}function mA(e,t){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mA(e,t)}function ea(e,t,n){return t=xae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xae(e){var t=iet(e,"string");return gp(t)=="symbol"?t:t+""}function iet(e,t){if(gp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var aet=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Fx().domain(xN(0,c)).range([a,a+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},XB=function(t){return t.changedTouches&&!!t.changedTouches.length},xp=function(e){function t(n){var r;return JJe(this,t),r=tet(this,t,[n]),ea(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ea(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ea(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),ea(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ea(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ea(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ea(r,"handleSlideDragStart",function(i){var a=XB(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return set(t,e),eet(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,a),h=Math.max(i,a),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=$r(a[r],l,r);return Ot(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=r.pageX-a;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==h||v.endIndex!==m)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=XB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,b={startX:this.state.startX,endX:this.state.endX},y=r.pageX-a;y>0?y=Math.min(y,f+h-m-u):y<0&&(y=Math.max(y,f-u)),b[o]=u+y;var j=this.getIndex(b),N=j.startIndex,w=j.endIndex,S=function(){var C=v.length-1;return o==="startX"&&(l>c?N%p===0:w%p===0)||l<c&&w===C||o==="endX"&&(l>c?w%p===0:N%p===0)||l>c&&w===C};this.setState(ea(ea({},o,u+y),"brushMoveStartX",r.pageX),function(){g&&S()&&g(j)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=l.length)){var m=l[h];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(ea({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return Q.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=x.Children.only(u);return f?Q.cloneElement(f,{x:i,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,b=Math.max(r,this.props.x),y=gP(gP({},yt(this.props,!1)),{},{x:b,y:u,width:d,height:f}),j=m||"Min value: ".concat((a=g[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return Q.createElement(cn,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return Q.createElement(cn,{className:"recharts-brush-texts"},Q.createElement(Of,vN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(i)),Q.createElement(Of,vN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,v=h.isSlideMoving,b=h.isTravellerMoving,y=h.isTravellerFocused;if(!i||!i.length||!Ge(l)||!Ge(c)||!Ge(u)||!Ge(d)||u<=0||d<=0)return null;var j=Ut("recharts-brush",a),N=Q.Children.count(o)===1,w=ZJe("userSelect","none");return Q.createElement(cn,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||b||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(a+l/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Q.isValidElement(r)?a=Q.cloneElement(r,i):Ot(r)?a=r(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return gP({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?aet({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>i?l=c:o=c}return i>=r[l]?l:o}}])}(x.PureComponent);ea(xp,"displayName","Brush");ea(xp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oet=eM;function cet(e,t){var n;return oet(e,function(r,i,a){return n=t(r,i,a),!n}),!!n}var uet=cet,det=ise,fet=wl,het=uet,met=Yi,pet=_S;function get(e,t,n){var r=met(e)?det:het;return n&&pet(e,t,n)&&(t=void 0),r(e,fet(t))}var xet=get;const vet=yn(xet);var ll=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},ZB=Pse;function yet(e,t,n){t=="__proto__"&&ZB?ZB(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var bet=yet,jet=bet,wet=Cse,Net=wl;function Cet(e,t){var n={};return t=Net(t),wet(e,function(r,i,a){jet(n,i,t(r,i,a))}),n}var ket=Cet;const Pet=yn(ket);function Eet(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var _et=Eet,Aet=eM;function Tet(e,t){var n=!0;return Aet(e,function(r,i,a){return n=!!t(r,i,a),n}),n}var Det=Tet,Oet=_et,Iet=Det,Met=wl,Ret=Yi,$et=_S;function Fet(e,t,n){var r=Ret(e)?Oet:Iet;return n&&$et(e,t,n)&&(t=void 0),r(e,Met(t))}var Let=Fet;const vae=yn(Let);var zet=["x","y"];function my(e){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(e)}function pA(){return pA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pA.apply(this,arguments)}function JB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JB(Object(n),!0).forEach(function(r){Bet(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bet(e,t,n){return t=Vet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vet(e){var t=qet(e,"string");return my(t)=="symbol"?t:t+""}function qet(e,t){if(my(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(my(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uet(e,t){if(e==null)return{};var n=Wet(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Wet(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Het(e,t){var n=e.x,r=e.y,i=Uet(e,zet),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),h=parseInt(f,10);return tx(tx(tx(tx(tx({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function e6(e){return Q.createElement(dae,pA({shapeType:"rectangle",propTransformer:Het,activeClassName:"recharts-active-bar"},e))}var Ket=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var a=typeof r=="number";return a?t(r,i):(a||Rf(),n)}},Get=["value","background"],yae;function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function Qet(e,t){if(e==null)return{};var n=Yet(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Yet(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bN(){return bN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bN.apply(this,arguments)}function t6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(n),!0).forEach(function(r){lu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jae(r.key),r)}}function Zet(e,t,n){return t&&n6(e.prototype,t),n&&n6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jet(e,t,n){return t=jN(t),ett(e,bae()?Reflect.construct(t,n||[],jN(e).constructor):t.apply(e,n))}function ett(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ttt(e)}function ttt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bae=function(){return!!e})()}function jN(e){return jN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jN(e)}function ntt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gA(e,t)}function gA(e,t){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gA(e,t)}function lu(e,t,n){return t=jae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jae(e){var t=rtt(e,"string");return vp(t)=="symbol"?t:t+""}function rtt(e,t){if(vp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eo=function(e){function t(){var n;Xet(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Jet(this,t,[].concat(i)),lu(n,"state",{isAnimationFinished:!1}),lu(n,"id",Gf("recharts-bar-")),lu(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),lu(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return ntt(t,e),Zet(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=yt(this.props,!1);return r&&r.map(function(f,h){var m=h===c,g=m?u:o,p=Ur(Ur(Ur({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement(cn,bN({className:"recharts-bar-rectangle"},Df(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),Q.createElement(e6,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return Q.createElement(Mo,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=a.map(function(v,b){var y=h&&h[b];if(y){var j=ss(y.x,v.x),N=ss(y.y,v.y),w=ss(y.width,v.width),S=ss(y.height,v.height);return Ur(Ur({},v),{},{x:j(g),y:N(g),width:w(g),height:S(g)})}if(o==="horizontal"){var k=ss(0,v.height),C=k(g);return Ur(Ur({},v),{},{y:v.y+v.height-C,height:C})}var A=ss(0,v.width),D=A(g);return Ur(Ur({},v),{},{width:D})});return Q.createElement(cn,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!If(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=yt(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,h=Qet(u,Get);if(!f)return null;var m=Ur(Ur(Ur(Ur(Ur({},h),{},{fill:"#eee"},f),c),Df(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return Q.createElement(e6,bN({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,f=xa(d,lb);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,b){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:$r(v,b)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement(cn,g,f.map(function(p){return Q.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,m=r.isAnimationActive,g=r.background,p=r.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,b=Ut("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=y||j,w=qt(p)?this.id:p;return Q.createElement(cn,{className:b},y||j?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(w)},Q.createElement("rect",{x:y?u:u-f/2,y:j?d:d-h/2,width:y?f:f*2,height:j?h:h*2}))):null,Q.createElement(cn,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!m||v)&&ol.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(x.PureComponent);yae=Eo;lu(Eo,"displayName","Bar");lu(Eo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});lu(Eo,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=MGe(r,n);if(!m)return null;var g=t.layout,p=n.type.defaultProps,v=p!==void 0?Ur(Ur({},p),n.props):n.props,b=v.dataKey,y=v.children,j=v.minPointSize,N=g==="horizontal"?o:a,w=u?N.scale.domain():null,S=VGe({numericAxis:N}),k=xa(y,ug),C=f.map(function(A,D){var P,_,O,M,T,R;u?P=RGe(u[d+D],w):(P=$r(A,b),Array.isArray(P)||(P=[S,P]));var F=Ket(j,yae.defaultProps.minPointSize)(P[1],D);if(g==="horizontal"){var E,B=[o.scale(P[0]),o.scale(P[1])],L=B[0],I=B[1];_=Wz({axis:a,ticks:l,bandSize:i,offset:m.offset,entry:A,index:D}),O=(E=I??L)!==null&&E!==void 0?E:void 0,M=m.size;var q=L-I;if(T=Number.isNaN(q)?0:q,R={x:_,y:o.y,width:M,height:o.height},Math.abs(F)>0&&Math.abs(T)<Math.abs(F)){var $=pi(T||F)*(Math.abs(F)-Math.abs(T));O-=$,T+=$}}else{var z=[a.scale(P[0]),a.scale(P[1])],Y=z[0],ne=z[1];if(_=Y,O=Wz({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:A,index:D}),M=ne-Y,T=m.size,R={x:a.x,y:O,width:a.width,height:T},Math.abs(F)>0&&Math.abs(M)<Math.abs(F)){var te=pi(M||F)*(Math.abs(F)-Math.abs(M));M+=te}}return Ur(Ur(Ur({},A),{},{x:_,y:O,width:M,height:T,value:u?P:P[1],payload:A,background:R},k&&k[D]&&k[D].props),{},{tooltipPayload:[qie(n,A)],tooltipPosition:{x:_+M/2,y:O+T/2}})});return Ur({data:C,layout:g},h)});function py(e){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(e)}function stt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wae(r.key),r)}}function itt(e,t,n){return t&&r6(e.prototype,t),n&&r6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s6(Object(n),!0).forEach(function(r){HS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HS(e,t,n){return t=wae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wae(e){var t=att(e,"string");return py(t)=="symbol"?t:t+""}function att(e,t){if(py(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _M=function(t,n,r,i,a){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!sa(u,Eo);return d.reduce(function(m,g){var p=n[g],v=p.orientation,b=p.domain,y=p.padding,j=y===void 0?{}:y,N=p.mirror,w=p.reversed,S="".concat(v).concat(N?"Mirror":""),k,C,A,D,P;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var _=b[1]-b[0],O=1/0,M=p.categoricalDomain.sort();if(M.forEach(function(z,Y){Y>0&&(O=Math.min((z||0)-(M[Y-1]||0),O))}),Number.isFinite(O)){var T=O/_,R=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(k=T*R/2),p.padding==="no-gap"){var F=gi(t.barCategoryGap,T*R),E=T*R/2;k=E-F-(E-F)/R*F}}}i==="xAxis"?C=[r.left+(j.left||0)+(k||0),r.left+r.width-(j.right||0)-(k||0)]:i==="yAxis"?C=c==="horizontal"?[r.top+r.height-(j.bottom||0),r.top+(j.top||0)]:[r.top+(j.top||0)+(k||0),r.top+r.height-(j.bottom||0)-(k||0)]:C=p.range,w&&(C=[C[1],C[0]]);var B=Lie(p,a,h),L=B.scale,I=B.realScaleType;L.domain(b).range(C),zie(L);var q=Bie(L,ho(ho({},p),{},{realScaleType:I}));i==="xAxis"?(P=v==="top"&&!N||v==="bottom"&&N,A=r.left,D=f[S]-P*p.height):i==="yAxis"&&(P=v==="left"&&!N||v==="right"&&N,A=f[S]-P*p.width,D=r.top);var $=ho(ho(ho({},p),q),{},{realScaleType:I,x:A,y:D,scale:L,width:i==="xAxis"?r.width:p.width,height:i==="yAxis"?r.height:p.height});return $.bandSize=iN($,q),!p.hide&&i==="xAxis"?f[S]+=(P?-1:1)*$.height:p.hide||(f[S]+=(P?-1:1)*$.width),ho(ho({},m),{},HS({},g,$))},{})},Nae=function(t,n){var r=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},ott=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2;return Nae({x:n,y:r},{x:i,y:a})},Sae=function(){function e(t){stt(this,e),this.scale=t}return itt(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();HS(Sae,"EPS",1e-4);var AM=function(t){var n=Object.keys(t).reduce(function(r,i){return ho(ho({},r),{},HS({},i,Sae.create(t[i])))},{});return ho(ho({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return Pet(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return vae(i,function(a,o){return n[o].isInRange(a)})}})};function ltt(e){return(e%180+180)%180}var ctt=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ltt(i),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},utt=wl,dtt=rb,ftt=PS;function htt(e){return function(t,n,r){var i=Object(t);if(!dtt(t)){var a=utt(n);t=ftt(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}}var mtt=htt,ptt=mae;function gtt(e){var t=ptt(e),n=t%1;return t===t?n?t-n:t:0}var xtt=gtt,vtt=yse,ytt=wl,btt=xtt,jtt=Math.max;function wtt(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:btt(n);return i<0&&(i=jtt(r+i,0)),vtt(e,ytt(t),i)}var Ntt=wtt,Stt=mtt,Ctt=Ntt,ktt=Stt(Ctt),Ptt=ktt;const Ett=yn(Ptt);var _tt=CFe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),TM=x.createContext(void 0),DM=x.createContext(void 0),Cae=x.createContext(void 0),kae=x.createContext({}),Pae=x.createContext(void 0),Eae=x.createContext(0),_ae=x.createContext(0),i6=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=_tt(a);return Q.createElement(TM.Provider,{value:r},Q.createElement(DM.Provider,{value:i},Q.createElement(kae.Provider,{value:a},Q.createElement(Cae.Provider,{value:d},Q.createElement(Pae.Provider,{value:o},Q.createElement(Eae.Provider,{value:u},Q.createElement(_ae.Provider,{value:c},l)))))))},Att=function(){return x.useContext(Pae)},Aae=function(t){var n=x.useContext(TM);n==null&&Rf();var r=n[t];return r==null&&Rf(),r},Ttt=function(){var t=x.useContext(TM);return Qc(t)},Dtt=function(){var t=x.useContext(DM),n=Ett(t,function(r){return vae(r.domain,Number.isFinite)});return n||Qc(t)},Tae=function(t){var n=x.useContext(DM);n==null&&Rf();var r=n[t];return r==null&&Rf(),r},Ott=function(){var t=x.useContext(Cae);return t},Itt=function(){return x.useContext(kae)},OM=function(){return x.useContext(_ae)},IM=function(){return x.useContext(Eae)};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function Mtt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rtt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oae(r.key),r)}}function $tt(e,t,n){return t&&Rtt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ftt(e,t,n){return t=wN(t),Ltt(e,Dae()?Reflect.construct(t,n||[],wN(e).constructor):t.apply(e,n))}function Ltt(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ztt(e)}function ztt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dae=function(){return!!e})()}function wN(e){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(e)}function Btt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xA(e,t)}function xA(e,t){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xA(e,t)}function a6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(n),!0).forEach(function(r){MM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MM(e,t,n){return t=Oae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oae(e){var t=Vtt(e,"string");return yp(t)=="symbol"?t:t+""}function Vtt(e,t){if(yp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qtt(e,t){return Ktt(e)||Htt(e,t)||Wtt(e,t)||Utt()}function Utt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wtt(e,t){if(e){if(typeof e=="string")return l6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l6(e,t)}}function l6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Htt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Ktt(e){if(Array.isArray(e))return e}function vA(){return vA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vA.apply(this,arguments)}var Gtt=function(t,n){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,n):Ot(t)?r=t(n):r=Q.createElement("line",vA({},n,{className:"recharts-reference-line-line"})),r},Qtt=function(t,n,r,i,a,o,l,c,u){var d=a.x,f=a.y,h=a.width,m=a.height;if(r){var g=u.y,p=t.y.apply(g,{position:o});if(ll(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(n){var b=u.x,y=t.x.apply(b,{position:o});if(ll(u,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:f+m},{x:y,y:f}];return l==="top"?j.reverse():j}if(i){var N=u.segment,w=N.map(function(S){return t.apply(S,{position:o})});return ll(u,"discard")&&vet(w,function(S){return!t.isInRange(S)})?null:w}return null};function Ytt(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Att(),d=Aae(i),f=Tae(a),h=Ott();if(!u||!h)return null;Po(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=AM({x:d.scale,y:f.scale}),g=as(t),p=as(n),v=r&&r.length===2,b=Qtt(m,g,p,v,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var y=qtt(b,2),j=y[0],N=j.x,w=j.y,S=y[1],k=S.x,C=S.y,A=ll(e,"hidden")?"url(#".concat(u,")"):void 0,D=o6(o6({clipPath:A},yt(e,!0)),{},{x1:N,y1:w,x2:k,y2:C});return Q.createElement(cn,{className:Ut("recharts-reference-line",l)},Gtt(o,D),fs.renderCallByParent(e,ott({x1:N,y1:w,x2:k,y2:C})))}var KS=function(e){function t(){return Mtt(this,t),Ftt(this,t,arguments)}return Btt(t,e),$tt(t,[{key:"render",value:function(){return Q.createElement(Ytt,this.props)}}])}(Q.Component);MM(KS,"displayName","ReferenceLine");MM(KS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function yA(){return yA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yA.apply(this,arguments)}function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function c6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function u6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(n),!0).forEach(function(r){GS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xtt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ztt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mae(r.key),r)}}function Jtt(e,t,n){return t&&Ztt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ent(e,t,n){return t=NN(t),tnt(e,Iae()?Reflect.construct(t,n||[],NN(e).constructor):t.apply(e,n))}function tnt(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nnt(e)}function nnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iae=function(){return!!e})()}function NN(e){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(e)}function rnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bA(e,t)}function bA(e,t){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bA(e,t)}function GS(e,t,n){return t=Mae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mae(e){var t=snt(e,"string");return bp(t)=="symbol"?t:t+""}function snt(e,t){if(bp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var int=function(t){var n=t.x,r=t.y,i=t.xAxis,a=t.yAxis,o=AM({x:i.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return ll(t,"discard")&&!o.isInRange(l)?null:l},QS=function(e){function t(){return Xtt(this,t),ent(this,t,arguments)}return rnt(t,e),Jtt(t,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=as(i),d=as(a);if(Po(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=int(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,v=g.className,b=ll(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=u6(u6({clipPath:b},yt(this.props,!0)),{},{cx:h,cy:m});return Q.createElement(cn,{className:Ut("recharts-reference-dot",v)},t.renderDot(p,y),fs.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(Q.Component);GS(QS,"displayName","ReferenceDot");GS(QS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});GS(QS,"renderDot",function(e,t){var n;return Q.isValidElement(e)?n=Q.cloneElement(e,t):Ot(e)?n=e(t):n=Q.createElement(cb,yA({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function jA(){return jA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jA.apply(this,arguments)}function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function d6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function f6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(n),!0).forEach(function(r){YS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ant(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ont(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$ae(r.key),r)}}function lnt(e,t,n){return t&&ont(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cnt(e,t,n){return t=SN(t),unt(e,Rae()?Reflect.construct(t,n||[],SN(e).constructor):t.apply(e,n))}function unt(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dnt(e)}function dnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rae=function(){return!!e})()}function SN(e){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(e)}function fnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wA(e,t)}function wA(e,t){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wA(e,t)}function YS(e,t,n){return t=$ae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ae(e){var t=hnt(e,"string");return jp(t)=="symbol"?t:t+""}function hnt(e,t){if(jp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mnt=function(t,n,r,i,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var h=AM({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ll(a,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:Nae(m,g)},XS=function(e){function t(){return ant(this,t),cnt(this,t,arguments)}return fnt(t,e),lnt(t,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Po(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=as(i),h=as(a),m=as(o),g=as(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var v=mnt(f,h,m,g,this.props);if(!v&&!p)return null;var b=ll(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Q.createElement(cn,{className:Ut("recharts-reference-area",c)},t.renderRect(p,f6(f6({clipPath:b},yt(this.props,!0)),v)),fs.renderCallByParent(this.props,v))}}])}(Q.Component);YS(XS,"displayName","ReferenceArea");YS(XS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});YS(XS,"renderRect",function(e,t){var n;return Q.isValidElement(e)?n=Q.cloneElement(e,t):Ot(e)?n=e(t):n=Q.createElement(EM,jA({},t,{className:"recharts-reference-area-rect"})),n});function Fae(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function pnt(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return ctt(r,n)}function gnt(e,t,n){var r=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function CN(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function xnt(e,t){return Fae(e,t+1)}function vnt(e,t,n,r,i){for(var a=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:Fae(r,u)};var p=c,v,b=function(){return v===void 0&&(v=n(g,p)),v},y=g.coordinate,j=c===0||CN(e,y,b,d,l);j||(c=0,d=o,u+=1),j&&(d=y+e*(b()/2+i),c+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function gy(e){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(e)}function h6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(n),!0).forEach(function(r){ynt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ynt(e,t,n){return t=bnt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bnt(e){var t=jnt(e,"string");return gy(t)=="symbol"?t:t+""}function jnt(e,t){if(gy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wnt(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,l=t.start,c=t.end,u=function(h){var m=a[h],g,p=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var v=e*(m.coordinate+e*p()/2-c);a[h]=m=Gs(Gs({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else a[h]=m=Gs(Gs({},m),{},{tickCoord:m.coordinate});var b=CN(e,m.tickCoord,p,l,c);b&&(c=m.tickCoord-e*(p()/2+i),a[h]=Gs(Gs({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function Nnt(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(a){var d=r[l-1],f=n(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Gs(Gs({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=CN(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+i),o[l-1]=Gs(Gs({},d),{},{isShow:!0}))}for(var g=a?l-1:l,p=function(y){var j=o[y],N,w=function(){return N===void 0&&(N=n(j,y)),N};if(y===0){var S=e*(j.coordinate-e*w()/2-c);o[y]=j=Gs(Gs({},j),{},{tickCoord:S<0?j.coordinate-S*e:j.coordinate})}else o[y]=j=Gs(Gs({},j),{},{tickCoord:j.coordinate});var k=CN(e,j.tickCoord,w,c,u);k&&(c=j.tickCoord+e*(w()/2+i),o[y]=Gs(Gs({},j),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function RM(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!i||!i.length||!r)return[];if(Ge(c)||rd.isSsr)return xnt(i,typeof c=="number"&&Ge(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?$x(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(j,N){var w=Ot(u)?u(j.value,N):j.value;return m==="width"?pnt($x(w,{fontSize:t,letterSpacing:n}),g,f):$x(w,{fontSize:t,letterSpacing:n})[m]},v=i.length>=2?pi(i[1].coordinate-i[0].coordinate):1,b=gnt(a,v,m);return c==="equidistantPreserveStart"?vnt(v,b,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Nnt(v,b,p,i,o,c==="preserveStartEnd"):h=wnt(v,b,p,i,o),h.filter(function(y){return y.isShow}))}var Snt=["viewBox"],Cnt=["viewBox"],knt=["ticks"];function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wh.apply(this,arguments)}function m6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(n),!0).forEach(function(r){$M(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xP(e,t){if(e==null)return{};var n=Pnt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pnt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ent(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zae(r.key),r)}}function _nt(e,t,n){return t&&p6(e.prototype,t),n&&p6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ant(e,t,n){return t=kN(t),Tnt(e,Lae()?Reflect.construct(t,n||[],kN(e).constructor):t.apply(e,n))}function Tnt(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dnt(e)}function Dnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lae=function(){return!!e})()}function kN(e){return kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kN(e)}function Ont(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NA(e,t)}function NA(e,t){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NA(e,t)}function $M(e,t,n){return t=zae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zae(e){var t=Int(e,"string");return wp(t)=="symbol"?t:t+""}function Int(e,t){if(wp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mg=function(e){function t(n){var r;return Ent(this,t),r=Ant(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ont(t,e),_nt(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=xP(r,Snt),l=this.props,c=l.viewBox,u=xP(l,Cnt);return!cm(a,c)||!cm(o,u)||!cm(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,m,g,p,v,b,y,j=f?-1:1,N=r.tickSize||d,w=Ge(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,v=o+ +!f*c,p=v-j*N,y=p-j*h,b=w;break;case"left":p=v=r.coordinate,g=a+ +!f*l,m=g-j*N,b=m-j*h,y=w;break;case"right":p=v=r.coordinate,g=a+ +f*l,m=g+j*N,b=m+j*h,y=w;break;default:m=g=r.coordinate,v=o+ +f*c,p=v+j*N,y=p+j*h,b=w;break}return{line:{x1:m,y1:p,x2:g,y2:v},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=ai(ai(ai({},yt(this.props,!1)),yt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=ai(ai({},f),{},{x1:i,y1:a+h*l,x2:i+o,y2:a+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=ai(ai({},f),{},{x1:i+m*o,y1:a,x2:i+m*o,y2:a+l})}return Q.createElement("line",Wh({},f,{className:Ut("recharts-cartesian-axis-line",ga(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=RM(ai(ai({},this.props),{},{ticks:r}),i,a),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=yt(this.props,!1),b=yt(d,!1),y=ai(ai({},v),{},{fill:"none"},yt(c,!1)),j=m.map(function(N,w){var S=o.getTickLineCoord(N),k=S.line,C=S.tick,A=ai(ai(ai(ai({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},b),C),{},{index:w,payload:N,visibleTicksCount:m.length,tickFormatter:f});return Q.createElement(cn,Wh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Df(o.props,N,w)),c&&Q.createElement("line",Wh({},y,k,{className:Ut("recharts-cartesian-axis-tick-line",ga(c,"className"))})),d&&t.renderTickItem(d,A,"".concat(Ot(f)?f(N.value,w):N.value).concat(h||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,m=xP(f,knt),g=h;return Ot(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:Q.createElement(cn,{className:Ut("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),fs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return Q.isValidElement(r)?o=Q.cloneElement(r,i):Ot(r)?o=r(i):o=Q.createElement(Of,Wh({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(x.Component);$M(mg,"displayName","CartesianAxis");$M(mg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Mnt=["x1","y1","x2","y2","key"],Rnt=["offset"];function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function g6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(n),!0).forEach(function(r){$nt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $nt(e,t,n){return t=Fnt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fnt(e){var t=Lnt(e,"string");return $f(t)=="symbol"?t:t+""}function Lnt(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}function x6(e,t){if(e==null)return{};var n=znt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function znt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Bnt=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return Q.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Bae(e,t){var n;if(Q.isValidElement(e))n=Q.cloneElement(e,t);else if(Ot(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=x6(t,Mnt),u=yt(c,!1);u.offset;var d=x6(u,Rnt);n=Q.createElement("line",Bd({},d,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function Vnt(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=Xs(Xs({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return Bae(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function qnt(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=Xs(Xs({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return Bae(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Unt(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+o-h:d[m+1]-h;if(p<=0)return null;var v=m%t.length;return Q.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:p,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Wnt(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+l-h:d[m+1]-h;if(p<=0)return null;var v=m%r.length;return Q.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Hnt=function(t,n){var r=t.xAxis,i=t.width,a=t.height,o=t.offset;return Fie(RM(Xs(Xs(Xs({},mg.defaultProps),r),{},{ticks:Gl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},Knt=function(t,n){var r=t.yAxis,i=t.width,a=t.height,o=t.offset;return Fie(RM(Xs(Xs(Xs({},mg.defaultProps),r),{},{ticks:Gl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},mh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Np(e){var t,n,r,i,a,o,l=OM(),c=IM(),u=Itt(),d=Xs(Xs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:mh.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:mh.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:mh.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:mh.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:mh.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:mh.verticalFill,x:Ge(e.x)?e.x:u.left,y:Ge(e.y)?e.y:u.top,width:Ge(e.width)?e.width:u.width,height:Ge(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,b=d.verticalValues,y=Ttt(),j=Dtt();if(!Ge(m)||m<=0||!Ge(g)||g<=0||!Ge(f)||f!==+f||!Ge(h)||h!==+h)return null;var N=d.verticalCoordinatesGenerator||Hnt,w=d.horizontalCoordinatesGenerator||Knt,S=d.horizontalPoints,k=d.verticalPoints;if((!S||!S.length)&&Ot(w)){var C=v&&v.length,A=w({yAxis:j?Xs(Xs({},j),{},{ticks:C?v:j.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);Po(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($f(A),"]")),Array.isArray(A)&&(S=A)}if((!k||!k.length)&&Ot(N)){var D=b&&b.length,P=N({xAxis:y?Xs(Xs({},y),{},{ticks:D?b:y.ticks}):void 0,width:l,height:c,offset:u},D?!0:p);Po(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($f(P),"]")),Array.isArray(P)&&(k=P)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(Bnt,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Q.createElement(Vnt,Bd({},d,{offset:u,horizontalPoints:S,xAxis:y,yAxis:j})),Q.createElement(qnt,Bd({},d,{offset:u,verticalPoints:k,xAxis:y,yAxis:j})),Q.createElement(Unt,Bd({},d,{horizontalPoints:S})),Q.createElement(Wnt,Bd({},d,{verticalPoints:k})))}Np.displayName="CartesianGrid";var Gnt=["type","layout","connectNulls","ref"],Qnt=["key"];function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function v6(e,t){if(e==null)return{};var n=Ynt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ynt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(this,arguments)}function y6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(n),!0).forEach(function(r){mo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ph(e){return ert(e)||Jnt(e)||Znt(e)||Xnt()}function Xnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Znt(e,t){if(e){if(typeof e=="string")return SA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SA(e,t)}}function Jnt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ert(e){if(Array.isArray(e))return SA(e)}function SA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function trt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qae(r.key),r)}}function nrt(e,t,n){return t&&b6(e.prototype,t),n&&b6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rrt(e,t,n){return t=PN(t),srt(e,Vae()?Reflect.construct(t,n||[],PN(e).constructor):t.apply(e,n))}function srt(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return irt(e)}function irt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vae=function(){return!!e})()}function PN(e){return PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PN(e)}function art(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CA(e,t)}function CA(e,t){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CA(e,t)}function mo(e,t,n){return t=qae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qae(e){var t=ort(e,"string");return Sp(t)=="symbol"?t:t+""}function ort(e,t){if(Sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uf=function(e){function t(){var n;trt(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=rrt(this,t,[].concat(i)),mo(n,"state",{isAnimationFinished:!0,totalLength:0}),mo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),mo(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(b,y){return b+y});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(ph(c.slice(0,g)),[f-p]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(ph(t.repeat(c,d)),ph(m),v).map(function(b){return"".concat(b,"px")}).join(", ")}),mo(n,"id",Gf("recharts-line-")),mo(n,"pathRef",function(o){n.mainCurve=o}),mo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),mo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return art(t,e),nrt(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,f=xa(d,lb);if(!f)return null;var h=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:$r(p.payload,v)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement(cn,m,f.map(function(g){return Q.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=yt(this.props,!1),h=yt(c,!0),m=u.map(function(p,v){var b=Ji(Ji(Ji({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,b)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement(cn,qx({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(r,i,a,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=v6(l,Gnt),h=Ji(Ji(Ji({},yt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return Q.createElement(cf,qx({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,b=this.state,y=b.prevPoints,j=b.totalLength;return Q.createElement(Mo,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(y){var S=y.length/l.length,k=l.map(function(_,O){var M=Math.floor(O*S);if(y[M]){var T=y[M],R=ss(T.x,_.x),F=ss(T.y,_.y);return Ji(Ji({},_),{},{x:R(w),y:F(w)})}if(g){var E=ss(p*2,_.x),B=ss(v/2,_.y);return Ji(Ji({},_),{},{x:E(w),y:B(w)})}return Ji(Ji({},_),{},{x:_.x,y:_.y})});return a.renderCurveStatically(k,r,i)}var C=ss(0,j),A=C(w),D;if(c){var P="".concat(c).split(/[,\s]+/gim).map(function(_){return parseFloat(_)});D=a.getStrokeDasharray(A,j,P)}else D=a.generateSimpleStrokeDasharray(j,A);return a.renderCurveStatically(l,r,i,{strokeDasharray:D})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!If(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,m=i.width,g=i.height,p=i.isAnimationActive,v=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,j=Ut("recharts-line",c),N=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,S=N||w,k=qt(v)?this.id:v,C=(r=yt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=C.r,D=A===void 0?3:A,P=C.strokeWidth,_=P===void 0?2:P,O=Are(o)?o:{},M=O.clipDot,T=M===void 0?!0:M,R=D*2+_;return Q.createElement(cn,{className:j},N||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(k)},Q.createElement("rect",{x:N?h:h-m/2,y:w?f:f-g/2,width:N?m:m*2,height:w?g:g*2})),!T&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(k)},Q.createElement("rect",{x:h-R/2,y:f-R/2,width:m+R,height:g+R}))):null,!y&&this.renderCurve(S,k),this.renderErrorBar(S,k),(y||o)&&this.renderDots(S,T,k),(!p||b)&&ol.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(ph(r),[0]):r,o=[],l=0;l<i;++l)o=[].concat(ph(o),ph(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(Q.isValidElement(r))a=Q.cloneElement(r,i);else if(Ot(r))a=r(i);else{var o=i.key,l=v6(i,Qnt),c=Ut("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Q.createElement(cb,qx({key:o},l,{className:c}))}return a}}])}(x.PureComponent);mo(uf,"displayName","Line");mo(uf,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});mo(uf,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=$r(h,o);return d==="horizontal"?{x:sN({axis:n,ticks:i,bandSize:l,entry:h,index:m}),y:qt(g)?null:r.scale(g),value:g,payload:h}:{x:qt(g)?null:n.scale(g),y:sN({axis:r,ticks:a,bandSize:l,entry:h,index:m}),value:g,payload:h}});return Ji({points:f,layout:d},u)});var lrt=["layout","type","stroke","connectNulls","isRange","ref"],crt=["key"],Uae;function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Wae(e,t){if(e==null)return{};var n=urt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function urt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vd.apply(this,arguments)}function j6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(n),!0).forEach(function(r){Zo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function drt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kae(r.key),r)}}function frt(e,t,n){return t&&w6(e.prototype,t),n&&w6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hrt(e,t,n){return t=EN(t),mrt(e,Hae()?Reflect.construct(t,n||[],EN(e).constructor):t.apply(e,n))}function mrt(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return prt(e)}function prt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hae=function(){return!!e})()}function EN(e){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EN(e)}function grt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kA(e,t)}function kA(e,t){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kA(e,t)}function Zo(e,t,n){return t=Kae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kae(e){var t=xrt(e,"string");return Cp(t)=="symbol"?t:t+""}function xrt(e,t){if(Cp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cl=function(e){function t(){var n;drt(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=hrt(this,t,[].concat(i)),Zo(n,"state",{isAnimationFinished:!0}),Zo(n,"id",Gf("recharts-area-")),Zo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ot(o)&&o()}),Zo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ot(o)&&o()}),n}return grt(t,e),frt(t,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=yt(this.props,!1),m=yt(u,!0),g=d.map(function(v,b){var y=zc(zc(zc({key:"dot-".concat(b),r:3},h),m),{},{index:b,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return t.renderDotItem(u,y)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement(cn,Vd({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),f=ou(o.map(function(h){return h.y||0}));return Ge(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(ou(a.map(function(h){return h.y||0})),f)),Ge(f)?Q.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),f=ou(o.map(function(h){return h.x||0}));return Ge(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(ou(a.map(function(h){return h.x||0})),f)),Ge(f)?Q.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=Wae(l,lrt);return Q.createElement(cn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},Q.createElement(cf,Vd({},yt(m,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&Q.createElement(cf,Vd({},yt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&Q.createElement(cf,Vd({},yt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=this.state,p=g.prevPoints,v=g.prevBaseLine;return Q.createElement(Mo,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var y=b.t;if(p){var j=p.length/l.length,N=l.map(function(C,A){var D=Math.floor(A*j);if(p[D]){var P=p[D],_=ss(P.x,C.x),O=ss(P.y,C.y);return zc(zc({},C),{},{x:_(y),y:O(y)})}return C}),w;if(Ge(c)&&typeof c=="number"){var S=ss(v,c);w=S(y)}else if(qt(c)||ag(c)){var k=ss(v,0);w=k(y)}else w=c.map(function(C,A){var D=Math.floor(A*j);if(v[D]){var P=v[D],_=ss(P.x,C.x),O=ss(P.y,C.y);return zc(zc({},C),{},{x:_(y),y:O(y)})}return C});return a.renderAreaStatically(N,w,r,i)}return Q.createElement(cn,null,Q.createElement("defs",null,Q.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(y))),Q.createElement(cn,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!If(d,o)||!If(f,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,l,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,m=i.width,g=i.height,p=i.isAnimationActive,v=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,j=Ut("recharts-area",c),N=f&&f.allowDataOverflow,w=h&&h.allowDataOverflow,S=N||w,k=qt(v)?this.id:v,C=(r=yt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=C.r,D=A===void 0?3:A,P=C.strokeWidth,_=P===void 0?2:P,O=Are(o)?o:{},M=O.clipDot,T=M===void 0?!0:M,R=D*2+_;return Q.createElement(cn,{className:j},N||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(k)},Q.createElement("rect",{x:N?d:d-m/2,y:w?u:u-g/2,width:N?m:m*2,height:w?g:g*2})),!T&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(k)},Q.createElement("rect",{x:d-R/2,y:u-R/2,width:m+R,height:g+R}))):null,y?null:this.renderArea(S,k),(o||y)&&this.renderDots(S,T,k),(!p||b)&&ol.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(x.PureComponent);Uae=cl;Zo(cl,"displayName","Area");Zo(cl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!rd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Zo(cl,"getBaseValue",function(e,t,n,r){var i=e.layout,a=e.baseValue,o=t.props.baseValue,l=o??a;if(Ge(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Zo(cl,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,i=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,g=u&&u.length,p=Uae.getBaseValue(t,n,r,i),v=m==="horizontal",b=!1,y=f.map(function(N,w){var S;g?S=u[d+w]:(S=$r(N,c),Array.isArray(S)?b=!0:S=[p,S]);var k=S[1]==null||g&&$r(N,c)==null;return v?{x:sN({axis:r,ticks:a,bandSize:l,entry:N,index:w}),y:k?null:i.scale(S[1]),value:S,payload:N}:{x:k?null:r.scale(S[1]),y:sN({axis:i,ticks:o,bandSize:l,entry:N,index:w}),value:S,payload:N}}),j;return g||b?j=y.map(function(N){var w=Array.isArray(N.value)?N.value[0]:null;return v?{x:N.x,y:w!=null&&N.y!=null?i.scale(w):null}:{x:w!=null?r.scale(w):null,y:N.y}}):j=v?i.scale(p):r.scale(p),zc({points:y,baseLine:j,layout:m,isRange:b},h)});Zo(cl,"renderDotItem",function(e,t){var n;if(Q.isValidElement(e))n=Q.cloneElement(e,t);else if(Ot(e))n=e(t);else{var r=Ut("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,a=Wae(t,crt);n=Q.createElement(cb,Vd({},a,{key:i,className:r}))}return n});function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function vrt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yrt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yae(r.key),r)}}function brt(e,t,n){return t&&yrt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jrt(e,t,n){return t=_N(t),wrt(e,Gae()?Reflect.construct(t,n||[],_N(e).constructor):t.apply(e,n))}function wrt(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nrt(e)}function Nrt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gae=function(){return!!e})()}function _N(e){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(e)}function Srt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PA(e,t)}function PA(e,t){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PA(e,t)}function Qae(e,t,n){return t=Yae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yae(e){var t=Crt(e,"string");return kp(t)=="symbol"?t:t+""}function Crt(e,t){if(kp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function EA(){return EA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EA.apply(this,arguments)}function krt(e){var t=e.xAxisId,n=OM(),r=IM(),i=Aae(t);return i==null?null:Q.createElement(mg,EA({},i,{className:Ut("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Gl(o,!0)}}))}var pl=function(e){function t(){return vrt(this,t),jrt(this,t,arguments)}return Srt(t,e),brt(t,[{key:"render",value:function(){return Q.createElement(krt,this.props)}}])}(Q.Component);Qae(pl,"displayName","XAxis");Qae(pl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function Prt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ert(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jae(r.key),r)}}function _rt(e,t,n){return t&&Ert(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Art(e,t,n){return t=AN(t),Trt(e,Xae()?Reflect.construct(t,n||[],AN(e).constructor):t.apply(e,n))}function Trt(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Drt(e)}function Drt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xae=function(){return!!e})()}function AN(e){return AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AN(e)}function Ort(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_A(e,t)}function _A(e,t){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_A(e,t)}function Zae(e,t,n){return t=Jae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jae(e){var t=Irt(e,"string");return Pp(t)=="symbol"?t:t+""}function Irt(e,t){if(Pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function AA(){return AA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AA.apply(this,arguments)}var Mrt=function(t){var n=t.yAxisId,r=OM(),i=IM(),a=Tae(n);return a==null?null:Q.createElement(mg,AA({},a,{className:Ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Gl(l,!0)}}))},gl=function(e){function t(){return Prt(this,t),Art(this,t,arguments)}return Ort(t,e),_rt(t,[{key:"render",value:function(){return Q.createElement(Mrt,this.props)}}])}(Q.Component);Zae(gl,"displayName","YAxis");Zae(gl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function N6(e){return Lrt(e)||Frt(e)||$rt(e)||Rrt()}function Rrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $rt(e,t){if(e){if(typeof e=="string")return TA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(e,t)}}function Frt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lrt(e){if(Array.isArray(e))return TA(e)}function TA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var DA=function(t,n,r,i,a){var o=xa(t,KS),l=xa(t,QS),c=[].concat(N6(o),N6(l)),u=xa(t,XS),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(p,v){if(v.props[d]===r&&ll(v.props,"extendDomain")&&Ge(v.props[f])){var b=v.props[f];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,v){if(v.props[d]===r&&ll(v.props,"extendDomain")&&Ge(v.props[m])&&Ge(v.props[g])){var b=v.props[m],y=v.props[g];return[Math.min(p[0],b,y),Math.max(p[1],b,y)]}return p},h)}return a&&a.length&&(h=a.reduce(function(p,v){return Ge(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},h)),h},eoe={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=n?n+u:u;if(!this._events[p])return!1;var v=this._events[p],b=arguments.length,y,j;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(j=1,y=new Array(b-1);j<b;j++)y[j-1]=arguments[j];v.fn.apply(v.context,y)}else{var N=v.length,w;for(j=0;j<N;j++)switch(v[j].once&&this.removeListener(u,v[j].fn,void 0,!0),b){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,d);break;case 3:v[j].fn.call(v[j].context,d,f);break;case 4:v[j].fn.call(v[j].context,d,f,h);break;default:if(!y)for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];v[j].fn.apply(v[j].context,y)}}return!0},l.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,v=[],b=g.length;p<b;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(eoe);var zrt=eoe.exports;const Brt=yn(zrt);var vP=new Brt,yP="recharts.syncMouseEvents";function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}function Vrt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qrt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,toe(r.key),r)}}function Urt(e,t,n){return t&&qrt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bP(e,t,n){return t=toe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function toe(e){var t=Wrt(e,"string");return xy(t)=="symbol"?t:t+""}function Wrt(e,t){if(xy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hrt=function(){function e(){Vrt(this,e),bP(this,"activeIndex",0),bP(this,"coordinateList",[]),bP(this,"layout","horizontal")}return Urt(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Krt(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&Ge(r)&&Ge(i))return!0}return!1}function Grt(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function noe(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle,o=Xn(t,n,r,i),l=Xn(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Qrt(e,t,n){var r,i,a,o;if(e==="horizontal")r=t.x,a=r,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Xn(l,c,u,f),m=Xn(l,c,d,f);r=h.x,i=h.y,a=m.x,o=m.y}else return noe(t);return[{x:r,y:i},{x:a,y:o}]}function vy(e){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(e)}function S6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(n),!0).forEach(function(r){Yrt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yrt(e,t,n){return t=Xrt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xrt(e){var t=Zrt(e,"string");return vy(t)=="symbol"?t:t+""}function Zrt(e,t){if(vy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jrt(e){var t,n,r=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var g,p=cf;if(h==="ScatterChart")g=o,p=iZe;else if(h==="BarChart")g=Grt(f,o,c,d),p=EM;else if(f==="radial"){var v=noe(o),b=v.cx,y=v.cy,j=v.radius,N=v.startAngle,w=v.endAngle;g={cx:b,cy:y,startAngle:N,endAngle:w,innerRadius:j,outerRadius:j},p=Qie}else g={points:Qrt(f,o,c)},p=cf;var S=vj(vj(vj(vj({stroke:"#ccc",pointerEvents:"none"},c),g),yt(m,!1)),{},{payload:l,payloadIndex:u,className:Ut("recharts-tooltip-cursor",m.className)});return x.isValidElement(m)?x.cloneElement(m,S):x.createElement(p,S)}var est=["item"],tst=["children","className","width","height","style","compact","title","desc"];function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hh.apply(this,arguments)}function C6(e,t){return sst(e)||rst(e,t)||soe(e,t)||nst()}function nst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rst(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function sst(e){if(Array.isArray(e))return e}function k6(e,t){if(e==null)return{};var n=ist(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ist(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ast(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ost(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ioe(r.key),r)}}function lst(e,t,n){return t&&ost(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cst(e,t,n){return t=TN(t),ust(e,roe()?Reflect.construct(t,n||[],TN(e).constructor):t.apply(e,n))}function ust(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dst(e)}function dst(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function roe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(roe=function(){return!!e})()}function TN(e){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(e)}function fst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OA(e,t)}function OA(e,t){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OA(e,t)}function _p(e){return pst(e)||mst(e)||soe(e)||hst()}function hst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function soe(e,t){if(e){if(typeof e=="string")return IA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(e,t)}}function mst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pst(e){if(Array.isArray(e))return IA(e)}function IA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(n),!0).forEach(function(r){_t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _t(e,t,n){return t=ioe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ioe(e){var t=gst(e,"string");return Ep(t)=="symbol"?t:t+""}function gst(e,t){if(Ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xst={xAxis:["bottom","top"],yAxis:["left","right"]},vst={width:"100%",height:"100%"},aoe={x:0,y:0};function yj(e){return e}var yst=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},bst=function(t,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return De(De(De({},i),Xn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=i.angle;return De(De(De({},i),Xn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return aoe},ZS=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(_p(l),_p(u)):l},[]);return o.length>0?o:t&&t.length&&Ge(i)&&Ge(a)?t.slice(i,a+1):[]};function ooe(e){return e==="number"?[0,"auto"]:void 0}var MA=function(t,n,r,i){var a=t.graphicalItems,o=t.tooltipAxis,l=ZS(n,t);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=Aw(m,o.dataKey,i)}else h=f&&f[r]||l[r];return h?[].concat(_p(c),[qie(u,h)]):c},[])},E6=function(t,n,r,i){var a=i||{x:t.chartX,y:t.chartY},o=yst(a,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=_Ge(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=MA(t,n,d,f),m=bst(r,l,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},jst=function(t,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=$ie(d,a);return r.reduce(function(g,p){var v,b=p.type.defaultProps!==void 0?De(De({},p.type.defaultProps),p.props):p.props,y=b.type,j=b.dataKey,N=b.allowDataOverflow,w=b.allowDuplicatedCategory,S=b.scale,k=b.ticks,C=b.includeHidden,A=b[o];if(g[A])return g;var D=ZS(t.data,{graphicalItems:i.filter(function(q){var $,z=o in q.props?q.props[o]:($=q.type.defaultProps)===null||$===void 0?void 0:$[o];return z===A}),dataStartIndex:c,dataEndIndex:u}),P=D.length,_,O,M;Krt(b.domain,N,y)&&(_=G_(b.domain,null,N),m&&(y==="number"||S!=="auto")&&(M=Lx(D,j,"category")));var T=ooe(y);if(!_||_.length===0){var R,F=(R=b.domain)!==null&&R!==void 0?R:T;if(j){if(_=Lx(D,j,y),y==="category"&&m){var E=bLe(_);w&&E?(O=_,_=xN(0,P)):w||(_=Gz(F,_,p).reduce(function(q,$){return q.indexOf($)>=0?q:[].concat(_p(q),[$])},[]))}else if(y==="category")w?_=_.filter(function(q){return q!==""&&!qt(q)}):_=Gz(F,_,p).reduce(function(q,$){return q.indexOf($)>=0||$===""||qt($)?q:[].concat(_p(q),[$])},[]);else if(y==="number"){var B=IGe(D,i.filter(function(q){var $,z,Y=o in q.props?q.props[o]:($=q.type.defaultProps)===null||$===void 0?void 0:$[o],ne="hide"in q.props?q.props.hide:(z=q.type.defaultProps)===null||z===void 0?void 0:z.hide;return Y===A&&(C||!ne)}),j,a,d);B&&(_=B)}m&&(y==="number"||S!=="auto")&&(M=Lx(D,j,"category"))}else m?_=xN(0,P):l&&l[A]&&l[A].hasStack&&y==="number"?_=h==="expand"?[0,1]:Vie(l[A].stackGroups,c,u):_=Rie(D,i.filter(function(q){var $=o in q.props?q.props[o]:q.type.defaultProps[o],z="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return $===A&&(C||!z)}),y,d,!0);if(y==="number")_=DA(f,_,A,a,k),F&&(_=G_(F,_,N));else if(y==="category"&&F){var L=F,I=_.every(function(q){return L.indexOf(q)>=0});I&&(_=L)}}return De(De({},g),{},_t({},A,De(De({},b),{},{axisType:a,domain:_,categoricalDomain:M,duplicateDomain:O,originalDomain:(v=b.domain)!==null&&v!==void 0?v:T,isCategorical:m,layout:d})))},{})},wst=function(t,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=ZS(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=$ie(d,a),p=-1;return r.reduce(function(v,b){var y=b.type.defaultProps!==void 0?De(De({},b.type.defaultProps),b.props):b.props,j=y[o],N=ooe("number");if(!v[j]){p++;var w;return g?w=xN(0,m):l&&l[j]&&l[j].hasStack?(w=Vie(l[j].stackGroups,c,u),w=DA(f,w,j,a)):(w=G_(N,Rie(h,r.filter(function(S){var k,C,A=o in S.props?S.props[o]:(k=S.type.defaultProps)===null||k===void 0?void 0:k[o],D="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===j&&!D}),"number",d),i.defaultProps.allowDataOverflow),w=DA(f,w,j,a)),De(De({},v),{},_t({},j,De(De({axisType:a},i.defaultProps),{},{hide:!0,orientation:ga(xst,"".concat(a,".").concat(p%2),null),domain:w,originalDomain:N,isCategorical:g,layout:d})))}return v},{})},Nst=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,f="".concat(i,"Id"),h=xa(d,a),m={};return h&&h.length?m=jst(t,{axes:h,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=wst(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},Sst=function(t){var n=Qc(t),r=Gl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:tM(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iN(n,r)}},_6=function(t){var n=t.children,r=t.defaultShowTooltip,i=sa(n,xp),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Cst=function(t){return!t||!t.length?!1:t.some(function(n){var r=Jl(n&&n.type);return r&&r.indexOf("Bar")>=0})},A6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kst=function(t,n){var r=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,h=r.margin||{},m=sa(f,xp),g=sa(f,Nu),p=Object.keys(c).reduce(function(w,S){var k=c[S],C=k.orientation;return!k.mirror&&!k.hide?De(De({},w),{},_t({},C,w[C]+k.width)):w},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(w,S){var k=o[S],C=k.orientation;return!k.mirror&&!k.hide?De(De({},w),{},_t({},C,ga(w,"".concat(C))+k.height)):w},{top:h.top||0,bottom:h.bottom||0}),b=De(De({},v),p),y=b.bottom;m&&(b.bottom+=m.props.height||xp.defaultProps.height),g&&n&&(b=DGe(b,i,r,n));var j=u-b.left-b.right,N=d-b.top-b.bottom;return De(De({brushBottom:y},b),{},{width:Math.max(j,0),height:Math.max(N,0)})},Pst=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},JS=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,y){var j=y.graphicalItems,N=y.stackGroups,w=y.offset,S=y.updateId,k=y.dataStartIndex,C=y.dataEndIndex,A=b.barSize,D=b.layout,P=b.barGap,_=b.barCategoryGap,O=b.maxBarSize,M=A6(D),T=M.numericAxisName,R=M.cateAxisName,F=Cst(j),E=[];return j.forEach(function(B,L){var I=ZS(b.data,{graphicalItems:[B],dataStartIndex:k,dataEndIndex:C}),q=B.type.defaultProps!==void 0?De(De({},B.type.defaultProps),B.props):B.props,$=q.dataKey,z=q.maxBarSize,Y=q["".concat(T,"Id")],ne=q["".concat(R,"Id")],te={},pe=c.reduce(function(sn,K){var de=y["".concat(K.axisType,"Map")],ve=q["".concat(K.axisType,"Id")];de&&de[ve]||K.axisType==="zAxis"||Rf();var Oe=de[ve];return De(De({},sn),{},_t(_t({},K.axisType,Oe),"".concat(K.axisType,"Ticks"),Gl(Oe)))},te),J=pe[R],xe=pe["".concat(R,"Ticks")],ye=N&&N[Y]&&N[Y].hasStack&&qGe(B,N[Y].stackGroups),re=Jl(B.type).indexOf("Bar")>=0,ue=iN(J,xe),ke=[],$e=F&&AGe({barSize:A,stackGroups:N,totalSize:Pst(pe,R)});if(re){var Ve,gt,He=qt(z)?O:z,be=(Ve=(gt=iN(J,xe,!0))!==null&&gt!==void 0?gt:He)!==null&&Ve!==void 0?Ve:0;ke=TGe({barGap:P,barCategoryGap:_,bandSize:be!==ue?be:ue,sizeList:$e[ne],maxBarSize:He}),be!==ue&&(ke=ke.map(function(sn){return De(De({},sn),{},{position:De(De({},sn.position),{},{offset:sn.position.offset-be/2})})}))}var xt=B&&B.type&&B.type.getComposedData;xt&&E.push({props:De(De({},xt(De(De({},pe),{},{displayedData:I,props:b,dataKey:$,item:B,bandSize:ue,barPosition:ke,offset:w,stackedData:ye,layout:D,dataStartIndex:k,dataEndIndex:C}))),{},_t(_t(_t({key:B.key||"item-".concat(L)},T,pe[T]),R,pe[R]),"animationId",S)),childIndex:TLe(B,b.children),item:B})}),E},m=function(b,y){var j=b.props,N=b.dataStartIndex,w=b.dataEndIndex,S=b.updateId;if(!V3({props:j}))return null;var k=j.children,C=j.layout,A=j.stackOffset,D=j.data,P=j.reverseStackOrder,_=A6(C),O=_.numericAxisName,M=_.cateAxisName,T=xa(k,r),R=BGe(D,T,"".concat(O,"Id"),"".concat(M,"Id"),A,P),F=c.reduce(function(q,$){var z="".concat($.axisType,"Map");return De(De({},q),{},_t({},z,Nst(j,De(De({},$),{},{graphicalItems:T,stackGroups:$.axisType===O&&R,dataStartIndex:N,dataEndIndex:w}))))},{}),E=kst(De(De({},F),{},{props:j,graphicalItems:T}),y==null?void 0:y.legendBBox);Object.keys(F).forEach(function(q){F[q]=d(j,F[q],E,q.replace("Map",""),n)});var B=F["".concat(M,"Map")],L=Sst(B),I=h(j,De(De({},F),{},{dataStartIndex:N,dataEndIndex:w,updateId:S,graphicalItems:T,stackGroups:R,offset:E}));return De(De({formattedGraphicalItems:I,graphicalItems:T,offset:E,stackGroups:R},L),F)},g=function(v){function b(y){var j,N,w;return ast(this,b),w=cst(this,b,[y]),_t(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_t(w,"accessibilityManager",new Hrt),_t(w,"handleLegendBBoxUpdate",function(S){if(S){var k=w.state,C=k.dataStartIndex,A=k.dataEndIndex,D=k.updateId;w.setState(De({legendBBox:S},m({props:w.props,dataStartIndex:C,dataEndIndex:A,updateId:D},De(De({},w.state),{},{legendBBox:S}))))}}),_t(w,"handleReceiveSyncEvent",function(S,k,C){if(w.props.syncId===S){if(C===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(k)}}),_t(w,"handleBrushChange",function(S){var k=S.startIndex,C=S.endIndex;if(k!==w.state.dataStartIndex||C!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return De({dataStartIndex:k,dataEndIndex:C},m({props:w.props,dataStartIndex:k,dataEndIndex:C,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:k,dataEndIndex:C})}}),_t(w,"handleMouseEnter",function(S){var k=w.getMouseInfo(S);if(k){var C=De(De({},k),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var A=w.props.onMouseEnter;Ot(A)&&A(C,S)}}),_t(w,"triggeredAfterMouseMove",function(S){var k=w.getMouseInfo(S),C=k?De(De({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var A=w.props.onMouseMove;Ot(A)&&A(C,S)}),_t(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),_t(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),_t(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),_t(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var C=w.props.onMouseLeave;Ot(C)&&C(k,S)}),_t(w,"handleOuterEvent",function(S){var k=ALe(S),C=ga(w.props,"".concat(k));if(k&&Ot(C)){var A,D;/.*touch.*/i.test(k)?D=w.getMouseInfo(S.changedTouches[0]):D=w.getMouseInfo(S),C((A=D)!==null&&A!==void 0?A:{},S)}}),_t(w,"handleClick",function(S){var k=w.getMouseInfo(S);if(k){var C=De(De({},k),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var A=w.props.onClick;Ot(A)&&A(C,S)}}),_t(w,"handleMouseDown",function(S){var k=w.props.onMouseDown;if(Ot(k)){var C=w.getMouseInfo(S);k(C,S)}}),_t(w,"handleMouseUp",function(S){var k=w.props.onMouseUp;if(Ot(k)){var C=w.getMouseInfo(S);k(C,S)}}),_t(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),_t(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),_t(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),_t(w,"handleDoubleClick",function(S){var k=w.props.onDoubleClick;if(Ot(k)){var C=w.getMouseInfo(S);k(C,S)}}),_t(w,"handleContextMenu",function(S){var k=w.props.onContextMenu;if(Ot(k)){var C=w.getMouseInfo(S);k(C,S)}}),_t(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&vP.emit(yP,w.props.syncId,S,w.eventEmitterSymbol)}),_t(w,"applySyncEvent",function(S){var k=w.props,C=k.layout,A=k.syncMethod,D=w.state.updateId,P=S.dataStartIndex,_=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(De({dataStartIndex:P,dataEndIndex:_},m({props:w.props,dataStartIndex:P,dataEndIndex:_,updateId:D},w.state)));else if(S.activeTooltipIndex!==void 0){var O=S.chartX,M=S.chartY,T=S.activeTooltipIndex,R=w.state,F=R.offset,E=R.tooltipTicks;if(!F)return;if(typeof A=="function")T=A(E,S);else if(A==="value"){T=-1;for(var B=0;B<E.length;B++)if(E[B].value===S.activeLabel){T=B;break}}var L=De(De({},F),{},{x:F.left,y:F.top}),I=Math.min(O,L.x+L.width),q=Math.min(M,L.y+L.height),$=E[T]&&E[T].value,z=MA(w.state,w.props.data,T),Y=E[T]?{x:C==="horizontal"?E[T].coordinate:I,y:C==="horizontal"?q:E[T].coordinate}:aoe;w.setState(De(De({},S),{},{activeLabel:$,activeCoordinate:Y,activePayload:z,activeTooltipIndex:T}))}else w.setState(S)}),_t(w,"renderCursor",function(S){var k,C=w.state,A=C.isTooltipActive,D=C.activeCoordinate,P=C.activePayload,_=C.offset,O=C.activeTooltipIndex,M=C.tooltipAxisBandSize,T=w.getTooltipEventType(),R=(k=S.props.active)!==null&&k!==void 0?k:A,F=w.props.layout,E=S.key||"_recharts-cursor";return Q.createElement(Jrt,{key:E,activeCoordinate:D,activePayload:P,activeTooltipIndex:O,chartName:n,element:S,isActive:R,layout:F,offset:_,tooltipAxisBandSize:M,tooltipEventType:T})}),_t(w,"renderPolarAxis",function(S,k,C){var A=ga(S,"type.axisType"),D=ga(w.state,"".concat(A,"Map")),P=S.type.defaultProps,_=P!==void 0?De(De({},P),S.props):S.props,O=D&&D[_["".concat(A,"Id")]];return x.cloneElement(S,De(De({},O),{},{className:Ut(A,O.className),key:S.key||"".concat(k,"-").concat(C),ticks:Gl(O,!0)}))}),_t(w,"renderPolarGrid",function(S){var k=S.props,C=k.radialLines,A=k.polarAngles,D=k.polarRadius,P=w.state,_=P.radiusAxisMap,O=P.angleAxisMap,M=Qc(_),T=Qc(O),R=T.cx,F=T.cy,E=T.innerRadius,B=T.outerRadius;return x.cloneElement(S,{polarAngles:Array.isArray(A)?A:Gl(T,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(D)?D:Gl(M,!0).map(function(L){return L.coordinate}),cx:R,cy:F,innerRadius:E,outerRadius:B,key:S.key||"polar-grid",radialLines:C})}),_t(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,k=w.props,C=k.children,A=k.width,D=k.height,P=w.props.margin||{},_=A-(P.left||0)-(P.right||0),O=Iie({children:C,formattedGraphicalItems:S,legendWidth:_,legendContent:u});if(!O)return null;var M=O.item,T=k6(O,est);return x.cloneElement(M,De(De({},T),{},{chartWidth:A,chartHeight:D,margin:P,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),_t(w,"renderTooltip",function(){var S,k=w.props,C=k.children,A=k.accessibilityLayer,D=sa(C,Qs);if(!D)return null;var P=w.state,_=P.isTooltipActive,O=P.activeCoordinate,M=P.activePayload,T=P.activeLabel,R=P.offset,F=(S=D.props.active)!==null&&S!==void 0?S:_;return x.cloneElement(D,{viewBox:De(De({},R),{},{x:R.left,y:R.top}),active:F,label:T,payload:F?M:[],coordinate:O,accessibilityLayer:A})}),_t(w,"renderBrush",function(S){var k=w.props,C=k.margin,A=k.data,D=w.state,P=D.offset,_=D.dataStartIndex,O=D.dataEndIndex,M=D.updateId;return x.cloneElement(S,{key:S.key||"_recharts-brush",onChange:mj(w.handleBrushChange,S.props.onChange),data:A,x:Ge(S.props.x)?S.props.x:P.left,y:Ge(S.props.y)?S.props.y:P.top+P.height+P.brushBottom-(C.bottom||0),width:Ge(S.props.width)?S.props.width:P.width,startIndex:_,endIndex:O,updateId:"brush-".concat(M)})}),_t(w,"renderReferenceElement",function(S,k,C){if(!S)return null;var A=w,D=A.clipPathId,P=w.state,_=P.xAxisMap,O=P.yAxisMap,M=P.offset,T=S.type.defaultProps||{},R=S.props,F=R.xAxisId,E=F===void 0?T.xAxisId:F,B=R.yAxisId,L=B===void 0?T.yAxisId:B;return x.cloneElement(S,{key:S.key||"".concat(k,"-").concat(C),xAxis:_[E],yAxis:O[L],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:D})}),_t(w,"renderActivePoints",function(S){var k=S.item,C=S.activePoint,A=S.basePoint,D=S.childIndex,P=S.isRange,_=[],O=k.props.key,M=k.item.type.defaultProps!==void 0?De(De({},k.item.type.defaultProps),k.item.props):k.item.props,T=M.activeDot,R=M.dataKey,F=De(De({index:D,dataKey:R,cx:C.x,cy:C.y,r:4,fill:PM(k.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},yt(T,!1)),Tw(T));return _.push(b.renderActiveDot(T,F,"".concat(O,"-activePoint-").concat(D))),A?_.push(b.renderActiveDot(T,De(De({},F),{},{cx:A.x,cy:A.y}),"".concat(O,"-basePoint-").concat(D))):P&&_.push(null),_}),_t(w,"renderGraphicChild",function(S,k,C){var A=w.filterFormatItem(S,k,C);if(!A)return null;var D=w.getTooltipEventType(),P=w.state,_=P.isTooltipActive,O=P.tooltipAxis,M=P.activeTooltipIndex,T=P.activeLabel,R=w.props.children,F=sa(R,Qs),E=A.props,B=E.points,L=E.isRange,I=E.baseLine,q=A.item.type.defaultProps!==void 0?De(De({},A.item.type.defaultProps),A.item.props):A.item.props,$=q.activeDot,z=q.hide,Y=q.activeBar,ne=q.activeShape,te=!!(!z&&_&&F&&($||Y||ne)),pe={};D!=="axis"&&F&&F.props.trigger==="click"?pe={onClick:mj(w.handleItemMouseEnter,S.props.onClick)}:D!=="axis"&&(pe={onMouseLeave:mj(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:mj(w.handleItemMouseEnter,S.props.onMouseEnter)});var J=x.cloneElement(S,De(De({},A.props),pe));function xe(K){return typeof O.dataKey=="function"?O.dataKey(K.payload):null}if(te)if(M>=0){var ye,re;if(O.dataKey&&!O.allowDuplicatedCategory){var ue=typeof O.dataKey=="function"?xe:"payload.".concat(O.dataKey.toString());ye=Aw(B,ue,T),re=L&&I&&Aw(I,ue,T)}else ye=B==null?void 0:B[M],re=L&&I&&I[M];if(ne||Y){var ke=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[x.cloneElement(S,De(De(De({},A.props),pe),{},{activeIndex:ke})),null,null]}if(!qt(ye))return[J].concat(_p(w.renderActivePoints({item:A,activePoint:ye,basePoint:re,childIndex:M,isRange:L})))}else{var $e,Ve=($e=w.getItemByXY(w.state.activeCoordinate))!==null&&$e!==void 0?$e:{graphicalItem:J},gt=Ve.graphicalItem,He=gt.item,be=He===void 0?S:He,xt=gt.childIndex,sn=De(De(De({},A.props),pe),{},{activeIndex:xt});return[x.cloneElement(be,sn),null,null]}return L?[J,null,null]:[J,null]}),_t(w,"renderCustomized",function(S,k,C){return x.cloneElement(S,De(De({key:"recharts-customized-".concat(C)},w.props),w.state))}),_t(w,"renderMap",{CartesianGrid:{handler:yj,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:yj},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:yj},YAxis:{handler:yj},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:Gf("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Ose(w.triggeredAfterMouseMove,(N=y.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return fst(b,v),lst(b,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,w=j.data,S=j.height,k=j.layout,C=sa(N,Qs);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,P=MA(this.state,w,A,D),_=this.state.tooltipTicks[A].coordinate,O=(this.state.offset.top+S)/2,M=k==="horizontal",T=M?{x:_,y:O}:{y:_,x:O},R=this.state.formattedGraphicalItems.find(function(E){var B=E.item;return B.type.name==="Scatter"});R&&(T=De(De({},T),R.props.points[A].tooltipPosition),P=R.props.points[A].tooltipPayload);var F={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:D,activePayload:P,activeCoordinate:T};this.setState(F),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(j){c_([sa(j.children,Qs)],[sa(this.props.children,Qs)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=sa(this.props.children,Qs);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:a}return a}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),S=rWe(w),k={chartX:Math.round(j.pageX-S.left),chartY:Math.round(j.pageY-S.top)},C=w.width/N.offsetWidth||1,A=this.inRange(k.chartX,k.chartY,C);if(!A)return null;var D=this.state,P=D.xAxisMap,_=D.yAxisMap,O=this.getTooltipEventType(),M=E6(this.state,this.props.data,this.props.layout,A);if(O!=="axis"&&P&&_){var T=Qc(P).scale,R=Qc(_).scale,F=T&&T.invert?T.invert(k.chartX):null,E=R&&R.invert?R.invert(k.chartY):null;return De(De({},k),{},{xValue:F,yValue:E},M)}return M?De(De({},k),M):null}},{key:"inRange",value:function(j,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,k=j/w,C=N/w;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,D=k>=A.left&&k<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return D?{x:k,y:C}:null}var P=this.state,_=P.angleAxisMap,O=P.radiusAxisMap;if(_&&O){var M=Qc(_);return Xz({x:k,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),w=sa(j,Qs),S={};w&&N==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=Tw(this.props,this.handleOuterEvent);return De(De({},k),S)}},{key:"addListener",value:function(){vP.on(yP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vP.removeListener(yP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,w){for(var S=this.state.formattedGraphicalItems,k=0,C=S.length;k<C;k++){var A=S[k];if(A.item===j||A.props.key===j.key||N===Jl(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,w=N.left,S=N.top,k=N.height,C=N.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:j},Q.createElement("rect",{x:w,y:S,height:k,width:C})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,w){var S=C6(w,2),k=S[0],C=S[1];return De(De({},N),{},_t({},k,C.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,w){var S=C6(w,2),k=S[0],C=S[1];return De(De({},N),{},_t({},k,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,w=N.formattedGraphicalItems,S=N.activeItem;if(w&&w.length)for(var k=0,C=w.length;k<C;k++){var A=w[k],D=A.props,P=A.item,_=P.type.defaultProps!==void 0?De(De({},P.type.defaultProps),P.props):P.props,O=Jl(P.type);if(O==="Bar"){var M=(D.data||[]).find(function(E){return LXe(j,E)});if(M)return{graphicalItem:A,payload:M}}else if(O==="RadialBar"){var T=(D.data||[]).find(function(E){return Xz(j,E)});if(T)return{graphicalItem:A,payload:T}}else if(US(A,S)||WS(A,S)||fy(A,S)){var R=PJe({graphicalItem:A,activeTooltipItem:S,itemData:_.data}),F=_.activeIndex===void 0?R:_.activeIndex;return{graphicalItem:De(De({},A),{},{childIndex:F}),payload:fy(A,S)?_.data[R]:A.props.data[R]}}}return null}},{key:"render",value:function(){var j=this;if(!V3(this))return null;var N=this.props,w=N.children,S=N.className,k=N.width,C=N.height,A=N.style,D=N.compact,P=N.title,_=N.desc,O=k6(N,tst),M=yt(O,!1);if(D)return Q.createElement(i6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(d_,Hh({},M,{width:k,height:C,title:P,desc:_}),this.renderClipPath(),U3(w,this.renderMap)));if(this.props.accessibilityLayer){var T,R;M.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,M.role=(R=this.props.role)!==null&&R!==void 0?R:"application",M.onKeyDown=function(E){j.accessibilityManager.keyboardEvent(E)},M.onFocus=function(){j.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return Q.createElement(i6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",Hh({className:Ut("recharts-wrapper",S),style:De({position:"relative",cursor:"default",width:k,height:C},A)},F,{ref:function(B){j.container=B}}),Q.createElement(d_,Hh({},M,{width:k,height:C,title:P,desc:_,style:vst}),this.renderClipPath(),U3(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);_t(g,"displayName",n),_t(g,"defaultProps",De({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),_t(g,"getDerivedStateFromProps",function(v,b){var y=v.dataKey,j=v.data,N=v.children,w=v.width,S=v.height,k=v.layout,C=v.stackOffset,A=v.margin,D=b.dataStartIndex,P=b.dataEndIndex;if(b.updateId===void 0){var _=_6(v);return De(De(De({},_),{},{updateId:0},m(De(De({props:v},_),{},{updateId:0}),b)),{},{prevDataKey:y,prevData:j,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:C,prevMargin:A,prevChildren:N})}if(y!==b.prevDataKey||j!==b.prevData||w!==b.prevWidth||S!==b.prevHeight||k!==b.prevLayout||C!==b.prevStackOffset||!cm(A,b.prevMargin)){var O=_6(v),M={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},T=De(De({},E6(b,j,k)),{},{updateId:b.updateId+1}),R=De(De(De({},O),M),T);return De(De(De({},R),m(De({props:v},R),b)),{},{prevDataKey:y,prevData:j,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:C,prevMargin:A,prevChildren:N})}if(!c_(N,b.prevChildren)){var F,E,B,L,I=sa(N,xp),q=I&&(F=(E=I.props)===null||E===void 0?void 0:E.startIndex)!==null&&F!==void 0?F:D,$=I&&(B=(L=I.props)===null||L===void 0?void 0:L.endIndex)!==null&&B!==void 0?B:P,z=q!==D||$!==P,Y=!qt(j),ne=Y&&!z?b.updateId:b.updateId+1;return De(De({updateId:ne},m(De(De({props:v},b),{},{updateId:ne,dataStartIndex:q,dataEndIndex:$}),b)),{},{prevChildren:N,dataStartIndex:q,dataEndIndex:$})}return null}),_t(g,"renderActiveDot",function(v,b,y){var j;return x.isValidElement(v)?j=x.cloneElement(v,b):Ot(v)?j=v(b):j=Q.createElement(cb,b),Q.createElement(cn,{className:"recharts-active-dot",key:y},j)});var p=x.forwardRef(function(b,y){return Q.createElement(g,Hh({},b,{ref:y}))});return p.displayName=g.displayName,p},Est=JS({chartName:"LineChart",GraphicalChild:uf,axisComponents:[{axisType:"xAxis",AxisComp:pl},{axisType:"yAxis",AxisComp:gl}],formatAxisMap:_M}),FM=JS({chartName:"BarChart",GraphicalChild:Eo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:pl},{axisType:"yAxis",AxisComp:gl}],formatAxisMap:_M}),loe=JS({chartName:"PieChart",GraphicalChild:Nl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qS},{axisType:"radiusAxis",AxisComp:BS}],formatAxisMap:JGe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),_st=JS({chartName:"AreaChart",GraphicalChild:cl,axisComponents:[{axisType:"xAxis",AxisComp:pl},{axisType:"yAxis",AxisComp:gl}],formatAxisMap:_M});function Ast(e,t,n){if(e.length===0)return[];if(!t||!n||isNaN(t.getTime())||isNaN(n.getTime()))return[];if(i0(n,t)<=0)return[];const r=rIe({start:$s(t),end:$s(n)}),i=e.filter(l=>{const c=l.baselineStart||l.startDate,u=l.baselineFinish||l.endDate;return c&&u});if(i.length===0)return r.map(l=>({date:en(l,"yyyy-MM-dd"),month:en(l,"MMM yyyy"),planned:0,actual:0,earned:0}));const a=i.reduce((l,c)=>{const u=Number(c.weightFactor);return l+(isNaN(u)||u<=0?1:u)},0),o=new Date;return r.map(l=>{const c=Ir($s(Ir(l,32)),-1);let u=0,d=0,f=0;return i.forEach(h=>{const m=Number(h.weightFactor),g=(isNaN(m)||m<=0?1:m)/a,p=h.baselineStart?new Date(h.baselineStart):h.startDate?new Date(h.startDate):null,v=h.baselineFinish?new Date(h.baselineFinish):h.endDate?new Date(h.endDate):null;if(p&&v&&!isNaN(p.getTime())&&!isNaN(v.getTime())){const b=i0(v,p)||1;if(!Rx(c,p))if(Sw(c,v))u+=g*100;else{const w=i0(c,p),S=Math.min(1,Math.max(0,w/b));u+=g*100*S}const y=typeof h.progress=="number"?h.progress:0;(Rx(c,o)||en(c,"yyyy-MM")===en(o,"yyyy-MM"))&&(d+=g*100*(y/100));const j=Number(h.baselineCost)||0,N=Number(h.earnedValue)||0;(Rx(c,o)||en(c,"yyyy-MM")===en(o,"yyyy-MM"))&&(N>0&&j>0?f+=g*100*(N/j):f+=g*100*(y/100))}}),{date:en(l,"yyyy-MM-dd"),month:en(l,"MMM yyyy"),planned:Math.round(u*10)/10,actual:Math.round(d*10)/10,earned:Math.round(f*10)/10}})}function Tst({tasks:e,projectStartDate:t,projectEndDate:n}){const r=x.useMemo(()=>Ast(e,t,n),[e,t,n]),i=en(new Date,"MMM yyyy");if(r.length===0)return s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-lg",children:"S-Curve Progress"})}),s.jsx(ce,{className:"h-[300px] flex items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Add tasks with planned dates to see the S-Curve"})})]});const a=r.find(l=>l.month===i),o=a?(a.actual-a.planned).toFixed(1):"0";return s.jsxs(ie,{children:[s.jsxs(Ne,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsx(Se,{className:"text-lg",children:"S-Curve Progress"}),s.jsxs("div",{className:"flex gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{children:"Planned"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),s.jsx("span",{children:"Actual"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),s.jsx("span",{children:"Earned"})]})]})]}),a&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current variance: ",s.jsxs("span",{className:Number(o)>=0?"text-emerald-500":"text-red-500",children:[Number(o)>=0?"+":"",o,"%"]})]})]}),s.jsx(ce,{children:s.jsx("div",{className:"h-[300px]",children:s.jsx(af,{width:"100%",height:"100%",children:s.jsxs(Est,{data:r,margin:{top:5,right:20,left:10,bottom:5},children:[s.jsx(Np,{strokeDasharray:"3 3",className:"stroke-muted"}),s.jsx(pl,{dataKey:"month",tick:{fontSize:12},tickLine:!1,axisLine:!1}),s.jsx(gl,{domain:[0,100],tick:{fontSize:12},tickLine:!1,axisLine:!1,tickFormatter:l=>`${l}%`}),s.jsx(Qs,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:l=>[`${l}%`,""]}),s.jsx(KS,{x:i,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5",label:{value:"Today",position:"top",fontSize:10}}),s.jsx(uf,{type:"monotone",dataKey:"planned",stroke:"#3b82f6",strokeWidth:2,dot:{r:3},name:"Planned"}),s.jsx(uf,{type:"monotone",dataKey:"actual",stroke:"#10b981",strokeWidth:2,dot:{r:3},name:"Actual"}),s.jsx(uf,{type:"monotone",dataKey:"earned",stroke:"#f59e0b",strokeWidth:2,dot:{r:3},name:"Earned"})]})})})})]})}function Dst(e,t){const n=t.length>0&&t.some(l=>Number(l.budgeted)>0||Number(l.actual)>0),r=e.some(l=>l.baselineStart&&l.baselineFinish),i=e.some(l=>{const c=Number(l.baselineCost);return!isNaN(c)&&c>0}),a=n||i;let o="";return a?r||(o="Add baseline dates to tasks for more accurate schedule performance"):o="Add baseline costs to tasks or cost items to enable EVA calculations",{hasValidData:a,hasCostData:n,hasBaselineDates:r,message:o}}function Ost(e,t){const n=t.reduce((N,w)=>{const S=Number(w.budgeted);return N+(isNaN(S)?0:S)},0),r=e.reduce((N,w)=>{const S=Number(w.baselineCost);return N+(isNaN(S)?0:S)},0),i=n>0?n:r,a=t.reduce((N,w)=>{const S=Number(w.actual);return N+(isNaN(S)?0:S)},0),o=e.reduce((N,w)=>{const S=Number(w.actualCost);return N+(isNaN(S)?0:S)},0),l=a>0?a:o;let c=0,u=0;const d=new Date,f=e.length||1,h=i/f;if(e.forEach(N=>{const w=Number(N.baselineCost),S=isNaN(w)||w===0?h:w,k=Number(N.earnedValue),C=typeof N.progress=="number"?N.progress:0,A=isNaN(k)||k===0?S*C/100:k,D=N.baselineStart?new Date(N.baselineStart):N.startDate?new Date(N.startDate):null,P=N.baselineFinish?new Date(N.baselineFinish):N.endDate?new Date(N.endDate):null;if(D&&P&&!isNaN(D.getTime())&&!isNaN(P.getTime())){const _=P.getTime()-D.getTime();if(_>0){const M=Math.max(0,Math.min(_,d.getTime()-D.getTime()))/_;c+=S*M}}u+=A}),c===0&&i>0&&e.length>0){const w=e.reduce((S,k)=>S+(typeof k.progress=="number"?k.progress:0),0)/e.length;c=i*(w/100)}const m=c>0?u/c:u>0||i>0?1:0,g=l>0?u/l:u>0||i>0?1:0,p=u-c,v=u-l,b=g>0?i/g:i,y=Math.max(0,b-l),j=i-b;return{bcwp:isNaN(u)?0:u,bcws:isNaN(c)?0:c,acwp:isNaN(l)?0:l,bac:isNaN(i)?0:i,spi:isNaN(m)?0:Math.round(m*100)/100,cpi:isNaN(g)?0:Math.round(g*100)/100,sv:isNaN(p)?0:Math.round(p),cv:isNaN(v)?0:Math.round(v),eac:isNaN(b)?0:Math.round(b),etc:isNaN(y)?0:Math.round(y),vac:isNaN(j)?0:Math.round(j)}}function Ist(e){return e>=.95?{bg:"bg-emerald-500",text:"text-emerald-500",label:"On Track"}:e>=.85?{bg:"bg-amber-500",text:"text-amber-500",label:"At Risk"}:{bg:"bg-red-500",text:"text-red-500",label:"Critical"}}function T6({value:e,label:t,description:n}){const r=Ist(e),o=-90+(Math.min(1.5,Math.max(.5,e))-.5)/1*180,l=140,c=14,u=(l-c)/2-4,d=l/2,f=(v,b)=>{const y=(v-90)*(Math.PI/180),j=(b-90)*(Math.PI/180),N=d+u*Math.cos(y),w=d+u*Math.sin(y),S=d+u*Math.cos(j),k=d+u*Math.sin(j),C=b-v>180?1:0;return`M ${N} ${w} A ${u} ${u} 0 ${C} 1 ${S} ${k}`},h=u-10,m=o*(Math.PI/180),g=d+h*Math.cos(m),p=d+h*Math.sin(m);return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"relative",style:{width:l,height:l/2+8},children:s.jsxs("svg",{width:l,height:l/2+8,viewBox:`0 0 ${l} ${l/2+8}`,children:[s.jsx("path",{d:f(-90,-27),fill:"none",stroke:"#ef4444",strokeWidth:c,strokeLinecap:"round"}),s.jsx("path",{d:f(-27,9),fill:"none",stroke:"#f59e0b",strokeWidth:c,strokeLinecap:"butt"}),s.jsx("path",{d:f(9,90),fill:"none",stroke:"#10b981",strokeWidth:c,strokeLinecap:"round"}),s.jsx("line",{x1:d,y1:d,x2:g,y2:p,stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",className:"text-foreground transition-all duration-500"}),s.jsx("circle",{cx:d,cy:d,r:8,className:"fill-foreground"}),s.jsx("circle",{cx:d,cy:d,r:4,className:"fill-background"})]})}),s.jsxs("div",{className:"text-center mt-1",children:[s.jsx("div",{className:he("text-3xl font-bold tabular-nums",r.text),children:e.toFixed(2)}),s.jsx("div",{className:"text-base font-semibold mt-1",children:t}),s.jsx("div",{className:"text-sm text-muted-foreground",children:n}),s.jsxs("div",{className:he("inline-flex items-center gap-1.5 mt-2 px-3 py-1 rounded-full text-xs font-medium",r.bg,"text-white"),children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-white/80"}),r.label]})]})]})}function xd(e){return Math.abs(e)>=1e6?`$${(e/1e6).toFixed(1)}M`:Math.abs(e)>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}function Mst({tasks:e,costItems:t,className:n}){const r=Ost(e,t);return!Dst(e,t).hasValidData&&e.length===0&&t.length===0?s.jsxs(ie,{className:n,children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Earned Value Analysis (EVA)"})}),s.jsx(ce,{className:"h-[300px] flex items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground text-center",children:"Add tasks and cost items to enable EVA calculations"})})]}):s.jsxs(ie,{className:n,children:[s.jsxs(Ne,{className:"pb-4",children:[s.jsx(Se,{className:"text-lg",children:"Earned Value Analysis (EVA)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule & Cost Performance Indicators"})]}),s.jsxs(ce,{className:"pt-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6 mt-2",children:[s.jsx(T6,{value:r.spi,label:"SPI",description:"Schedule Performance"}),s.jsx(T6,{value:r.cpi,label:"CPI",description:"Cost Performance"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:xd(r.bcwp)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Earned Value (EV)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:xd(r.bcws)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Planned Value (PV)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:xd(r.acwp)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Actual Cost (AC)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:xd(r.bac)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Budget (BAC)"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 pt-4 border-t mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:he("text-lg font-semibold",r.sv>=0?"text-emerald-500":"text-red-500"),children:[r.sv>=0?"+":"",xd(r.sv)]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Schedule Variance"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:he("text-lg font-semibold",r.cv>=0?"text-emerald-500":"text-red-500"),children:[r.cv>=0?"+":"",xd(r.cv)]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Cost Variance"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:xd(r.eac)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Est. at Completion"})]})]})]})]})}const Rst={civil:"#3b82f6",structural:"#6366f1",mechanical:"#8b5cf6",electrical:"#f59e0b",piping:"#10b981",instrumentation:"#ef4444",process:"#06b6d4",hvac:"#ec4899",architectural:"#84cc16",general:"#6b7280"},$st={civil:"Civil",structural:"Structural",mechanical:"Mechanical",electrical:"Electrical",piping:"Piping",instrumentation:"Instrumentation",process:"Process",hvac:"HVAC",architectural:"Architectural",general:"General"};function Fst(e){if(e.length===0)return[];const t=new Map;return e.forEach(n=>{const r=n.discipline||"general",i=t.get(r)||{total:0,completed:0,progressSum:0};i.total++,n.status==="completed"&&i.completed++;const a=typeof n.progress=="number"&&!isNaN(n.progress)?n.progress:0;i.progressSum+=a,t.set(r,i)}),Array.from(t.entries()).map(([n,r])=>{const i=r.total>0?r.progressSum/r.total:0;return{discipline:n,label:$st[n]||n,taskCount:r.total,completedTasks:r.completed,progress:isNaN(i)?0:Math.round(i),color:Rst[n]||"#6b7280"}}).sort((n,r)=>r.taskCount-n.taskCount)}function Lst({tasks:e,showChart:t=!0}){const n=x.useMemo(()=>Fst(e),[e]);if(n.length===0)return s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-lg",children:"Discipline Progress"})}),s.jsx(ce,{className:"h-[200px] flex items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No tasks with disciplines assigned"})})]});const r=n.reduce((a,o)=>a+o.taskCount,0),i=Math.round(n.reduce((a,o)=>a+o.progress*o.taskCount,0)/r);return s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsx(Se,{className:"text-lg",children:"Discipline Progress"}),s.jsxs(ae,{variant:"secondary",children:[i,"% Overall"]})]})}),s.jsxs(ce,{children:[t&&n.length>1&&s.jsx("div",{className:"h-[180px] mb-4",children:s.jsx(af,{width:"100%",height:"100%",children:s.jsxs(FM,{data:n,layout:"vertical",margin:{top:5,right:20,left:60,bottom:5},children:[s.jsx(Np,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,className:"stroke-muted"}),s.jsx(pl,{type:"number",domain:[0,100],tickFormatter:a=>`${a}%`}),s.jsx(gl,{type:"category",dataKey:"label",tick:{fontSize:12},width:55}),s.jsx(Qs,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,o)=>[`${a}%`,"Progress"]}),s.jsx(Eo,{dataKey:"progress",radius:[0,4,4,0],children:n.map((a,o)=>s.jsx(ug,{fill:a.color},`cell-${o}`))})]})})}),s.jsx("div",{className:"space-y-3",children:n.slice(0,6).map(a=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),s.jsx("span",{className:"text-sm font-medium",children:a.label}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:[a.taskCount," tasks"]})]}),s.jsxs("span",{className:"text-sm font-semibold",children:[a.progress,"%"]})]}),s.jsx(fn,{value:a.progress,className:"h-2"})]},a.discipline))})]})]})}const zst={low:1,medium:2,high:3,critical:4};function D6(e){const t=Number(e.costImpact),n=isNaN(t)?0:t,r=typeof e.probability=="number"?e.probability:3,i=(isNaN(r)?3:r)/5,a=zst[e.impact||"medium"]||2;return n>0?n*i:a*i*1e4}function Bst(e,t){const n=e.filter(c=>c.status!=="closed");let r=0,i=0;const a=n.map(c=>{const u=Number(c.riskExposure),d=isNaN(u)||u===0?D6(c):u,f=Number(c.contingencyReserve),h=isNaN(f)?0:f;return r+=d,i+=h,{id:c.id,title:c.title,exposure:d,probability:typeof c.probability=="number"?c.probability:0,impact:c.impact||"medium",status:c.status||"identified"}}).sort((c,u)=>u.exposure-c.exposure).slice(0,5),o=new Map;n.forEach(c=>{const u=c.category||c.category||"technical",d=o.get(u)||{count:0,exposure:0};d.count++;const f=Number(c.riskExposure),h=isNaN(f)||f===0?D6(c):f;d.exposure+=h,o.set(u,d)});const l=Array.from(o.entries()).map(([c,u])=>({category:c,count:u.count,exposure:u.exposure})).sort((c,u)=>u.exposure-c.exposure);return{totalExposure:r,totalContingency:i,exposurePercentage:t>0?r/t*100:0,topRisks:a,byCategory:l,openCount:e.filter(c=>c.status!=="closed").length,closedCount:e.filter(c=>c.status==="closed").length,mitigatingCount:e.filter(c=>c.status==="mitigating").length}}function jP(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}const Vst={technical:"Technical",external:"External",organizational:"Organizational","project-management":"Project Mgmt",commercial:"Commercial",hse:"HSE",quality:"Quality",schedule:"Schedule",resource:"Resource"};function qst({risks:e,totalBudget:t=0}){const n=x.useMemo(()=>Bst(e,t),[e,t]);if(e.length===0)return s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5"}),"Risk Exposure"]})}),s.jsx(ce,{className:"h-[200px] flex items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No risks identified"})})]});const r=n.totalExposure>0?n.totalContingency/n.totalExposure*100:0;return s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-500"}),"Risk Exposure Summary"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ae,{variant:"destructive",children:[n.openCount," Open"]}),s.jsxs(ae,{variant:"secondary",children:[n.mitigatingCount," Mitigating"]})]})]})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-muted",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mb-1",children:[s.jsx(ur,{className:"h-4 w-4"}),"Total Exposure"]}),s.jsx("div",{className:"text-2xl font-bold text-red-500",children:jP(n.totalExposure)}),t>0&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.exposurePercentage.toFixed(1),"% of budget"]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mb-1",children:[s.jsx(Gu,{className:"h-4 w-4"}),"Contingency Reserve"]}),s.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:jP(n.totalContingency)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.toFixed(0),"% coverage"]})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Top Risk Exposures"}),s.jsx("div",{className:"space-y-3",children:n.topRisks.map((i,a)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs text-muted-foreground w-4",children:a+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:i.title}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["P: ",i.probability,"/5"]}),s.jsxs("span",{className:"capitalize",children:["I: ",i.impact]})]})]}),s.jsx("span",{className:he("font-mono text-sm font-semibold",i.exposure>1e5?"text-red-500":i.exposure>5e4?"text-amber-500":"text-emerald-500"),children:jP(i.exposure)})]},i.id))})]}),n.byCategory.length>0&&s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Exposure by Category"}),s.jsx("div",{className:"space-y-2",children:n.byCategory.slice(0,4).map(i=>{const a=n.totalExposure>0?i.exposure/n.totalExposure*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"capitalize",children:Vst[i.category]||i.category}),s.jsxs("span",{className:"text-muted-foreground",children:[i.count," risks"]})]}),s.jsx(fn,{value:a,className:"h-2"})]},i.category)})})]})]})]})}function Ust({limit:e=5}){const{selectedProjectId:t}=jt(),{data:n=[]}=je({queryKey:[`/api/projects/${t}/stakeholders`],enabled:!!t}),{data:r=[]}=je({queryKey:[`/api/projects/${t}/communication-metrics`],enabled:!!t}),i=n.map(c=>{const u=r.find(d=>d.stakeholderId===c.id);return{stakeholder:c,metric:u}}).sort((c,u)=>{var m,g;const d={critical:0,"at-risk":1,healthy:2},f=((m=c.metric)==null?void 0:m.healthStatus)||"healthy",h=((g=u.metric)==null?void 0:g.healthStatus)||"healthy";return(d[f]||2)-(d[h]||2)}).slice(0,e),a=c=>{switch(c){case"critical":return s.jsx(ae,{variant:"destructive",className:"text-xs",children:"Critical"});case"at-risk":return s.jsx(ae,{variant:"outline",className:"text-xs border-amber-500 text-amber-600",children:"At Risk"});default:return s.jsx(ae,{variant:"outline",className:"text-xs border-green-500 text-green-600",children:"Healthy"})}},o=c=>{switch(c){case"email":return s.jsx(ji,{className:"h-3 w-3"});case"phone":return s.jsx(o1,{className:"h-3 w-3"});case"chat":return s.jsx(fa,{className:"h-3 w-3"});case"meeting":return s.jsx(Cn,{className:"h-3 w-3"});default:return null}},l=c=>{if(!c)return"Never";try{return xne(new Date(c),{addSuffix:!0})}catch{return"Unknown"}};return t?n.length===0?s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"h-5 w-5"}),"Stakeholder Pulse"]}),s.jsx(it,{children:"Communication health for key stakeholders"})]}),s.jsx(ce,{children:s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No stakeholders found. Add stakeholders to track communication health."})})]}):s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"h-5 w-5"}),"Stakeholder Pulse"]}),s.jsx(it,{children:"Communication health for key stakeholders"})]}),s.jsxs(ce,{className:"space-y-3",children:[i.map(({stakeholder:c,metric:u})=>{const d=!u||u.healthStatus==="healthy",f=(u==null?void 0:u.healthStatus)==="at-risk",h=(u==null?void 0:u.healthStatus)==="critical";return s.jsxs("div",{className:he("flex items-start justify-between p-3 rounded-lg border",h&&"bg-red-50 border-red-200",f&&"bg-amber-50 border-amber-200",d&&"bg-muted/30"),children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(yi,{className:"h-8 w-8",children:s.jsx(bi,{className:"text-xs",children:c.name.split(" ").map(m=>m[0]).join("")})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium text-sm",children:c.name}),a(u==null?void 0:u.healthStatus)]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[c.preferredChannel&&s.jsxs("div",{className:"flex items-center gap-1",children:[o(c.preferredChannel),s.jsx("span",{className:"capitalize",children:c.preferredChannel})]}),(u==null?void 0:u.lastInteractionDate)&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(bn,{className:"h-3 w-3"}),s.jsxs("span",{children:["Last contact: ",l(u.lastInteractionDate)]})]}),(u==null?void 0:u.responseTimeAvg)&&s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Avg response: ",Math.round(u.responseTimeAvg/60),"h"]})})]}),c.communicationStyle&&s.jsx("div",{className:"mt-1",children:s.jsxs(ae,{variant:"secondary",className:"text-[10px]",children:[c.communicationStyle==="direct"&&"Direct",c.communicationStyle==="diplomatic"&&"Diplomatic",c.communicationStyle==="detailed"&&"Detailed",c.communicationStyle==="brief"&&"Brief"]})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[h&&s.jsx(bt,{className:"h-4 w-4 text-red-500"}),f&&s.jsx(bn,{className:"h-4 w-4 text-amber-500"}),d&&s.jsx(s1,{className:"h-4 w-4 text-green-500"})]})]},c.id)}),n.length>e&&s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Showing top ",e," of ",n.length," stakeholders"]})})]})]}):null}function Wst(e,t,n,r){const i=e.length,a=e.filter(m=>m.status==="completed").length,o=e.filter(m=>m.status==="in-progress").length,l=i>0?Math.round(a/i*100):0,c=t.filter(m=>m.status!=="closed").length,u=n.filter(m=>m.status!=="closed"&&m.status!=="resolved").length,d=r.reduce((m,g)=>m+Number(g.budgeted||0),0),f=r.reduce((m,g)=>m+Number(g.actual||0),0),h=d>0?Math.round(f/d*100):0;return{totalTasks:i,completedTasks:a,inProgressTasks:o,completionRate:l,openRisks:c,openIssues:u,totalBudget:d,actualCost:f,budgetUsed:h}}function Hst(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}function RA(e){return e.split(".")[0]}function Kst(e){return e.filter(t=>{if(t.parentId===null)return!0;const n=t.wbsCode.split(".");return n.length===1||n.length===2&&n[1]==="0"}).sort((t,n)=>{const r=RA(t.wbsCode),i=RA(n.wbsCode);return r.localeCompare(i,void 0,{numeric:!0})})}function $A(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}function Gst(e){const t=$A(e);if(!t)return"Recently";const r=new Date().getTime()-t.getTime(),i=Math.floor(r/6e4),a=Math.floor(r/36e5),o=Math.floor(r/864e5);return i<1?"Just now":i<60?`${i}m ago`:a<24?`${a}h ago`:o===1?"1 day ago":`${o} days ago`}function Qst(){const{selectedProject:e}=jt(),t=e==null?void 0:e.id,[n,r]=x.useState(!1);x.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="new-project"&&(r(!0),window.history.replaceState({},"",window.location.pathname))},[]);const{data:i=[],isLoading:a,error:o}=je({queryKey:["/api/projects",t,"tasks"],enabled:!!t,retry:1,queryFn:async()=>{const N=await fetch(`/api/projects/${t}/tasks`,{credentials:"include"});if(N.status===401)return[];if(!N.ok)throw new Error("Failed to fetch tasks");return N.json()}}),{data:l=[],isLoading:c}=je({queryKey:["/api/projects",t,"risks"],enabled:!!t,retry:1,queryFn:async()=>{const N=await fetch(`/api/projects/${t}/risks`,{credentials:"include"});if(N.status===401)return[];if(!N.ok)throw new Error("Failed to fetch risks");return N.json()}}),{data:u=[],isLoading:d}=je({queryKey:["/api/projects",t,"issues"],enabled:!!t,retry:1,queryFn:async()=>{const N=await fetch(`/api/projects/${t}/issues`,{credentials:"include"});if(N.status===401)return[];if(!N.ok)throw new Error("Failed to fetch issues");return N.json()}}),{data:f=[],isLoading:h}=je({queryKey:["/api/projects",t,"costs"],enabled:!!t,retry:1,queryFn:async()=>{const N=await fetch(`/api/projects/${t}/costs`,{credentials:"include"});if(N.status===401)return[];if(!N.ok)throw new Error("Failed to fetch costs");return N.json()}}),m=a||c||d||h,g=Kst(i);if(!e)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(Is,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project to view the dashboard."})]})});const p=Wst(i,l,u,f),v=[...l.map(N=>({id:`risk-${N.id}`,type:"risk",title:N.title,date:$A(N.createdAt)})),...u.map(N=>({id:`issue-${N.id}`,type:"issue",title:N.title,date:$A(N.createdAt)}))].sort((N,w)=>!N.date&&!w.date?0:N.date?w.date?w.date.getTime()-N.date.getTime():-1:1).slice(0,5),b=i.filter(N=>N.status!=="completed"&&(N.priority==="critical"||N.priority==="high")).slice(0,4),y=e!=null&&e.startDate?new Date(e.startDate):new Date,j=e!=null&&e.endDate?new Date(e.endDate):new Date(Date.now()+365*24*60*60*1e3);return s.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-3xl font-semibold mb-1 md:mb-2","data-testid":"text-dashboard-title",children:"Project Dashboard"}),s.jsxs("p",{className:"text-sm md:text-base text-muted-foreground","data-testid":"text-project-name",children:[e.name," - ",e.code]})]})}),m?s.jsxs("div",{className:"grid gap-3 md:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(Ke,{className:"h-24 md:h-32"}),s.jsx(Ke,{className:"h-24 md:h-32"}),s.jsx(Ke,{className:"h-24 md:h-32"}),s.jsx(Ke,{className:"h-24 md:h-32"})]}):s.jsxs("div",{className:"grid gap-3 md:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(Ts,{title:"Total Tasks",value:p.totalTasks.toString(),change:p.totalTasks>0?Math.round(p.inProgressTasks/p.totalTasks*100):0,icon:Ka,"data-testid":"metric-total-tasks"}),s.jsx(Ts,{title:"Completion Rate",value:`${p.completionRate}%`,change:p.completionRate>50?10:-5,icon:ri,"data-testid":"metric-completion-rate"}),s.jsx(Ts,{title:"Budget Used",value:Hst(p.actualCost),change:p.budgetUsed>80?5:-3,icon:ur,"data-testid":"metric-budget-used"}),s.jsx(Ts,{title:"Open Risks",value:p.openRisks.toString(),change:p.openRisks>5?10:-15,icon:ft,"data-testid":"metric-open-risks"})]}),s.jsxs(Vr,{defaultValue:"overview",className:"w-full",children:[s.jsxs(Pr,{children:[s.jsx(tt,{value:"overview","data-testid":"tab-overview",children:"Overview"}),s.jsxs(tt,{value:"eva","data-testid":"tab-eva",children:[s.jsx(vf,{className:"h-4 w-4 mr-2"}),"S-Curve & EVA"]})]}),s.jsxs(ht,{value:"overview",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{children:"Work Breakdown Progress"})}),s.jsx(ce,{className:"space-y-4",children:m?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"})]}):g.length>0?g.map(N=>{const w=RA(N.wbsCode);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium truncate",children:N.name}),s.jsx(ae,{variant:"outline",className:"font-mono",children:w})]}),s.jsxs("span",{className:"text-sm font-semibold",children:[N.progress,"%"]})]}),s.jsx(fn,{value:N.progress,className:"h-2"})]},N.id)}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No top-level tasks found. Add tasks to see progress."})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{children:"Recent Activity"})}),s.jsx(ce,{className:"space-y-4",children:m?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"})]}):v.length>0?v.map(N=>s.jsxs("div",{className:"flex items-start gap-3",children:[N.type==="risk"?s.jsx(ft,{className:"h-5 w-5 text-chart-2 mt-0.5"}):s.jsx(bn,{className:"h-5 w-5 text-chart-1 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium truncate",children:[N.type==="risk"?"Risk: ":"Issue: ",N.title]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:Gst(N.date)})]})]},N.id)):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No recent activity to display."})})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{children:"Critical & High Priority Tasks"})}),s.jsx(ce,{children:m?s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"}),s.jsx(Ke,{className:"h-12"})]}):b.length>0?s.jsx("div",{className:"space-y-3",children:b.map(N=>s.jsxs("div",{className:"flex items-center gap-4 flex-wrap","data-testid":`critical-task-${N.id}`,children:[s.jsx(ae,{variant:"outline",className:"font-mono",children:N.wbsCode}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:"text-sm font-medium truncate",children:N.name}),s.jsx(ae,{variant:N.priority==="critical"?"destructive":"secondary",children:N.status==="not-started"?"Not Started":N.status==="in-progress"?"In Progress":N.status})]}),s.jsx(fn,{value:N.progress,className:"h-1.5"})]}),s.jsxs("span",{className:"text-sm text-muted-foreground w-12 text-right",children:[N.progress,"%"]})]},N.id))}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No critical or high priority tasks pending."})})]}),s.jsx(Ust,{limit:5})]}),s.jsx(ht,{value:"eva",className:"space-y-4 mt-4",children:m?s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(Ke,{className:"h-[400px]"}),s.jsx(Ke,{className:"h-[400px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Tst,{tasks:i,projectStartDate:y,projectEndDate:j}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(Mst,{tasks:i,costItems:f}),s.jsx(Lst,{tasks:i})]}),s.jsx(qst,{risks:l,totalBudget:p.totalBudget})]})})]}),s.jsx(aJ,{open:n,onOpenChange:r})]})}function LM({id:e,selected:t,onSelect:n,onClick:r,children:i,expandable:a,expanded:o,onToggleExpand:l,className:c,draggable:u,onDragStart:d,onDragOver:f,onDragLeave:h,onDrop:m}){const g=x.useRef(null),p=y=>{g.current={shiftKey:y.shiftKey}},v=y=>{var j;if(typeof y=="boolean"){const N=(j=g.current)==null?void 0:j.shiftKey;g.current=null,n==null||n(y,N)}},b=y=>{y.stopPropagation()};return s.jsx(ie,{className:he("p-1.5 sm:p-3 md:p-4 mb-2 cursor-pointer hover-elevate active-elevate-2 transition-shadow",u&&"cursor-move",c),onClick:r,draggable:u,onDragStart:d,onDragOver:f,onDragLeave:h,onDrop:m,"data-testid":`row-card-${e}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[s.jsx(Wt,{checked:t,onPointerDown:p,onCheckedChange:v,onClick:b,className:"h-1.5 w-1.5 sm:h-4 sm:w-4 shrink-0","data-testid":`checkbox-${e}`}),a&&s.jsx("button",{onClick:y=>{y.stopPropagation(),l==null||l()},className:"hover-elevate p-0 sm:p-1 rounded shrink-0","data-testid":`button-expand-${e}`,children:s.jsx(qa,{className:he("h-1.5 w-1.5 sm:h-4 sm:w-4 text-muted-foreground transition-transform",o&&"rotate-90")})}),s.jsx("div",{className:"flex-1 min-w-0",children:i})]})})}const O6=[{value:"human",label:"Human Resource",icon:Bn},{value:"equipment",label:"Equipment",icon:Qa},{value:"material",label:"Material",icon:Kr}],Yst=[{value:"general",label:"General"},{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"piping",label:"Piping"},{value:"electrical",label:"Electrical"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hvac",label:"HVAC"},{value:"architectural",label:"Architectural"}],Xst=[{value:"per-hour",label:"Per Hour (USD/hr)"},{value:"per-use",label:"Per Use (USD/use)"},{value:"per-unit",label:"Per Unit (USD/unit)"}],Zst=[{value:"ea",label:"Each (EA)"},{value:"lot",label:"Lot"},{value:"hr",label:"Hour (hr)"},{value:"day",label:"Day"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"m",label:"Meter (m)"},{value:"ft",label:"Feet (ft)"},{value:"kg",label:"Kilogram (kg)"},{value:"lb",label:"Pound (lb)"},{value:"ton",label:"Ton"}],Jst=[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"},{value:"INR",label:"INR - Indian Rupee"},{value:"AED",label:"AED - UAE Dirham"},{value:"SAR",label:"SAR - Saudi Riyal"}],eit=[{value:"available",label:"Available"},{value:"partially_available",label:"Partially Available"},{value:"unavailable",label:"Unavailable"},{value:"on_leave",label:"On Leave"}];function coe({resource:e,open:t,onOpenChange:n,onSuccess:r}){var j,N;const{selectedProjectId:i}=jt(),{toast:a}=Nt(),o=!!e,l=w=>{switch(w){case"workers":return"human";case"services":return"equipment";case"materials":return"material";default:return"human"}},c=w=>{switch(w){case"human":return"workers";case"equipment":return"services";case"material":return"materials";default:return"workers"}},[u,d]=x.useState(()=>e?c(e.type):"workers"),[f,h]=x.useState({name:"",type:(e==null?void 0:e.type)||"human",discipline:"general",availability:100,availabilityStatus:"available",rate:"",rateType:"per-hour",unitType:"hr",currency:"USD",description:"",notes:""});x.useEffect(()=>{e?h({name:e.name,type:e.type,discipline:e.discipline||"general",availability:e.availability?Number(e.availability):100,availabilityStatus:e.status||"available",rate:e.baseRate||"",rateType:e.costType||"per-hour",unitType:e.unit||"hr",currency:e.currency||"USD",description:e.notes||"",notes:e.notes||""}):m()},[e,t]);const m=()=>{h({name:"",type:"human",discipline:"general",availability:100,availabilityStatus:"available",rate:"",rateType:"per-hour",unitType:"hr",currency:"USD",description:"",notes:""})},g=Pe({mutationFn:async w=>await(await fe("POST","/api/resources",{...w,projectId:i})).json(),onSuccess:w=>{we.invalidateQueries({queryKey:["/api/projects",i,"resources"]}),a({title:"Success",description:"Resource created successfully"}),n(!1),r==null||r(w)},onError:w=>{a({title:"Error",description:w.message||"Failed to create resource",variant:"destructive"})}}),p=Pe({mutationFn:async({id:w,data:S})=>await fe("PATCH",`/api/resources/${w}`,S),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",i,"resources"]}),a({title:"Success",description:"Resource updated successfully"}),n(!1),r==null||r()},onError:w=>{a({title:"Error",description:w.message||"Failed to update resource",variant:"destructive"})}}),v=()=>{var C,A;if(!f.name.trim()){a({title:"Validation Error",description:"Resource name is required",variant:"destructive"});return}const w=D=>{if(D==null||D==="")return null;const P=typeof D=="string"?parseFloat(D):D;return isNaN(P)?null:String(P)},S={name:f.name,type:f.type,discipline:f.discipline,availability:w(f.availability),status:f.availabilityStatus,baseRate:w(f.rate),costType:f.rateType,unit:f.unitType,currency:f.currency,notes:((C=f.description)==null?void 0:C.trim())||((A=f.notes)==null?void 0:A.trim())||null,projectId:i},k=Uje.safeParse(S);if(!k.success){const D=k.error.issues.map(P=>`${P.path.join(".")}: ${P.message}`).join(`
`);a({title:"Validation Error",description:`Please check the following fields:
`+D,variant:"destructive"});return}o&&e?p.mutate({id:e.id,data:k.data}):g.mutate(k.data)},b=g.isPending||p.isPending,y=((j=O6.find(w=>w.value===f.type))==null?void 0:j.icon)||Bn;return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh]","data-testid":"modal-edit-resource","aria-describedby":"edit-resource-description",children:[s.jsx(Bt,{children:s.jsxs(Vt,{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(y,{className:"h-5 w-5"})}),o?"Edit Resource":"Add Resource"]})}),s.jsxs("p",{id:"edit-resource-description",className:"sr-only",children:["Form to ",o?"edit":"add"," a resource"]}),s.jsxs(On,{className:"h-[65vh]",children:[s.jsx("div",{className:"mb-4",children:s.jsx(Vr,{value:u,onValueChange:w=>{d(w);const S=l(w);h({...f,type:S}),h(S==="material"?k=>({...k,type:S,rateType:"per-unit"}):S==="human"?k=>({...k,type:S,rateType:"per-hour"}):k=>({...k,type:S,rateType:"per-use"}))},children:s.jsxs(Pr,{className:"grid w-full grid-cols-3 mb-4",children:[s.jsxs(tt,{value:"workers","data-testid":"tab-resource-type-workers",children:[s.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Workers"]}),s.jsxs(tt,{value:"services","data-testid":"tab-resource-type-services",children:[s.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Services"]}),s.jsxs(tt,{value:"materials","data-testid":"tab-resource-type-materials",children:[s.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Materials"]})]})})}),s.jsxs(Vr,{defaultValue:"basic",className:"w-full",children:[s.jsxs(Pr,{className:he("grid w-full","grid-cols-2"),children:[s.jsx(tt,{value:"basic","data-testid":"tab-basic",children:"Basic"}),s.jsx(tt,{value:"pricing","data-testid":"tab-pricing",children:"Pricing"})]}),s.jsxs(ht,{value:"basic",className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",children:"Name *"}),s.jsx(Ce,{id:"name",placeholder:"Enter resource name",value:f.name,onChange:w=>h({...f,name:w.target.value}),"data-testid":"input-resource-name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Type"}),s.jsx("div",{className:"p-2 rounded-md bg-muted text-sm",children:((N=O6.find(w=>w.value===f.type))==null?void 0:N.label)||"Unknown"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Change type using the tabs above"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Discipline"}),s.jsxs(ze,{value:f.discipline,onValueChange:w=>h({...f,discipline:w}),children:[s.jsx(Fe,{"data-testid":"select-discipline",children:s.jsx(Be,{})}),s.jsx(Le,{children:Yst.map(w=>s.jsx(X,{value:w.value,children:w.label},w.value))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{children:["Availability (",f.availability,"%)"]}),s.jsx(Ce,{type:"range",min:0,max:100,value:f.availability,onChange:w=>h({...f,availability:parseInt(w.target.value)}),"data-testid":"input-availability"}),s.jsx(fn,{value:f.availability,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Status"}),s.jsxs(ze,{value:f.availabilityStatus,onValueChange:w=>h({...f,availabilityStatus:w}),children:[s.jsx(Fe,{"data-testid":"select-status",children:s.jsx(Be,{})}),s.jsx(Le,{children:eit.map(w=>s.jsx(X,{value:w.value,children:w.label},w.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Description"}),s.jsx(Ht,{placeholder:"Enter description",value:f.description,onChange:w=>h({...f,description:w.target.value}),className:"resize-none",rows:3,"data-testid":"input-description"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Notes"}),s.jsx(Ht,{placeholder:"Additional notes",value:f.notes,onChange:w=>h({...f,notes:w.target.value}),className:"resize-none",rows:2,"data-testid":"input-notes"})]})]}),s.jsx(ht,{value:"pricing",className:"mt-4 space-y-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(ur,{className:"h-4 w-4"}),"Primary Rate"]})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Rate"}),s.jsx(Ce,{type:"number",step:"0.01",placeholder:"0.00",value:f.rate,onChange:w=>h({...f,rate:w.target.value}),"data-testid":"input-rate"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Rate Type"}),s.jsxs(ze,{value:f.rateType,onValueChange:w=>h({...f,rateType:w}),children:[s.jsx(Fe,{"data-testid":"select-rate-type",children:s.jsx(Be,{})}),s.jsx(Le,{children:Xst.map(w=>s.jsx(X,{value:w.value,children:w.label},w.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Currency"}),s.jsxs(ze,{value:f.currency,onValueChange:w=>h({...f,currency:w}),children:[s.jsx(Fe,{"data-testid":"select-currency",children:s.jsx(Be,{})}),s.jsx(Le,{children:Jst.map(w=>s.jsx(X,{value:w.value,children:w.label},w.value))})]})]})]}),f.rateType==="per-unit"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Unit Type"}),s.jsxs(ze,{value:f.unitType,onValueChange:w=>h({...f,unitType:w}),children:[s.jsx(Fe,{"data-testid":"select-unit-type",children:s.jsx(Be,{})}),s.jsx(Le,{children:Zst.map(w=>s.jsx(X,{value:w.value,children:w.label},w.value))})]})]})]})]})})]})]}),s.jsxs(on,{className:"gap-2",children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),disabled:b,children:"Cancel"}),s.jsxs(H,{onClick:v,disabled:b,"data-testid":"button-save-resource",children:[b&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),o?"Update":"Create"," Resource"]})]})]})})}function tit({task:e,open:t,onOpenChange:n,onApply:r}){const{toast:i}=Nt(),a=Pi(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(null);x.useEffect(()=>{t&&e&&(l(!0),u(null),f(null),fe("GET",`/api/tasks/${e.id}/resource-leveling`).then(async p=>{const v=await p.json();u(v),l(!1)}).catch(p=>{console.error("Error fetching resource leveling suggestions:",p),i({title:"Error",description:"Failed to load resource leveling suggestions",variant:"destructive"}),l(!1)}))},[t,e,i]);const h=async()=>{if(!d||!e||!c)return;const p=c.suggestions.find(v=>v.option===d);if(p){l(!0);try{const v={};for(const b of p.changes)b.type==="allocation"&&b.resourceId||b.type==="maxHoursPerDay"&&b.resourceId||b.type;await fe("POST",`/api/tasks/${e.id}/recalculate`),i({title:"Resource Leveling Applied",description:p.description}),a.invalidateQueries({queryKey:[`/api/tasks/${e.id}`]}),a.invalidateQueries({queryKey:[`/api/projects/${e.projectId}/tasks`]}),r==null||r(d),n(!1)}catch(v){console.error("Error applying resource leveling:",v),i({title:"Error",description:(v==null?void 0:v.message)||"Failed to apply resource leveling",variant:"destructive"})}finally{l(!1)}}},m=p=>{switch(p){case"high":return"bg-green-100 text-green-800 border-green-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},g=p=>p?new Date(p).toLocaleDateString():"N/A";return e?s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Resource Leveling Suggestions"}),s.jsxs(ir,{children:["Options to meet the constraint for task: ",e.name]})]}),s.jsx(On,{className:"flex-1 pr-4",children:o?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading suggestions..."})}):c?c.hasConflict?s.jsxs("div",{className:"space-y-4",children:[c.conflict&&s.jsxs($t,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsxs(Ft,{children:[s.jsx("strong",{children:"Constraint Conflict Detected:"})," ",c.conflict.message,s.jsx("br",{}),s.jsxs("span",{className:"text-xs mt-1 block",children:["Constraint: ",c.conflict.constraintType," on ",g(c.conflict.constraintDate),s.jsx("br",{}),"Computed: ",g(c.conflict.computedEndDate),s.jsx("br",{}),"Conflict: ",c.conflict.conflictDays," days"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Suggested Options:"}),c.suggestions.map(p=>s.jsxs(ie,{className:`cursor-pointer transition-all ${d===p.option?"ring-2 ring-primary":"hover:shadow-md"}`,onClick:()=>f(p.option),children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[p.changes.some(v=>v.type==="allocation")&&s.jsx(ri,{className:"h-4 w-4"}),p.changes.some(v=>v.type==="add_resource")&&s.jsx(Cn,{className:"h-4 w-4"}),p.changes.some(v=>v.type==="maxHoursPerDay")&&s.jsx(bn,{className:"h-4 w-4"}),p.description]}),s.jsxs(it,{className:"text-xs mt-1",children:["Preview: ",g(p.previewEndDate)," (",p.previewDuration," days)"]})]}),s.jsx(ae,{variant:"outline",className:m(p.feasibility),children:p.feasibility})]})}),s.jsx(ce,{className:"pt-0",children:s.jsx("div",{className:"space-y-1 text-xs text-muted-foreground",children:p.changes.map((v,b)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium",children:[v.resourceName||"Resource",":"]}),s.jsxs("span",{children:[v.currentValue,"  ",v.newValue]}),v.type==="allocation"&&s.jsx("span",{className:"text-xs",children:"%"}),v.type==="maxHoursPerDay"&&s.jsx("span",{className:"text-xs",children:"hrs/day"})]},b))})})]},p.option))]})]}):s.jsxs($t,{children:[s.jsx(pr,{className:"h-4 w-4"}),s.jsx(Ft,{children:c.message||"No constraint conflict detected. Current schedule meets the constraint."})]}):s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"No data available"})})}),s.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4 mt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),disabled:o,children:"Cancel"}),(c==null?void 0:c.hasConflict)&&d&&s.jsx(H,{onClick:h,disabled:o,children:o?"Applying...":"Apply Selected Option"})]})]})}):null}const nit=[{value:"drawing",label:"Drawing"},{value:"specification",label:"Specification"},{value:"datasheet",label:"Datasheet"},{value:"calculation",label:"Calculation"},{value:"report",label:"Report"},{value:"procedure",label:"Procedure"},{value:"other",label:"Other"}],rit=[{value:"general",label:"General"},{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"electrical",label:"Electrical"},{value:"piping",label:"Piping"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"architectural",label:"Architectural"}],sit=[{value:"draft",label:"Draft"},{value:"ifa",label:"Issued for Approval"},{value:"ifc",label:"Issued for Construction"},{value:"as-built",label:"As Built"},{value:"superseded",label:"Superseded"},{value:"cancelled",label:"Cancelled"}];function iit({document:e,open:t,onOpenChange:n,onSuccess:r}){const{selectedProjectId:i}=jt(),{toast:a}=Nt(),o=!!e,[l,c]=x.useState({documentNumber:"",title:"",description:"",discipline:"general",documentType:"drawing",revision:"0",status:"draft"});x.useEffect(()=>{e?c({documentNumber:e.documentNumber||"",title:e.title||"",description:e.description||"",discipline:e.discipline||"general",documentType:e.documentType||"drawing",revision:e.revision||"0",status:e.status||"draft"}):u()},[e,t]);const u=()=>{c({documentNumber:"",title:"",description:"",discipline:"general",documentType:"drawing",revision:"0",status:"draft"})},d=Pe({mutationFn:async g=>await(await fe("POST","/api/documents",{...g,projectId:i})).json(),onSuccess:g=>{we.invalidateQueries({queryKey:["/api/projects",i,"documents"]}),a({title:"Success",description:"Document created successfully"}),n(!1),r==null||r(g)},onError:g=>{a({title:"Error",description:g.message||"Failed to create document",variant:"destructive"})}}),f=Pe({mutationFn:async({id:g,data:p})=>await fe("PATCH",`/api/documents/${g}`,p),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",i,"documents"]}),a({title:"Success",description:"Document updated successfully"}),n(!1),r==null||r()},onError:g=>{a({title:"Error",description:g.message||"Failed to update document",variant:"destructive"})}}),h=()=>{var v;if(!l.documentNumber.trim()){a({title:"Validation Error",description:"Document number is required",variant:"destructive"});return}if(!l.title.trim()){a({title:"Validation Error",description:"Title is required",variant:"destructive"});return}const g={...l,documentNumber:l.documentNumber,title:l.title,name:l.title,description:((v=l.description)==null?void 0:v.trim())||null,discipline:l.discipline,documentType:l.documentType,revision:l.revision,status:l.status,projectId:i},p=Wje.safeParse(g);if(!p.success){const b=p.error.issues.map(y=>`${y.path.join(".")}: ${y.message}`).join(`
`);a({title:"Validation Error",description:`Please check the following fields:
`+b,variant:"destructive"});return}o&&e?f.mutate({id:e.id,data:p.data}):d.mutate(p.data)},m=d.isPending||f.isPending;return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-lg",children:[s.jsx(Bt,{children:s.jsxs(Vt,{className:"flex items-center gap-2",children:[s.jsx(Sn,{className:"h-5 w-5 text-muted-foreground"}),o?"Edit Document":"Add New Document"]})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"doc-number",children:"Document Number *"}),s.jsx(Ce,{id:"doc-number",placeholder:"e.g. DWG-001",value:l.documentNumber,onChange:g=>c({...l,documentNumber:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"revision",children:"Revision"}),s.jsx(Ce,{id:"revision",value:l.revision,onChange:g=>c({...l,revision:g.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title *"}),s.jsx(Ce,{id:"title",placeholder:"Document title",value:l.title,onChange:g=>c({...l,title:g.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Type"}),s.jsxs(ze,{value:l.documentType,onValueChange:g=>c({...l,documentType:g}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:nit.map(g=>s.jsx(X,{value:g.value,children:g.label},g.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Discipline"}),s.jsxs(ze,{value:l.discipline,onValueChange:g=>c({...l,discipline:g}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:rit.map(g=>s.jsx(X,{value:g.value,children:g.label},g.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Status"}),s.jsxs(ze,{value:l.status,onValueChange:g=>c({...l,status:g}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:sit.map(g=>s.jsx(X,{value:g.value,children:g.label},g.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",placeholder:"Optional description",value:l.description,onChange:g=>c({...l,description:g.target.value}),rows:3})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),disabled:m,children:"Cancel"}),s.jsxs(H,{onClick:h,disabled:m,children:[m&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),o?"Update":"Create"," Document"]})]})]})})}function ait({titleQuery:e,onApplySuggestion:t}){const{selectedOrgId:n}=jt(),[r,i]=x.useState(e);x.useEffect(()=>{const l=setTimeout(()=>{e.length>=3&&i(e)},500);return()=>clearTimeout(l)},[e]);const{data:a,isLoading:o}=je({queryKey:["lessons-search",n,r],queryFn:async()=>{if(!n||r.length<3)return[];const l=await fetch(`/api/organizations/${n}/lessons/search?q=${encodeURIComponent(r)}`);return l.ok?l.json():[]},enabled:!!n&&r.length>=3});return!e||e.length<3?null:o?s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[s.jsx(pt,{className:"h-3 w-3 animate-spin"})," Searching knowledge base..."]}):!a||a.length===0?null:s.jsxs("div",{className:"mt-2 border rounded-md bg-muted/30 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-medium text-amber-600",children:[s.jsx(_K,{className:"h-4 w-4"}),s.jsxs("span",{children:["Found ",a.length," related lessons in Knowledge Base"]})]}),s.jsx(On,{className:"h-[200px]",children:s.jsx("div",{className:"space-y-2",children:a.map(l=>s.jsx(ie,{className:"bg-background border-l-4 border-l-amber-500",children:s.jsxs(ce,{className:"p-3",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("div",{className:"font-medium text-sm",children:l.title}),s.jsx(ae,{variant:"outline",className:"text-[10px]",children:l.category})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:l.outcome||l.description}),s.jsxs(H,{variant:"secondary",size:"sm",className:"w-full h-7 text-xs",onClick:()=>t(l),children:[s.jsx(Et,{className:"h-3 w-3 mr-1"})," Apply to Risk"]})]})},l.id))})})]})}const oit=[{value:"identified",label:"Identified"},{value:"assessed",label:"Assessed"},{value:"mitigating",label:"Mitigating"},{value:"closed",label:"Closed"}],lit=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],cit=[{value:"avoid",label:"Avoid"},{value:"transfer",label:"Transfer"},{value:"mitigate",label:"Mitigate"},{value:"accept",label:"Accept"},{value:"escalate",label:"Escalate"}];function uit({risk:e,open:t,onOpenChange:n,onSuccess:r}){const{selectedProjectId:i}=jt(),{toast:a}=Nt(),o=!!e,[l,c]=x.useState({code:"",title:"",description:"",status:"identified",probability:3,impact:"medium",mitigationPlan:"",responseStrategy:"mitigate"});x.useEffect(()=>{e?c({code:e.code,title:e.title,description:e.description||"",status:e.status||"identified",probability:e.probability||3,impact:e.impact||"medium",mitigationPlan:e.mitigationPlan||"",responseStrategy:e.responseStrategy||"mitigate"}):u()},[e,t]);const u=()=>{c({code:"",title:"",description:"",status:"identified",probability:3,impact:"medium",mitigationPlan:"",responseStrategy:"mitigate"})},d=Pe({mutationFn:async p=>await(await fe("POST","/api/risks",{...p,projectId:i})).json(),onSuccess:p=>{we.invalidateQueries({queryKey:["/api/projects",i,"risks"]}),a({title:"Success",description:"Risk created successfully"}),n(!1),r==null||r(p),u()},onError:p=>{a({title:"Error",description:p.message||"Failed to create risk",variant:"destructive"})}}),f=Pe({mutationFn:async p=>await(await fe("PATCH",`/api/risks/${e==null?void 0:e.id}`,p)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",i,"risks"]}),a({title:"Success",description:"Risk updated successfully"}),n(!1),r==null||r()},onError:p=>{a({title:"Error",description:p.message||"Failed to update risk",variant:"destructive"})}}),h=()=>{var b,y;const p={...l,projectId:i,probability:Number(l.probability),description:((b=l.description)==null?void 0:b.trim())||null,mitigationPlan:((y=l.mitigationPlan)==null?void 0:y.trim())||null,code:l.code||"",title:l.title||""},v=Vje.safeParse(p);if(!v.success){const j=v.error.issues.map(N=>`${N.path.join(".")}: ${N.message}`).join(`
`);a({title:"Validation Error",description:`Please check the following fields:
`+j,variant:"destructive"});return}o&&e?f.mutate(v.data):d.mutate(v.data)},m=p=>{c(v=>({...v,mitigationPlan:(v.mitigationPlan?v.mitigationPlan+`

`:"")+`[Based on Lesson Learned: ${p.title}]
Recommendation: ${p.outcome||p.actionTaken}`,description:(v.description?v.description:"")||p.description})),a({title:"Suggestion Applied",description:"Risk details updated from Lesson Learned."})},g=d.isPending||f.isPending;return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsx(Bt,{children:s.jsxs(Vt,{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-500"}),o?"Edit Risk":"Add New Risk"]})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title *"}),s.jsx(Ce,{id:"title",placeholder:"Risk title",value:l.title,onChange:p=>c({...l,title:p.target.value})}),s.jsx(ait,{titleQuery:l.title||"",onApplySuggestion:m})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Status"}),s.jsxs(ze,{value:l.status,onValueChange:p=>c({...l,status:p}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:oit.map(p=>s.jsx(X,{value:p.value,children:p.label},p.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Strategy"}),s.jsxs(ze,{value:l.responseStrategy,onValueChange:p=>c({...l,responseStrategy:p}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:cit.map(p=>s.jsx(X,{value:p.value,children:p.label},p.value))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Probability (1-5)"}),s.jsx(Ce,{type:"number",min:"1",max:"5",value:l.probability,onChange:p=>c({...l,probability:parseInt(p.target.value)||1})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Impact"}),s.jsxs(ze,{value:l.impact,onValueChange:p=>c({...l,impact:p}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:lit.map(p=>s.jsx(X,{value:p.value,children:p.label},p.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",placeholder:"Risk description",value:l.description,onChange:p=>c({...l,description:p.target.value}),rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"mitigation",children:"Mitigation Plan"}),s.jsx(Ht,{id:"mitigation",placeholder:"Plan to address this risk",value:l.mitigationPlan,onChange:p=>c({...l,mitigationPlan:p.target.value}),rows:3})]}),e&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Tags"}),s.jsx(Ky,{entityType:"risk",entityId:e.id,placeholder:"Add tags to categorize this risk..."})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),disabled:g,children:"Cancel"}),s.jsxs(H,{onClick:h,disabled:g,children:[g&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),o?"Update":"Create"," Risk"]})]})]})})}function dit({data:e}){const o=e.categories;return s.jsx("div",{className:"w-full overflow-x-auto border rounded-md p-4 bg-white",children:s.jsxs("svg",{width:800,height:400,viewBox:"0 0 800 400",children:[s.jsx("line",{x1:50,y1:200,x2:700,y2:200,stroke:"#333",strokeWidth:"3",markerEnd:"url(#arrowhead)"}),s.jsx("rect",{x:700,y:160,width:90,height:80,fill:"#f0f0f0",stroke:"#333",rx:"5"}),s.jsx("foreignObject",{x:700,y:160,width:90,height:80,children:s.jsx("div",{className:"flex items-center justify-center h-full p-2 text-xs font-bold text-center break-words",children:e.problem})}),o.map((l,c)=>{const u=c%2===0,d=50+c*(650/o.length)+50,f=u?50:350;return s.jsxs("g",{children:[s.jsx("line",{x1:d,y1:200,x2:d+40,y2:f,stroke:"#666",strokeWidth:"2"}),s.jsx("rect",{x:d+20,y:u?f-30:f,width:80,height:30,fill:"#e6f3ff",stroke:"#0066cc",rx:"3"}),s.jsx("text",{x:d+60,y:u?f-10:f+20,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#0066cc",children:l.name}),l.causes.map((h,m)=>{const g=u?f+30+m*25:f-30-m*25;return u&&g<200||!u&&g>200?s.jsxs("g",{children:[s.jsx("line",{x1:d+20+m*5,y1:g,x2:d+80,y2:g,stroke:"#999",strokeWidth:"1"}),s.jsx("text",{x:d+85,y:g+3,fontSize:"9",fill:"#333",children:h})]},m):null})]},c)}),s.jsx("defs",{children:s.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:s.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#333"})})})]})})}const fit=[{value:"open",label:"Open"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}],hit=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],mit=[{value:"design",label:"Design"},{value:"procurement",label:"Procurement"},{value:"construction",label:"Construction"},{value:"commissioning",label:"Commissioning"},{value:"hse",label:"HSE"},{value:"quality",label:"Quality"},{value:"commercial",label:"Commercial"},{value:"interface",label:"Interface"},{value:"resource",label:"Resource"}];function pit({issue:e,open:t,onOpenChange:n,onSuccess:r}){const{selectedProjectId:i}=jt(),{toast:a}=Nt(),o=!!e,[l,c]=x.useState({code:"",title:"",description:"",status:"open",priority:"medium",issueType:"design",impactCost:!1,impactSchedule:!1}),[u,d]=x.useState(null),[f,h]=x.useState(!1);x.useEffect(()=>{e?c({code:e.code,title:e.title,description:e.description||"",status:e.status||"open",priority:e.priority||"medium",issueType:e.issueType||"design",impactCost:Number(e.impactCost)>0,impactSchedule:Number(e.impactSchedule)>0}):g(),d(null)},[e,t]);const m=async()=>{if(!l.title){a({title:"Error",description:"Please enter a title first.",variant:"destructive"});return}h(!0);try{const N=await(await fe("POST","/api/ai/chat",{message:`Analyze this issue and return a JSON object for a Fishbone Diagram. The issue is: "${l.title}". Description: "${l.description}". Return ONLY JSON with format: { "problem": "...", "categories": [{ "name": "Man", "causes": ["..."] }, ...] }`,context:{projectId:i}})).json();setTimeout(()=>{d({problem:l.title||"Issue",categories:[{name:"Man",causes:["Lack of training","Human error"]},{name:"Machine",causes:["Equipment failure","Calibration off"]},{name:"Material",causes:["Poor quality","Late delivery"]},{name:"Method",causes:["Outdated procedure","Shortcut taken"]},{name:"Measurement",causes:["Incorrect data","No metrics"]},{name:"Environment",causes:["High temperature","Poor lighting"]}]}),h(!1)},1500)}catch(j){console.error("Failed to generate analysis",j),a({title:"Error",description:"Failed to generate analysis",variant:"destructive"}),h(!1)}},g=()=>{c({code:"",title:"",description:"",status:"open",priority:"medium",issueType:"design",impactCost:!1,impactSchedule:!1})},p=Pe({mutationFn:async j=>await(await fe("POST","/api/issues",{...j,projectId:i})).json(),onSuccess:j=>{we.invalidateQueries({queryKey:["/api/projects",i,"issues"]}),a({title:"Success",description:"Issue created successfully"}),n(!1),r==null||r(j)},onError:j=>{a({title:"Error",description:j.message||"Failed to create issue",variant:"destructive"})}}),v=Pe({mutationFn:async({id:j,data:N})=>await fe("PATCH",`/api/issues/${j}`,N),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",i,"issues"]}),a({title:"Success",description:"Issue updated successfully"}),n(!1),r==null||r()},onError:j=>{a({title:"Error",description:j.message||"Failed to update issue",variant:"destructive"})}}),b=()=>{var w;if(!l.title.trim()){a({title:"Validation Error",description:"Title is required",variant:"destructive"});return}const j={...l,projectId:i,description:((w=l.description)==null?void 0:w.trim())||null,code:l.code||"",title:l.title||"",impactCost:l.impactCost?1:0,impactSchedule:l.impactSchedule?1:0},N=qje.safeParse(j);if(!N.success){const S=N.error.issues.map(k=>`${k.path.join(".")}: ${k.message}`).join(`
`);a({title:"Validation Error",description:`Please check the following fields:
`+S,variant:"destructive"});return}o&&e?v.mutate({id:e.id,data:N.data}):p.mutate(N.data)},y=p.isPending||v.isPending;return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-lg",children:[s.jsx(Bt,{children:s.jsxs(Vt,{className:"flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5 text-red-500"}),o?"Edit Issue":"Report New Issue"]})}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs(Vr,{defaultValue:"details",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"details",children:"Issue Details"}),s.jsx(tt,{value:"analysis",children:"Root Cause Analysis"})]}),s.jsxs(ht,{value:"details",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title *"}),s.jsx(Ce,{id:"title",placeholder:"Issue title",value:l.title,onChange:j=>c({...l,title:j.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Status"}),s.jsxs(ze,{value:l.status,onValueChange:j=>c({...l,status:j}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:fit.map(j=>s.jsx(X,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Priority"}),s.jsxs(ze,{value:l.priority,onValueChange:j=>c({...l,priority:j}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:hit.map(j=>s.jsx(X,{value:j.value,children:j.label},j.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Type"}),s.jsxs(ze,{value:l.issueType,onValueChange:j=>c({...l,issueType:j}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:mit.map(j=>s.jsx(X,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{className:"flex gap-6 py-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"impact-cost",checked:l.impactCost,onCheckedChange:j=>c({...l,impactCost:!!j})}),s.jsx(G,{htmlFor:"impact-cost",className:"font-normal cursor-pointer",children:"Cost Impact"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"impact-schedule",checked:l.impactSchedule,onCheckedChange:j=>c({...l,impactSchedule:!!j})}),s.jsx(G,{htmlFor:"impact-schedule",className:"font-normal cursor-pointer",children:"Schedule Impact"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",placeholder:"Issue description",value:l.description,onChange:j=>c({...l,description:j.target.value}),rows:3})]}),e&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Tags"}),s.jsx(Ky,{entityType:"issue",entityId:e.id,placeholder:"Add tags to categorize this issue..."})]})]}),s.jsxs(ht,{value:"analysis",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Ishikawa (Fishbone) Diagram"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate a root cause analysis using AI"})]}),s.jsxs(H,{variant:"secondary",size:"sm",onClick:m,disabled:f,children:[f?s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(hme,{className:"h-4 w-4 mr-2"}),u?"Regenerate Analysis":"Generate with AI"]})]}),u?s.jsx(dit,{data:u}):s.jsx("div",{className:"h-[300px] border rounded-md bg-muted/10 flex items-center justify-center text-muted-foreground text-sm",children:'Click "Generate with AI" to analyze the root causes of this issue.'})]})]})}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>n(!1),disabled:y,children:"Cancel"}),s.jsxs(H,{onClick:b,disabled:y,children:[y&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),o?"Update":"Report"," Issue"]})]})]})})}const git={Reactions:["","","","","","","",""],Common:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Objects:["","","","","","","","","","","","","","","","","","","","","","","","",""]};function uoe({onSelect:e,children:t}){const[n,r]=x.useState(!1),i=a=>{e(a),r(!1)};return s.jsxs(Ls,{open:n,onOpenChange:r,children:[s.jsx(Si,{asChild:!0,children:t||s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(qme,{className:"h-4 w-4"})})}),s.jsx(ps,{className:"w-[300px] p-0",align:"start",children:s.jsx(On,{className:"h-[300px]",children:s.jsx("div",{className:"p-2",children:Object.entries(git).map(([a,o])=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-xs font-semibold text-muted-foreground mb-2 px-2",children:a}),s.jsx("div",{className:"grid grid-cols-8 gap-1",children:o.map(l=>s.jsx("button",{onClick:()=>i(l),className:"text-xl hover:bg-muted rounded p-1 transition-colors",title:l,children:l},l))})]},a))})})})]})}function xit({message:e,showAvatar:t=!0,onEdit:n,onDelete:r,onReply:i,reactions:a=[],threadCount:o=0,showThreadIndicator:l=!1}){const{user:c}=zs();Nt();const u=e.userId===(c==null?void 0:c.id),{data:d}=je({queryKey:["/api/users",e.userId],queryFn:async()=>{try{return await(await fe("GET",`/api/users/${e.userId}`)).json()}catch{return{id:e.userId,name:"Unknown User",email:e.userId}}}}),{data:f=[]}=je({queryKey:[`/api/chat/messages/${e.id}/reactions`],enabled:a.length===0}),h=(a.length>0?a:f).reduce((b,y)=>{const j=typeof y=="string"?y:y.emoji;return b[j]||(b[j]={emoji:j,count:0,userReacted:!1}),b[j].count++,typeof y!="string"&&y.userId===(c==null?void 0:c.id)&&(b[j].userReacted=!0),b},{}),m=Pe({mutationFn:async b=>await fe("POST",`/api/chat/messages/${e.id}/reactions`,{emoji:b}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/chat/messages/${e.id}/reactions`]}),we.invalidateQueries({queryKey:[`/api/chat/conversations/${e.conversationId}/messages`]})}}),g=b=>{m.mutate(b)},p=(b,y)=>b?b.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2):y?y.charAt(0).toUpperCase():"U",v=["","","",""];return s.jsxs("div",{className:he("flex gap-2 group",u&&"flex-row-reverse"),children:[t&&!u&&s.jsxs(yi,{className:"h-8 w-8",children:[s.jsx(Bu,{src:d==null?void 0:d.avatar}),s.jsx(bi,{children:p(d==null?void 0:d.name,d==null?void 0:d.email)})]}),s.jsxs("div",{className:he("flex flex-col gap-1",u?"items-end":"items-start","max-w-[70%]"),children:[!u&&s.jsx("span",{className:"text-xs text-muted-foreground px-2",children:(d==null?void 0:d.name)||(d==null?void 0:d.email)||e.userId}),s.jsxs("div",{className:he("rounded-lg px-3 py-2 relative",u?"bg-primary text-primary-foreground":"bg-muted text-foreground"),children:[s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx(hO,{remarkPlugins:[xO],components:{p:({children:b})=>s.jsx("p",{className:"mb-1 last:mb-0",children:b}),ul:({children:b})=>s.jsx("ul",{className:"mb-1 ml-4 list-disc",children:b}),ol:({children:b})=>s.jsx("ol",{className:"mb-1 ml-4 list-decimal",children:b}),li:({children:b})=>s.jsx("li",{className:"mb-0.5",children:b}),code:({className:b,children:y})=>!b?s.jsx("code",{className:"bg-background/50 px-1 py-0.5 rounded text-xs font-mono",children:y}):s.jsx("code",{className:"block bg-background/50 p-2 rounded text-xs font-mono overflow-x-auto mb-1",children:y}),pre:({children:b})=>s.jsx("pre",{className:"bg-background/50 p-2 rounded overflow-x-auto mb-1",children:b}),a:({href:b,children:y})=>s.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"underline",children:y})},children:e.message})}),Object.keys(h).length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.values(h).map(b=>s.jsxs(H,{type:"button",variant:b.userReacted?"default":"outline",size:"sm",className:he("h-6 px-2 text-xs",b.userReacted&&"bg-primary/20"),onClick:()=>g(b.emoji),children:[s.jsx("span",{children:b.emoji}),s.jsx("span",{className:"ml-1",children:b.count})]},b.emoji))})]}),s.jsxs("div",{className:he("flex items-center gap-2 text-xs text-muted-foreground px-2 opacity-0 group-hover:opacity-100 transition-opacity",u&&"flex-row-reverse"),children:[s.jsx("span",{children:en(new Date(e.createdAt),"HH:mm")}),s.jsxs("div",{className:"flex gap-1",children:[v.map(b=>s.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>g(b),title:`React with ${b}`,children:b},b)),s.jsx(uoe,{onSelect:g,children:s.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",title:"Add reaction",children:s.jsx("span",{className:"text-xs",children:""})})})]}),l&&o>0&&s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>i==null?void 0:i(e),children:[" ",o," ",o===1?"reply":"replies"]}),i&&s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>i(e),children:[s.jsx(Vme,{className:"h-3 w-3 mr-1"}),"Reply"]}),(n||r)&&s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:s.jsx(i1,{className:"h-3 w-3"})})}),s.jsxs(Nn,{align:u?"end":"start",children:[n&&s.jsx(ct,{onClick:()=>n(e),children:"Edit"}),r&&s.jsx(ct,{onClick:()=>r(e),className:"text-destructive",children:"Delete"})]})]})]})]}),t&&u&&s.jsxs(yi,{className:"h-8 w-8",children:[s.jsx(Bu,{src:(c==null?void 0:c.profileImageUrl)||void 0}),s.jsx(bi,{children:p(c!=null&&c.firstName?`${c.firstName} ${c.lastName}`:void 0,c==null?void 0:c.email)})]})]})}function vit(e,t=50){return ihe({queryKey:["/api/chat/conversations",e,"messages"],queryFn:async({pageParam:n=0})=>{if(!e)return{messages:[],nextOffset:null};const i=await(await fe("GET",`/api/chat/conversations/${e}/messages?limit=${t}&offset=${n}`)).json();return{messages:i,nextOffset:i.length===t?n+t:null}},enabled:!!e,getNextPageParam:n=>n.nextOffset,initialPageParam:0})}function yit(){const e=Pi();return Pe({mutationFn:async({conversationId:t,data:n})=>await(await fe("POST",`/api/chat/conversations/${t}/messages`,n)).json(),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["/api/chat/conversations",n.conversationId,"messages"]}),e.invalidateQueries({queryKey:["/api/chat/conversations"]})}})}function bit(){const e=Pi();return Pe({mutationFn:async({id:t,data:n})=>await(await fe("PATCH",`/api/chat/messages/${t}`,n)).json(),onSuccess:t=>{e.invalidateQueries({queryKey:["/api/chat/conversations",t.conversationId,"messages"]})}})}function jit(){const e=Pi();return Pe({mutationFn:async t=>{await fe("DELETE",`/api/chat/messages/${t}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/chat/conversations"]})}})}function wit(e={}){const{user:t}=zs(),n=x.useRef(null),[r,i]=x.useState(!1),[a,o]=x.useState([]),l=x.useRef(null),c=x.useRef(null),u=x.useRef(e);u.current=e;const d=x.useCallback((N,w)=>{switch(w.split("-")[0]){case"task":we.invalidateQueries({queryKey:[`/api/projects/${N}/tasks`]});break;case"risk":we.invalidateQueries({queryKey:[`/api/projects/${N}/risks`]});break;case"issue":we.invalidateQueries({queryKey:[`/api/projects/${N}/issues`]});break;case"stakeholder":we.invalidateQueries({queryKey:[`/api/projects/${N}/stakeholders`]});break;case"cost":we.invalidateQueries({queryKey:[`/api/projects/${N}/costs`]});break;case"project":we.invalidateQueries({queryKey:[`/api/projects/${N}`]});break}},[]),f=x.useCallback(N=>{var w,S,k,C,A,D,P,_,O;try{const M=JSON.parse(N.data);switch(M.type){case"authenticated":console.log("[WS] Authenticated successfully"),u.current.projectId&&((w=n.current)==null||w.send(JSON.stringify({type:"join-project",payload:{projectId:u.current.projectId}}))),u.current.organizationId&&((S=n.current)==null||S.send(JSON.stringify({type:"join-organization",payload:{organizationId:u.current.organizationId}})));break;case"project-joined":console.log("[WS] Joined project:",M.payload.projectId),o(M.payload.users||[]);break;case"organization-joined":console.log("[WS] Joined organization:",M.payload.organizationId);break;case"user-joined":console.log("[WS] User joined:",M.payload.userId),o(T=>T.includes(M.payload.userId)?T:[...T,M.payload.userId]),(C=(k=u.current).onUserJoined)==null||C.call(k,M.payload.userId);break;case"user-left":console.log("[WS] User left:",M.payload.userId),o(T=>T.filter(R=>R!==M.payload.userId)),(D=(A=u.current).onUserLeft)==null||D.call(A,M.payload.userId);break;case"error":console.error("[WS] Error:",M.payload.message);break;case"pong":break;default:u.current.autoInvalidateQueries!==!1&&((P=M.payload)!=null&&P.projectId)&&d(M.payload.projectId,M.type),(O=(_=u.current).onMessage)==null||O.call(_,M)}}catch(M){console.error("[WS] Failed to parse message:",M)}},[d]),h=x.useCallback(()=>{var C;if(!(t!=null&&t.id)||((C=n.current)==null?void 0:C.readyState)===WebSocket.OPEN)return;const N=window.location.protocol==="https:"?"wss:":"ws:",w=window.location.host||"localhost:5000",S=`${N}//${w}/ws`;console.log("[WS] Connecting to:",S);const k=new WebSocket(S);n.current=k,k.onopen=()=>{console.log("[WS] Connected"),i(!0),c.current=setInterval(()=>{k.readyState===WebSocket.OPEN&&k.send(JSON.stringify({type:"ping"}))},25e3)},k.onmessage=f,k.onclose=()=>{console.log("[WS] Disconnected"),i(!1),o([]),c.current&&(clearInterval(c.current),c.current=null),l.current=setTimeout(()=>{h()},3e3)},k.onerror=A=>{console.error("[WS] Error:",A)}},[t==null?void 0:t.id,f]),m=x.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null),c.current&&(clearInterval(c.current),c.current=null),n.current&&(n.current.close(),n.current=null),i(!1),o([])},[]),g=x.useCallback(N=>{var w;((w=n.current)==null?void 0:w.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"join-project",payload:{projectId:N}}))},[]),p=x.useCallback(()=>{var N;((N=n.current)==null?void 0:N.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"leave-project",payload:{}}))},[]),v=x.useCallback(N=>{var w;((w=n.current)==null?void 0:w.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"join-conversation",payload:{conversationId:N}}))},[]),b=x.useCallback(()=>{var N;((N=n.current)==null?void 0:N.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"leave-conversation",payload:{}}))},[]),y=x.useCallback((N,w)=>{var S;((S=n.current)==null?void 0:S.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"typing-indicator",payload:{conversationId:N,isTyping:w}}))},[]),j=x.useCallback((N,w,S)=>{var k;((k=n.current)==null?void 0:k.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"cursor-move",payload:{x:N,y:w,elementId:S}}))},[]);return x.useEffect(()=>(h(),()=>{m()}),[h,m]),x.useEffect(()=>{r&&e.projectId&&g(e.projectId)},[r,e.projectId,g]),{isConnected:r,connectedUsers:a,joinProject:g,leaveProject:p,joinConversation:v,leaveConversation:b,sendTypingIndicator:y,sendCursorPosition:j,disconnect:m}}function doe({conversationId:e,onMessage:t,onTyping:n}){const r=x.useRef(null),{isConnected:i,joinConversation:a,leaveConversation:o,sendTypingIndicator:l}=wit({autoInvalidateQueries:!1,onMessage:u=>{u.type==="chat-message"&&u.payload?(t==null||t(u.payload),e&&we.invalidateQueries({queryKey:["/api/chat/conversations",e,"messages"]})):u.type==="typing-indicator"&&u.payload&&(n==null||n(u.payload.userId,u.payload.isTyping))}});return x.useEffect(()=>{if(!(!i||!e))return r.current!==e&&(r.current&&o(),a(e),r.current=e),()=>{r.current&&(o(),r.current=null)}},[i,e,a,o]),{sendTypingIndicator:x.useCallback(u=>{e&&l(e,u)},[e,l])}}function Nit({value:e,onChange:t,onKeyDown:n,placeholder:r="Type a message...",disabled:i=!1,onMention:a,onSlashCommand:o,className:l}){const c=x.useRef(null),[u,d]=x.useState(!1),[f,h]=x.useState(0);x.useEffect(()=>{c.current&&(c.current.style.height="auto",c.current.style.height=`${c.current.scrollHeight}px`)},[e]);const m=x.useCallback((v,b="")=>{if(!c.current)return;const y=c.current,j=y.selectionStart,N=y.selectionEnd,w=e.substring(j,N),S=e.substring(0,j)+v+w+b+e.substring(N);t(S),setTimeout(()=>{const k=j+v.length+w.length+b.length;y.setSelectionRange(k,k),y.focus()},0)},[e,t]),g=v=>{switch(v){case"bold":m("**","**");break;case"italic":m("*","*");break;case"code":m("`","`");break;case"codeBlock":m("```\n","\n```");break;case"list":m("- ");break;case"orderedList":m("1. ");break;case"link":m("[","](url)");break;case"mention":m("@"),a==null||a("");break;case"hashtag":m("#");break}},p=v=>{if(v.key==="@"&&!v.shiftKey){const y=v.currentTarget.selectionStart,j=e.substring(0,y),N=j[j.length-1];(y===0||/\s/.test(N))&&(a==null||a(""))}if(v.key==="/"&&!v.shiftKey){const y=v.currentTarget.selectionStart,j=e.substring(0,y),N=j[j.length-1];(y===0||/\s|\n/.test(N))&&(o==null||o(""))}v.key==="Tab"&&v.shiftKey,n==null||n(v)};return s.jsxs("div",{className:he("relative",l),children:[u&&s.jsxs("div",{className:"absolute bottom-full left-0 mb-2 flex gap-1 p-1 bg-background border rounded-lg shadow-lg z-10",children:[s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("bold"),title:"Bold (Ctrl+B)",children:s.jsx(fme,{className:"h-3 w-3"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("italic"),title:"Italic (Ctrl+I)",children:s.jsx(Eme,{className:"h-3 w-3"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("code"),title:"Inline code",children:s.jsx(eD,{className:"h-3 w-3"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("list"),title:"Bullet list",children:s.jsx(nD,{className:"h-3 w-3"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("link"),title:"Link",children:s.jsx(Dme,{className:"h-3 w-3"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>g("mention"),title:"Mention (@)",children:s.jsx(ume,{className:"h-3 w-3"})})]}),s.jsx(Ht,{ref:c,value:e,onChange:v=>{t(v.target.value),h(v.target.selectionStart)},onKeyDown:p,onFocus:()=>d(!0),onBlur:v=>{v.currentTarget.contains(document.activeElement)||setTimeout(()=>d(!1),200)},placeholder:r,disabled:i,className:"min-h-[60px] max-h-[200px] resize-none pr-10",rows:1}),s.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:"Markdown supported"})]})}function Sit({open:e,onOpenChange:t,query:n,position:r,onSelect:i}){const{selectedProjectId:a}=jt(),[o,l]=x.useState(n),{data:c=[]}=je({queryKey:["/api/users"],enabled:e&&a!==null}),{data:u=[]}=je({queryKey:a?[`/api/projects/${a}/tasks`]:["__disabled__"],enabled:e&&a!==null}),{data:d=[]}=je({queryKey:a?[`/api/projects/${a}/risks`]:["__disabled__"],enabled:e&&a!==null}),{data:f=[]}=je({queryKey:a?[`/api/projects/${a}/issues`]:["__disabled__"],enabled:e&&a!==null});x.useEffect(()=>{l(n)},[n]);const h=c.filter(N=>{var S;return(N.firstName&&N.lastName?`${N.firstName} ${N.lastName}`:"").toLowerCase().includes(o.toLowerCase())||((S=N.email)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))}).slice(0,5),m=u.filter(N=>{var w,S;return((w=N.name)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((S=N.wbsCode)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))}).slice(0,5),g=d.filter(N=>{var w,S;return((w=N.title)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((S=N.code)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))}).slice(0,5),p=f.filter(N=>{var w,S;return((w=N.title)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((S=N.code)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))}).slice(0,5),v=[...h.map(N=>({id:N.id,type:"user",name:(N.firstName&&N.lastName?`${N.firstName} ${N.lastName}`:N.email)||"Unknown",avatar:N.profileImageUrl||void 0,description:N.email})),...m.map(N=>({id:N.id,type:"task",name:N.name||`Task ${N.wbsCode}`,description:N.wbsCode||void 0})),...g.map(N=>({id:N.id,type:"risk",name:N.title||N.code||"Unknown Risk",description:N.code})),...p.map(N=>({id:N.id,type:"issue",name:N.title||N.code||"Unknown Issue",description:N.code}))],b=N=>{switch(N){case"user":return s.jsx(Bn,{className:"h-4 w-4"});case"task":return s.jsx(Sn,{className:"h-4 w-4"});case"risk":return s.jsx(ft,{className:"h-4 w-4"});case"issue":return s.jsx(bt,{className:"h-4 w-4"});case"project":return s.jsx(tD,{className:"h-4 w-4"})}},y=N=>{switch(N){case"user":return"People";case"task":return"Tasks";case"risk":return"Risks";case"issue":return"Issues";case"project":return"Projects"}},j=v.reduce((N,w)=>(N[w.type]||(N[w.type]=[]),N[w.type].push(w),N),{});return s.jsx(Ls,{open:e&&v.length>0,onOpenChange:t,children:s.jsx(ps,{className:"w-[300px] p-0",style:{position:"fixed",top:`${r.top}px`,left:`${r.left}px`},children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search...",value:o,onValueChange:l}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No results found."}),Object.entries(j).map(([N,w])=>s.jsx(Ms,{heading:y(N),children:w.map(S=>s.jsxs(Rs,{onSelect:()=>{i(S),t(!1)},className:"flex items-center gap-2",children:[b(S.type),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:S.name}),S.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:S.description})]})]},`${S.type}-${S.id}`))},N))]})]})})})}const Cit=[{command:"/task",description:"Create a new task",icon:s.jsx(Sn,{className:"h-4 w-4"}),category:"create"},{command:"/risk",description:"Create a new risk",icon:s.jsx(ft,{className:"h-4 w-4"}),category:"create"},{command:"/issue",description:"Create a new issue",icon:s.jsx(bt,{className:"h-4 w-4"}),category:"create"},{command:"/assign",description:"Assign user to task",icon:s.jsx(MK,{className:"h-4 w-4"}),category:"assign"},{command:"/status",description:"Update task status",icon:s.jsx(tD,{className:"h-4 w-4"}),category:"other"},{command:"/help",description:"Show available commands",icon:s.jsx(oc,{className:"h-4 w-4"}),category:"other"}];function kit({open:e,onOpenChange:t,query:n,position:r,onSelect:i,projectId:a}){const[o,l]=x.useState(n);x.useEffect(()=>{l(n)},[n]);const c=Cit.filter(f=>f.command.toLowerCase().includes(o.toLowerCase())||f.description.toLowerCase().includes(o.toLowerCase())),u=c.reduce((f,h)=>(f[h.category]||(f[h.category]=[]),f[h.category].push(h),f),{}),d=f=>{switch(f){case"create":return"Create";case"assign":return"Assign";case"other":return"Other";default:return"Commands"}};return s.jsx(Ls,{open:e&&c.length>0,onOpenChange:t,children:s.jsx(ps,{className:"w-[300px] p-0",style:{position:"fixed",top:`${r.top}px`,left:`${r.left}px`},children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search commands...",value:o,onValueChange:l}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No commands found."}),Object.entries(u).map(([f,h])=>s.jsx(Ms,{heading:d(f),children:h.map(m=>s.jsxs(Rs,{onSelect:()=>{i(m),t(!1)},className:"flex items-center gap-2",children:[m.icon,s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium",children:m.command}),s.jsx("p",{className:"text-xs text-muted-foreground",children:m.description})]})]},m.command))},f))]})]})})})}function Pit({conversationId:e,onTyping:t,replyToMessageId:n,onReplyCancel:r}){const[i,a]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(""),[h,m]=x.useState({top:0,left:0}),[g,p]=x.useState(!1),[v,b]=x.useState(""),[y,j]=x.useState({top:0,left:0}),[N,w]=x.useState([]),S=x.useRef(null),k=x.useRef(null),C=yit(),{sendTypingIndicator:A}=doe({conversationId:e}),{selectedProjectId:D}=jt(),{toast:P}=Nt();x.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const _=x.useCallback(z=>{const Y=/@(\w+)/g,ne=[];let te;for(;(te=Y.exec(z))!==null;)ne.push({type:"user",id:te[1],name:te[1]});return ne},[]),O=z=>{var J;a(z);const Y=((J=S.current)==null?void 0:J.selectionStart)||0,ne=z.substring(0,Y),te=ne.lastIndexOf("@");if(te!==-1){const xe=ne.substring(te+1);if((te===0||/\s/.test(ne[te-1]))&&!/\s/.test(xe)){if(f(xe),u(!0),S.current){const re=S.current.getBoundingClientRect();m({top:re.top-300,left:re.left})}}else u(!1)}else u(!1);const pe=ne.lastIndexOf("/");if(pe!==-1){const xe=ne.substring(pe+1);if((pe===0||/\s|\n/.test(ne[pe-1]))&&!/\s/.test(xe)){if(b(xe),p(!0),S.current){const re=S.current.getBoundingClientRect();j({top:re.top-300,left:re.left})}}else p(!1)}else p(!1);z.length>0&&!o&&(l(!0),A(!0)),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{l(!1),A(!1)},1e3)},M=z=>{var pe;const Y=((pe=S.current)==null?void 0:pe.selectionStart)||0,ne=i.substring(0,Y),te=ne.lastIndexOf("@");if(te!==-1){const J=i.substring(Y),xe=ne.substring(0,te)+`@${z.name} `+J;a(xe),w([...N,z]),u(!1),setTimeout(()=>{if(S.current){const ye=te+z.name.length+2;S.current.setSelectionRange(ye,ye),S.current.focus()}},0)}},T=z=>{var pe;const Y=((pe=S.current)==null?void 0:pe.selectionStart)||0,ne=i.substring(0,Y),te=i.substring(Y);a(ne+z+te),setTimeout(()=>{if(S.current){const J=Y+z.length;S.current.setSelectionRange(J,J),S.current.focus()}},0)},R=async()=>{if(!i.trim()||C.isPending)return;_(i);const z={conversationId:e,message:i.trim()};try{await C.mutateAsync({conversationId:e,data:z}),a(""),l(!1),A(!1),w([]),r==null||r(),S.current&&(S.current.style.height="auto")}catch(Y){console.error("Failed to send message:",Y),P({title:"Error",description:"Failed to send message",variant:"destructive"})}},F=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),!c&&!g&&R()),z.key==="Escape"&&(u(!1),p(!1))},E=z=>{var J;const Y=((J=S.current)==null?void 0:J.selectionStart)||0,ne=i.substring(0,Y),te=ne.lastIndexOf("/"),pe=i.substring(Y);if(te!==-1){let xe=ne.substring(0,te)+z.command+" "+pe;z.command==="/task"||z.command==="/risk"||z.command==="/issue"?(P({title:"Coming Soon",description:`${z.description} - Modal will open in next update`}),xe=ne.substring(0,te)+pe):z.command==="/help"&&(P({title:"Available Commands",description:"/task, /risk, /issue, /assign, /status, /help"}),xe=ne.substring(0,te)+pe),a(xe),p(!1),setTimeout(()=>{if(S.current){const ye=te+z.command.length+1;S.current.setSelectionRange(ye,ye),S.current.focus()}},0)}},[B,L]=x.useState(!1),I=()=>{L(!0)},q=()=>{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=Y=>{var te;((te=Y.target.files)==null?void 0:te[0])&&$({})},z.click()},$=async z=>{if(!z||z.length===0)return;const Y=z[0],ne=10*1024*1024;if(Y.size>ne){P({title:"File too large",description:`File size must be less than ${(ne/1024/1024).toFixed(1)}MB`,variant:"destructive"});return}try{const te=new FormData;te.append("file",Y),te.append("conversationId",e.toString());const pe=await fetch("/api/chat/files/upload",{method:"POST",body:te});if(!pe.ok)throw new Error("Upload failed");const J=await pe.json(),xe={conversationId:e,message:Y.name,attachments:{type:Y.type.startsWith("image/")?"image":"file",fileName:Y.name,filePath:J.filePath,fileSize:Y.size,mimeType:Y.type}};await C.mutateAsync({conversationId:e,data:xe}),P({title:"File uploaded",description:`${Y.name} has been uploaded successfully`})}catch(te){console.error("Failed to upload file:",te),P({title:"Upload failed",description:"Failed to upload file. Please try again.",variant:"destructive"})}};return s.jsxs("div",{className:"border-t p-4 bg-background",children:[n&&s.jsxs("div",{className:"mb-2 p-2 bg-muted rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-0.5 bg-primary"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Replying to message"})]}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,children:s.jsx(Fn,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:I,title:"Attach file",children:s.jsx(TK,{className:"h-4 w-4"})}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:q,title:"Attach image",children:s.jsx(PK,{className:"h-4 w-4"})}),s.jsx(uoe,{onSelect:T})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Nit,{value:i,onChange:O,onKeyDown:F,placeholder:"Type a message... (use @ to mention, / for commands)",disabled:C.isPending,onMention:z=>{f(z),u(!0)},onSlashCommand:()=>{}}),c&&s.jsx(Sit,{open:c,onOpenChange:u,query:d,position:h,onSelect:M}),g&&s.jsx(kit,{open:g,onOpenChange:p,query:v,position:y,onSelect:E,projectId:D})]}),s.jsx(H,{onClick:R,disabled:!i.trim()||C.isPending,size:"icon",className:"h-8 w-8",title:"Send (Ctrl+Enter)",children:s.jsx(l1,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[s.jsx("div",{children:g&&s.jsx("span",{children:"Type a command: /task, /risk, /issue, /assign, /status, /help"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{children:"Ctrl+Enter to send"}),s.jsx("span",{children:"Shift+Enter for new line"})]})]})]})}function Eit(e){return je({queryKey:["/api/chat/conversations",e,"participants"],queryFn:async()=>e?await(await fe("GET",`/api/chat/conversations/${e}/participants`)).json():[],enabled:!!e})}function _it({conversation:e,onSettings:t}){const{data:n}=Eit((e==null?void 0:e.id)||null);if(!e)return s.jsx("div",{className:"border-b p-4",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Select a conversation"})});const r=()=>e.name?e.name:e.type==="direct"?"Direct Message":e.type==="project"?"Project Chat":e.type==="task"?"Task Chat":"Group Chat",i=a=>a.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return s.jsxs("div",{className:"border-b p-4 flex items-center justify-between bg-background",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(yi,{className:"h-10 w-10",children:[s.jsx(Bu,{src:""}),s.jsx(bi,{children:i(r())})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:r()}),n&&n.length>0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Cn,{className:"h-3 w-3"}),s.jsxs("span",{children:[n.length," participant",n.length!==1?"s":""]})]})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(i1,{className:"h-4 w-4"})})}),s.jsx(Nn,{align:"end",children:s.jsx(ct,{onClick:t,children:"Settings"})})]})]})}function foe({conversation:e,onEditMessage:t,onDeleteMessage:n}){const{data:r,fetchNextPage:i,hasNextPage:a,isFetchingNextPage:o}=vit((e==null?void 0:e.id)||null),[l,c]=x.useState(null),[u,d]=x.useState(!1),f=x.useRef(null),h=x.useRef(null);x.useEffect(()=>{const y=j=>{(j.metaKey||j.ctrlKey)&&j.key==="k"&&(j.preventDefault(),d(!0)),j.key==="Escape"&&u&&d(!1)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[u]),doe({conversationId:(e==null?void 0:e.id)||null,onMessage:y=>{}});const m=(r==null?void 0:r.pages.flatMap(y=>y.messages))||[],g=m.map(y=>y.id),{data:p}=je({queryKey:["/api/chat/messages/reactions",g],queryFn:async()=>{const y=await Promise.all(g.map(async N=>{try{const S=await(await fe("GET",`/api/chat/messages/${N}/reactions`)).json();return{messageId:N,reactions:S}}catch{return{messageId:N,reactions:[]}}})),j=new Map;return y.forEach(({messageId:N,reactions:w})=>{j.set(N,w)}),j},enabled:g.length>0}),{data:v}=je({queryKey:[`/api/chat/conversations/${e==null?void 0:e.id}/threads`],queryFn:async()=>{if(!e)return new Map;const y=new Map;return m.forEach(j=>{}),y},enabled:!!e&&m.length>0});x.useEffect(()=>{if(f.current&&h.current){const y=h.current.querySelector("[data-radix-scroll-area-viewport]");y&&(y.scrollTop=y.scrollHeight)}},[r]);const b=y=>{c(y.id)};return e?s.jsxs("div",{className:"flex flex-col h-full bg-background",children:[s.jsx(_it,{conversation:e}),s.jsx(On,{ref:h,className:"flex-1",children:s.jsxs("div",{className:"p-4 space-y-4",children:[a&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:()=>i(),disabled:o,className:"text-sm text-muted-foreground hover:text-foreground",children:o?s.jsx(pt,{className:"h-4 w-4 animate-spin"}):"Load older messages"})}),m.map((y,j)=>{const N=j>0?m[j-1]:null,w=!N||N.userId!==y.userId||new Date(y.createdAt).getTime()-new Date(N.createdAt).getTime()>3e5,S=(p==null?void 0:p.get(y.id))||[],k=(v==null?void 0:v.get(y.id))||0,C=k>0;return s.jsx(xit,{message:y,showAvatar:w,reactions:S,threadCount:k,showThreadIndicator:C,onEdit:t,onDelete:n,onReply:b},y.id)}),s.jsx("div",{ref:f})]})}),s.jsx(Pit,{conversationId:e.id,replyToMessageId:l,onReplyCancel:()=>c(null)})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/50",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx("p",{className:"text-lg font-medium",children:"Select a conversation to start chatting"}),s.jsx("p",{className:"text-sm mt-2",children:"Choose a conversation from the sidebar or create a new one"})]})})}function hoe(){return je({queryKey:["/api/ai/conversations"],queryFn:async()=>await(await fe("GET","/api/ai/conversations")).json()})}function moe(){const e=Pi();return Pe({mutationFn:async t=>await(await fe("POST","/api/ai/conversations",t)).json(),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["/api/ai/conversations"]}),n.taskId&&e.invalidateQueries({queryKey:["/api/ai/conversations/task",n.taskId]}),n.projectId&&e.invalidateQueries({queryKey:["/api/ai/conversations/project",n.projectId]})}})}function Ait(e){return je({queryKey:["/api/ai/conversations/task",e],queryFn:async()=>e?await(await fe("GET",`/api/ai/conversations/task/${e}`)).json():null,enabled:!!e})}const Tit=[{key:"R",label:"Responsible",description:"Does the work to complete the task",color:"bg-blue-500 text-white"},{key:"A",label:"Accountable",description:"Ultimately answerable for the task",color:"bg-green-500 text-white"},{key:"C",label:"Consulted",description:"Provides input before work is done",color:"bg-yellow-500 text-black"},{key:"I",label:"Informed",description:"Kept up-to-date on progress",color:"bg-purple-500 text-white"}];function Dit({selectedPeople:e,allPeople:t,onSelectionChange:n,raciRole:r,taskId:i,isInherited:a,hasParent:o,onResetToInherited:l,disabled:c}){const[u,d]=x.useState(!1),f=r==="A"&&e.length>1,h=o&&!a&&e.length>0&&l,m=v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);n(b?e.filter(y=>!(y.id===v.id&&y.type===v.type)):[...e,v])},g=t.filter(v=>v.type==="stakeholder"),p=t.filter(v=>v.type==="resource");return s.jsxs("div",{className:"relative",children:[s.jsxs(Ls,{open:u,onOpenChange:d,children:[s.jsx(Si,{asChild:!0,children:s.jsx(H,{variant:"outline",size:"sm",className:`w-full justify-start text-left font-normal min-h-[36px] ${a?"border-dashed bg-muted/50":""} ${f?"border-amber-500":""}`,disabled:c,"data-testid":`raci-cell-${i}-${r}`,children:e.length===0?s.jsx("span",{className:"text-muted-foreground text-xs",children:"Select..."}):s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.slice(0,2).map(v=>s.jsxs(ae,{variant:"secondary",className:`text-[10px] px-1 py-0 ${a?"opacity-70":""}`,children:[v.type==="resource"&&s.jsx(bf,{className:"h-2 w-2 mr-0.5"}),v.name.split(" ")[0]]},`${v.type}-${v.id}`)),e.length>2&&s.jsxs(ae,{variant:"secondary",className:"text-[10px] px-1 py-0",children:["+",e.length-2]})]})})}),s.jsxs(ps,{className:"w-64 p-0",align:"start",children:[s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search people..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No people found."}),g.length>0&&s.jsx(Ms,{heading:"Stakeholders",children:g.map(v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);return s.jsx(Rs,{onSelect:()=>m(v),className:"cursor-pointer",children:s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(Wt,{checked:b,className:"pointer-events-none"}),s.jsx(Bn,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:v.name}),v.role&&s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:v.role})]})]})},`stakeholder-${v.id}`)})}),p.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(bO,{}),s.jsx(Ms,{heading:"Resources",children:p.map(v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);return s.jsx(Rs,{onSelect:()=>m(v),className:"cursor-pointer",children:s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(Wt,{checked:b,className:"pointer-events-none"}),s.jsx(bf,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:v.name}),v.role&&s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:v.role})]})]})},`resource-${v.id}`)})})]})]})]}),h&&s.jsx("div",{className:"border-t p-2",children:s.jsxs(H,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{l(),d(!1)},children:[s.jsx(OK,{className:"h-3 w-3 mr-1"}),"Reset to parent"]})})]})]}),f&&s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsx("div",{className:"absolute -top-1 -right-1",children:s.jsx(ft,{className:"h-3 w-3 text-amber-500"})})}),s.jsx(dc,{children:s.jsx("p",{className:"text-xs",children:"Warning: Multiple people accountable. Best practice is one person per task."})})]})}),a&&s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsx("div",{className:"absolute -bottom-1 -left-1",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-400"})})}),s.jsx(dc,{children:s.jsx("p",{className:"text-xs",children:"Inherited from parent task"})})]})})]})}function Oit({taskId:e,projectId:t,hasParent:n}){const{toast:r}=Nt(),{data:i=[]}=je({queryKey:["/api/projects",t,"stakeholders"],enabled:!!t}),{data:a=[]}=je({queryKey:["/api/projects",t,"resources"],enabled:!!t}),{data:o=[],isLoading:l}=je({queryKey:[`/api/tasks/${e}/raci`],enabled:!!e}),c=x.useMemo(()=>{const m=[];return i.forEach(g=>{m.push({id:g.id,name:g.name,type:"stakeholder",role:g.role||void 0,organization:g.organization||void 0})}),a.filter(g=>g.type==="human").forEach(g=>{m.push({id:g.id,name:g.name,type:"resource",role:g.discipline||void 0})}),m},[i,a]),u=x.useMemo(()=>{const m=new Map;return o.forEach(g=>{const p=g.raciType;m.has(p)||m.set(p,{people:[],isInherited:g.isInherited||!1});const v=m.get(p);if(g.stakeholderId){const b=i.find(y=>y.id===g.stakeholderId);b&&v.people.push({id:b.id,name:b.name,type:"stakeholder",role:b.role,organization:b.organization||void 0})}else if(g.resourceId){const b=a.find(y=>y.id===g.resourceId);b&&v.people.push({id:b.id,name:b.name,type:"resource",role:b.discipline||void 0})}}),m},[o,i,a]),d=Pe({mutationFn:async({raciType:m,people:g})=>{if(!t)throw new Error("No project selected");const p=o.filter(v=>v.raciType===m);for(const v of p)await fe("DELETE",`/api/raci/${v.id}`);for(const v of g)await fe("POST","/api/raci",{projectId:t,taskId:e,raciType:m,stakeholderId:v.type==="stakeholder"?v.id:null,resourceId:v.type==="resource"?v.id:null,isInherited:!1});return{raciType:m,people:g}},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${e}/raci`]}),we.invalidateQueries({queryKey:["/api/projects",t,"raci"]})},onError:m=>{r({title:"Update Failed",description:m.message,variant:"destructive"})}}),f=Pe({mutationFn:async({raciType:m})=>{if(!t)throw new Error("No project selected");return await fe("POST","/api/raci/reset",{taskId:e,raciType:m,projectId:t}),{raciType:m}},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${e}/raci`]}),we.invalidateQueries({queryKey:["/api/projects",t,"raci"]}),r({title:"Reset Successful",description:"RACI assignment has been reset to inherit from parent task."})},onError:m=>{r({title:"Reset Failed",description:m.message,variant:"destructive"})}}),h=x.useCallback((m,g)=>{m==="A"&&g.length>1&&r({title:"Multiple Accountable Warning",description:"Best practice is to have only one person Accountable per task.",variant:"default"}),d.mutate({raciType:m,people:g})},[d,r]);return l?s.jsx("div",{className:"flex items-center justify-center h-40",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading RACI assignments..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Bn,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"RACI Matrix"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Define roles and responsibilities for this task. Assignments can be inherited from parent tasks (shown with blue dot)."})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Tit.map(m=>{const{people:g,isInherited:p}=u.get(m.key)||{people:[],isInherited:!1};return s.jsxs("div",{className:"space-y-2 border rounded-lg p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{className:m.color,children:m.key}),s.jsx("span",{className:"font-medium text-sm",children:m.label})]})}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3 min-h-[32px]",children:m.description}),s.jsx(Dit,{selectedPeople:g,allPeople:c,onSelectionChange:v=>h(m.key,v),raciRole:m.key,taskId:e,isInherited:p,hasParent:n,onResetToInherited:()=>f.mutate({raciType:m.key}),disabled:d.isPending||f.isPending})]},m.key)})})]})}var Lt=function(){return Lt=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Lt.apply(this,arguments)};function Iit(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function poe(e,t,n){for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function ub(e){return e.mode==="multiple"}function db(e){return e.mode==="range"}function eC(e){return e.mode==="single"}var Mit={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Rit(e,t){return en(e,"LLLL y",t)}function $it(e,t){return en(e,"d",t)}function Fit(e,t){return en(e,"LLLL",t)}function Lit(e){return"".concat(e)}function zit(e,t){return en(e,"cccccc",t)}function Bit(e,t){return en(e,"yyyy",t)}var Vit=Object.freeze({__proto__:null,formatCaption:Rit,formatDay:$it,formatMonthCaption:Fit,formatWeekNumber:Lit,formatWeekdayName:zit,formatYearCaption:Bit}),qit=function(e,t,n){return en(e,"do MMMM (EEEE)",n)},Uit=function(){return"Month: "},Wit=function(){return"Go to next month"},Hit=function(){return"Go to previous month"},Kit=function(e,t){return en(e,"cccc",t)},Git=function(e){return"Week n. ".concat(e)},Qit=function(){return"Year: "},Yit=Object.freeze({__proto__:null,labelDay:qit,labelMonthDropdown:Uit,labelNext:Wit,labelPrevious:Hit,labelWeekNumber:Git,labelWeekday:Kit,labelYearDropdown:Qit});function Xit(){var e="buttons",t=Mit,n=mI,r={},i={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Vit,labels:Yit,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Zit(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,a=e.fromDate,o=e.toDate;return r?a=$s(r):t&&(a=new Date(t,0,1)),i?o=tS(i):n&&(o=new Date(n,11,31)),{fromDate:a?Jm(a):void 0,toDate:o?Jm(o):void 0}}var goe=x.createContext(void 0);function Jit(e){var t,n=e.initialProps,r=Xit(),i=Zit(n),a=i.fromDate,o=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(eC(n)||ub(n)||db(n))&&(c=n.onSelect);var u=Lt(Lt(Lt({},r),n),{captionLayout:l,classNames:Lt(Lt({},r.classNames),n.classNames),components:Lt({},n.components),formatters:Lt(Lt({},r.formatters),n.formatters),fromDate:a,labels:Lt(Lt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Lt(Lt({},r.modifiers),n.modifiers),modifiersClassNames:Lt(Lt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Lt(Lt({},r.styles),n.styles),toDate:o});return s.jsx(goe.Provider,{value:u,children:e.children})}function Zn(){var e=x.useContext(goe);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function xoe(e){var t=Zn(),n=t.locale,r=t.classNames,i=t.styles,a=t.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:n})})}function eat(e){return s.jsx("svg",Lt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function voe(e){var t,n,r=e.onChange,i=e.value,a=e.children,o=e.caption,l=e.className,c=e.style,u=Zn(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:eat;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function tat(e){var t,n=Zn(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var f=[];if(iMe(r,i))for(var h=$s(r),m=r.getMonth();m<=i.getMonth();m++)f.push(zk(h,m));else for(var h=$s(new Date),m=0;m<=11;m++)f.push(zk(h,m));var g=function(v){var b=Number(v.target.value),y=zk($s(e.displayMonth),b);e.onChange(y)},p=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:voe;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return s.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function nat(e){var t,n=e.displayMonth,r=Zn(),i=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var m=i.getFullYear(),g=a.getFullYear(),p=m;p<=g;p++)h.push(h3(dne(new Date),p));var v=function(y){var j=h3($s(n),Number(y.target.value));e.onChange(j)},b=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:voe;return s.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:o}),children:h.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:d(y,{locale:o})},y.getFullYear())})})}function rat(e,t){var n=x.useState(e),r=n[0],i=n[1],a=t===void 0?r:t;return[a,i]}function sat(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&tp(a,i)<0){var u=-1*(c-1);i=Io(a,u)}return o&&tp(i,o)<0&&(i=o),$s(i)}function iat(){var e=Zn(),t=sat(e),n=rat(t,e.month),r=n[0],i=n[1],a=function(o){var l;if(!e.disableNavigation){var c=$s(o);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,a]}function aat(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=$s(e),a=$s(Io(i,r)),o=tp(a,i),l=[],c=0;c<o;c++){var u=Io(i,c);l.push(u)}return n&&(l=l.reverse()),l}function oat(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=$s(e);if(!n)return Io(l,o);var c=tp(n,e);if(!(c<a))return Io(l,o)}}function lat(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=$s(e);if(!n)return Io(l,-o);var c=tp(l,n);if(!(c<=0))return Io(l,-o)}}var yoe=x.createContext(void 0);function cat(e){var t=Zn(),n=iat(),r=n[0],i=n[1],a=aat(r,t),o=oat(r,t),l=lat(r,t),c=function(f){return a.some(function(h){return pI(f,h)})},u=function(f,h){c(f)||(h&&Rx(f,h)?i(Io(f,1+t.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(yoe.Provider,{value:d,children:e.children})}function fb(){var e=x.useContext(yoe);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function I6(e){var t,n=Zn(),r=n.classNames,i=n.styles,a=n.components,o=fb().goToMonth,l=function(d){o(Io(d,e.displayIndex?-e.displayIndex:0))},c=(t=a==null?void 0:a.CaptionLabel)!==null&&t!==void 0?t:xoe,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:u}),s.jsx(tat,{onChange:l,displayMonth:e.displayMonth}),s.jsx(nat,{onChange:l,displayMonth:e.displayMonth})]})}function uat(e){return s.jsx("svg",Lt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dat(e){return s.jsx("svg",Lt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var DN=x.forwardRef(function(e,t){var n=Zn(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var o=a.join(" "),l=Lt(Lt({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Lt({},e,{ref:t,type:"button",className:o,style:l}))});function fat(e){var t,n,r=Zn(),i=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:a}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),p=[o.nav_button,o.nav_button_next].join(" "),v=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:dat,b=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:uat;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(DN,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?s.jsx(v,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(DN,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function M6(e){var t=Zn().numberOfMonths,n=fb(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return pI(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){r&&a(r)},m=function(){i&&a(i)};return s.jsx(fat,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:h,onNextClick:m})}function hat(e){var t,n=Zn(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:xoe,u;return i?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(I6,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(I6,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(M6,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(M6,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:u})}function mat(e){var t=Zn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function pat(e,t,n){for(var r=n?Af(new Date):eo(new Date,{locale:e,weekStartsOn:t}),i=[],a=0;a<7;a++){var o=Ir(r,a);i.push(o)}return i}function gat(){var e=Zn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=pat(i,a,o);return s.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},f)})]})}function xat(){var e,t=Zn(),n=t.classNames,r=t.styles,i=t.components,a=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:gat;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function vat(e){var t=Zn(),n=t.locale,r=t.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:n})})}var zM=x.createContext(void 0);function yat(e){if(!ub(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(zM.Provider,{value:t,children:e.children})}return s.jsx(bat,{initialProps:e.initialProps,children:e.children})}function bat(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,a=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var p=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!p){var v=r?poe([],r):[];if(d.selected){var b=v.findIndex(function(y){return Ds(u,y)});v.splice(b,1)}else v.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,v,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(h){return Ds(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return s.jsx(zM.Provider,{value:c,children:n})}function BM(){var e=x.useContext(zM);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function jat(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?Ds(i,e)&&Ds(r,e)?void 0:Ds(i,e)?{from:i,to:void 0}:Ds(r,e)?void 0:Sw(r,e)?{from:e,to:i}:{from:r,to:e}:i?Sw(e,i)?{from:i,to:e}:{from:e,to:i}:r?Rx(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var VM=x.createContext(void 0);function wat(e){if(!db(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(VM.Provider,{value:t,children:e.children})}return s.jsx(Nat,{initialProps:e.initialProps,children:e.children})}function Nat(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},a=i.from,o=i.to,l=t.min,c=t.max,u=function(m,g,p){var v,b;(v=t.onDayClick)===null||v===void 0||v.call(t,m,g,p);var y=jat(m,r);(b=t.onSelect)===null||b===void 0||b.call(t,y,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],Ds(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:Lk(a,l-1),before:Ir(a,l-1)}),a&&o&&d.disabled.push({after:a,before:Ir(a,l-1)}),!a&&o&&d.disabled.push({after:Lk(o,l-1),before:Ir(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:Ir(a,-c+1)}),d.disabled.push({after:Ir(a,c-1)})),a&&o){var f=za(o,a)+1,h=c-f;d.disabled.push({before:Lk(a,h)}),d.disabled.push({after:Ir(o,h)})}!a&&o&&(d.disabled.push({before:Ir(o,-c+1)}),d.disabled.push({after:Ir(o,c-1)}))}return s.jsx(VM.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function qM(){var e=x.useContext(VM);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function o0(e){return Array.isArray(e)?poe([],e):e!==void 0?[e]:[]}function Sat(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=o0(i)}),t}var Ro;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ro||(Ro={}));var Cat=Ro.Selected,Pl=Ro.Disabled,kat=Ro.Hidden,Pat=Ro.Today,wP=Ro.RangeEnd,NP=Ro.RangeMiddle,SP=Ro.RangeStart,Eat=Ro.Outside;function _at(e,t,n){var r,i=(r={},r[Cat]=o0(e.selected),r[Pl]=o0(e.disabled),r[kat]=o0(e.hidden),r[Pat]=[e.today],r[wP]=[],r[NP]=[],r[SP]=[],r[Eat]=[],r);return e.fromDate&&i[Pl].push({before:e.fromDate}),e.toDate&&i[Pl].push({after:e.toDate}),ub(e)?i[Pl]=i[Pl].concat(t.modifiers[Pl]):db(e)&&(i[Pl]=i[Pl].concat(n.modifiers[Pl]),i[SP]=n.modifiers[SP],i[NP]=n.modifiers[NP],i[wP]=n.modifiers[wP]),i}var boe=x.createContext(void 0);function Aat(e){var t=Zn(),n=BM(),r=qM(),i=_at(t,n,r),a=Sat(t.modifiers),o=Lt(Lt({},i),a);return s.jsx(boe.Provider,{value:o,children:e.children})}function joe(){var e=x.useContext(boe);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Tat(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Dat(e){return!!(e&&typeof e=="object"&&"from"in e)}function Oat(e){return!!(e&&typeof e=="object"&&"after"in e)}function Iat(e){return!!(e&&typeof e=="object"&&"before"in e)}function Mat(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Rat(e,t){var n,r=t.from,i=t.to;if(r&&i){var a=za(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=za(e,r)>=0&&za(i,e)>=0;return o}return i?Ds(i,e):r?Ds(r,e):!1}function $at(e){return fI(e)}function Fat(e){return Array.isArray(e)&&e.every(fI)}function Lat(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if($at(n))return Ds(e,n);if(Fat(n))return n.includes(e);if(Dat(n))return Rat(e,n);if(Mat(n))return n.dayOfWeek.includes(e.getDay());if(Tat(n)){var r=za(n.before,e),i=za(n.after,e),a=r>0,o=i<0,l=Sw(n.before,n.after);return l?o&&a:a||o}return Oat(n)?za(e,n.after)>0:Iat(n)?za(n.before,e)>0:typeof n=="function"?n(e):!1})}function UM(e,t,n){var r=Object.keys(t).reduce(function(a,o){var l=t[o];return Lat(e,l)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!pI(e,n)&&(i.outside=!0),i}function zat(e,t){for(var n=$s(e[0]),r=tS(e[e.length-1]),i,a,o=n;o<=r;){var l=UM(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Ir(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=Ir(o,1)}return a||i}var Bat=365;function woe(e,t){var n=t.moveBy,r=t.direction,i=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,h={day:Ir,week:t_,month:Io,year:HOe,startOfWeek:function(v){return i.ISOWeek?Af(v):eo(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return i.ISOWeek?fne(v):hI(v,{locale:f,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=KOe([u,m]):r==="after"&&d&&(m=GOe([d,m]));var g=!0;if(a){var p=UM(m,a);g=!p.disabled&&!p.hidden}return g?m:l.count>Bat?l.lastFocused:woe(m,{moveBy:n,direction:r,context:i,modifiers:a,retry:Lt(Lt({},l),{count:l.count+1})})}var Noe=x.createContext(void 0);function Vat(e){var t=fb(),n=joe(),r=x.useState(),i=r[0],a=r[1],o=x.useState(),l=o[0],c=o[1],u=zat(t.displayMonths,n),d=i??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(i),a(void 0)},h=function(v){a(v)},m=Zn(),g=function(v,b){if(i){var y=woe(i,{moveBy:v,direction:b,context:m,modifiers:n});Ds(i,y)||(t.goToDate(y,i),h(y))}},p={focusedDay:i,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(Noe.Provider,{value:p,children:e.children})}function WM(){var e=x.useContext(Noe);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function qat(e,t){var n=joe(),r=UM(e,n,t);return r}var HM=x.createContext(void 0);function Uat(e){if(!eC(e.initialProps)){var t={selected:void 0};return s.jsx(HM.Provider,{value:t,children:e.children})}return s.jsx(Wat,{initialProps:e.initialProps,children:e.children})}function Wat(e){var t=e.initialProps,n=e.children,r=function(a,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,o,l)},i={selected:t.selected,onDayClick:r};return s.jsx(HM.Provider,{value:i,children:n})}function Soe(){var e=x.useContext(HM);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Hat(e,t){var n=Zn(),r=Soe(),i=BM(),a=qM(),o=WM(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,v=o.focusYearAfter,b=o.focusStartOfWeek,y=o.focusEndOfWeek,j=function(F){var E,B,L,I;eC(n)?(E=r.onDayClick)===null||E===void 0||E.call(r,e,t,F):ub(n)?(B=i.onDayClick)===null||B===void 0||B.call(i,e,t,F):db(n)?(L=a.onDayClick)===null||L===void 0||L.call(a,e,t,F):(I=n.onDayClick)===null||I===void 0||I.call(n,e,t,F)},N=function(F){var E;h(e),(E=n.onDayFocus)===null||E===void 0||E.call(n,e,t,F)},w=function(F){var E;f(),(E=n.onDayBlur)===null||E===void 0||E.call(n,e,t,F)},S=function(F){var E;(E=n.onDayMouseEnter)===null||E===void 0||E.call(n,e,t,F)},k=function(F){var E;(E=n.onDayMouseLeave)===null||E===void 0||E.call(n,e,t,F)},C=function(F){var E;(E=n.onDayPointerEnter)===null||E===void 0||E.call(n,e,t,F)},A=function(F){var E;(E=n.onDayPointerLeave)===null||E===void 0||E.call(n,e,t,F)},D=function(F){var E;(E=n.onDayTouchCancel)===null||E===void 0||E.call(n,e,t,F)},P=function(F){var E;(E=n.onDayTouchEnd)===null||E===void 0||E.call(n,e,t,F)},_=function(F){var E;(E=n.onDayTouchMove)===null||E===void 0||E.call(n,e,t,F)},O=function(F){var E;(E=n.onDayTouchStart)===null||E===void 0||E.call(n,e,t,F)},M=function(F){var E;(E=n.onDayKeyUp)===null||E===void 0||E.call(n,e,t,F)},T=function(F){var E;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?p():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?v():g();break;case"Home":F.preventDefault(),F.stopPropagation(),b();break;case"End":F.preventDefault(),F.stopPropagation(),y();break}(E=n.onDayKeyDown)===null||E===void 0||E.call(n,e,t,F)},R={onClick:j,onFocus:N,onBlur:w,onKeyDown:T,onKeyUp:M,onMouseEnter:S,onMouseLeave:k,onPointerEnter:C,onPointerLeave:A,onTouchCancel:D,onTouchEnd:P,onTouchMove:_,onTouchStart:O};return R}function Kat(){var e=Zn(),t=Soe(),n=BM(),r=qM(),i=eC(e)?t.selected:ub(e)?n.selected:db(e)?r.selected:void 0;return i}function Gat(e){return Object.values(Ro).includes(e)}function Qat(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(Gat(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Yat(e,t){var n=Lt({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Lt(Lt({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Xat(e,t,n){var r,i,a,o=Zn(),l=WM(),c=qat(e,t),u=Hat(e,c),d=Kat(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var S;c.outside||l.focusedDay&&f&&Ds(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,f,c.outside]);var h=Qat(o,c).join(" "),m=Yat(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:vat,v=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),b={style:m,className:h,children:v,role:"gridcell"},y=l.focusTarget&&Ds(l.focusTarget,e)&&!c.outside,j=l.focusedDay&&Ds(l.focusedDay,e),N=Lt(Lt(Lt({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=j||y?0:-1,r)),u),w={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:N,divProps:b};return w}function Zat(e){var t=x.useRef(null),n=Xat(e.date,e.displayMonth,t);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(DN,Lt({name:"day",ref:t},n.buttonProps)):s.jsx("div",Lt({},n.divProps))}function Jat(e){var t=e.number,n=e.dates,r=Zn(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){i(t,n,m)};return s.jsx(DN,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:h,children:d})}function eot(e){var t,n,r=Zn(),i=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:Zat,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Jat,d;return o&&(d=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},tMe(f))})]})}function R6(e,t,n){for(var r=n!=null&&n.ISOWeek?fne(t):hI(t,n),i=n!=null&&n.ISOWeek?Af(e):eo(e,n),a=za(r,i),o=[],l=0;l<=a;l++)o.push(Ir(i,l));var c=o.reduce(function(u,d){var f=n!=null&&n.ISOWeek?hne(d):pne(d,n),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function tot(e,t){var n=R6($s(e),tS(e),t);if(t!=null&&t.useFixedWeeks){var r=rMe(e,t);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=t_(a,6-r),l=R6(t_(a,1),o,t);n.push.apply(n,l)}}return n}function not(e){var t,n,r,i=Zn(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,m=i.ISOWeek,g=tot(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:xat,v=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:eot,b=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:mat;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(y){return s.jsx(v,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(b,{displayMonth:e.displayMonth})]})}function rot(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sot=rot()?x.useLayoutEffect:x.useEffect,CP=!1,iot=0;function $6(){return"react-day-picker-".concat(++iot)}function aot(e){var t,n=e??(CP?$6():null),r=x.useState(n),i=r[0],a=r[1];return sot(function(){i===null&&a($6())},[]),x.useEffect(function(){CP===!1&&(CP=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function oot(e){var t,n,r=Zn(),i=r.dir,a=r.classNames,o=r.styles,l=r.components,c=fb().displayMonths,u=aot(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,f=[a.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;i==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(a.caption_start),h=Lt(Lt({},h),o.caption_start)),g&&(f.push(a.caption_end),h=Lt(Lt({},h),o.caption_end)),p&&(f.push(a.caption_between),h=Lt(Lt({},h),o.caption_between));var v=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:hat;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(not,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function lot(e){var t=Zn(),n=t.classNames,r=t.styles;return s.jsx("div",{className:n.months,style:r.months,children:e.children})}function cot(e){var t,n,r=e.initialProps,i=Zn(),a=WM(),o=fb(),l=x.useState(!1),c=l[0],u=l[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=Lt(Lt({},i.styles.root),i.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var v;return Lt(Lt({},g),(v={},v[p]=r[p],v))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:lot;return s.jsx("div",Lt({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(oot,{displayIndex:p,displayMonth:g},p)})})}))}function uot(e){var t=e.children,n=Iit(e,["children"]);return s.jsx(Jit,{initialProps:n,children:s.jsx(cat,{children:s.jsx(Uat,{initialProps:n,children:s.jsx(yat,{initialProps:n,children:s.jsx(wat,{initialProps:n,children:s.jsx(Aat,{children:s.jsx(Vat,{children:t})})})})})})})}function dot(e){return s.jsx(uot,Lt({},e,{children:s.jsx(cot,{initialProps:e})}))}function tC({className:e,classNames:t,showOutsideDays:n=!0,...r}){return s.jsx(dot,{showOutsideDays:n,className:he("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:he(hv({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:he(hv({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:i,...a})=>s.jsx(r1,{className:he("h-4 w-4",i),...a}),IconRight:({className:i,...a})=>s.jsx(qa,{className:he("h-4 w-4",i),...a})},...r})}tC.displayName="Calendar";function fot({taskId:e,projectId:t}){const{toast:n}=Nt(),[r,i]=x.useState(!1),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[f,h]=x.useState(null),[m,g]=x.useState(null),{data:p=[],refetch:v}=je({queryKey:[`/api/tasks/${e}/materials`],enabled:!!e}),{data:b=[]}=je({queryKey:[`/api/projects/${t}/resources`],enabled:!!t,select:w=>w.filter(S=>S.type==="material")}),{data:y=[]}=je({queryKey:[`/api/task-materials/${f}/consumptions`],enabled:!!f}),{data:j=[]}=je({queryKey:[`/api/task-materials/${m}/deliveries`],enabled:!!m});Pe({mutationFn:async w=>await fe("POST","/api/task-materials",w),onSuccess:()=>{v(),i(!1),n({title:"Material Added",description:"Material has been added to the task."})},onError:w=>{n({title:"Error",description:w.message,variant:"destructive"})}});const N=Pe({mutationFn:async w=>await fe("DELETE",`/api/task-materials/${w}`),onSuccess:()=>{v(),n({title:"Material Removed",description:"Material has been removed from the task."})},onError:w=>{n({title:"Error",description:w.message,variant:"destructive"})}});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(Kr,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Task Materials"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Track material requirements, consumption, and deliveries for this task."})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-sm font-semibold",children:["Materials (",p.length,")"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{d(null),i(!0)},className:"gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Add Material"]})]}),p.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Kr,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No materials added yet"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{d(null),i(!0)},className:"mt-4 gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Add First Material"]})]}):s.jsx("div",{className:"space-y-3",children:p.map(w=>{const S=b.find(P=>P.id===w.materialId),k=parseFloat(w.quantity||"0"),C=parseFloat(w.actualQuantity||"0"),A=k>0?C/k*100:0,D=k-C;return s.jsxs(ie,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h5",{className:"font-medium",children:(S==null?void 0:S.name)||`Material #${w.materialId}`}),s.jsx(ae,{variant:"outline",children:w.unit})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:(S==null?void 0:S.notes)||"No description"})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>N.mutate(w.id),children:s.jsx(Fn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Planned"}),s.jsxs("p",{className:"text-sm font-medium",children:[k.toFixed(2)," ",w.unit]})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Consumed"}),s.jsxs("p",{className:"text-sm font-medium",children:[C.toFixed(2)," ",w.unit]})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Remaining"}),s.jsxs("p",{className:he("text-sm font-medium",D<0&&"text-destructive"),children:[D.toFixed(2)," ",w.unit]})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Progress"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:he("h-full transition-all",A>100?"bg-destructive":A>80?"bg-amber-500":"bg-primary"),style:{width:`${Math.min(A,100)}%`}})}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[A.toFixed(0),"%"]})]})]})]}),A>100&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive mb-3",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx("span",{children:"Consumption exceeds planned quantity"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{h(w.id),o(!0)},className:"flex-1 gap-2",children:[s.jsx(ri,{className:"h-3 w-3"}),"Record Consumption"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{g(w.id),c(!0)},className:"flex-1 gap-2",children:[s.jsx(Kr,{className:"h-3 w-3"}),"Record Delivery"]})]})]},w.id)})}),r&&s.jsx(hot,{open:r,onOpenChange:i,taskId:e,material:u,materialResources:b,onSuccess:()=>{v(),i(!1)}}),a&&f&&s.jsx(mot,{open:a,onOpenChange:o,taskMaterialId:f,onSuccess:()=>{v(),we.invalidateQueries({queryKey:[`/api/task-materials/${f}/consumptions`]}),o(!1)}}),l&&m&&s.jsx(pot,{open:l,onOpenChange:c,taskMaterialId:m,onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/task-materials/${m}/deliveries`]}),c(!1)}})]})}function hot({open:e,onOpenChange:t,taskId:n,material:r,materialResources:i,onSuccess:a}){const{toast:o}=Nt(),[l,c]=x.useState((r==null?void 0:r.materialId.toString())||""),[u,d]=x.useState((r==null?void 0:r.quantity)||""),[f,h]=x.useState((r==null?void 0:r.unit)||""),m=Pe({mutationFn:async p=>await fe("POST","/api/task-materials",p),onSuccess:()=>{o({title:"Material Added",description:"Material has been added successfully."}),a()},onError:p=>{o({title:"Error",description:p.message,variant:"destructive"})}}),g=()=>{var b;if(!l){o({title:"Resource Required",description:"Please select a material resource.",variant:"destructive"});return}if(!u||parseFloat(u)<=0){o({title:"Quantity Required",description:"Please enter a valid planned quantity.",variant:"destructive"});return}if(!f){o({title:"Unit Required",description:"Please enter a unit of measure.",variant:"destructive"});return}const p=((b=i.find(y=>y.id===parseInt(l)))==null?void 0:b.name)||"Unknown Material",v={taskId:n,materialId:parseInt(l),quantity:u,unit:f,name:p};m.mutate(v)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:r?"Edit Material":"Add Material"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Material Resource"}),s.jsxs(ze,{value:l,onValueChange:c,children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select material resource"})}),s.jsx(Le,{children:i.map(p=>s.jsx(X,{value:p.id.toString(),children:p.name},p.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Planned Quantity"}),s.jsx(Ce,{type:"number",step:"0.01",min:"0",value:u,onChange:p=>d(p.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Unit"}),s.jsx(Ce,{value:f,onChange:p=>h(p.target.value),placeholder:"m, kg, ea"})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:g,disabled:m.isPending,children:m.isPending?"Adding...":"Add"})]})]})})}function mot({open:e,onOpenChange:t,taskMaterialId:n,onSuccess:r}){const{toast:i}=Nt(),{user:a}=zs(),[o,l]=x.useState(new Date),[c,u]=x.useState(""),[d,f]=x.useState(""),h=Pe({mutationFn:async g=>await fe("POST","/api/material-consumptions",g),onSuccess:()=>{i({title:"Consumption Recorded",description:"Material consumption has been recorded."}),r(),u(""),f(""),l(new Date)},onError:g=>{i({title:"Error",description:g.message,variant:"destructive"})}}),m=()=>{if(!o){i({title:"Date Required",description:"Please select a date.",variant:"destructive"});return}if(!c||parseFloat(c)<=0){i({title:"Quantity Required",description:"Please enter a valid quantity.",variant:"destructive"});return}const g={taskMaterialId:n,quantity:c,consumedAt:o,consumedBy:(a==null?void 0:a.id)||"",notes:d.trim()||void 0};h.mutate(g)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Record Consumption"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Date"}),s.jsxs(Ls,{children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",className:he("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[s.jsx(Br,{className:"mr-2 h-4 w-4"}),o?en(o,"PPP"):"Pick a date"]})}),s.jsx(ps,{className:"w-auto p-0",align:"start",children:s.jsx(tC,{mode:"single",selected:o,onSelect:l,initialFocus:!0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Quantity Consumed"}),s.jsx(Ce,{type:"number",step:"0.01",min:"0",value:c,onChange:g=>u(g.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Notes (Optional)"}),s.jsx(Ht,{value:d,onChange:g=>f(g.target.value),rows:3,placeholder:"Add any notes about this consumption..."})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:m,disabled:h.isPending,children:h.isPending?"Recording...":"Record"})]})]})})}function pot({open:e,onOpenChange:t,taskMaterialId:n,onSuccess:r}){const{toast:i}=Nt(),[a,o]=x.useState(new Date),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,h]=x.useState(""),m=Pe({mutationFn:async p=>await fe("POST","/api/material-deliveries",p),onSuccess:()=>{i({title:"Delivery Recorded",description:"Material delivery has been recorded."}),r(),c(""),d(""),h(""),o(new Date)},onError:p=>{i({title:"Error",description:p.message,variant:"destructive"})}}),g=()=>{if(!a){i({title:"Date Required",description:"Please select a date.",variant:"destructive"});return}if(!l||parseFloat(l)<=0){i({title:"Quantity Required",description:"Please enter a valid quantity.",variant:"destructive"});return}const p={taskMaterialId:n,quantity:l,deliveredAt:a,supplier:u.trim()||void 0,notes:f.trim()||void 0};m.mutate(p)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Record Delivery"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Delivery Date"}),s.jsxs(Ls,{children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",className:he("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[s.jsx(Br,{className:"mr-2 h-4 w-4"}),a?en(a,"PPP"):"Pick a date"]})}),s.jsx(ps,{className:"w-auto p-0",align:"start",children:s.jsx(tC,{mode:"single",selected:a,onSelect:o,initialFocus:!0})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Quantity Delivered"}),s.jsx(Ce,{type:"number",step:"0.01",min:"0",value:l,onChange:p=>c(p.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Supplier (Optional)"}),s.jsx(Ce,{value:u,onChange:p=>d(p.target.value),placeholder:"Supplier name"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Notes (Optional)"}),s.jsx(Ht,{value:f,onChange:p=>h(p.target.value),rows:3,placeholder:"Add any notes about this delivery..."})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:g,disabled:m.isPending,children:m.isPending?"Recording...":"Record"})]})]})})}function got({open:e,onOpenChange:t,resourceId:n,taskId:r,projectId:i,entry:a}){var v;const{toast:o}=Nt(),[l,c]=x.useState(a!=null&&a.date?new Date(a.date):new Date),[u,d]=x.useState(((v=a==null?void 0:a.hours)==null?void 0:v.toString())||""),[f,h]=x.useState((a==null?void 0:a.description)||""),m=Pe({mutationFn:async b=>await fe("POST","/api/time-entries",b),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/tasks"]}),o({title:"Time Entry Created",description:"Time entry has been recorded successfully."}),t(!1),c(new Date),d(""),h("")},onError:b=>{o({title:"Error",description:b.message,variant:"destructive"})}}),g=Pe({mutationFn:async b=>await fe("PATCH",`/api/time-entries/${a.id}`,b),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/tasks"]}),o({title:"Time Entry Updated",description:"Time entry has been updated successfully."}),t(!1)},onError:b=>{o({title:"Error",description:b.message,variant:"destructive"})}}),p=()=>{if(!l){o({title:"Date Required",description:"Please select a date for this time entry.",variant:"destructive"});return}const b=parseFloat(u);if(isNaN(b)||b<=0){o({title:"Invalid Hours",description:"Please enter a valid number of hours greater than 0.",variant:"destructive"});return}const y={resourceId:n,taskId:r,projectId:i,date:l,hours:b.toString(),description:f.trim()||void 0};a?g.mutate(y):m.mutate(y)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:a?"Edit Time Entry":"Add Time Entry"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Date"}),s.jsxs(Ls,{children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",className:he("w-full justify-start text-left font-normal",!l&&"text-muted-foreground"),children:[s.jsx(Br,{className:"mr-2 h-4 w-4"}),l?en(l,"PPP"):"Pick a date"]})}),s.jsx(ps,{className:"w-auto p-0",align:"start",children:s.jsx(tC,{mode:"single",selected:l,onSelect:c,initialFocus:!0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"hours",children:"Hours Worked"}),s.jsx(Ce,{id:"hours",type:"number",step:"0.25",min:"0",value:u,onChange:b=>d(b.target.value),placeholder:"8.0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description (Optional)"}),s.jsx(Ht,{id:"description",value:f,onChange:b=>h(b.target.value),placeholder:"Add any notes about this work...",rows:3})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:p,disabled:m.isPending||g.isPending,children:m.isPending||g.isPending?"Saving...":a?"Update":"Add"})]})]})})}function xot({assignment:e,resource:t,onRemove:n,onAddTimeEntry:r,isEditing:i}){const{data:a=[]}=je({queryKey:[`/api/assignments/${e.id}/time-entries`],enabled:!!e.id&&i}),o=a.reduce((c,u)=>{var d;return c+parseFloat(((d=u.hours)==null?void 0:d.toString())||"0")},0),l=parseFloat(e.effortHours||"0");return s.jsxs(ie,{className:"p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Bn,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:(t==null?void 0:t.name)||`Resource #${e.resourceId}`}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t==null?void 0:t.type,"  ",t==null?void 0:t.discipline]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ae,{variant:"secondary",children:[e.allocation,"%"]}),i&&s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>n(e.id),children:s.jsx(Fn,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Planned:"})," ",s.jsxs("span",{className:"font-medium",children:[l.toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Actual:"})," ",s.jsxs("span",{className:"font-medium",children:[o.toFixed(1),"h"]})]})]}),i&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>r(e.id),className:"flex-1 gap-2",children:[s.jsx(bn,{className:"h-3 w-3"}),"Add Time Entry"]}),a.length>0&&s.jsxs(ae,{variant:"outline",className:"text-xs",children:[a.length," entries"]})]})]})}const vot=[{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"piping",label:"Piping"},{value:"electrical",label:"Electrical"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hvac",label:"HVAC"},{value:"architectural",label:"Architectural"},{value:"general",label:"General"}],yot=[{value:"asap",label:"As Soon As Possible"},{value:"alap",label:"As Late As Possible"},{value:"mso",label:"Must Start On"},{value:"mfo",label:"Must Finish On"},{value:"snet",label:"Start No Earlier Than"},{value:"snlt",label:"Start No Later Than"},{value:"fnet",label:"Finish No Earlier Than"},{value:"fnlt",label:"Finish No Later Than"}],bj=[{value:"FS",label:"Finish-to-Start (FS)"},{value:"SS",label:"Start-to-Start (SS)"},{value:"FF",label:"Finish-to-Finish (FF)"},{value:"SF",label:"Start-to-Finish (SF)"}];function hb({open:e,onOpenChange:t,task:n,defaultStatus:r="not-started",defaultCustomStatusId:i=null,onClose:a,onSave:o,onCreate:l}){const{selectedProjectId:c}=jt(),{toast:u}=Nt(),[d,f]=x.useState("details"),[h,m]=x.useState(null),[g,p]=x.useState(""),[v,b]=x.useState(""),[y,j]=x.useState(0),[N,w]=x.useState(0),[S,k]=x.useState("FS"),[C,A]=x.useState("FS"),[D,P]=x.useState(null),[_,O]=x.useState(!1),[M,T]=x.useState(null),[R,F]=x.useState(!1),[E,B]=x.useState(!1),[L,I]=x.useState(!1),[q,$]=x.useState(null),[z,Y]=x.useState(!1),[ne,te]=x.useState(null),[pe,J]=x.useState(!1),[xe,ye]=x.useState(null),[re,ue]=x.useState([]),[ke,$e]=x.useState(null),[Ve,gt]=x.useState(void 0),He=()=>({name:"",description:"",status:r||"not-started",priority:"medium",startDate:"",endDate:"",progress:0,estimatedHours:"",workMode:"parallel",discipline:"",areaCode:"",weightFactor:1,constraintType:"asap",baselineStart:"",baselineFinish:"",actualStartDate:"",actualFinishDate:"",responsibleContractor:""}),[be,xt]=x.useState(He()),{data:sn=[]}=je({queryKey:[`/api/projects/${c}/tasks`],enabled:!!c&&e}),{data:K=[]}=je({queryKey:[`/api/projects/${c}/risks`],enabled:!!c&&!!n&&e}),{data:de=[]}=je({queryKey:[`/api/projects/${c}/issues`],enabled:!!c&&!!n&&e}),{data:ve=[]}=je({queryKey:[`/api/projects/${c}/resources`],enabled:!!c&&e}),{data:Oe=[]}=je({queryKey:[`/api/projects/${c}/documents`],enabled:!!c&&e}),{data:Z=[]}=je({queryKey:[`/api/projects/${c}/users`],enabled:!!c&&e}),{data:W=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/assignments`],enabled:!!(n!=null&&n.id)&&e}),{data:me=[]}=je({queryKey:[`/api/projects/${c}/dependencies`],enabled:!!c&&e}),{data:Ae=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/documents`],enabled:!!(n!=null&&n.id)&&e}),{data:Je=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/risks`],enabled:!!(n!=null&&n.id)&&e}),{data:St=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/issues`],enabled:!!(n!=null&&n.id)&&e}),{data:Jn=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/inherited/resources`],enabled:!!(n!=null&&n.id)&&e}),{data:Rn=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/inherited/documents`],enabled:!!(n!=null&&n.id)&&e}),{data:Cs=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/inherited/risks`],enabled:!!(n!=null&&n.id)&&e}),{data:Vs=[]}=je({queryKey:[`/api/tasks/${n==null?void 0:n.id}/inherited/issues`],enabled:!!(n!=null&&n.id)&&e});x.useEffect(()=>{var U;if(e)if(xt(n?{name:n.name||"",description:n.description||"",status:n.status||"not-started",priority:n.priority||"medium",startDate:n.startDate?new Date(n.startDate).toISOString().split("T")[0]:"",endDate:n.endDate?new Date(n.endDate).toISOString().split("T")[0]:"",progress:n.progress||0,estimatedHours:n.estimatedHours?String(n.estimatedHours):"",workMode:n.workMode||"parallel",discipline:n.discipline||"",areaCode:n.areaCode||"",weightFactor:n.weightFactor||1,constraintType:n.constraintType||"asap",baselineStart:n.baselineStart?new Date(n.baselineStart).toISOString().split("T")[0]:"",baselineFinish:n.baselineFinish?new Date(n.baselineFinish).toISOString().split("T")[0]:"",actualStartDate:n.actualStartDate?new Date(n.actualStartDate).toISOString().split("T")[0]:"",actualFinishDate:n.actualFinishDate?new Date(n.actualFinishDate).toISOString().split("T")[0]:"",responsibleContractor:n.responsibleContractor||""}:{...He(),status:r}),f("details"),p(""),b(""),j(0),w(0),P(null),n!=null&&n.assignedTo){const Te=(U=n.assignedToName)!=null&&U.includes("users")?[]:[n.assignedTo];ue(Te)}else ue([])},[e,n,r]);const _r=Pe({mutationFn:async U=>await(await fe("POST","/api/tasks",{...U,projectId:c})).json(),onSuccess:U=>{we.invalidateQueries({queryKey:[`/api/projects/${c}/tasks`]}),u({title:"Success",description:"Task created successfully"}),l&&l(U),h?(h.action==="switchTab"&&h.value?f(h.value):h.action==="recalculate"&&u({title:"Schedule",description:"Task created. You can now recalculate schedule."}),m(null)):l||Ar()},onError:U=>{u({title:"Error",description:U.message||"Failed to create task",variant:"destructive"})}}),_i=Pe({mutationFn:async U=>await(await fe("PATCH",`/api/tasks/${n==null?void 0:n.id}`,U)).json(),onSuccess:U=>{U?(xt(et=>({...et,endDate:U.endDate?new Date(U.endDate).toISOString().split("T")[0]:et.endDate,startDate:U.startDate?new Date(U.startDate).toISOString().split("T")[0]:et.startDate,estimatedHours:U.estimatedHours?String(U.estimatedHours):et.estimatedHours})),n&&U.estimatedHours&&String(n.estimatedHours)!==String(U.estimatedHours)?u({title:"Task Updated",description:"Estimated hours updated. End date recalculated."}):Ar()):Ar(),we.invalidateQueries({queryKey:[`/api/projects/${c}/tasks`]}),we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}`]})},onError:U=>{u({title:"Error",description:U.message||"Failed to update task",variant:"destructive"})}}),Xr=Pe({mutationFn:async U=>await fe("POST","/api/dependencies",{...U,projectId:c}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${c}/dependencies`]}),u({title:"Success",description:"Dependency added"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),Lo=Pe({mutationFn:async U=>await fe("DELETE",`/api/dependencies/${U}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${c}/dependencies`]}),u({title:"Success",description:"Dependency removed"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),Sc=Pe({mutationFn:async({id:U,type:Te,lagDays:et})=>await fe("PATCH",`/api/dependencies/${U}`,{type:Te,lagDays:et}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${c}/dependencies`]}),u({title:"Success",description:"Dependency updated"}),P(null)},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),gg=Pe({mutationFn:async U=>await fe("POST","/api/assignments",{taskId:n==null?void 0:n.id,...U}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/assignments`]}),u({title:"Success",description:"Resource assigned"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),sC=Pe({mutationFn:async U=>await fe("DELETE",`/api/assignments/${U}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/assignments`]}),u({title:"Success",description:"Resource removed"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),iC=Pe({mutationFn:async U=>await fe("POST",`/api/tasks/${n==null?void 0:n.id}/documents`,U),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/documents`]}),u({title:"Success",description:"Document linked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),xg=Pe({mutationFn:async U=>await fe("DELETE",`/api/tasks/${n==null?void 0:n.id}/documents/${U}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/documents`]}),u({title:"Success",description:"Document unlinked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),vg=Pe({mutationFn:async U=>await fe("POST",`/api/tasks/${n==null?void 0:n.id}/risks`,{riskId:U}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/risks`]}),u({title:"Success",description:"Risk linked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),yg=Pe({mutationFn:async U=>await fe("DELETE",`/api/tasks/${n==null?void 0:n.id}/risks/${U}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/risks`]}),u({title:"Success",description:"Risk unlinked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),aC=Pe({mutationFn:async U=>await fe("POST",`/api/tasks/${n==null?void 0:n.id}/issues`,{issueId:U}),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/issues`]}),u({title:"Success",description:"Issue linked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),bg=Pe({mutationFn:async U=>await fe("DELETE",`/api/tasks/${n==null?void 0:n.id}/issues/${U}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/tasks/${n==null?void 0:n.id}/issues`]}),u({title:"Success",description:"Issue unlinked"})},onError:U=>{u({title:"Error",description:U.message,variant:"destructive"})}}),Ar=()=>{xt(He()),a?a():t(!1)},jg=U=>{var nn;if(!be.name.trim()){u({title:"Validation Error",description:"Task name is required",variant:"destructive"});return}const Te={...be,projectId:c,startDate:be.startDate&&be.startDate.trim()!==""?new Date(be.startDate):null,endDate:be.endDate&&be.endDate.trim()!==""?new Date(be.endDate):null,baselineStart:be.baselineStart&&be.baselineStart.trim()!==""?new Date(be.baselineStart):null,baselineFinish:be.baselineFinish&&be.baselineFinish.trim()!==""?new Date(be.baselineFinish):null,actualStartDate:be.actualStartDate&&be.actualStartDate.trim()!==""?new Date(be.actualStartDate):null,actualFinishDate:be.actualFinishDate&&be.actualFinishDate.trim()!==""?new Date(be.actualFinishDate):null,estimatedHours:be.estimatedHours?String(be.estimatedHours):null,weightFactor:be.weightFactor!==void 0&&be.weightFactor!==null?String(be.weightFactor):null,discipline:be.discipline||null,areaCode:be.areaCode||null,responsibleContractor:be.responsibleContractor||null,customStatusId:!n&&i!==null&&i!==void 0?i:(n==null?void 0:n.customStatusId)||null,status:be.status,priority:be.priority,workMode:be.workMode,constraintType:be.constraintType,assignedTo:re.length>0?re[0]:null,assignedToName:re.length>0?re.length===1?((nn=Z.find(gn=>gn.id===re[0]))==null?void 0:nn.name)||null:`${Z.filter(gn=>re.includes(gn.id)).map(gn=>gn.name).join(", ")} (${re.length} users)`:null},et=Bje.safeParse(Te);if(!et.success){console.error("Zod Validation Errors:",et.error);const gn=et.error.issues.map(Na=>`${Na.path.join(".")}: ${Na.message}`).join(`
`);u({title:"Validation Error",description:`Please check the following fields:
`+gn,variant:"destructive"});return}n?_i.mutate(et.data):(U&&U.action&&m(U),_r.mutate(et.data))},Cc=me.filter(U=>U.successorId===(n==null?void 0:n.id)),kc=me.filter(U=>U.predecessorId===(n==null?void 0:n.id)),Zf=sn.filter(U=>U.id!==(n==null?void 0:n.id)),mb=Ae.map(U=>U.documentId),pb=Je.map(U=>U.riskId),Pc=St.map(U=>U.issueId),Ec=W.map(U=>U.resourceId),gb=U=>({"not-started":"secondary","in-progress":"default",review:"outline",completed:"default","on-hold":"destructive",identified:"secondary",analyzing:"outline",mitigating:"default",closed:"default",accepted:"secondary",open:"destructive",in_progress:"default",resolved:"default"})[U]||"secondary",Jf=U=>({low:"text-green-600",medium:"text-amber-600",high:"text-orange-600",critical:"text-red-600"})[U]||"text-muted-foreground",eh=U=>{const Te=sn.find(et=>et.id===U);return Te?`${Te.wbsCode||"#"+Te.id} - ${Te.name}`:`Task #${U}`},ld=_r.isPending||_i.isPending,ks=!!n;return x.useEffect(()=>{M&&n&&gg.mutate({resourceId:M,allocation:100},{onSuccess:()=>{T(null),u({title:"Resource Assigned",description:"The newly created resource has been assigned to this task."})}})},[M,n]),x.useEffect(()=>{q&&n&&iC.mutate({documentId:q},{onSuccess:()=>{$(null),u({title:"Document Linked",description:"The newly created document has been linked to this task."})}})},[q,n]),x.useEffect(()=>{ne&&n&&vg.mutate(ne,{onSuccess:()=>{te(null),u({title:"Risk Linked",description:"The newly created risk has been linked to this task."})}})},[ne,n]),x.useEffect(()=>{xe&&n&&aC.mutate(xe,{onSuccess:()=>{ye(null),u({title:"Issue Linked",description:"The newly created issue has been linked to this task."})}})},[xe,n]),_?s.jsx(coe,{resource:null,open:!0,onOpenChange:U=>{U||O(!1)},onSuccess:U=>{O(!1),U!=null&&U.id&&T(U.id),we.invalidateQueries({queryKey:[`/api/projects/${c}/resources`]})}}):L?s.jsx(iit,{document:null,open:!0,onOpenChange:U=>{U||I(!1)},onSuccess:U=>{I(!1),U!=null&&U.id&&$(U.id),we.invalidateQueries({queryKey:[`/api/projects/${c}/documents`]})}}):z?s.jsx(uit,{risk:null,open:!0,onOpenChange:U=>{U||Y(!1)},onSuccess:U=>{Y(!1),U!=null&&U.id&&te(U.id),we.invalidateQueries({queryKey:[`/api/projects/${c}/risks`]})}}):pe?s.jsx(pit,{issue:null,open:!0,onOpenChange:U=>{U||J(!1)},onSuccess:U=>{J(!1),U!=null&&U.id&&ye(U.id),we.invalidateQueries({queryKey:[`/api/projects/${c}/issues`]})}}):E&&n?s.jsxs(s.Fragment,{children:[s.jsx(tit,{task:n,open:E,onOpenChange:U=>{B(U),U||we.invalidateQueries({queryKey:[`/api/tasks/${n.id}`]})},onApply:U=>{we.invalidateQueries({queryKey:[`/api/tasks/${n.id}`]}),we.invalidateQueries({queryKey:[`/api/projects/${c}/tasks`]})}}),s.jsx("div",{style:{display:"none"}})]}):s.jsxs(zt,{open:e,onOpenChange:U=>{U?t(U):Ar()},children:[s.jsxs(Rt,{className:"max-w-6xl h-[90vh] flex flex-col p-0 gap-0","data-testid":"modal-task",children:[s.jsx(Bt,{className:"p-6 pb-4 shrink-0 border-b",children:s.jsxs("div",{className:"flex items-center justify-between mr-8",children:[s.jsx(Vt,{className:"flex items-center gap-2 text-xl",children:ks?s.jsxs(s.Fragment,{children:[s.jsx(ae,{variant:"outline",className:"font-mono",children:n.wbsCode||`#${n.id}`}),s.jsx("span",{children:n.name})]}):"Create New Task"}),ks&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:gb(be.status),children:be.status.replace("-"," ")}),s.jsx(ae,{variant:"outline",className:Jf(be.priority),children:be.priority})]})]})}),s.jsxs(Vr,{value:d,onValueChange:U=>{if(!ks&&U!=="details"){if(!be.name.trim()){u({title:"Task Name Required",description:"Please enter a task name before accessing other tabs.",variant:"destructive"});return}jg({action:"switchTab",value:U})}else f(U)},className:"flex-1 flex flex-col min-h-0",children:[s.jsx("div",{className:"px-6 pt-2 border-b shrink-0 bg-background",children:s.jsxs(Pr,{className:"w-full justify-start h-auto p-0 bg-transparent border-b-0 rounded-none",children:[s.jsx(tt,{value:"details",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Details"}),s.jsx(tt,{value:"schedule",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Schedule"}),s.jsx(tt,{value:"raci",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"RACI"}),s.jsxs(tt,{value:"dependencies",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:["Dependencies ",ks&&Cc.length+kc.length>0&&`(${Cc.length+kc.length})`]}),s.jsxs(tt,{value:"resources",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:["Resources ",ks&&W.length>0&&`(${W.length})`]}),s.jsx(tt,{value:"materials",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Materials"}),s.jsxs(tt,{value:"documents",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:["Documents ",ks&&Ae.length>0&&`(${Ae.length})`]}),s.jsxs(tt,{value:"risks",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:["Risks ",ks&&Je.length>0&&`(${Je.length})`]}),s.jsxs(tt,{value:"issues",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:["Issues ",ks&&St.length>0&&`(${St.length})`]}),s.jsx(tt,{value:"chat",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Chat"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsx(ht,{value:"details",className:"space-y-6 mt-0 h-full",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task-name",children:"Task Name *"}),s.jsx(Ce,{id:"task-name",placeholder:"Enter task name",value:be.name,onChange:U=>xt({...be,name:U.target.value}),"data-testid":"input-task-name",className:"text-lg font-medium"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task-description",children:"Description"}),s.jsx(Ht,{id:"task-description",placeholder:"Enter task description",rows:5,value:be.description,onChange:U=>xt({...be,description:U.target.value}),"data-testid":"textarea-task-description"})]}),n&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Tags"}),s.jsx(Ky,{entityType:"task",entityId:n.id,placeholder:"Add tags to categorize this task..."})]})]}),s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/10 space-y-4",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4"}),"EPC Details"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"discipline",children:"Discipline"}),s.jsxs(ze,{value:be.discipline,onValueChange:U=>xt({...be,discipline:U}),children:[s.jsx(Fe,{id:"discipline","data-testid":"select-discipline",children:s.jsx(Be,{placeholder:"Select discipline"})}),s.jsx(Le,{children:vot.map(U=>s.jsx(X,{value:U.value,children:U.label},U.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"area-code",children:"Area Code"}),s.jsx(Ce,{id:"area-code",placeholder:"e.g., A-100",value:be.areaCode,onChange:U=>xt({...be,areaCode:U.target.value}),"data-testid":"input-area-code"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"contractor",children:"Responsible Contractor"}),s.jsx(Ce,{id:"contractor",placeholder:"Enter contractor name",value:be.responsibleContractor,onChange:U=>xt({...be,responsibleContractor:U.target.value}),"data-testid":"input-contractor"})]}),W.length>1&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"work-mode",children:"Work Mode"}),s.jsxs(ze,{value:be.workMode,onValueChange:U=>xt({...be,workMode:U}),children:[s.jsx(Fe,{id:"work-mode","data-testid":"select-work-mode",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"parallel",children:"Parallel (Max Duration)"}),s.jsx(X,{value:"sequential",children:"Sequential (Sum Duration)"})]})]})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsx(ie,{children:s.jsxs(ce,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task-status",children:"Status"}),s.jsxs(ze,{value:be.status,onValueChange:U=>{const Te=new Date().toISOString().split("T")[0],et={status:U};U==="in-progress"&&!be.actualStartDate&&(et.actualStartDate=Te),U==="completed"&&!be.actualFinishDate&&(et.actualFinishDate=Te,et.progress=100),xt({...be,...et})},children:[s.jsx(Fe,{id:"task-status","data-testid":"select-task-status",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"not-started",children:"Not Started"}),s.jsx(X,{value:"in-progress",children:"In Progress"}),s.jsx(X,{value:"review",children:"In Review"}),s.jsx(X,{value:"completed",children:"Completed"}),s.jsx(X,{value:"on-hold",children:"On Hold"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task-assigned-users",children:"Assigned Users"}),s.jsx("div",{className:"space-y-2",children:Z.length===0?s.jsx("div",{className:"text-sm text-muted-foreground py-2",children:"No users available"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 space-y-1",children:Z.map(U=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{id:`user-${U.id}`,checked:re.includes(U.id),onCheckedChange:Te=>{ue(et=>Te?[...et,U.id]:et.filter(nn=>nn!==U.id))}}),s.jsxs(G,{htmlFor:`user-${U.id}`,className:"text-sm font-normal cursor-pointer flex-1",children:[U.name," ",U.email&&s.jsxs("span",{className:"text-muted-foreground",children:["(",U.email,")"]})]})]},U.id))}),re.length>0&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[re.length," user",re.length>1?"s":""," selected"]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task-priority",children:"Priority"}),s.jsxs(ze,{value:be.priority,onValueChange:U=>xt({...be,priority:U}),children:[s.jsx(Fe,{id:"task-priority","data-testid":"select-task-priority",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"low",children:"Low"}),s.jsx(X,{value:"medium",children:"Medium"}),s.jsx(X,{value:"high",children:"High"}),s.jsx(X,{value:"critical",children:"Critical"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"task-progress",className:"flex justify-between",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[be.progress,"%"]})]}),s.jsx(Ce,{id:"task-progress",type:"range",min:"0",max:"100",value:be.progress,onChange:U=>{const Te=parseInt(U.target.value);xt({...be,progress:Te});const et=new Date().toISOString().split("T")[0];Te>0&&Te<100&&!be.actualStartDate&&xt(nn=>({...nn,actualStartDate:et})),Te===100&&!be.actualFinishDate&&xt(nn=>({...nn,actualFinishDate:et}))},className:"cursor-pointer","data-testid":"slider-task-progress"})]})]})})})]})}),s.jsx(ht,{value:"schedule",className:"space-y-6 mt-0 h-full",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"estimated-hours",className:"text-sm font-semibold",children:"Estimated Hours"}),s.jsx(Ce,{id:"estimated-hours",type:"number",step:"0.01",min:"0",value:be.estimatedHours,onChange:U=>xt({...be,estimatedHours:U.target.value}),"data-testid":"input-estimated-hours",className:"max-w-xs"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Set estimated hours for effort-driven scheduling"})]}),n&&s.jsxs("div",{className:"space-y-3 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),"Duration Information (PMI Standard)"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Baseline Duration"}),s.jsx("p",{className:"text-sm font-medium",children:n.baselineDuration?`${n.baselineDuration} days`:"Not set"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Computed Duration"}),s.jsx("p",{className:"text-sm font-medium",children:n.computedDuration?`${n.computedDuration} days`:n.estimatedHours?"Calculating...":"Not calculated"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Actual Duration"}),s.jsx("p",{className:"text-sm font-medium",children:n.actualDuration?`${n.actualDuration} days`:n.status==="completed"&&n.actualStartDate&&n.actualFinishDate?`${Math.ceil((new Date(n.actualFinishDate).getTime()-new Date(n.actualStartDate).getTime())/(1e3*60*60*24))} days`:"N/A"})]})]})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-semibold",children:"Planned Schedule (Manual or Effort-Driven)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"start-date",className:"text-xs",children:"Start"}),s.jsx(Ce,{id:"start-date",type:"date",value:be.startDate,onChange:U=>xt({...be,startDate:U.target.value}),disabled:be.progress===100,className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"end-date",className:"text-xs",children:"End"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ce,{id:"end-date",type:"date",value:be.endDate,onChange:U=>xt({...be,endDate:U.target.value}),disabled:be.progress===100,className:"h-9"}),be.estimatedHours&&!be.endDate&&s.jsx("span",{className:"absolute right-2 top-2 text-[10px] text-muted-foreground italic",children:"Auto-calc"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"constraint-type",className:"text-sm font-semibold",children:"Constraint Type"}),s.jsxs(ze,{value:be.constraintType,onValueChange:U=>xt({...be,constraintType:U}),children:[s.jsx(Fe,{id:"constraint-type","data-testid":"select-constraint-type",className:"max-w-md",children:s.jsx(Be,{})}),s.jsx(Le,{children:yot.map(U=>s.jsx(X,{value:U.value,children:U.label},U.value))})]}),s.jsxs("div",{className:"mt-2 p-3 bg-green-100 dark:bg-green-900/30 rounded-md text-xs text-green-800 dark:text-green-200",children:[s.jsx("p",{className:"font-semibold mb-1",children:"How Constraints Work:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Constraints override planned dates"}),' when set to anything other than "As Soon As Possible"']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Start constraints"})," (MSO, SNET, SNLT) affect the planned start date"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Finish constraints"})," (MFO, FNET, FNLT) affect the planned finish date"]}),s.jsx("li",{children:"When a constraint date is set, it takes precedence over calculated dates"}),s.jsx("li",{children:'Use "Set Baseline" to commit planned dates (including constraint effects) as the baseline'})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-semibold",children:"Baseline (Tracking Target)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 max-w-md",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"baseline-start",className:"text-xs",children:"Start"}),s.jsx(Ce,{id:"baseline-start",type:"date",value:be.baselineStart,onChange:U=>xt({...be,baselineStart:U.target.value}),disabled:!!(n!=null&&n.baselineStart),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"baseline-finish",className:"text-xs",children:"Finish"}),s.jsx(Ce,{id:"baseline-finish",type:"date",value:be.baselineFinish,onChange:U=>xt({...be,baselineFinish:U.target.value}),disabled:!!(n!=null&&n.baselineFinish),className:"h-9"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'Baseline dates are the approved plan. Use "Set Baseline" button to commit planned dates.'})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-semibold",children:"Actual (Progress)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 max-w-md",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"actual-start-date",className:"text-xs",children:"Start"}),s.jsx(Ce,{id:"actual-start-date",type:"date",value:be.actualStartDate,onChange:U=>xt({...be,actualStartDate:U.target.value}),disabled:be.progress===0,className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(G,{htmlFor:"actual-finish-date",className:"text-xs",children:"Finish"}),s.jsx(Ce,{id:"actual-finish-date",type:"date",value:be.actualFinishDate,onChange:U=>xt({...be,actualFinishDate:U.target.value}),disabled:be.progress<100,className:"h-9"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Actual dates track when work really started and finished."})]})]})}),s.jsx(ht,{value:"raci",className:"space-y-4 mt-0",children:n&&c?s.jsx(Oit,{taskId:n.id,projectId:c,hasParent:!!n.parentId}):s.jsx("div",{className:"flex items-center justify-center h-40 text-muted-foreground",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"RACI Matrix"}),s.jsx("p",{className:"text-xs",children:"Please save the task first to manage RACI assignments."})]})})}),s.jsx(ht,{value:"dependencies",className:"space-y-4 mt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(wme,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Task Dependencies"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Define predecessor (tasks that must finish before this task) and successor (tasks that wait for this task) relationships"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(yu,{className:"h-4 w-4 text-blue-500"}),"Predecessors",s.jsx(ae,{variant:"secondary",className:"ml-1",children:Cc.length})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasks that must complete before this task can start"}),s.jsxs("div",{className:"space-y-3 p-3 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-xs font-medium",children:"Add Predecessor"}),s.jsxs(Ls,{children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",role:"combobox",className:"w-full justify-between","data-testid":"select-predecessor",children:[g?(()=>{const U=Zf.find(Te=>Te.id.toString()===g);return U?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-mono text-xs",children:U.wbsCode||`#${U.id}`}),s.jsx("span",{className:"ml-2",children:U.name})]}):"Select a task..."})():"Select a task...",s.jsx(ar,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ps,{className:"w-[400px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search by task name or WBS code..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No tasks found."}),s.jsx(Ms,{children:Zf.filter(U=>!Cc.some(Te=>Te.predecessorId===U.id)).filter(U=>!0).map(U=>s.jsxs(Rs,{value:`${U.wbsCode||`#${U.id}`} ${U.name}`,onSelect:()=>{p(U.id.toString())},children:[s.jsx("span",{className:"font-mono text-xs",children:U.wbsCode||`#${U.id}`}),s.jsx("span",{className:"ml-2",children:U.name})]},U.id))})]})]})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(G,{className:"text-xs",children:"Type"}),s.jsxs(ze,{value:S,onValueChange:U=>k(U),children:[s.jsx(Fe,{"data-testid":"select-predecessor-type",className:"w-full",children:s.jsx(Be,{})}),s.jsx(Le,{children:bj.map(U=>s.jsxs(X,{value:U.value,children:[s.jsx("span",{className:"font-mono",children:U.value}),s.jsxs("span",{className:"ml-2 text-muted-foreground text-xs",children:["(",U.label,")"]})]},U.value))})]})]}),s.jsxs("div",{className:"w-20",children:[s.jsx(G,{className:"text-xs",children:"Lag"}),s.jsx(Ce,{type:"number",value:y,onChange:U=>j(parseInt(U.target.value)||0),placeholder:"0","data-testid":"input-predecessor-lag"})]})]}),s.jsxs(H,{className:"w-full",size:"sm",onClick:()=>{!g||!n||(Xr.mutate({predecessorId:parseInt(g),successorId:n.id,type:S,lagDays:y}),p(""),j(0))},disabled:!g||Xr.isPending,"data-testid":"button-add-predecessor",children:[s.jsx(Et,{className:"h-4 w-4 mr-1"}),"Add Predecessor"]})]}),s.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:Cc.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-6 text-center border border-dashed rounded-lg",children:"No predecessors defined"}):Cc.map(U=>s.jsx("div",{className:"group flex items-center gap-2 p-3 bg-card border rounded-lg hover-elevate",children:D===U.id?s.jsxs("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[s.jsxs(ze,{value:U.type||void 0,onValueChange:Te=>{Sc.mutate({id:U.id,type:Te,lagDays:U.lagDays||0})},children:[s.jsx(Fe,{className:"w-20",children:s.jsx(Be,{})}),s.jsx(Le,{children:bj.map(Te=>s.jsx(X,{value:Te.value,children:Te.value},Te.value))})]}),s.jsx("span",{className:"text-sm flex-1 truncate",children:eh(U.predecessorId)}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ce,{type:"number",className:"w-16 h-8",defaultValue:U.lagDays||0,onBlur:Te=>{const et=parseInt(Te.target.value)||0;et!==U.lagDays&&Sc.mutate({id:U.id,type:U.type,lagDays:et})},onKeyDown:Te=>{if(Te.key==="Enter"){const et=parseInt(Te.target.value)||0;Sc.mutate({id:U.id,type:U.type,lagDays:et})}}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"days"})]}),s.jsx(H,{size:"icon",variant:"ghost",onClick:()=>P(null),children:s.jsx(Sr,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs shrink-0",children:U.type}),s.jsx("span",{className:"text-sm flex-1 truncate",children:eh(U.predecessorId)}),(U.lagDays||0)!==0&&s.jsxs(ae,{variant:"secondary",className:"text-xs shrink-0",children:[(U.lagDays||0)>0?"+":"",U.lagDays,"d"]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>P(U.id),"data-testid":`button-edit-predecessor-${U.id}`,children:s.jsx(lc,{className:"h-3 w-3"})}),s.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Lo.mutate(U.id),disabled:Lo.isPending,"data-testid":`button-remove-predecessor-${U.id}`,children:s.jsx(Fn,{className:"h-3 w-3"})})]})]})},U.id))})]}),s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(yf,{className:"h-4 w-4 text-green-500"}),"Successors",s.jsx(ae,{variant:"secondary",className:"ml-1",children:kc.length})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasks that wait for this task to complete"}),s.jsxs("div",{className:"space-y-3 p-3 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-xs font-medium",children:"Add Successor"}),s.jsxs(Ls,{children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",role:"combobox",className:"w-full justify-between","data-testid":"select-successor",children:[v?(()=>{const U=Zf.find(Te=>Te.id.toString()===v);return U?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-mono text-xs",children:U.wbsCode||`#${U.id}`}),s.jsx("span",{className:"ml-2",children:U.name})]}):"Select a task..."})():"Select a task...",s.jsx(ar,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ps,{className:"w-[400px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search by task name or WBS code..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No tasks found."}),s.jsx(Ms,{children:Zf.filter(U=>!kc.some(Te=>Te.successorId===U.id)).map(U=>s.jsxs(Rs,{value:`${U.wbsCode||`#${U.id}`} ${U.name}`,onSelect:()=>{b(U.id.toString())},children:[s.jsx("span",{className:"font-mono text-xs",children:U.wbsCode||`#${U.id}`}),s.jsx("span",{className:"ml-2",children:U.name})]},U.id))})]})]})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(G,{className:"text-xs",children:"Type"}),s.jsxs(ze,{value:C,onValueChange:U=>A(U),children:[s.jsx(Fe,{"data-testid":"select-successor-type",className:"w-full",children:s.jsx(Be,{})}),s.jsx(Le,{children:bj.map(U=>s.jsxs(X,{value:U.value,children:[s.jsx("span",{className:"font-mono",children:U.value}),s.jsxs("span",{className:"ml-2 text-muted-foreground text-xs",children:["(",U.label,")"]})]},U.value))})]})]}),s.jsxs("div",{className:"w-20",children:[s.jsx(G,{className:"text-xs",children:"Lag"}),s.jsx(Ce,{type:"number",value:N,onChange:U=>w(parseInt(U.target.value)||0),placeholder:"0","data-testid":"input-successor-lag"})]})]}),s.jsxs(H,{className:"w-full",size:"sm",onClick:()=>{!v||!n||(Xr.mutate({predecessorId:n.id,successorId:parseInt(v),type:C,lagDays:N}),b(""),w(0))},disabled:!v||Xr.isPending,"data-testid":"button-add-successor",children:[s.jsx(Et,{className:"h-4 w-4 mr-1"}),"Add Successor"]})]}),s.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:kc.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-6 text-center border border-dashed rounded-lg",children:"No successors defined"}):kc.map(U=>s.jsx("div",{className:"group flex items-center gap-2 p-3 bg-card border rounded-lg hover-elevate",children:D===U.id?s.jsxs("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[s.jsxs(ze,{value:U.type||void 0,onValueChange:Te=>{Sc.mutate({id:U.id,type:Te,lagDays:U.lagDays||0})},children:[s.jsx(Fe,{className:"w-20",children:s.jsx(Be,{})}),s.jsx(Le,{children:bj.map(Te=>s.jsx(X,{value:Te.value,children:Te.value},Te.value))})]}),s.jsx("span",{className:"text-sm flex-1 truncate",children:eh(U.successorId)}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ce,{type:"number",className:"w-16 h-8",defaultValue:U.lagDays||0,onBlur:Te=>{const et=parseInt(Te.target.value)||0;et!==U.lagDays&&Sc.mutate({id:U.id,type:U.type,lagDays:et})},onKeyDown:Te=>{if(Te.key==="Enter"){const et=parseInt(Te.target.value)||0;Sc.mutate({id:U.id,type:U.type,lagDays:et})}}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"days"})]}),s.jsx(H,{size:"icon",variant:"ghost",onClick:()=>P(null),children:s.jsx(Sr,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs shrink-0",children:U.type}),s.jsx("span",{className:"text-sm flex-1 truncate",children:eh(U.successorId)}),(U.lagDays||0)!==0&&s.jsxs(ae,{variant:"secondary",className:"text-xs shrink-0",children:[(U.lagDays||0)>0?"+":"",U.lagDays,"d"]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>P(U.id),"data-testid":`button-edit-successor-${U.id}`,children:s.jsx(lc,{className:"h-3 w-3"})}),s.jsx(H,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Lo.mutate(U.id),disabled:Lo.isPending,"data-testid":`button-remove-successor-${U.id}`,children:s.jsx(Fn,{className:"h-3 w-3"})})]})]})},U.id))})]})]})]})}),s.jsx(ht,{value:"resources",className:"space-y-4 mt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(Bn,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Resource Assignments"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign resources to this task. Inherited resources from parent tasks are shown below."})]})]}),W.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Directly Assigned Resources"}),s.jsx("div",{className:"space-y-2",children:W.map(U=>{const Te=ve.find(et=>et.id===U.resourceId);return s.jsx(xot,{assignment:U,resource:Te,onRemove:et=>sC.mutate(et),onAddTimeEntry:et=>{$e(et),gt(void 0)},isEditing:ks},U.id)})})]}),Jn.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"Inherited from Parent Tasks"]}),Jn.map(U=>{var Te,et,nn,gn;return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-dashed rounded bg-muted/20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:s.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:((Te=U.resource)==null?void 0:Te.name)||`Resource #${U.resourceId}`}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(et=U.resource)==null?void 0:et.type,"  ",(nn=U.resource)==null?void 0:nn.discipline]})]})]}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:["From: ",((gn=U.sourceTask)==null?void 0:gn.wbsCode)||`#${U.sourceTaskId}`]})]},`inherited-${U.assignmentId}`)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Available Resources"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New Resource"]})]}),ve.filter(U=>!Ec.includes(U.id)).length===0?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"All resources are already assigned"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"w-full gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New Resource"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:ve.filter(U=>!Ec.includes(U.id)).map(U=>s.jsx(ie,{className:"hover-elevate cursor-pointer",onClick:()=>gg.mutate({resourceId:U.id,allocation:100}),children:s.jsxs(ce,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:U.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.type,"  ",U.discipline]})]})]}),s.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]})},U.id))})]})]})}),s.jsx(ht,{value:"materials",className:"space-y-4 mt-0",children:ks&&n?s.jsx(fot,{taskId:n.id,projectId:c||0}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:"Please save the task first to manage materials."})})}),s.jsx(ht,{value:"documents",className:"space-y-4 mt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(Sn,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Linked Documents"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Attach documents to this task. Inherited documents from parent tasks are shown below."})]})]}),Ae.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Directly Attached Documents"}),Ae.map(U=>{const Te=Oe.find(et=>et.id===U.documentId);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sn,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:(Te==null?void 0:Te.title)||`Document #${U.documentId}`}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Te==null?void 0:Te.documentNumber,"  ",Te==null?void 0:Te.documentType]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>xg.mutate(U.documentId),disabled:xg.isPending,children:s.jsx(Fn,{className:"h-4 w-4"})})]},U.id)})]}),Rn.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"Inherited from Parent Tasks"]}),Rn.map(U=>{var Te,et,nn,gn;return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-dashed rounded bg-muted/20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sn,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:((Te=U.document)==null?void 0:Te.title)||`Document #${U.documentId}`}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(et=U.document)==null?void 0:et.documentNumber,"  ",(nn=U.document)==null?void 0:nn.documentType]})]})]}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:["From: ",((gn=U.sourceTask)==null?void 0:gn.wbsCode)||`#${U.sourceTaskId}`]})]},`inherited-doc-${U.taskDocumentId}`)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Available Documents"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>I(!0),className:"gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New"]})]}),Oe.filter(U=>!mb.includes(U.id)).length===0?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No documents available to link"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>I(!0),className:"w-full gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New Document"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[200px] overflow-y-auto",children:Oe.filter(U=>!mb.includes(U.id)).map(U=>s.jsx(ie,{className:"hover-elevate cursor-pointer",onClick:()=>iC.mutate({documentId:U.id}),children:s.jsxs(ce,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:U.title}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.documentNumber,"  Rev ",U.revision]})]})]}),s.jsx(Hc,{className:"h-4 w-4 text-muted-foreground"})]})},U.id))})]})]})}),s.jsx(ht,{value:"risks",className:"space-y-4 mt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Linked Risks"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Associate risks with this task. Inherited risks from parent tasks are shown below."})]})]}),Je.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Directly Associated Risks"}),Je.map(U=>{const Te=K.find(et=>et.id===U.riskId);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:Te==null?void 0:Te.code}),s.jsx("p",{className:"text-sm font-medium",children:Te==null?void 0:Te.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Impact: ",Te==null?void 0:Te.impact,"  Status: ",Te==null?void 0:Te.status]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>yg.mutate(U.riskId),disabled:yg.isPending,children:s.jsx(Fn,{className:"h-4 w-4"})})]},U.id)})]}),Cs.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"Inherited from Parent Tasks"]}),Cs.map(U=>{var Te,et,nn,gn,Na;return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-dashed rounded bg-muted/20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-400"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:(Te=U.risk)==null?void 0:Te.code}),s.jsx("p",{className:"text-sm font-medium",children:(et=U.risk)==null?void 0:et.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Impact: ",(nn=U.risk)==null?void 0:nn.impact,"  Status: ",(gn=U.risk)==null?void 0:gn.status]})]})]}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:["From: ",((Na=U.sourceTask)==null?void 0:Na.wbsCode)||`#${U.sourceTaskId}`]})]},`inherited-risk-${U.taskRiskId}`)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Available Risks"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Y(!0),className:"gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New"]})]}),K.filter(U=>!pb.includes(U.id)).length===0?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No risks available to link"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Y(!0),className:"w-full gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New Risk"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[500px] overflow-y-auto",children:K.filter(U=>!pb.includes(U.id)).map(U=>s.jsx(ie,{className:"hover-elevate cursor-pointer",onClick:()=>vg.mutate(U.id),children:s.jsxs(ce,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-amber-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:U.code}),s.jsx("p",{className:"text-sm font-medium",children:U.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Impact: ",U.impact]})]})]}),s.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]})},U.id))})]})]})}),s.jsx(ht,{value:"issues",className:"space-y-4 mt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx(bt,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Linked Issues"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Associate issues with this task. Inherited issues from parent tasks are shown below."})]})]}),St.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Directly Associated Issues"}),St.map(U=>{const Te=de.find(et=>et.id===U.issueId);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bt,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:Te==null?void 0:Te.code}),s.jsx("p",{className:"text-sm font-medium",children:Te==null?void 0:Te.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Priority: ",Te==null?void 0:Te.priority,"  Status: ",Te==null?void 0:Te.status]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>bg.mutate(U.issueId),disabled:bg.isPending,children:s.jsx(Fn,{className:"h-4 w-4"})})]},U.id)})]}),Vs.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4"}),"Inherited from Parent Tasks"]}),Vs.map(U=>{var Te,et,nn,gn,Na;return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-dashed rounded bg-muted/20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bt,{className:"h-5 w-5 text-red-400"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:(Te=U.issue)==null?void 0:Te.code}),s.jsx("p",{className:"text-sm font-medium",children:(et=U.issue)==null?void 0:et.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Priority: ",(nn=U.issue)==null?void 0:nn.priority,"  Status: ",(gn=U.issue)==null?void 0:gn.status]})]})]}),s.jsxs(ae,{variant:"outline",className:"text-xs",children:["From: ",((Na=U.sourceTask)==null?void 0:Na.wbsCode)||`#${U.sourceTaskId}`]})]},`inherited-issue-${U.taskIssueId}`)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Available Issues"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>J(!0),className:"gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New"]})]}),de.filter(U=>!Pc.includes(U.id)).length===0?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No issues available to link"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>J(!0),className:"w-full gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Create New Issue"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[200px] overflow-y-auto",children:de.filter(U=>!Pc.includes(U.id)).map(U=>s.jsx(ie,{className:"hover-elevate cursor-pointer",onClick:()=>aC.mutate(U.id),children:s.jsxs(ce,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bt,{className:"h-4 w-4 text-red-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:U.code}),s.jsx("p",{className:"text-sm font-medium",children:U.title})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Priority: ",U.priority]})]})]}),s.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]})},U.id))})]})]})}),s.jsx(ht,{value:"chat",className:"space-y-4 mt-0 h-full",children:n?s.jsx(bot,{taskId:n.id}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Please save the task first to enable chat."})})})]})]}),s.jsxs(on,{className:"gap-2 shrink-0 border-t p-4",children:[s.jsx(H,{variant:"outline",onClick:Ar,disabled:ld,"data-testid":"button-cancel",children:"Cancel"}),s.jsx(H,{variant:"outline",onClick:async()=>{if(!(!ks||!n))try{const U=be.constraintType!=="asap"&&n.constraintDate,Te={baselineStart:be.startDate,baselineFinish:be.endDate};n.computedDuration&&(Te.baselineDuration=n.computedDuration);const nn=await(await fe("PATCH",`/api/tasks/${n.id}`,Te)).json();xt(gn=>({...gn,baselineStart:nn.baselineStart?new Date(nn.baselineStart).toISOString().split("T")[0]:gn.baselineStart,baselineFinish:nn.baselineFinish?new Date(nn.baselineFinish).toISOString().split("T")[0]:gn.baselineFinish})),we.invalidateQueries({queryKey:[`/api/tasks/${n.id}`]}),u({title:"Baseline Set",description:U?"Baseline dates set from planned dates (constraint may override).":"Baseline dates set from planned dates."})}catch(U){console.error("Set baseline error:",U),u({title:"Error",description:(U==null?void 0:U.message)||"Failed to set baseline.",variant:"destructive"})}},disabled:ld||!ks||!be.startDate||!be.endDate||be.progress===100,"data-testid":"button-set-baseline",title:ks?!be.startDate||!be.endDate?"Set planned dates first":be.progress===100?"Task completed - baseline locked":"":"Create task first",children:"Set Baseline"}),s.jsxs(H,{variant:"outline",onClick:async()=>{var U;if(!ks||!n){jg({action:"recalculate"});return}try{const Te=await fe("PATCH",`/api/tasks/${n.id}`,{...be,estimatedHours:be.estimatedHours?String(be.estimatedHours):null,weightFactor:be.weightFactor!==void 0&&be.weightFactor!==null?String(be.weightFactor):null}),et=Te.headers.get("content-type");if(!et||!et.includes("application/json")){const gn=await Te.text();throw console.error("Non-JSON response received:",gn.substring(0,200)),new Error(`Server returned ${Te.status}: Expected JSON but got ${et}`)}const nn=await Te.json();nn&&xt(gn=>({...gn,endDate:nn.endDate?new Date(nn.endDate).toISOString().split("T")[0]:gn.endDate,startDate:nn.startDate?new Date(nn.startDate).toISOString().split("T")[0]:gn.startDate,estimatedHours:nn.estimatedHours?String(nn.estimatedHours):gn.estimatedHours})),u({title:"Schedule Recalculated",description:"Task updated and schedule recalculated based on new values."}),we.invalidateQueries({queryKey:[`/api/projects/${c}/tasks`]}),we.invalidateQueries({queryKey:[`/api/tasks/${n.id}`]})}catch(Te){const et=(U=Te==null?void 0:Te.message)==null?void 0:U.match(/^\d+:\s*(.+)$/),nn=(et==null?void 0:et[1])||(Te==null?void 0:Te.message)||"Failed to recalculate schedule.";console.error("Recalculate schedule error:",Te),u({title:"Error",description:nn,variant:"destructive"})}},disabled:ld||be.progress===100,"data-testid":"button-recalculate-schedule",title:be.progress===100?"Task completed - calculations disabled":"",children:[s.jsx(vf,{className:"h-4 w-4 mr-2"}),"Recalculate Schedule"]}),s.jsxs(H,{onClick:()=>jg(),disabled:ld,"data-testid":"button-save-task",children:[ld&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),ks?"Update Task":"Create Task"]})]})]}),ke&&n&&W.find(U=>U.id===ke)&&s.jsx(got,{open:!!ke,onOpenChange:U=>{U||($e(null),gt(void 0))},resourceId:W.find(U=>U.id===ke).resourceId,taskId:n.id,projectId:n.projectId,entry:Ve})]})}function bot({taskId:e}){const{user:t}=zs(),{toast:n}=Nt(),{data:r,isLoading:i}=Ait(e),a=moe();Pi();const o=async()=>{if(!t){n({title:"Error",description:"Please log in to start a conversation",variant:"destructive"});return}try{await a.mutateAsync({type:"task",taskId:e,participantIds:[t.id]}),n({title:"Success",description:"Conversation started! You can now send messages."})}catch(l){console.error("Failed to create task conversation:",l),n({title:"Error",description:(l==null?void 0:l.message)||"Failed to start conversation. Please try again.",variant:"destructive"})}};return i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):r?s.jsx("div",{className:"h-[500px] border rounded-lg overflow-hidden",children:s.jsx(foe,{conversation:r})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsx(fa,{className:"h-12 w-12 text-muted-foreground"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium",children:"No conversation yet"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Start a conversation about this task"})]}),s.jsxs(H,{onClick:o,disabled:a.isPending,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),a.isPending?"Creating...":"Start Conversation"]})]})}var Coe="AlertDialog",[jot]=Er(Coe,[I7]),Nc=I7(),koe=e=>{const{__scopeAlertDialog:t,...n}=e,r=Nc(t);return s.jsx(C1,{...r,...n,modal:!0})};koe.displayName=Coe;var wot="AlertDialogTrigger",Not=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Nc(n);return s.jsx(vD,{...i,...r,ref:t})});Not.displayName=wot;var Sot="AlertDialogPortal",Poe=e=>{const{__scopeAlertDialog:t,...n}=e,r=Nc(t);return s.jsx(k1,{...r,...n})};Poe.displayName=Sot;var Cot="AlertDialogOverlay",Eoe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Nc(n);return s.jsx(qp,{...i,...r,ref:t})});Eoe.displayName=Cot;var fm="AlertDialogContent",[kot,Pot]=jot(fm),Eot=YH("AlertDialogContent"),_oe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=Nc(n),o=x.useRef(null),l=kt(t,o),c=x.useRef(null);return s.jsx(lve,{contentName:fm,titleName:Aoe,docsSlug:"alert-dialog",children:s.jsx(kot,{scope:n,cancelRef:c,children:s.jsxs(Up,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:Re(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(Eot,{children:r}),s.jsx(Aot,{contentRef:o})]})})})});_oe.displayName=fm;var Aoe="AlertDialogTitle",Toe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Nc(n);return s.jsx(Iy,{...i,...r,ref:t})});Toe.displayName=Aoe;var Doe="AlertDialogDescription",Ooe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Nc(n);return s.jsx(My,{...i,...r,ref:t})});Ooe.displayName=Doe;var _ot="AlertDialogAction",Ioe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Nc(n);return s.jsx(P1,{...i,...r,ref:t})});Ioe.displayName=_ot;var Moe="AlertDialogCancel",Roe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=Pot(Moe,n),a=Nc(n),o=kt(t,i);return s.jsx(P1,{...a,...r,ref:o})});Roe.displayName=Moe;var Aot=({contentRef:e})=>{const t=`\`${fm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fm}\` by passing a \`${Doe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Tot=koe,Dot=Poe,$oe=Eoe,Foe=_oe,Loe=Ioe,zoe=Roe,Boe=Toe,Voe=Ooe;const Bs=Tot,Oot=Dot,qoe=x.forwardRef(({className:e,...t},n)=>s.jsx($oe,{className:he("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));qoe.displayName=$oe.displayName;const gs=x.forwardRef(({className:e,...t},n)=>s.jsxs(Oot,{children:[s.jsx(qoe,{}),s.jsx(Foe,{ref:n,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));gs.displayName=Foe.displayName;const xs=({className:e,...t})=>s.jsx("div",{className:he("flex flex-col space-y-2 text-center sm:text-left",e),...t});xs.displayName="AlertDialogHeader";const vs=({className:e,...t})=>s.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});vs.displayName="AlertDialogFooter";const ys=x.forwardRef(({className:e,...t},n)=>s.jsx(Boe,{ref:n,className:he("text-lg font-semibold",e),...t}));ys.displayName=Boe.displayName;const bs=x.forwardRef(({className:e,...t},n)=>s.jsx(Voe,{ref:n,className:he("text-sm text-muted-foreground",e),...t}));bs.displayName=Voe.displayName;const js=x.forwardRef(({className:e,...t},n)=>s.jsx(Loe,{ref:n,className:he(hv(),e),...t}));js.displayName=Loe.displayName;const ws=x.forwardRef(({className:e,...t},n)=>s.jsx(zoe,{ref:n,className:he(hv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ws.displayName=zoe.displayName;const F6=[{id:"not-started",title:"Not Started"},{id:"in-progress",title:"In Progress"},{id:"review",title:"In Review"},{id:"completed",title:"Completed"}],oi={day:{daysPerUnit:1,unitLabel:"Day",minUnitWidth:40},week:{daysPerUnit:7,unitLabel:"Week",minUnitWidth:100},month:{daysPerUnit:30,unitLabel:"Month",minUnitWidth:60},quarter:{daysPerUnit:90,unitLabel:"Quarter",minUnitWidth:80}},Iot=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Mot(){const{selectedProjectId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState([]),[i,a]=x.useState(null),[o,l]=x.useState([]),[c,u]=x.useState(!1);x.useEffect(()=>{if(new URLSearchParams(window.location.search).get("action")==="new"){setTimeout(()=>u(!0),100);const oe=window.location.pathname;window.history.replaceState({},"",oe)}},[]);const[d,f]=x.useState(),[h,m]=x.useState("list"),[g,p]=x.useState("not-started"),[v,b]=x.useState(null),[y,j]=x.useState("month"),[N,w]=x.useState(new Date),[S,k]=x.useState(""),[C,A]=x.useState(!1),[D,P]=x.useState([]),[_,O]=x.useState([]),[M,T]=x.useState([]),[R,F]=x.useState(""),[E,B]=x.useState(""),[L,I]=x.useState(""),[q,$]=x.useState(""),[z,Y]=x.useState(""),[ne,te]=x.useState(""),[pe,J]=x.useState(!1),[xe,ye]=x.useState(!1),[re,ue]=x.useState([]),[ke,$e]=x.useState([]),[Ve,gt]=x.useState([]),[He,be]=x.useState([]),xt=x.useRef(null),[sn,K]=x.useState(!1),[de,ve]=x.useState({x:0,scrollLeft:0}),[Oe,Z]=x.useState([]),[W,me]=x.useState(null),[Ae,Je]=x.useState(null),[St,Jn]=x.useState(!1),[Rn,Cs]=x.useState(!0),[Vs,_r]=x.useState(!0),[_i,Xr]=x.useState(!0),{data:Lo=[],isLoading:Sc,error:gg,refetch:sC}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e,retry:1}),{data:iC=[]}=je({queryKey:[`/api/projects/${e}/dependencies`],enabled:!!e&&h==="gantt"}),{data:xg=[]}=je({queryKey:[`/api/projects/${e}/resources`],enabled:!!e}),{data:vg=[]}=je({queryKey:[`/api/projects/${e}/risks`],enabled:!!e}),{data:yg=[]}=je({queryKey:[`/api/projects/${e}/issues`],enabled:!!e}),{data:aC=[]}=je({queryKey:[`/api/projects/${e}/documents`],enabled:!!e}),{data:bg=[]}=je({queryKey:[`/api/projects/${e}/users`],enabled:!!e}),{data:Ar}=je({queryKey:[`/api/projects/${e}/task-relationships`],enabled:!!e}),jg=(Ar==null?void 0:Ar.taskRisks)||[],Cc=(Ar==null?void 0:Ar.taskIssues)||[],kc=(Ar==null?void 0:Ar.taskDocuments)||[],Zf=(Ar==null?void 0:Ar.resourceAssignments)||[],mb=(Ar==null?void 0:Ar.conversations)||[],pb=Pe({mutationFn:async V=>{await fe("DELETE",`/api/tasks/${V}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),t({title:"Success",description:"Task deleted successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to delete task",variant:"destructive"})}}),Pc=Pe({mutationFn:async({taskId:V,...oe})=>{await fe("PATCH",`/api/tasks/${V}`,oe)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]})},onError:V=>{t({title:"Error",description:V.message||"Failed to update task",variant:"destructive"})}}),Ec=Pe({mutationFn:async({taskIds:V,updates:oe})=>{await fe("POST","/api/bulk/tasks/update",{taskIds:V,updates:oe})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),t({title:"Success",description:"Tasks updated successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to update tasks",variant:"destructive"})}}),gb=Pe({mutationFn:async V=>{await fe("POST","/api/bulk/tasks/delete",{taskIds:V})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),J(!1),t({title:"Success",description:"Tasks deleted successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to delete tasks",variant:"destructive"})}}),Jf=Pe({mutationFn:async({taskIds:V,action:oe})=>{oe==="clear"?await fe("POST","/api/bulk/dependencies/clear",{taskIds:V}):oe==="chain-fs"?await fe("POST","/api/bulk/dependencies/chain",{taskIds:V,type:"FS"}):oe==="set-ss"?await fe("POST","/api/bulk/dependencies/set-parallel",{taskIds:V,type:"SS"}):oe==="set-ff"&&await fe("POST","/api/bulk/dependencies/set-parallel",{taskIds:V,type:"FF"})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/dependencies`]}),we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),t({title:"Success",description:"Dependencies updated successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to update dependencies",variant:"destructive"})}}),eh=Pe({mutationFn:async({taskIds:V,resourceIds:oe})=>{await fe("POST","/api/bulk/resource-assignments",{taskIds:V,resourceIds:oe})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),ue([]),t({title:"Success",description:"Resources assigned successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to assign resources",variant:"destructive"})}}),ld=Pe({mutationFn:async({taskIds:V,userIds:oe})=>{await fe("POST","/api/bulk/tasks/assign-users",{taskIds:V,userIds:oe})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),be([]),t({title:"Success",description:"Users assigned successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to assign users",variant:"destructive"})}}),ks=Pe({mutationFn:async({taskIds:V,riskIds:oe})=>{await fe("POST","/api/bulk/task-risks",{taskIds:V,riskIds:oe})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),$e([]),t({title:"Success",description:"Risks linked successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to link risks",variant:"destructive"})}}),U=Pe({mutationFn:async({taskIds:V,issueIds:oe})=>{await fe("POST","/api/bulk/task-issues",{taskIds:V,issueIds:oe})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),gt([]),t({title:"Success",description:"Issues linked successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to link issues",variant:"destructive"})}}),Te=Pe({mutationFn:async V=>(await fe("POST","/api/bulk/tasks/recalculate",{taskIds:V})).json(),onSuccess:V=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),t({title:"Success",description:`Schedule recalculated for ${V.count} tasks`})},onError:V=>{t({title:"Error",description:V.message||"Failed to recalculate schedule",variant:"destructive"})}}),et=Pe({mutationFn:async()=>{await fe("POST",`/api/projects/${e}/tasks/recalculate-wbs`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),t({title:"Success",description:"WBS codes recalculated successfully"})},onError:V=>{t({title:"Error",description:V.message||"Failed to recalculate WBS",variant:"destructive"})}}),nn=Pe({mutationFn:async V=>(await fe("POST","/api/bulk/tasks/baseline",{taskIds:V})).json(),onSuccess:V=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),r([]),t({title:"Success",description:`Baseline set for ${V.count} tasks`})},onError:V=>{t({title:"Error",description:V.message||"Failed to set baseline",variant:"destructive"})}}),gn=x.useMemo(()=>{const V=new Set;return Lo.forEach(oe=>{oe.discipline&&V.add(oe.discipline)}),Array.from(V).sort()},[Lo]),Na=x.useMemo(()=>{let V=0;return D.length>0&&V++,_.length>0&&V++,M.length>0&&V++,(R||E)&&V++,(L||q)&&V++,(z||ne)&&V++,V},[D,_,M,R,E,L,q,z,ne]),zn=x.useMemo(()=>{let V=Lo;if(S.trim()){const oe=S.toLowerCase();V=V.filter(Ie=>{var st,Ye;return Ie.name.toLowerCase().includes(oe)||((st=Ie.wbsCode)==null?void 0:st.toLowerCase().includes(oe))||((Ye=Ie.description)==null?void 0:Ye.toLowerCase().includes(oe))})}if(D.length>0&&(V=V.filter(oe=>D.includes(oe.status))),_.length>0&&(V=V.filter(oe=>oe.priority&&_.includes(oe.priority))),M.length>0&&(V=V.filter(oe=>oe.discipline&&M.includes(oe.discipline))),R){const oe=new Date(R);V=V.filter(Ie=>Ie.startDate&&new Date(Ie.startDate)>=oe)}if(E){const oe=new Date(E);V=V.filter(Ie=>Ie.endDate&&new Date(Ie.endDate)<=oe)}if(L){const oe=new Date(L);V=V.filter(Ie=>Ie.baselineStart&&new Date(Ie.baselineStart)>=oe)}if(q){const oe=new Date(q);V=V.filter(Ie=>Ie.baselineFinish&&new Date(Ie.baselineFinish)<=oe)}if(z){const oe=new Date(z);V=V.filter(Ie=>Ie.actualStartDate&&new Date(Ie.actualStartDate)>=oe)}if(ne){const oe=new Date(ne);V=V.filter(Ie=>Ie.actualFinishDate&&new Date(Ie.actualFinishDate)<=oe)}return V},[Lo,S,D,_,M,R,E,L,q,z,ne]),zle=()=>{P([]),O([]),T([]),F(""),B(""),I(""),$(""),Y(""),te("")},tR=V=>{P(oe=>oe.includes(V)?oe.filter(Ie=>Ie!==V):[...oe,V])},Ble=V=>{O(oe=>oe.includes(V)?oe.filter(Ie=>Ie!==V):[...oe,V])},Vle=V=>{T(oe=>oe.includes(V)?oe.filter(Ie=>Ie!==V):[...oe,V])},cd=x.useMemo(()=>{const V=[],oe=Ie=>{const st=zn.filter(Ye=>Ye.parentId===Ie);st.sort((Ye,Gt)=>(Ye.wbsCode||"").localeCompare(Gt.wbsCode||"")),st.forEach(Ye=>{V.push(Ye.id),o.includes(Ye.id)&&oe(Ye.id)})};return oe(null),V},[zn,o]),qle=(V,oe,Ie)=>{if(Ie&&i!==null&&i!==V){const st=cd.indexOf(i),Ye=cd.indexOf(V);if(st!==-1&&Ye!==-1){const Gt=Math.min(st,Ye),xn=Math.max(st,Ye),Zr=cd.slice(Gt,xn+1);r(Sa=>{const _c=new Set(Sa);return Zr.forEach(zo=>_c.add(zo)),Array.from(_c)}),a(V);return}}r(st=>oe?[...st,V]:st.filter(Ye=>Ye!==V)),a(V)},nR=()=>{n.length===cd.length?r([]):r([...cd])},Ule=V=>{l(oe=>oe.includes(V)?oe.filter(Ie=>Ie!==V):[...oe,V])},wg=V=>{f(V),u(!0)},oC=(V="not-started")=>{f(void 0),p(V),u(!0)},rR=V=>{switch(V){case"completed":return"default";case"in-progress":return"secondary";case"review":return"outline";default:return"outline"}},sR=V=>{switch(V){case"critical":return"destructive";case"high":return"secondary";default:return"outline"}},iR=V=>{switch(V){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"review":return"bg-purple-500";case"on-hold":return"bg-amber-500";default:return"bg-gray-400"}},lC=V=>V?V.split(" ").map(oe=>oe[0]).join("").toUpperCase().slice(0,2):"?",Wle=V=>Zf.filter(oe=>oe.taskId===V).length,Hle=V=>jg.filter(oe=>oe.taskId===V).length,Kle=V=>Cc.filter(oe=>oe.taskId===V).length,Gle=V=>kc.filter(oe=>oe.taskId===V).length,Qle=V=>mb.some(oe=>oe.taskId===V),Yle=V=>{if(V.computedDuration)return V.computedDuration;if(V.startDate&&V.endDate){const oe=new Date(V.startDate),Ie=new Date(V.endDate);return Math.ceil((Ie.getTime()-oe.getTime())/(1e3*60*60*24))}return null},Xle=V=>V.endDate?new Date(V.endDate)<new Date&&V.status!=="completed":!1,aR=zn.filter(V=>!V.parentId),oR=V=>zn.filter(oe=>oe.parentId===V),lR=(V,oe=0)=>{const Ie=oR(V.id),st=o.includes(V.id),Ye=Ie.length>0,Gt=Wle(V.id),xn=Hle(V.id),Zr=Kle(V.id),Sa=Gle(V.id),_c=Qle(V.id),zo=Yle(V),th=V.startDate?new Date(V.startDate):null,Ca=V.endDate?new Date(V.endDate):null;return(()=>{const Wn=V.parentId,Ti=zn.filter(kg=>kg.parentId===Wn);return Ti.sort((kg,jce)=>(kg.wbsCode||"").localeCompare(jce.wbsCode||"")),Ti.findIndex(kg=>kg.id===V.id)<Ti.length-1})(),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:he("relative z-10",oe===0&&"ml-0",oe===1&&"ml-6 sm:ml-8",oe===2&&"ml-12 sm:ml-16",oe>=3&&"ml-18 sm:ml-24"),children:s.jsxs(LM,{id:V.id.toString(),selected:n.includes(V.id),onSelect:(Wn,Ti)=>qle(V.id,Wn,Ti),expanded:st,onToggleExpand:Ye?()=>Ule(V.id):void 0,expandable:Ye,draggable:n.includes(V.id),onDragStart:Wn=>nce(Wn,V.id),onDragOver:Wn=>rce(Wn,V.id),onDragLeave:sce,onDrop:Wn=>ice(Wn,V.id),className:he(Ae===V.id&&"ring-2 ring-primary ring-offset-2",n.includes(V.id)&&"bg-accent/50"),"data-testid":`row-task-${V.id}`,children:[s.jsxs("div",{className:"sm:hidden space-y-2 cursor-pointer",onClick:()=>wg(V),children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx("div",{className:"font-semibold text-sm leading-tight break-words",children:V.name}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:V.wbsCode})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx(ae,{variant:rR(V.status),className:"text-xs h-5 px-2 shrink-0","data-testid":`badge-status-${V.id}`,children:V.status.replace("-"," ")}),s.jsx(ae,{variant:sR(V.priority),className:"text-xs h-5 px-2 shrink-0","data-testid":`badge-priority-${V.id}`,children:V.priority})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[Gt>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Gt} resource(s)`,children:[s.jsx(Cn,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:Gt})]}),xn>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${xn} risk(s)`,children:[s.jsx(ft,{className:"h-3.5 w-3.5 text-amber-600"}),s.jsx("span",{className:"text-xs text-amber-600 font-medium",children:xn})]}),Zr>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Zr} issue(s)`,children:[s.jsx(bt,{className:"h-3.5 w-3.5 text-red-600"}),s.jsx("span",{className:"text-xs text-red-600 font-medium",children:Zr})]}),Sa>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Sa} document(s)`,children:[s.jsx(Sn,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:Sa})]}),_c&&s.jsx("div",{className:"flex items-center gap-0.5",title:"Has chat messages",children:s.jsx(fa,{className:"h-3.5 w-3.5 text-blue-600"})})]}),s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx("div",{className:"flex gap-0.5",children:[0,25,50,75,100].map(Wn=>s.jsx("div",{className:he("w-1.5 h-5 rounded-sm transition-colors",V.progress>=Wn?"bg-primary":"bg-accent/20")},Wn))}),s.jsxs("span",{className:"text-xs font-medium",children:[V.progress,"%"]})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 text-xs text-muted-foreground",children:[V.baselineStart&&V.baselineFinish?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Baseline"}),s.jsxs("span",{children:[new Date(V.baselineStart).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",new Date(V.baselineFinish).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[Math.ceil((new Date(V.baselineFinish).getTime()-new Date(V.baselineStart).getTime())/(1e3*60*60*24))," days"]})]}):null,V.actualStartDate&&V.actualFinishDate?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Actual"}),s.jsxs("span",{children:[new Date(V.actualStartDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",new Date(V.actualFinishDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[Math.ceil((new Date(V.actualFinishDate).getTime()-new Date(V.actualStartDate).getTime())/(1e3*60*60*24))," days"]})]}):null,!(V.baselineStart&&V.baselineFinish)&&!(V.actualStartDate&&V.actualFinishDate)&&th&&Ca?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Planned"}),s.jsxs("span",{children:[th.toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",Ca.toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),zo&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[zo," days"]})]})]}):null]}),s.jsx("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:V.assignedTo?s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(yi,{className:"h-4 w-4 shrink-0",children:s.jsx(bi,{className:"text-[9px]",children:lC(V.assignedTo)})}),s.jsx("span",{className:"text-xs text-muted-foreground truncate",children:V.assignedToName||"Assigned"})]}):s.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Unassigned"})})]}),s.jsxs("div",{className:"hidden sm:flex items-center justify-between gap-4 flex-1 cursor-pointer min-w-0",onClick:()=>wg(V),children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium truncate",children:V.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:V.wbsCode})]}),s.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[s.jsx(ae,{variant:rR(V.status),className:"h-5 px-2 shrink-0","data-testid":`badge-status-${V.id}`,children:V.status.replace("-"," ")}),s.jsx(ae,{variant:sR(V.priority),className:"h-5 px-2 shrink-0","data-testid":`badge-priority-${V.id}`,children:V.priority}),s.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[Gt>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Gt} resource(s)`,children:[s.jsx(Cn,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:Gt})]}),xn>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${xn} risk(s)`,children:[s.jsx(ft,{className:"h-3.5 w-3.5 text-amber-600"}),s.jsx("span",{className:"text-xs text-amber-600 font-medium",children:xn})]}),Zr>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Zr} issue(s)`,children:[s.jsx(bt,{className:"h-3.5 w-3.5 text-red-600"}),s.jsx("span",{className:"text-xs text-red-600 font-medium",children:Zr})]}),Sa>0&&s.jsxs("div",{className:"flex items-center gap-0.5",title:`${Sa} document(s)`,children:[s.jsx(Sn,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:Sa})]}),_c&&s.jsx("div",{className:"flex items-center gap-0.5",title:"Has chat messages",children:s.jsx(fa,{className:"h-3.5 w-3.5 text-blue-600"})})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("div",{className:"flex gap-0.5 shrink-0",children:[0,25,50,75,100].map(Wn=>s.jsx("div",{className:he("w-1 h-5 rounded-sm transition-colors",V.progress>=Wn?"bg-primary":"bg-accent/20")},Wn))}),s.jsxs("span",{className:"text-sm font-medium w-10 text-right shrink-0",children:[V.progress,"%"]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground min-w-[200px] flex flex-col items-end shrink-0 gap-0.5",children:[V.baselineStart&&V.baselineFinish?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Baseline"}),s.jsxs("span",{children:[new Date(V.baselineStart).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",new Date(V.baselineFinish).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[Math.ceil((new Date(V.baselineFinish).getTime()-new Date(V.baselineStart).getTime())/(1e3*60*60*24))," days"]})]}):null,V.actualStartDate&&V.actualFinishDate?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Actual"}),s.jsxs("span",{children:[new Date(V.actualStartDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",new Date(V.actualFinishDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[Math.ceil((new Date(V.actualFinishDate).getTime()-new Date(V.actualStartDate).getTime())/(1e3*60*60*24))," days"]})]}):null,!(V.baselineStart&&V.baselineFinish)&&!(V.actualStartDate&&V.actualFinishDate)&&th&&Ca?s.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:"font-medium text-[10px] w-12 shrink-0",children:"Planned"}),s.jsxs("span",{children:[th.toLocaleDateString("en-US",{month:"short",day:"numeric"})," -",Ca.toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),zo&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"-"}),s.jsxs("span",{className:"text-[10px]",children:[zo," days"]})]})]}):null]}),s.jsx("div",{className:"flex items-center shrink-0",children:V.assignedTo?s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"h-6 w-6 shrink-0",children:s.jsx(bi,{className:"text-xs",children:lC(V.assignedTo)})}),s.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[80px] ml-1",children:V.assignedToName||"Assigned"})]}):s.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Unassigned"})})]})]})]})}),st&&Ie.length>0&&s.jsx("div",{className:"relative",children:Ie.map((Wn,Ti)=>s.jsx("div",{className:"relative",children:lR(Wn,oe+1)},Wn.id))})]},V.id)},Zle=(V,oe)=>{b(oe),V.dataTransfer.effectAllowed="move"},Jle=V=>{V.preventDefault(),V.dataTransfer.dropEffect="move"},ece=(V,oe)=>{if(V.preventDefault(),v!==null){const Ie=zn.find(st=>st.id===v);Ie&&Ie.status!==oe&&Pc.mutate({taskId:v,status:oe})}b(null)},tce=()=>b(null),nce=(V,oe)=>{n.includes(oe)?Z(n):(r([oe]),Z([oe])),V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",oe.toString()),V.stopPropagation()},rce=(V,oe)=>{V.preventDefault(),V.stopPropagation();const Ie=(Ye,Gt)=>{const xn=zn.find(Zr=>Zr.id===Ye);return!xn||!xn.parentId?!1:xn.parentId===Gt?!0:Ie(xn.parentId,Gt)};Oe.every(Ye=>Ye!==oe&&!Ie(oe,Ye))?(Je(oe),V.dataTransfer.dropEffect="move"):(Je(null),V.dataTransfer.dropEffect="none")},sce=()=>{Je(null)},ice=async(V,oe)=>{if(V.preventDefault(),V.stopPropagation(),!(Oe.length===0||Ae!==oe)){try{const Ie=Oe.map(st=>Pc.mutateAsync({taskId:st,parentId:oe}));await Promise.all(Ie),await et.mutateAsync(),t({title:"Success",description:`${Oe.length} task(s) moved successfully`}),r([])}catch{t({title:"Error",description:"Failed to move tasks",variant:"destructive"})}Z([]),Je(null),me(null)}},ace=async V=>{try{const oe=n.map(Ie=>Pc.mutateAsync({taskId:Ie,parentId:V}));await Promise.all(oe),await et.mutateAsync(),t({title:"Success",description:`${n.length} task(s) moved successfully`}),r([])}catch{t({title:"Error",description:"Failed to move tasks",variant:"destructive"})}},cR=()=>n.some(V=>{const oe=zn.find(Ie=>Ie.id===V);return oe&&oe.parentId!==null}),uR=()=>n.some(V=>{const oe=zn.find(Ye=>Ye.id===V);return!oe||!oe.parentId?!1:zn.filter(Ye=>Ye.parentId===oe.parentId).sort((Ye,Gt)=>(Ye.wbsCode||"").localeCompare(Gt.wbsCode||"")).findIndex(Ye=>Ye.id===V)>0}),oce=async()=>{if(!(n.length===0||!cR()))try{const oe=(await Promise.all(n.map(async Ie=>{const st=zn.find(Gt=>Gt.id===Ie);if(!st||!st.parentId)return null;const Ye=zn.find(Gt=>Gt.id===st.parentId);return{taskId:Ie,parentId:(Ye==null?void 0:Ye.parentId)||null}}))).filter(Ie=>Ie!==null);await Promise.all(oe.map(Ie=>Pc.mutateAsync({taskId:Ie.taskId,parentId:Ie.parentId}))),await et.mutateAsync(),t({title:"Success",description:"Tasks moved up level successfully"}),r([])}catch{t({title:"Error",description:"Failed to move tasks",variant:"destructive"})}},lce=async()=>{if(!(n.length===0||!uR()))try{const oe=(await Promise.all(n.map(async Ie=>{const st=zn.find(Zr=>Zr.id===Ie);if(!st||!st.parentId)return null;const Ye=zn.filter(Zr=>Zr.parentId===st.parentId).sort((Zr,Sa)=>(Zr.wbsCode||"").localeCompare(Sa.wbsCode||"")),Gt=Ye.findIndex(Zr=>Zr.id===Ie);if(Gt<=0)return null;const xn=Ye[Gt-1];return{taskId:Ie,parentId:xn.id}}))).filter(Ie=>Ie!==null);await Promise.all(oe.map(Ie=>Pc.mutateAsync({taskId:Ie.taskId,parentId:Ie.parentId}))),await et.mutateAsync(),t({title:"Success",description:"Tasks moved down level successfully"}),r([])}catch{t({title:"Error",description:"Failed to move tasks",variant:"destructive"})}},xb={"not-started":[],"in-progress":[],review:[],completed:[],"on-hold":[]};zn.forEach(V=>{xb[V.status]&&xb[V.status].push(V)});const{minDate:cC,maxDate:sdt,totalDays:vb,units:Ai}=x.useMemo(()=>{if(zn.length===0){const Ye=new Date;return{minDate:Ye,maxDate:new Date(Ye.getTime()+180*24*60*60*1e3),totalDays:180,units:6}}let V=new Date,oe=new Date;zn.forEach(Ye=>{if(Ye.startDate){const Gt=new Date(Ye.startDate);(!V||Gt<V)&&(V=Gt)}if(Ye.endDate){const Gt=new Date(Ye.endDate);(!oe||Gt>oe)&&(oe=Gt)}}),V.setDate(V.getDate()-7),oe.setDate(oe.getDate()+30);const Ie=Math.ceil((oe.getTime()-V.getTime())/(1e3*60*60*24)),{daysPerUnit:st}=oi[y];return{minDate:V,maxDate:oe,totalDays:Ie,units:Math.ceil(Ie/st)}},[zn,y]),uC=Ai*oi[y].minUnitWidth,cce=Math.max(1e3,300+uC),uce=V=>{if(!V.baselineStart||!V.baselineFinish)return null;const oe=new Date(V.baselineStart),Ie=new Date(V.baselineFinish),st=Math.floor((oe.getTime()-cC.getTime())/(1e3*60*60*24)),Ye=Math.max(1,Math.ceil((Ie.getTime()-oe.getTime())/(1e3*60*60*24)));return{left:st/vb*100,width:Ye/vb*100}},dce=V=>{if(!V.actualStartDate||!V.actualFinishDate)return null;const oe=new Date(V.actualStartDate),Ie=new Date(V.actualFinishDate),st=Math.floor((oe.getTime()-cC.getTime())/(1e3*60*60*24)),Ye=Math.max(1,Math.ceil((Ie.getTime()-oe.getTime())/(1e3*60*60*24)));return{left:st/vb*100,width:Ye/vb*100}},Ng=()=>{const V=[],{daysPerUnit:oe,unitLabel:Ie}=oi[y];for(let st=0;st<Ai;st++){const Ye=new Date(cC.getTime()+st*oe*24*60*60*1e3);if(y==="day")V.push({top:Ye.toLocaleDateString("en-US",{weekday:"short"}),bottom:Ye.toLocaleDateString("en-US",{day:"numeric"})});else if(y==="week"){const Gt=new Date(Ye),xn=new Date(Ye.getTime()+6*24*60*60*1e3);V.push({top:`W${st+1}`,bottom:`${Gt.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${xn.toLocaleDateString("en-US",{day:"numeric"})}`})}else y==="month"?V.push({top:Ye.toLocaleDateString("en-US",{month:"short"}),bottom:Ye.toLocaleDateString("en-US",{year:"numeric"})}):V.push(`Q${Math.floor(Ye.getMonth()/3)+1} ${Ye.getFullYear()}`)}return V},fce=()=>{y==="quarter"?j("month"):y==="month"?j("week"):y==="week"&&j("day")},hce=()=>{y==="day"?j("week"):y==="week"?j("month"):y==="month"&&j("quarter")},dR=(V,oe=0)=>{const Ie=oR(V.id),st=uce(V),Ye=dce(V),Gt=st!==null,xn=Ye!==null;new Date().setHours(0,0,0,0);const Sa=V.priority==="critical"?"border-l-4 border-l-red-500":V.priority==="high"?"border-l-4 border-l-orange-500":"",_c=[s.jsxs("div",{className:`grid grid-cols-[300px_1fr] items-center border-b border-border ${Sa}`,style:{minHeight:"80px"},children:[s.jsxs("div",{className:"flex items-center gap-2 py-4 pr-2 border-r border-border bg-card sticky left-0 z-30 h-full",style:{paddingLeft:`${oe*1.5+.5}rem`},children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs shrink-0",children:V.wbsCode||`#${V.id}`}),s.jsx("span",{className:"text-sm font-medium truncate",children:V.name})]}),s.jsxs("div",{className:"relative h-full bg-white dark:bg-gray-900 border-r border-border overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{minWidth:`${Ai*oi[y].minUnitWidth}px`,height:"100%",backgroundImage:`repeating-linear-gradient(
                to right,
                transparent 0,
                transparent calc(${oi[y].minUnitWidth}px - 1px),
                hsl(var(--border)) calc(${oi[y].minUnitWidth}px - 1px),
                hsl(var(--border)) ${oi[y].minUnitWidth}px
              )`,backgroundSize:`${oi[y].minUnitWidth}px 100%`,backgroundPosition:"0 0",backgroundRepeat:"repeat"}}),s.jsxs("div",{className:"relative",style:{minWidth:`${Ai*oi[y].minUnitWidth}px`,height:"100%",position:"relative",overflow:"hidden"},children:[Gt?(()=>{const Ca=st.width/100*uC>150,Wn=new Date(V.baselineStart).toLocaleDateString("en-US",{month:"short",day:"numeric"}),Ti=new Date(V.baselineFinish).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsxs(s.Fragment,{children:[!Ca&&Rn&&s.jsx("div",{className:"absolute text-[10px] text-muted-foreground font-medium whitespace-nowrap z-10",style:{left:`${st.left}%`,top:xn?"calc(50% - 20px)":"calc(50% - 12px)",transform:"translateX(-100%)",paddingRight:"4px"},children:Wn}),s.jsxs("div",{className:`absolute h-6 rounded-md ${iR(V.status)} flex items-center px-2 text-white text-xs font-semibold shadow-md hover:shadow-lg cursor-pointer transition-all overflow-hidden z-10`,style:{left:`${st.left}%`,width:`${st.width}%`,minWidth:"40px",top:xn?"calc(50% - 20px)":"calc(50% - 12px)",maxWidth:"100%"},onClick:()=>wg(V),"data-testid":`gantt-bar-baseline-${V.id}`,title:`Baseline: ${Wn} - ${Ti}`,children:[Ca&&s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[Rn&&s.jsx("span",{className:"truncate text-[10px]",children:Wn}),_i&&s.jsxs("span",{className:"truncate font-bold",children:[V.progress||0,"%"]}),Vs&&s.jsx("span",{className:"truncate text-[10px]",children:Ti})]}),s.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-md pointer-events-none",style:{width:`${V.progress||0}%`}})]}),!Ca&&Vs&&s.jsx("div",{className:"absolute text-[10px] text-muted-foreground font-medium whitespace-nowrap z-10",style:{left:`${st.left+st.width}%`,top:xn?"calc(50% - 20px)":"calc(50% - 12px)",paddingLeft:"4px"},children:Ti})]})})():null,xn?(()=>{const Ca=Ye.width/100*uC>150,Wn=new Date(V.actualStartDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),Ti=new Date(V.actualFinishDate).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsxs(s.Fragment,{children:[!Ca&&Rn&&s.jsx("div",{className:"absolute text-[10px] text-muted-foreground font-medium whitespace-nowrap z-20",style:{left:`${Ye.left}%`,top:Gt?"calc(50% + 16px)":"calc(50% - 2px)",transform:"translateX(-100%)",paddingRight:"4px"},children:Wn}),s.jsx("div",{className:"absolute h-4 bg-orange-500 border-2 border-orange-600 rounded-sm overflow-hidden z-20 shadow-sm flex items-center px-1",style:{left:`${Ye.left}%`,width:`${Ye.width}%`,top:Gt?"calc(50% + 16px)":"calc(50% - 2px)",minWidth:"24px",maxWidth:"100%"},title:`Actual: ${Wn} - ${Ti}`,children:Ca&&s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-white font-semibold w-full justify-between",children:[Rn&&s.jsx("span",{className:"truncate",children:Wn}),Vs&&s.jsx("span",{className:"truncate ml-auto",children:Ti})]})}),!Ca&&Vs&&s.jsx("div",{className:"absolute text-[10px] text-muted-foreground font-medium whitespace-nowrap z-20",style:{left:`${Ye.left+Ye.width}%`,top:Gt?"calc(50% + 16px)":"calc(50% - 2px)",paddingLeft:"4px"},children:Ti})]})})():null,!Gt&&!xn&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-muted-foreground z-10",children:"No dates set"})]})]})]},V.id)];return Ie.forEach(zo=>_c.push(...dR(zo,oe+1))),_c},{year:Sg,month:Cg,daysInMonth:fR,startDay:hR,today:mce,monthName:pce}=x.useMemo(()=>{const V=N.getFullYear(),oe=N.getMonth(),Ie=new Date(V,oe,1),st=new Date(V,oe+1,0),Ye=new Date;return{year:V,month:oe,daysInMonth:st.getDate(),startDay:Ie.getDay(),today:Ye.getFullYear()===V&&Ye.getMonth()===oe?Ye.getDate():-1,monthName:Ie.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},[N]),gce=x.useMemo(()=>{const V=new Map;return zn.forEach(oe=>{if(oe.startDate){const Ie=new Date(oe.startDate);if(Ie.getFullYear()===Sg&&Ie.getMonth()===Cg){const st=Ie.getDate();V.has(st)||V.set(st,[]),V.get(st).push({...oe,_isStart:!0})}}if(oe.endDate){const Ie=new Date(oe.endDate);if(Ie.getFullYear()===Sg&&Ie.getMonth()===Cg){const st=Ie.getDate();V.has(st)||V.set(st,[]),V.get(st).find(Gt=>Gt.id===oe.id)||V.get(st).push({...oe,_isEnd:!0})}}}),V},[zn,Sg,Cg]),xce=Math.ceil((fR+hR)/7),vce=()=>w(new Date(Sg,Cg-1,1)),yce=()=>w(new Date(Sg,Cg+1,1)),bce=()=>w(new Date);return e?Sc?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold","data-testid":"page-title-wbs",children:"Work Breakdown Structure"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage tasks and deliverables"})]}),s.jsxs(H,{onClick:()=>oC(),"data-testid":"button-create-task",className:"w-full sm:w-auto",size:"sm",children:[s.jsx(Et,{className:"h-4 w-4 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Create Task"}),s.jsx("span",{className:"sm:hidden",children:"Create"})]})]}),gg&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Failed to load tasks. ",gg.message]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>sC(),"data-testid":"button-retry",children:"Retry"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1 w-full sm:max-w-md",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{type:"search",placeholder:"Search tasks...",className:"pl-9 text-sm",value:S,onChange:V=>k(V.target.value),"data-testid":"input-search-tasks"})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Vr,{value:h,onValueChange:V=>m(V),children:s.jsxs(Pr,{className:"h-9",children:[s.jsx(tt,{value:"list",className:"px-2 sm:px-3","data-testid":"tab-view-list",children:s.jsx(nD,{className:"h-4 w-4"})}),s.jsx(tt,{value:"kanban",className:"px-2 sm:px-3","data-testid":"tab-view-kanban",children:s.jsx(Ame,{className:"h-4 w-4"})}),s.jsx(tt,{value:"gantt",className:"px-2 sm:px-3","data-testid":"tab-view-gantt",children:s.jsx(Ume,{className:"h-4 w-4"})}),s.jsx(tt,{value:"calendar",className:"px-2 sm:px-3","data-testid":"tab-view-calendar",children:s.jsx(Br,{className:"h-4 w-4"})})]})}),h==="gantt"&&s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(H,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:fce,disabled:y==="day","data-testid":"button-zoom-in",children:s.jsx(RK,{className:"h-4 w-4"})}),s.jsx(ae,{variant:"secondary",className:"px-2 text-xs hidden sm:inline-flex",children:oi[y].unitLabel}),s.jsx(H,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:hce,disabled:y==="quarter","data-testid":"button-zoom-out",children:s.jsx($K,{className:"h-4 w-4"})})]}),h==="calendar"&&s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",className:"h-9 text-xs sm:text-sm",onClick:bce,"data-testid":"button-today",children:"Today"}),s.jsx(H,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:vce,"data-testid":"button-prev-month",children:s.jsx(r1,{className:"h-4 w-4"})}),s.jsx("div",{className:"px-2 sm:px-4 font-semibold text-xs sm:text-sm min-w-[120px] sm:min-w-[180px] text-center",children:pce}),s.jsx(H,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:yce,"data-testid":"button-next-month",children:s.jsx(qa,{className:"h-4 w-4"})})]}),s.jsxs(Ls,{open:C,onOpenChange:A,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"icon",className:"h-9 w-9 relative","data-testid":"button-filter",children:[s.jsx(kK,{className:"h-4 w-4"}),Na>0&&s.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-primary text-[10px] font-medium text-primary-foreground flex items-center justify-center",children:Na})]})}),h==="gantt"&&s.jsxs(Ls,{open:St,onOpenChange:Jn,children:[s.jsx(Si,{asChild:!0,children:s.jsx(H,{variant:"outline",size:"icon",className:"h-9 w-9","data-testid":"button-gantt-settings",children:s.jsx(c1,{className:"h-4 w-4"})})}),s.jsx(ps,{className:"w-64",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold",children:"Gantt Bar Display"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(G,{htmlFor:"show-start-date",className:"text-sm cursor-pointer",children:"Show Start Date"}),s.jsx(Wt,{id:"show-start-date",checked:Rn,onCheckedChange:V=>Cs(V===!0)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(G,{htmlFor:"show-end-date",className:"text-sm cursor-pointer",children:"Show End Date"}),s.jsx(Wt,{id:"show-end-date",checked:Vs,onCheckedChange:V=>_r(V===!0)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(G,{htmlFor:"show-progress",className:"text-sm cursor-pointer",children:"Show Progress %"}),s.jsx(Wt,{id:"show-progress",checked:_i,onCheckedChange:V=>Xr(V===!0)})]})]})]})})]}),s.jsx(ps,{className:"w-[calc(100vw-2rem)] sm:w-80",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold",children:"Filters"}),Na>0&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:zle,"data-testid":"button-clear-filters",children:[s.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Clear All"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Status"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[F6.map(V=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{id:`status-${V.id}`,checked:D.includes(V.id),onCheckedChange:()=>tR(V.id),"data-testid":`filter-status-${V.id}`}),s.jsx(G,{htmlFor:`status-${V.id}`,className:"text-sm font-normal cursor-pointer",children:V.title})]},V.id)),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{id:"status-on-hold",checked:D.includes("on-hold"),onCheckedChange:()=>tR("on-hold"),"data-testid":"filter-status-on-hold"}),s.jsx(G,{htmlFor:"status-on-hold",className:"text-sm font-normal cursor-pointer",children:"On Hold"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Priority"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["critical","high","medium","low"].map(V=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{id:`priority-${V}`,checked:_.includes(V),onCheckedChange:()=>Ble(V),"data-testid":`filter-priority-${V}`}),s.jsx(G,{htmlFor:`priority-${V}`,className:"text-sm font-normal cursor-pointer capitalize",children:V})]},V))})]}),gn.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Discipline"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:gn.map(V=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{id:`discipline-${V}`,checked:M.includes(V),onCheckedChange:()=>Vle(V),"data-testid":`filter-discipline-${V}`}),s.jsx(G,{htmlFor:`discipline-${V}`,className:"text-sm font-normal cursor-pointer truncate",children:V})]},V))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Planned Date Range"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Start After"}),s.jsx(Ce,{type:"date",value:R,onChange:V=>F(V.target.value),className:"h-8 text-sm","data-testid":"filter-date-start"})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"End Before"}),s.jsx(Ce,{type:"date",value:E,onChange:V=>B(V.target.value),className:"h-8 text-sm","data-testid":"filter-date-end"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Baseline Date Range"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Start After"}),s.jsx(Ce,{type:"date",value:L,onChange:V=>I(V.target.value),className:"h-8 text-sm","data-testid":"filter-baseline-date-start"})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"End Before"}),s.jsx(Ce,{type:"date",value:q,onChange:V=>$(V.target.value),className:"h-8 text-sm","data-testid":"filter-baseline-date-end"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Actual Date Range"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"Start After"}),s.jsx(Ce,{type:"date",value:z,onChange:V=>Y(V.target.value),className:"h-8 text-sm","data-testid":"filter-actual-date-start"})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-xs text-muted-foreground",children:"End Before"}),s.jsx(Ce,{type:"date",value:ne,onChange:V=>te(V.target.value),className:"h-8 text-sm","data-testid":"filter-actual-date-end"})]})]})]}),s.jsxs("div",{className:"pt-2 border-t text-xs text-muted-foreground",children:["Showing ",zn.length," of ",Lo.length," tasks"]})]})})]})]})]}),s.jsxs("div",{className:he("bg-accent/5 border border-accent/20 rounded-lg p-3 sm:p-4 space-y-3",n.length===0&&"opacity-60"),children:[s.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{checked:n.length===cd.length,onCheckedChange:nR,"data-testid":"checkbox-select-all"}),s.jsxs("span",{className:"text-sm font-medium",children:[n.length," selected"]})]}),s.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r([]),"data-testid":"button-clear-selection",children:s.jsx(Fn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wt,{checked:n.length===cd.length,onCheckedChange:nR,"data-testid":"checkbox-select-all"}),s.jsx("span",{className:"text-sm font-medium","data-testid":"text-selection-count",children:n.length>0?`${n.length} tasks selected`:"Select tasks"})]}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>r([]),"data-testid":"button-clear-selection",children:[s.jsx(Fn,{className:"h-4 w-4 mr-1"}),"Clear Selection"]})]}),s.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0",children:s.jsxs("div",{className:"flex gap-2 sm:flex-wrap min-w-max sm:min-w-0",children:[s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length<2,className:"shrink-0 justify-start","data-testid":"dropdown-dependencies",children:[s.jsx(Hc,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Dependencies"}),s.jsx("span",{className:"xs:hidden",children:"Deps"}),s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{children:[s.jsx(hi,{children:"Link Selected Tasks"}),s.jsx(fr,{}),s.jsx(ct,{onClick:()=>Jf.mutate({taskIds:n,action:"chain-fs"}),"data-testid":"menu-chain-fs",children:"Chain FS (Waterfall)"}),s.jsx(ct,{onClick:()=>Jf.mutate({taskIds:n,action:"set-ss"}),"data-testid":"menu-set-ss",children:"Set SS (Start Together)"}),s.jsx(ct,{onClick:()=>Jf.mutate({taskIds:n,action:"set-ff"}),"data-testid":"menu-set-ff",children:"Set FF (Finish Together)"}),s.jsx(fr,{}),s.jsx(ct,{onClick:()=>Jf.mutate({taskIds:n,action:"clear"}),className:"text-destructive","data-testid":"menu-clear-deps",children:"Clear Dependencies"})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-status",children:[s.jsx(pr,{className:"h-4 w-4 mr-1"}),"Status",s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{children:[s.jsx(hi,{children:"Set Status"}),s.jsx(fr,{}),s.jsx(ct,{onClick:()=>Ec.mutate({taskIds:n,updates:{status:"not-started"}}),"data-testid":"menu-status-not-started",children:"Not Started"}),s.jsx(ct,{onClick:()=>Ec.mutate({taskIds:n,updates:{status:"in-progress"}}),"data-testid":"menu-status-in-progress",children:"In Progress"}),s.jsx(ct,{onClick:()=>Ec.mutate({taskIds:n,updates:{status:"on-hold"}}),"data-testid":"menu-status-on-hold",children:"On Hold"}),s.jsx(ct,{onClick:()=>Ec.mutate({taskIds:n,updates:{status:"completed"}}),"data-testid":"menu-status-completed",children:"Completed"})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-progress",children:[s.jsx(DK,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Progress"}),s.jsx("span",{className:"xs:hidden",children:"%"}),s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{children:[s.jsx(hi,{children:"Set Progress"}),s.jsx(fr,{}),[0,25,50,75,100].map(V=>s.jsxs(ct,{onClick:()=>Ec.mutate({taskIds:n,updates:{progress:V}}),"data-testid":`menu-progress-${V}`,children:[V,"%"]},V))]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-resources",children:[s.jsx(Cn,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Resources"}),s.jsx("span",{className:"xs:hidden",children:"Res"}),s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{className:"max-h-64 overflow-y-auto",children:[s.jsx(hi,{children:"Assign Resources"}),s.jsx(fr,{}),xg.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No resources available"}):s.jsxs(s.Fragment,{children:[xg.map(V=>s.jsx(Mh,{checked:re.includes(V.id),onCheckedChange:oe=>{ue(Ie=>oe?[...Ie,V.id]:Ie.filter(st=>st!==V.id))},"data-testid":`menu-resource-${V.id}`,children:V.name},V.id)),s.jsx(fr,{}),s.jsxs(ct,{disabled:re.length===0,onClick:()=>eh.mutate({taskIds:n,resourceIds:re}),className:"font-medium","data-testid":"menu-apply-resources",children:["Apply (",re.length," selected)"]})]})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-users",children:[s.jsx(Bn,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Assign Users"}),s.jsx("span",{className:"xs:hidden",children:"Users"}),s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{className:"max-h-64 overflow-y-auto",children:[s.jsx(hi,{children:"Assign Users"}),s.jsx(fr,{}),bg.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No users available"}):s.jsxs(s.Fragment,{children:[bg.map(V=>s.jsxs(Mh,{checked:He.includes(V.id),onCheckedChange:oe=>{be(Ie=>oe?[...Ie,V.id]:Ie.filter(st=>st!==V.id))},"data-testid":`menu-user-${V.id}`,children:[V.name," ",V.email&&s.jsxs("span",{className:"text-muted-foreground",children:["(",V.email,")"]})]},V.id)),s.jsx(fr,{}),s.jsxs(ct,{disabled:He.length===0,onClick:()=>ld.mutate({taskIds:n,userIds:He}),className:"font-medium","data-testid":"menu-apply-users",children:["Apply (",He.length," selected)"]})]})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-risks",children:[s.jsx(ft,{className:"h-4 w-4 mr-1"}),"Risks",s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{className:"max-h-64 overflow-y-auto",children:[s.jsx(hi,{children:"Link Risks"}),s.jsx(fr,{}),vg.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No risks available"}):s.jsxs(s.Fragment,{children:[vg.map(V=>s.jsxs(Mh,{checked:ke.includes(V.id),onCheckedChange:oe=>{$e(Ie=>oe?[...Ie,V.id]:Ie.filter(st=>st!==V.id))},"data-testid":`menu-risk-${V.id}`,children:[V.code,": ",V.title]},V.id)),s.jsx(fr,{}),s.jsxs(ct,{disabled:ke.length===0,onClick:()=>ks.mutate({taskIds:n,riskIds:ke}),className:"font-medium","data-testid":"menu-apply-risks",children:["Apply (",ke.length," selected)"]})]})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-issues",children:[s.jsx($me,{className:"h-4 w-4 mr-1"}),"Issues",s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{className:"max-h-64 overflow-y-auto",children:[s.jsx(hi,{children:"Link Issues"}),s.jsx(fr,{}),yg.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No issues available"}):s.jsxs(s.Fragment,{children:[yg.map(V=>s.jsxs(Mh,{checked:Ve.includes(V.id),onCheckedChange:oe=>{gt(Ie=>oe?[...Ie,V.id]:Ie.filter(st=>st!==V.id))},"data-testid":`menu-issue-${V.id}`,children:[V.code,": ",V.title]},V.id)),s.jsx(fr,{}),s.jsxs(ct,{disabled:Ve.length===0,onClick:()=>U.mutate({taskIds:n,issueIds:Ve}),className:"font-medium","data-testid":"menu-apply-issues",children:["Apply (",Ve.length," selected)"]})]})]})]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0,className:"shrink-0","data-testid":"dropdown-hierarchy",children:[s.jsx(ar,{className:"h-4 w-4 mr-1 rotate-[-90deg]"}),s.jsx("span",{className:"hidden xs:inline",children:"Make Child Of"}),s.jsx("span",{className:"xs:hidden",children:"Child"}),s.jsx(ar,{className:"h-3 w-3 ml-1"})]})}),s.jsxs(Nn,{className:"max-h-64 overflow-y-auto w-64",children:[s.jsx(hi,{children:"Select Parent Task"}),s.jsx(fr,{}),zn.filter(V=>!n.includes(V.id)).map(V=>s.jsxs(ct,{onClick:()=>ace(V.id),"data-testid":`menu-parent-${V.id}`,children:[s.jsx("span",{className:"font-mono text-xs mr-2",children:V.wbsCode||`#${V.id}`}),s.jsx("span",{className:"truncate",children:V.name})]},V.id)),zn.filter(V=>!n.includes(V.id)).length===0&&s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No available parent tasks"})]})]}),s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0||!cR(),onClick:oce,className:"shrink-0","data-testid":"button-move-up-level",title:"Move selected tasks up one level (promote)",children:[s.jsx(kx,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Move Up Level"}),s.jsx("span",{className:"xs:hidden",children:"Up"})]}),s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0||!uR(),onClick:lce,className:"shrink-0","data-testid":"button-move-down-level",title:"Move selected tasks down one level (demote)",children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Move Down Level"}),s.jsx("span",{className:"xs:hidden",children:"Down"})]}),s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0||Te.isPending,onClick:()=>Te.mutate(n),className:"shrink-0","data-testid":"button-recalculate-schedule",children:[s.jsx(pt,{className:he("h-4 w-4 mr-1",Te.isPending&&"animate-spin")}),s.jsx("span",{className:"hidden xs:inline",children:"Recalculate"}),s.jsx("span",{className:"xs:hidden",children:"Recalc"})]}),s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0||nn.isPending,onClick:()=>ye(!0),className:"shrink-0","data-testid":"button-set-baseline",children:[s.jsx(bn,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline",children:"Set Baseline"}),s.jsx("span",{className:"xs:hidden",children:"Baseline"})]}),s.jsxs(H,{variant:"outline",size:"sm",disabled:n.length===0||pb.isPending,onClick:()=>J(!0),className:"shrink-0 text-destructive hover:text-destructive","data-testid":"button-bulk-delete",children:[s.jsx(wn,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]}),s.jsx(Bs,{open:pe,onOpenChange:J,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsxs(ys,{children:["Delete ",n.length," tasks?"]}),s.jsx(bs,{children:"This action cannot be undone. This will permanently delete the selected tasks and all their subtasks."})]}),s.jsxs(vs,{children:[s.jsx(ws,{"data-testid":"button-cancel-delete",children:"Cancel"}),s.jsx(js,{onClick:()=>gb.mutate(n),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete",children:gb.isPending?"Deleting...":"Delete"})]})]})}),s.jsx(Bs,{open:xe,onOpenChange:ye,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsxs(ys,{children:["Set Baseline for ",n.length," tasks?"]}),s.jsxs(bs,{children:["This will set the baseline dates to match current planned dates for the selected tasks.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Note:"})," Completed tasks (100% progress) will be ignored. To include them, change their progress to less than 100%."]})]}),s.jsxs(vs,{children:[s.jsx(ws,{"data-testid":"button-cancel-baseline",children:"Cancel"}),s.jsx(js,{onClick:()=>{nn.mutate(n),ye(!1)},"data-testid":"button-confirm-baseline",children:nn.isPending?"Setting Baseline...":"Proceed"})]})]})}),h==="list"&&(zn.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Tasks Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first task"}),s.jsx(H,{onClick:()=>oC(),"data-testid":"button-create-first-task",children:"Create Task"})]}):s.jsx("div",{className:"space-y-2",children:aR.map(V=>lR(V))})),h==="kanban"&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 min-h-[500px]",children:F6.map(V=>s.jsxs("div",{className:"flex flex-col min-h-[400px]",onDragOver:Jle,onDrop:oe=>ece(oe,V.id),"data-testid":`column-${V.id}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:V.title}),s.jsx(ae,{variant:"secondary","data-testid":`count-${V.id}`,children:xb[V.id].length})]})}),s.jsxs("div",{className:"space-y-3 flex-1 overflow-y-auto",children:[xb[V.id].map(oe=>s.jsx(ie,{className:`cursor-grab active:cursor-grabbing hover-elevate active-elevate-2 transition-all ${v===oe.id?"opacity-50":""}`,draggable:!0,onDragStart:Ie=>Zle(Ie,oe.id),onDragEnd:tce,onClick:()=>wg(oe),"data-testid":`kanban-card-${oe.id}`,children:s.jsxs(ce,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs","data-testid":`task-code-${oe.id}`,children:oe.wbsCode||`T-${oe.id}`}),Xle(oe)&&s.jsx(ft,{className:"h-4 w-4 text-destructive"})]}),s.jsx("h4",{className:"font-medium text-sm leading-tight","data-testid":`task-name-${oe.id}`,children:oe.name}),oe.progress!==void 0&&oe.progress>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[oe.progress,"%"]})]}),s.jsx(fn,{value:oe.progress,className:"h-1.5"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ae,{variant:oe.priority==="critical"?"destructive":oe.priority==="high"?"default":"outline",className:"text-xs",children:oe.priority}),s.jsxs("div",{className:"flex items-center gap-2",children:[oe.endDate&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(bn,{className:"h-3 w-3"}),new Date(oe.endDate).toLocaleDateString()]}),oe.assignedTo&&s.jsx(yi,{className:"h-6 w-6",children:s.jsx(bi,{className:"text-xs",children:lC(oe.assignedTo)})})]})]})]})},oe.id)),s.jsxs(H,{variant:"outline",className:"w-full border-dashed",onClick:()=>oC(V.id),"data-testid":`button-add-card-${V.id}`,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})]},V.id))}),h==="gantt"&&s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-lg",children:["Project Timeline (",zn.length," tasks)"]})}),s.jsx(ce,{children:zn.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Tasks Yet"}),s.jsx("p",{className:"text-muted-foreground",children:"Create tasks with start and end dates to see them on the Gantt chart"})]}):s.jsx("div",{ref:xt,className:"overflow-x-auto cursor-grab active:cursor-grabbing select-none",onMouseDown:V=>{xt.current&&V.button===0&&(K(!0),ve({x:V.pageX,scrollLeft:xt.current.scrollLeft}),V.preventDefault())},onMouseMove:V=>{if(!sn||!xt.current)return;V.preventDefault();const oe=(V.pageX-de.x)*2;xt.current.scrollLeft=de.scrollLeft-oe},onMouseUp:()=>K(!1),onMouseLeave:()=>K(!1),children:s.jsxs("div",{className:"min-w-[1000px]",style:{minWidth:`${cce}px`},children:[s.jsxs("div",{className:"grid grid-cols-[300px_1fr] mb-4 border border-border rounded-lg overflow-hidden bg-card",children:[s.jsx("div",{className:"bg-card p-3 font-semibold text-sm border-r border-border sticky left-0 z-10",children:"Task"}),s.jsx("div",{className:"bg-card overflow-x-hidden",children:y==="day"?s.jsxs("div",{className:"border-b border-border",children:[s.jsx("div",{className:"grid text-center text-xs font-semibold border-b border-border/50 bg-muted/30",style:{gridTemplateColumns:`repeat(${Ai}, 1fr)`,minWidth:`${Ai*oi[y].minUnitWidth}px`},children:Ng().map((V,oe)=>s.jsx("div",{className:"p-1 border-l border-border last:border-r-0 truncate text-muted-foreground",children:typeof V=="object"?V.top:""},`top-${oe}`))}),s.jsx("div",{className:"grid text-center text-sm font-semibold",style:{gridTemplateColumns:`repeat(${Ai}, 1fr)`,minWidth:`${Ai*oi[y].minUnitWidth}px`},children:Ng().map((V,oe)=>s.jsx("div",{className:"p-1 border-l border-border last:border-r-0",children:typeof V=="object"?V.bottom:""},`bottom-${oe}`))})]}):y==="week"||y==="month"?s.jsxs("div",{className:"border-b border-border",children:[s.jsx("div",{className:"grid text-center text-xs font-semibold border-b border-border/50 bg-muted/30",style:{gridTemplateColumns:`repeat(${Ai}, 1fr)`,minWidth:`${Ai*oi[y].minUnitWidth}px`},children:Ng().map((V,oe)=>s.jsx("div",{className:"p-1 border-l border-border last:border-r-0 truncate text-muted-foreground",children:typeof V=="object"?V.top:""},`top-${oe}`))}),s.jsx("div",{className:"grid text-center text-sm font-semibold",style:{gridTemplateColumns:`repeat(${Ai}, 1fr)`,minWidth:`${Ai*oi[y].minUnitWidth}px`},children:Ng().map((V,oe)=>s.jsx("div",{className:"p-1 border-l border-border last:border-r-0",children:typeof V=="object"?V.bottom:""},`bottom-${oe}`))})]}):s.jsx("div",{className:"grid text-center text-sm font-semibold border-b border-border",style:{gridTemplateColumns:`repeat(${Ai}, 1fr)`,minWidth:`${Ai*oi[y].minUnitWidth}px`},children:Ng().map((V,oe)=>s.jsx("div",{className:"p-3 border-l border-border last:border-r-0 truncate",children:typeof V=="string"?V:""},oe))})})]}),s.jsx("div",{className:"space-y-1",children:aR.map(V=>dR(V))}),s.jsxs("div",{className:"sticky bottom-0 mt-6 p-4 bg-accent/5 border border-accent/20 rounded-lg backdrop-blur-sm bg-background/95 z-50 shadow-lg",children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Legend"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium mb-2 text-muted-foreground",children:"Task Status Colors"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-500"}),s.jsx("span",{children:"Completed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-purple-500"}),s.jsx("span",{children:"In Review"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),s.jsx("span",{children:"On Hold"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-gray-400"}),s.jsx("span",{children:"Not Started"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium mb-2 text-muted-foreground",children:"Gantt Bars"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-6 rounded bg-blue-500"}),s.jsx("span",{children:"Baseline (Approved Plan)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-3 rounded bg-orange-500 border border-orange-600"}),s.jsx("span",{children:"Actual (Actual Start/Finish)"})]})]})]})]})]})]})})})]}),h==="calendar"&&s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Monthly View"})}),s.jsx(ce,{children:s.jsxs("div",{className:"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden",children:[Iot.map(V=>s.jsx("div",{className:"bg-card border border-border p-3 text-center text-sm font-semibold",children:V},V)),Array.from({length:xce*7}).map((V,oe)=>{const Ie=oe-hR+1,st=Ie>0&&Ie<=fR,Ye=Ie===mce,Gt=gce.get(Ie)||[];return s.jsx("div",{className:he("bg-background p-2 min-h-28",Ye&&"ring-2 ring-primary ring-inset",!st&&"bg-accent/5"),"data-testid":st?`calendar-day-${Ie}`:void 0,children:st&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:he("text-sm font-semibold mb-2",Ye&&"text-primary"),children:Ie}),s.jsxs("div",{className:"space-y-1",children:[Gt.slice(0,3).map(xn=>s.jsxs("div",{className:he("text-xs px-1.5 py-0.5 rounded text-white truncate cursor-pointer hover:opacity-80",iR(xn.status)),title:`${xn.name} (${xn._isStart?"Start":"Due"})`,onClick:()=>wg(xn),"data-testid":`calendar-task-${xn.id}`,children:[xn._isStart?" ":" ",xn.name]},`${xn.id}-${xn._isStart?"start":"end"}`)),Gt.length>3&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",Gt.length-3," more"]})]})]})},oe)})]})})]}),s.jsx(hb,{open:c,onOpenChange:u,task:d,defaultStatus:g})]}):s.jsx("div",{className:"p-3 sm:p-4 md:p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select a project from the dropdown above"})]})})}const jj={day:{daysPerUnit:1,unitLabel:"Day"},week:{daysPerUnit:7,unitLabel:"Week"},month:{daysPerUnit:30,unitLabel:"Month"},quarter:{daysPerUnit:90,unitLabel:"Quarter"}};function Rot(){const{selectedProjectId:e}=jt(),[t,n]=x.useState("month"),[r,i]=x.useState(),[a,o]=x.useState(!1),{data:l=[],isLoading:c}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e}),{data:u=[]}=je({queryKey:[`/api/projects/${e}/dependencies`],enabled:!!e}),{minDate:d,maxDate:f,totalDays:h,units:m}=x.useMemo(()=>{if(l.length===0){const _=new Date;return{minDate:_,maxDate:new Date(_.getTime()+180*24*60*60*1e3),totalDays:180,units:6}}let C=new Date,A=new Date;l.forEach(_=>{if(_.startDate){const O=new Date(_.startDate);(!C||O<C)&&(C=O)}if(_.endDate){const O=new Date(_.endDate);(!A||O>A)&&(A=O)}}),C.setDate(C.getDate()-7),A.setDate(A.getDate()+30);const D=Math.ceil((A.getTime()-C.getTime())/(1e3*60*60*24)),{daysPerUnit:P}=jj[t];return{minDate:C,maxDate:A,totalDays:D,units:Math.ceil(D/P)}},[l,t]),g=C=>{if(!C.startDate||!C.endDate)return{left:0,width:0};const A=new Date(C.startDate),D=new Date(C.endDate),P=Math.floor((A.getTime()-d.getTime())/(1e3*60*60*24)),_=Math.ceil((D.getTime()-A.getTime())/(1e3*60*60*24));return{left:P/h*100,width:Math.max(_/h*100,1)}},p=C=>{switch(C){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"review":return"bg-purple-500";case"on-hold":return"bg-amber-500";default:return"bg-gray-400"}},v=C=>{switch(C){case"critical":return"border-l-4 border-l-red-500";case"high":return"border-l-4 border-l-orange-500";default:return""}},b=()=>{const C=[],{daysPerUnit:A,unitLabel:D}=jj[t];for(let P=0;P<m;P++){const _=new Date(d.getTime()+P*A*24*60*60*1e3);t==="day"?C.push(_.toLocaleDateString("en-US",{month:"short",day:"numeric"})):t==="week"?C.push(`${D} ${P+1}`):t==="month"?C.push(_.toLocaleDateString("en-US",{month:"short",year:"2-digit"})):C.push(`Q${Math.floor(_.getMonth()/3)+1} ${_.getFullYear()}`)}return C},y=C=>{i(C),o(!0)},j=()=>{t==="quarter"?n("month"):t==="month"?n("week"):t==="week"&&n("day")},N=()=>{t==="day"?n("week"):t==="week"?n("month"):t==="month"&&n("quarter")},w=l.filter(C=>!C.parentId),S=C=>l.filter(A=>A.parentId===C),k=(C,A=0)=>{const D=S(C.id),{left:P,width:_}=g(C),O=C.startDate&&C.endDate,M=new Date;M.setHours(0,0,0,0);const T=[s.jsxs("div",{className:`grid grid-cols-12 items-center border-b border-border ${v(C.priority)}`,style:{paddingLeft:`${A*1.5}rem`},children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-2 py-2 pr-2 border-r border-border bg-card",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs shrink-0",children:C.wbsCode||`#${C.id}`}),s.jsx("span",{className:"text-sm font-medium truncate",children:C.name})]}),s.jsxs("div",{className:"col-span-9 relative h-10 bg-white dark:bg-gray-900 border-r border-border",children:[s.jsx("div",{className:"absolute inset-0 flex",children:Array.from({length:h}).map((R,F)=>{const E=new Date(d.getTime()+F*24*60*60*1e3);E.setHours(0,0,0,0);const B=E.getDay()===0||E.getDay()===6,L=E.getTime()===M.getTime(),{daysPerUnit:I}=jj[t],q=F%I===0;return s.jsx("div",{className:he("border-l",q?"border-border":"border-border/30",B&&"bg-muted/10",L&&"bg-primary/5"),style:{width:`${100/h}%`},children:L&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-primary z-10"})},F)})}),O?s.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 h-6 rounded-md ${p(C.status)} flex items-center px-2 text-white text-xs font-semibold shadow-md hover:shadow-lg cursor-pointer transition-all overflow-hidden z-20`,style:{left:`${P}%`,width:`${_}%`,minWidth:"40px"},onClick:()=>y(C),"data-testid":`gantt-bar-${C.id}`,children:[s.jsx("div",{className:"flex items-center justify-between w-full",children:s.jsxs("span",{className:"truncate",children:[C.progress||0,"%"]})}),s.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-md pointer-events-none",style:{width:`${C.progress||0}%`}})]}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-muted-foreground z-10",children:"No dates set"})]})]},C.id)];return D.forEach(R=>{T.push(...k(R,A+1))}),T};return e?c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-gantt",children:"Gantt Chart"}),s.jsxs("p",{className:"text-muted-foreground",children:["Timeline view with ",l.length," task",l.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"icon",onClick:j,disabled:t==="day","data-testid":"button-zoom-in",children:s.jsx(RK,{className:"h-4 w-4"})}),s.jsx(ae,{variant:"secondary",className:"px-3",children:jj[t].unitLabel}),s.jsx(H,{variant:"outline",size:"icon",onClick:N,disabled:t==="quarter","data-testid":"button-zoom-out",children:s.jsx($K,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"icon","data-testid":"button-fit-screen",children:s.jsx(Rme,{className:"h-4 w-4"})})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Project Timeline"})}),s.jsx(ce,{children:l.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Tasks Yet"}),s.jsx("p",{className:"text-muted-foreground",children:"Create tasks with start and end dates to see them on the Gantt chart"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-[1000px]",children:[s.jsxs("div",{className:"grid grid-cols-12 mb-4 border border-border rounded-lg overflow-hidden bg-card",children:[s.jsx("div",{className:"col-span-3 bg-card p-3 font-semibold text-sm border-r border-border",children:"Task"}),s.jsx("div",{className:"col-span-9 bg-card",children:s.jsx("div",{className:"grid text-center text-sm font-semibold border-b border-border",style:{gridTemplateColumns:`repeat(${Math.min(m,12)}, 1fr)`},children:b().slice(0,12).map((C,A)=>s.jsx("div",{className:"p-3 border-l border-border last:border-r-0",children:C},A))})})]}),s.jsx("div",{className:"space-y-1",children:w.map(C=>k(C))}),s.jsxs("div",{className:"mt-6 p-4 bg-accent/5 border border-accent/20 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Legend"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-500"}),s.jsx("span",{children:"Completed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-purple-500"}),s.jsx("span",{children:"In Review"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),s.jsx("span",{children:"On Hold"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-gray-400"}),s.jsx("span",{children:"Not Started"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-4 border-l-4 border-l-red-500 bg-accent/5 rounded"}),s.jsx("span",{children:"Critical Priority"})]})]})]})]})})})]}),s.jsx(hb,{open:a,onOpenChange:o,task:r})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view the Gantt chart."})]})})}const $ot=[{id:"not-started",title:"Not Started"},{id:"in-progress",title:"In Progress"},{id:"review",title:"In Review"},{id:"completed",title:"Completed"}];function Fot(){const{selectedProjectId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(),[o,l]=x.useState("not-started"),[c,u]=x.useState(null),[d,f]=x.useState(null),{data:h=[],isLoading:m}=je({queryKey:[`/api/projects/${e}/kanban-columns`],enabled:!!e,retry:1}),{data:g=[]}=je({queryKey:[`/api/projects/${e}/statuses`],enabled:!!e,retry:1}),{data:p=[],isLoading:v,error:b}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e,retry:1}),y=v||m,j=Pe({mutationFn:async({taskId:T,status:R,customStatusId:F})=>{const E={};R!==void 0&&(E.status=R),F!==void 0&&(E.customStatusId=F),await fe("PATCH",`/api/tasks/${T}`,E)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]})},onError:T=>{t({title:"Error",description:T.message||"Failed to update task status",variant:"destructive"})}}),N=x.useMemo(()=>{const T=h.filter(R=>R.isActive).sort((R,F)=>R.order-F.order);return T.length>0?T.map(R=>({id:R.id,title:R.name,statusId:R.statusId,customStatusId:R.customStatusId})):$ot.map(R=>({id:R.id,title:R.title,statusId:R.id,customStatusId:null}))},[h]),w=x.useMemo(()=>{const T={};return N.forEach(R=>{const F=R.customStatusId||R.statusId||R.id;T[F]=[]}),p.forEach(R=>{const F=N.find(E=>E.customStatusId?R.customStatusId===E.customStatusId:E.statusId?R.status===E.statusId&&!R.customStatusId:!1);if(F){const E=F.customStatusId||F.statusId||F.id;T[E]||(T[E]=[]),T[E].push(R)}else{const E=R.status;T[E]||(T[E]=[]),T[E].push(R)}}),T},[p,N]),S=(T,R)=>{f(R),T.dataTransfer.effectAllowed="move"},k=T=>{T.preventDefault(),T.dataTransfer.dropEffect="move"},C=(T,R)=>{if(T.preventDefault(),d!==null){const F=p.find(L=>L.id===d);if(!F){f(null);return}F.customStatusId===R.customStatusId&&(F.status,R.statusId||F.status);const E=R.statusId,B=R.customStatusId;(F.customStatusId!==B||F.status!==E)&&j.mutate({taskId:d,status:E||void 0,customStatusId:B!==void 0?B:void 0})}f(null)},A=()=>{f(null)},D=T=>{a(void 0),l(T.statusId||"not-started"),u(T.customStatusId||null),r(!0)},P=T=>{a(T),r(!0)},_=T=>{switch(T){case"critical":return s.jsx(ae,{variant:"destructive",className:"text-xs",children:"critical"});case"high":return s.jsx(ae,{variant:"default",className:"text-xs",children:"high"});case"medium":return s.jsx(ae,{variant:"secondary",className:"text-xs",children:"medium"});default:return s.jsx(ae,{variant:"outline",className:"text-xs",children:T})}},O=T=>T?T.split(" ").map(R=>R[0]).join("").toUpperCase().slice(0,2):"?",M=T=>T.endDate?new Date(T.endDate)<new Date&&T.status!=="completed":!1;return e?y?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):b?s.jsx("div",{className:"p-6",children:s.jsxs($t,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Failed to load tasks. Please try again."})]})}):s.jsxs("div",{className:"p-6 space-y-4 h-full",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-kanban",children:"Kanban Board"}),s.jsx("p",{className:"text-muted-foreground",children:"Drag and drop to change task status"})]}),s.jsxs(H,{onClick:()=>D("not-started"),"data-testid":"button-add-task",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Task"]})]}),s.jsx("div",{className:"grid gap-4 h-[calc(100%-80px)]",style:{gridTemplateColumns:`repeat(${N.length}, minmax(250px, 1fr))`},children:N.map(T=>{const R=T.customStatusId||T.statusId||T.id,F=w[R]||[];return s.jsxs("div",{className:"flex flex-col min-h-[400px]",onDragOver:k,onDrop:E=>C(E,T),"data-testid":`column-${T.id}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:T.title}),s.jsx(ae,{variant:"secondary","data-testid":`count-${T.id}`,children:F.length})]})}),s.jsxs("div",{className:"space-y-3 flex-1 overflow-y-auto",children:[F.map(E=>s.jsx(ie,{className:`cursor-grab active:cursor-grabbing hover-elevate active-elevate-2 transition-all ${d===E.id?"opacity-50":""}`,draggable:!0,onDragStart:B=>S(B,E.id),onDragEnd:A,onClick:()=>P(E),"data-testid":`kanban-card-${E.id}`,children:s.jsxs(ce,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx(ae,{variant:"outline",className:"font-mono text-xs","data-testid":`task-code-${E.id}`,children:E.wbsCode||`T-${E.id}`}),M(E)&&s.jsx(ft,{className:"h-4 w-4 text-destructive"})]}),s.jsx("h4",{className:"font-medium text-sm leading-tight","data-testid":`task-name-${E.id}`,children:E.name}),E.progress!==void 0&&E.progress>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[E.progress,"%"]})]}),s.jsx(fn,{value:E.progress,className:"h-1.5"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[_(E.priority),s.jsxs("div",{className:"flex items-center gap-2",children:[E.endDate&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(bn,{className:"h-3 w-3"}),new Date(E.endDate).toLocaleDateString()]}),E.assignedTo&&s.jsx(yi,{className:"h-6 w-6",children:s.jsx(bi,{className:"text-xs",children:O(E.assignedTo)})})]})]})]})},E.id)),s.jsxs(H,{variant:"outline",className:"w-full border-dashed",onClick:()=>D(T),"data-testid":`button-add-card-${T.id}`,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})]},T.id)})}),s.jsx(hb,{open:n,onOpenChange:r,task:i,defaultStatus:o,defaultCustomStatusId:c})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view the Kanban board."})]})})}const Lot=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L6=e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"review":return"bg-purple-500";case"on-hold":return"bg-amber-500";default:return"bg-gray-400"}},z6=e=>{switch(e){case"critical":return"border-l-2 border-l-red-500";case"high":return"border-l-2 border-l-orange-500";default:return""}};function zot(){const{selectedProjectId:e}=jt(),[t,n]=x.useState(new Date),[r,i]=x.useState(),[a,o]=x.useState(!1),[l,c]=x.useState(!0),[u,d]=x.useState(!0),[f,h]=x.useState(!0),{data:m=[],isLoading:g}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e}),{year:p,month:v,daysInMonth:b,startDay:y,today:j,monthName:N}=x.useMemo(()=>{const O=t.getFullYear(),M=t.getMonth(),T=new Date(O,M,1),R=new Date(O,M+1,0),F=new Date;return{year:O,month:M,daysInMonth:R.getDate(),startDay:T.getDay(),today:F.getFullYear()===O&&F.getMonth()===M?F.getDate():-1,monthName:T.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},[t]),w=x.useMemo(()=>{const O=new Map;return m.forEach(M=>{let T=null,R=null,F="actual";if(l&&u?(T=M.actualStartDate?new Date(M.actualStartDate):M.baselineStart?new Date(M.baselineStart):M.startDate?new Date(M.startDate):null,R=M.actualFinishDate?new Date(M.actualFinishDate):M.baselineFinish?new Date(M.baselineFinish):M.endDate?new Date(M.endDate):null,F="both"):l?(T=M.actualStartDate?new Date(M.actualStartDate):null,R=M.actualFinishDate?new Date(M.actualFinishDate):null,F="actual"):u?(T=M.baselineStart?new Date(M.baselineStart):null,R=M.baselineFinish?new Date(M.baselineFinish):null,F="baseline"):(T=M.startDate?new Date(M.startDate):null,R=M.endDate?new Date(M.endDate):null),!T||!R)return;const E=new Date(T.getFullYear(),T.getMonth(),T.getDate()),B=new Date(R.getFullYear(),R.getMonth(),R.getDate()),L=new Date(p,v,1),I=new Date(p,v+1,0),q=E>L?E:L,$=B<I?B:I;if(q<=$)for(let z=q.getDate();z<=$.getDate();z++){O.has(z)||O.set(z,[]);const Y=O.get(z);if(!Y.find(te=>te.id===M.id)){const te=z===E.getDate()&&E.getMonth()===v&&E.getFullYear()===p,pe=z===B.getDate()&&B.getMonth()===v&&B.getFullYear()===p;Y.push({...M,_isStart:te,_isEnd:pe,_dateType:F})}}}),O},[m,p,v,l,u,f]),S=x.useMemo(()=>{const O=new Date;return m.filter(M=>M.endDate?new Date(M.endDate)>=O&&M.status!=="completed":!1).sort((M,T)=>new Date(M.endDate).getTime()-new Date(T.endDate).getTime()).slice(0,5)},[m]),k=Math.ceil((b+y)/7),C=()=>{n(new Date(p,v-1,1))},A=()=>{n(new Date(p,v+1,1))},D=()=>{n(new Date)},P=O=>{i(O),o(!0)},_=O=>{const M=typeof O=="string"?new Date(O):O,T=new Date,R=Math.ceil((M.getTime()-T.getTime())/(1e3*60*60*24));return R===0?"Today":R===1?"Tomorrow":R<0?`${Math.abs(R)} days ago`:`${R} days`};return e?g?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-calendar",children:"Calendar"}),s.jsx("p",{className:"text-muted-foreground",children:"Project timeline and milestones"})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-3 border rounded-lg p-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Date Types:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-actual",checked:l,onCheckedChange:c}),s.jsx(G,{htmlFor:"show-actual",className:"text-sm cursor-pointer",children:"Actual"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-baseline",checked:u,onCheckedChange:d}),s.jsx(G,{htmlFor:"show-baseline",className:"text-sm cursor-pointer",children:"Baseline"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:D,"data-testid":"button-today",children:"Today"}),s.jsx(H,{variant:"outline",size:"icon",onClick:C,"data-testid":"button-prev-month",children:s.jsx(r1,{className:"h-4 w-4"})}),s.jsx("div",{className:"px-4 font-semibold min-w-[180px] text-center",children:N}),s.jsx(H,{variant:"outline",size:"icon",onClick:A,"data-testid":"button-next-month",children:s.jsx(qa,{className:"h-4 w-4"})})]})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"pb-2",children:[s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(Br,{className:"h-5 w-5"}),N]}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-actual-cal",checked:l,onCheckedChange:O=>c(O===!0)}),s.jsx(G,{htmlFor:"show-actual-cal",className:"text-sm font-normal cursor-pointer",children:"Show Actual Dates"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-baseline-cal",checked:u,onCheckedChange:O=>d(O===!0)}),s.jsx(G,{htmlFor:"show-baseline-cal",className:"text-sm font-normal cursor-pointer",children:"Show Baseline Dates"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-ongoing-cal",checked:f,onCheckedChange:O=>h(O===!0)}),s.jsx(G,{htmlFor:"show-ongoing-cal",className:"text-sm font-normal cursor-pointer",children:"Show Ongoing Tasks"})]})]})]}),s.jsx(ce,{children:s.jsxs("div",{className:"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden",children:[Lot.map(O=>s.jsx("div",{className:"bg-muted p-3 text-center text-sm font-semibold",children:O},O)),Array.from({length:k*7}).map((O,M)=>{const T=M-y+1,R=T>0&&T<=b,F=T===j,E=w.get(T)||[];return s.jsx("div",{className:he("bg-background p-2 min-h-28",F&&"ring-2 ring-primary ring-inset",!R&&"bg-muted/30"),"data-testid":R?`calendar-day-${T}`:void 0,children:R&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:he("text-sm font-semibold mb-2",F&&"text-primary"),children:T}),s.jsxs("div",{className:"space-y-1",children:[E.filter(B=>{const L=!B._isStart&&!B._isEnd;return f||!L}).slice(0,3).map(B=>{const L=B._isStart,I=B._isEnd,q=B._dateType==="actual"?"A":B._dateType==="baseline"?"B":"";return s.jsxs("div",{className:he("text-xs px-1.5 py-0.5 rounded text-white truncate cursor-pointer hover:opacity-80 flex items-center gap-1",L6(B.status),z6(B.priority)),title:`${B.name}${L?" (Start)":I?" (End)":" (Ongoing)"}${q?` [${q}]`:""}`,onClick:()=>P(B),"data-testid":`calendar-task-${B.id}`,children:[L?" ":I?" ":" ",B.name,q&&s.jsxs("span",{className:"text-[10px] opacity-75",children:["[",q,"]"]})]},`${B.id}-${T}`)}),E.length>3&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",E.length-3," more"]})]})]})},M)})]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Upcoming Deadlines"})}),s.jsx(ce,{children:S.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming deadlines. All tasks are either completed or have no end date set."}):s.jsx("div",{className:"space-y-3",children:S.map(O=>s.jsxs("div",{className:he("flex items-center gap-3 p-3 rounded-lg hover-elevate cursor-pointer",z6(O.priority)),onClick:()=>P(O),"data-testid":`upcoming-task-${O.id}`,children:[s.jsx("div",{className:he("w-1 h-12 rounded",L6(O.status))}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:O.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Due: ",new Date(O.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsx(ae,{variant:O.priority==="critical"?"destructive":"outline",children:_(O.endDate)})]},O.id))})})]}),s.jsx(hb,{open:a,onOpenChange:o,task:r})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view the calendar."})]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function cu(e,t){return typeof e=="function"?e(t):e}function ba(e,t){return n=>{t.setState(r=>({...r,[e]:cu(n,r[e])}))}}function nC(e){return e instanceof Function}function Bot(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Vot(e,t){const n=[],r=i=>{i.forEach(a=>{n.push(a);const o=t(a);o!=null&&o.length&&r(o)})};return r(e),n}function Tt(e,t,n){let r=[],i;return a=>{let o;n.key&&n.debug&&(o=Date.now());const l=e(a);if(!(l.length!==r.length||l.some((d,f)=>r[f]!==d)))return i;r=l;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...l),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,m=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c ${m(f,5)} /${m(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Dt(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function qot(e,t,n,r){const i=()=>{var o;return(o=a.getValue())!=null?o:e.options.renderFallbackValue},a={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:Tt(()=>[e,n,t,a],(o,l,c,u)=>({table:o,column:l,row:c,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Dt(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(a,n,t,e)},{}),a}function Uot(e,t,n,r){var i,a;const l={...e._getDefaultColumnDef(),...t},c=l.accessorKey;let u=(i=(a=l.id)!=null?a:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?i:typeof l.header=="string"?l.header:void 0,d;if(l.accessorFn?d=l.accessorFn:c&&(c.includes(".")?d=h=>{let m=h;for(const p of c.split(".")){var g;m=(g=m)==null?void 0:g[p]}return m}:d=h=>h[l.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:Tt(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(m=>m.getFlatColumns())]},Dt(e.options,"debugColumns")),getLeafColumns:Tt(()=>[e._getOrderColumnsFn()],h=>{var m;if((m=f.columns)!=null&&m.length){let g=f.columns.flatMap(p=>p.getLeafColumns());return h(g)}return[f]},Dt(e.options,"debugColumns"))};for(const h of e._features)h.createColumn==null||h.createColumn(f,e);return f}const Ws="debugHeaders";function B6(e,t,n){var r;let a={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(l),o.push(c)};return l(a),o},getContext:()=>({table:e,header:a,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(a,e)}),a}const Wot={createTable:e=>{e.getHeaderGroups=Tt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var a,o;const l=(a=r==null?void 0:r.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?a:[],c=(o=i==null?void 0:i.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?o:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return wj(t,[...l,...u,...c],e)},Dt(e.options,Ws)),e.getCenterHeaderGroups=Tt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(i!=null&&i.includes(a.id))),wj(t,n,e,"center")),Dt(e.options,Ws)),e.getLeftHeaderGroups=Tt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const a=(i=r==null?void 0:r.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?i:[];return wj(t,a,e,"left")},Dt(e.options,Ws)),e.getRightHeaderGroups=Tt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const a=(i=r==null?void 0:r.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?i:[];return wj(t,a,e,"right")},Dt(e.options,Ws)),e.getFooterGroups=Tt(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Dt(e.options,Ws)),e.getLeftFooterGroups=Tt(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Dt(e.options,Ws)),e.getCenterFooterGroups=Tt(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Dt(e.options,Ws)),e.getRightFooterGroups=Tt(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Dt(e.options,Ws)),e.getFlatHeaders=Tt(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,Ws)),e.getLeftFlatHeaders=Tt(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,Ws)),e.getCenterFlatHeaders=Tt(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,Ws)),e.getRightFlatHeaders=Tt(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,Ws)),e.getCenterLeafHeaders=Tt(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,Ws)),e.getLeftLeafHeaders=Tt(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,Ws)),e.getRightLeafHeaders=Tt(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,Ws)),e.getLeafHeaders=Tt(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,a,o,l,c,u;return[...(i=(a=t[0])==null?void 0:a.headers)!=null?i:[],...(o=(l=n[0])==null?void 0:l.headers)!=null?o:[],...(c=(u=r[0])==null?void 0:u.headers)!=null?c:[]].map(d=>d.getLeafHeaders()).flat()},Dt(e.options,Ws))}};function wj(e,t,n,r){var i,a;let o=0;const l=function(h,m){m===void 0&&(m=1),o=Math.max(o,m),h.filter(g=>g.getIsVisible()).forEach(g=>{var p;(p=g.columns)!=null&&p.length&&l(g.columns,m+1)},0)};l(e);let c=[];const u=(h,m)=>{const g={depth:m,id:[r,`${m}`].filter(Boolean).join("_"),headers:[]},p=[];h.forEach(v=>{const b=[...p].reverse()[0],y=v.column.depth===g.depth;let j,N=!1;if(y&&v.column.parent?j=v.column.parent:(j=v.column,N=!0),b&&(b==null?void 0:b.column)===j)b.subHeaders.push(v);else{const w=B6(n,j,{id:[r,m,j.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${p.filter(S=>S.column===j).length}`:void 0,depth:m,index:p.length});w.subHeaders.push(v),p.push(w)}g.headers.push(v),v.headerGroup=g}),c.push(g),m>0&&u(p,m-1)},d=t.map((h,m)=>B6(n,h,{depth:o,index:m}));u(d,o-1),c.reverse();const f=h=>h.filter(g=>g.column.getIsVisible()).map(g=>{let p=0,v=0,b=[0];g.subHeaders&&g.subHeaders.length?(b=[],f(g.subHeaders).forEach(j=>{let{colSpan:N,rowSpan:w}=j;p+=N,b.push(w)})):p=1;const y=Math.min(...b);return v=v+y,g.colSpan=p,g.rowSpan=v,{colSpan:p,rowSpan:v}});return f((i=(a=c[0])==null?void 0:a.headers)!=null?i:[]),c}const KM=(e,t,n,r,i,a,o)=>{let l={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(l._valuesCache.hasOwnProperty(c))return l._valuesCache[c];const u=e.getColumn(c);if(u!=null&&u.accessorFn)return l._valuesCache[c]=u.accessorFn(l.original,r),l._valuesCache[c]},getUniqueValues:c=>{if(l._uniqueValuesCache.hasOwnProperty(c))return l._uniqueValuesCache[c];const u=e.getColumn(c);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[c]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[c]):(l._uniqueValuesCache[c]=[l.getValue(c)],l._uniqueValuesCache[c])},renderValue:c=>{var u;return(u=l.getValue(c))!=null?u:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Vot(l.subRows,c=>c.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let c=[],u=l;for(;;){const d=u.getParentRow();if(!d)break;c.push(d),u=d}return c.reverse()},getAllCells:Tt(()=>[e.getAllLeafColumns()],c=>c.map(u=>qot(e,l,u,u.id)),Dt(e.options,"debugRows")),_getAllCellsByColumnId:Tt(()=>[l.getAllCells()],c=>c.reduce((u,d)=>(u[d.column.id]=d,u),{}),Dt(e.options,"debugRows"))};for(let c=0;c<e._features.length;c++){const u=e._features[c];u==null||u.createRow==null||u.createRow(l,e)}return l},Hot={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Uoe=(e,t,n)=>{var r,i;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=e.getValue(t))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(a))};Uoe.autoRemove=e=>_o(e);const Woe=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};Woe.autoRemove=e=>_o(e);const Hoe=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};Hoe.autoRemove=e=>_o(e);const Koe=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};Koe.autoRemove=e=>_o(e);const Goe=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});Goe.autoRemove=e=>_o(e)||!(e!=null&&e.length);const Qoe=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});Qoe.autoRemove=e=>_o(e)||!(e!=null&&e.length);const Yoe=(e,t,n)=>e.getValue(t)===n;Yoe.autoRemove=e=>_o(e);const Xoe=(e,t,n)=>e.getValue(t)==n;Xoe.autoRemove=e=>_o(e);const GM=(e,t,n)=>{let[r,i]=n;const a=e.getValue(t);return a>=r&&a<=i};GM.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,a=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(a>o){const l=a;a=o,o=l}return[a,o]};GM.autoRemove=e=>_o(e)||_o(e[0])&&_o(e[1]);const $l={includesString:Uoe,includesStringSensitive:Woe,equalsString:Hoe,arrIncludes:Koe,arrIncludesAll:Goe,arrIncludesSome:Qoe,equals:Yoe,weakEquals:Xoe,inNumberRange:GM};function _o(e){return e==null||e===""}const Kot={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ba("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?$l.includesString:typeof r=="number"?$l.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?$l.equals:Array.isArray(r)?$l.arrIncludes:$l.weakEquals},e.getFilterFn=()=>{var n,r;return nC(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:$l[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),a=r==null?void 0:r.find(d=>d.id===e.id),o=cu(n,a?a.value:void 0);if(V6(i,o,e)){var l;return(l=r==null?void 0:r.filter(d=>d.id!==e.id))!=null?l:[]}const c={id:e.id,value:o};if(a){var u;return(u=r==null?void 0:r.map(d=>d.id===e.id?c:d))!=null?u:[]}return r!=null&&r.length?[...r,c]:[c]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var a;return(a=cu(t,i))==null?void 0:a.filter(o=>{const l=n.find(c=>c.id===o.id);if(l){const c=l.getFilterFn();if(V6(c,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function V6(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Got=(e,t,n)=>n.reduce((r,i)=>{const a=i.getValue(e);return r+(typeof a=="number"?a:0)},0),Qot=(e,t,n)=>{let r;return n.forEach(i=>{const a=i.getValue(e);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},Yot=(e,t,n)=>{let r;return n.forEach(i=>{const a=i.getValue(e);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},Xot=(e,t,n)=>{let r,i;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},Zot=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let a=i.getValue(e);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},Jot=(e,t)=>{if(!t.length)return;const n=t.map(a=>a.getValue(e));if(!Bot(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((a,o)=>a-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},elt=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),tlt=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,nlt=(e,t)=>t.length,kP={sum:Got,min:Qot,max:Yot,extent:Xot,mean:Zot,median:Jot,unique:elt,uniqueCount:tlt,count:nlt},rlt={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ba("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return kP.sum;if(Object.prototype.toString.call(r)==="[object Date]")return kP.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return nC(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:kP[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function slt(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(a=>!t.includes(a.id));return n==="remove"?r:[...t.map(a=>e.find(o=>o.id===a)).filter(Boolean),...r]}const ilt={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ba("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Tt(n=>[Ux(t,n)],n=>n.findIndex(r=>r.id===e.id),Dt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=Ux(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=Ux(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Tt(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let a=[];if(!(t!=null&&t.length))a=i;else{const o=[...t],l=[...i];for(;l.length&&o.length;){const c=o.shift(),u=l.findIndex(d=>d.id===c);u>-1&&a.push(l.splice(u,1)[0])}a=[...a,...l]}return slt(a,n,r)},Dt(e.options,"debugTable"))}},PP=()=>({left:[],right:[]}),alt={getInitialState:e=>({columnPinning:PP(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ba("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var a,o;if(n==="right"){var l,c;return{left:((l=i==null?void 0:i.left)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,d;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=i==null?void 0:i.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,a,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((a=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?a:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:r,right:i}=t.getState().columnPinning,a=n.some(l=>r==null?void 0:r.includes(l)),o=n.some(l=>i==null?void 0:i.includes(l));return a?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Tt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const a=[...r??[],...i??[]];return n.filter(o=>!a.includes(o.column.id))},Dt(t.options,"debugRows")),e.getLeftVisibleCells=Tt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Dt(t.options,"debugRows")),e.getRightVisibleCells=Tt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Dt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?PP():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:PP())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,a;return!!((i=r.left)!=null&&i.length||(a=r.right)!=null&&a.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Tt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Dt(e.options,"debugColumns")),e.getRightLeafColumns=Tt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Dt(e.options,"debugColumns")),e.getCenterLeafColumns=Tt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(a=>!i.includes(a.id))},Dt(e.options,"debugColumns"))}};function olt(e){return e||(typeof document<"u"?document:null)}const Nj={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},EP=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),llt={getDefaultColumnDef:()=>Nj,getInitialState:e=>({columnSizing:{},columnSizingInfo:EP(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ba("columnSizing",e),onColumnSizingInfoChange:ba("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const a=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Nj.minSize,(r=a??e.columnDef.size)!=null?r:Nj.size),(i=e.columnDef.maxSize)!=null?i:Nj.maxSize)},e.getStart=Tt(n=>[n,Ux(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,a)=>i+a.getSize(),0),Dt(t.options,"debugColumns")),e.getAfter=Tt(n=>[n,Ux(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,a)=>i+a.getSize(),0),Dt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var a;n+=(a=i.column.getSize())!=null?a:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return a=>{if(!r||!i||(a.persist==null||a.persist(),_P(a)&&a.touches&&a.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[r.id,r.getSize()]],c=_P(a)?Math.round(a.touches[0].clientX):a.clientX,u={},d=(b,y)=>{typeof y=="number"&&(t.setColumnSizingInfo(j=>{var N,w;const S=t.options.columnResizeDirection==="rtl"?-1:1,k=(y-((N=j==null?void 0:j.startOffset)!=null?N:0))*S,C=Math.max(k/((w=j==null?void 0:j.startSize)!=null?w:0),-.999999);return j.columnSizingStart.forEach(A=>{let[D,P]=A;u[D]=Math.round(Math.max(P+P*C,0)*100)/100}),{...j,deltaOffset:k,deltaPercentage:C}}),(t.options.columnResizeMode==="onChange"||b==="end")&&t.setColumnSizing(j=>({...j,...u})))},f=b=>d("move",b),h=b=>{d("end",b),t.setColumnSizingInfo(y=>({...y,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=olt(n),g={moveHandler:b=>f(b.clientX),upHandler:b=>{m==null||m.removeEventListener("mousemove",g.moveHandler),m==null||m.removeEventListener("mouseup",g.upHandler),h(b.clientX)}},p={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),f(b.touches[0].clientX),!1),upHandler:b=>{var y;m==null||m.removeEventListener("touchmove",p.moveHandler),m==null||m.removeEventListener("touchend",p.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),h((y=b.touches[0])==null?void 0:y.clientX)}},v=clt()?{passive:!1}:!1;_P(a)?(m==null||m.addEventListener("touchmove",p.moveHandler,v),m==null||m.addEventListener("touchend",p.upHandler,v)):(m==null||m.addEventListener("mousemove",g.moveHandler,v),m==null||m.addEventListener("mouseup",g.upHandler,v)),t.setColumnSizingInfo(b=>({...b,startOffset:c,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?EP():(n=e.initialState.columnSizingInfo)!=null?n:EP())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let Sj=null;function clt(){if(typeof Sj=="boolean")return Sj;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Sj=e,Sj}function _P(e){return e.type==="touchstart"}const ult={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ba("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(a=>a.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Tt(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Dt(t.options,"debugRows")),e.getVisibleCells=Tt(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Dt(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Tt(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Dt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,a)=>({...i,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Ux(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const dlt={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},flt={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ba("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,a;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((a=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?a:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>$l.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return nC(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:$l[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},hlt={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ba("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,a;e.setExpanded(r?{}:(i=(a=e.initialState)==null?void 0:a.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(a=>{const o=a.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const a=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=r,n=(i=n)!=null?i:!a,!a&&n)return{...o,[e.id]:!0};if(a&&!n){const{[e.id]:l,...c}=o;return c}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},FA=0,LA=10,AP=()=>({pageIndex:FA,pageSize:LA}),mlt={getInitialState:e=>({...e,pagination:{...AP(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ba("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=a=>cu(r,a);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?AP():(i=e.initialState.pagination)!=null?i:AP())},e.setPageIndex=r=>{e.setPagination(i=>{let a=cu(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return a=Math.max(0,Math.min(a,o)),{...i,pageIndex:a}})},e.resetPageIndex=r=>{var i,a;e.setPageIndex(r?FA:(i=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?i:FA)},e.resetPageSize=r=>{var i,a;e.setPageSize(r?LA:(i=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?i:LA)},e.setPageSize=r=>{e.setPagination(i=>{const a=Math.max(1,cu(r,i.pageSize)),o=i.pageSize*i.pageIndex,l=Math.floor(o/a);return{...i,pageIndex:l,pageSize:a}})},e.setPageCount=r=>e.setPagination(i=>{var a;let o=cu(r,(a=e.options.pageCount)!=null?a:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=Tt(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((a,o)=>o)),i},Dt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},TP=()=>({top:[],bottom:[]}),plt={getInitialState:e=>({rowPinning:TP(),...e}),getDefaultOptions:e=>({onRowPinningChange:ba("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const a=r?e.getLeafRows().map(c=>{let{id:u}=c;return u}):[],o=i?e.getParentRows().map(c=>{let{id:u}=c;return u}):[],l=new Set([...o,e.id,...a]);t.setRowPinning(c=>{var u,d;if(n==="bottom"){var f,h;return{top:((f=c==null?void 0:c.top)!=null?f:[]).filter(p=>!(l!=null&&l.has(p))),bottom:[...((h=c==null?void 0:c.bottom)!=null?h:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)]}}if(n==="top"){var m,g;return{top:[...((m=c==null?void 0:c.top)!=null?m:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)],bottom:((g=c==null?void 0:c.bottom)!=null?g:[]).filter(p=>!(l!=null&&l.has(p)))}}return{top:((u=c==null?void 0:c.top)!=null?u:[]).filter(p=>!(l!=null&&l.has(p))),bottom:((d=c==null?void 0:c.bottom)!=null?d:[]).filter(p=>!(l!=null&&l.has(p)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,a=n.some(l=>r==null?void 0:r.includes(l)),o=n.some(l=>i==null?void 0:i.includes(l));return a?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const a=(n=i==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:l}=o;return l});return(r=a==null?void 0:a.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?TP():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:TP())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,a;return!!((i=r.top)!=null&&i.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(o=>t.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=Tt(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Dt(e.options,"debugRows")),e.getBottomRows=Tt(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Dt(e.options,"debugRows")),e.getCenterRows=Tt(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(a=>!i.has(a.id))},Dt(e.options,"debugRows"))}},glt={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ba("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):i.forEach(a=>{delete r[a.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(a=>{zA(i,a.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Tt(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?DP(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Tt(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?DP(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Tt(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?DP(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(a=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return a;const l={...a};return zA(l,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return QM(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return BA(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return BA(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},zA=(e,t,n,r,i)=>{var a;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(a=o.subRows)!=null&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>zA(e,l.id,n,r,i))};function DP(e,t){const n=e.getState().rowSelection,r=[],i={},a=function(o,l){return o.map(c=>{var u;const d=QM(c,n);if(d&&(r.push(c),i[c.id]=c),(u=c.subRows)!=null&&u.length&&(c={...c,subRows:a(c.subRows)}),d)return c}).filter(Boolean)};return{rows:a(t.rows),flatRows:r,rowsById:i}}function QM(e,t){var n;return(n=t[e.id])!=null?n:!1}function BA(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,a=!1;return e.subRows.forEach(o=>{if(!(a&&!i)&&(o.getCanSelect()&&(QM(o,t)?a=!0:i=!1),o.subRows&&o.subRows.length)){const l=BA(o,t);l==="all"?a=!0:(l==="some"&&(a=!0),i=!1)}}),i?"all":a?"some":!1}const VA=/([0-9]+)/gm,xlt=(e,t,n)=>Zoe(Uu(e.getValue(n)).toLowerCase(),Uu(t.getValue(n)).toLowerCase()),vlt=(e,t,n)=>Zoe(Uu(e.getValue(n)),Uu(t.getValue(n))),ylt=(e,t,n)=>YM(Uu(e.getValue(n)).toLowerCase(),Uu(t.getValue(n)).toLowerCase()),blt=(e,t,n)=>YM(Uu(e.getValue(n)),Uu(t.getValue(n))),jlt=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},wlt=(e,t,n)=>YM(e.getValue(n),t.getValue(n));function YM(e,t){return e===t?0:e>t?1:-1}function Uu(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Zoe(e,t){const n=e.split(VA).filter(Boolean),r=t.split(VA).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),a=r.shift(),o=parseInt(i,10),l=parseInt(a,10),c=[o,l].sort();if(isNaN(c[0])){if(i>a)return 1;if(a>i)return-1;continue}if(isNaN(c[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return n.length-r.length}const nx={alphanumeric:xlt,alphanumericCaseSensitive:vlt,text:ylt,textCaseSensitive:blt,datetime:jlt,basic:wlt},Nlt={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ba("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const a=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(a)==="[object Date]")return nx.datetime;if(typeof a=="string"&&(r=!0,a.split(VA).length>1))return nx.alphanumeric}return r?nx.text:nx.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return nC(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:nx[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),a=typeof n<"u"&&n!==null;t.setSorting(o=>{const l=o==null?void 0:o.find(m=>m.id===e.id),c=o==null?void 0:o.findIndex(m=>m.id===e.id);let u=[],d,f=a?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?l?d="toggle":d="add":o!=null&&o.length&&c!==o.length-1?d="replace":l?d="toggle":d="replace",d==="toggle"&&(a||i||(d="remove")),d==="add"){var h;u=[...o,{id:e.id,desc:f}],u.splice(0,u.length-((h=t.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=o.map(m=>m.id===e.id?{...m,desc:f}:m):d==="remove"?u=o.filter(m=>m.id!==e.id):u=[{id:e.id,desc:f}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const a=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==a&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":a},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Slt=[Wot,ult,ilt,alt,Hot,Kot,dlt,flt,Nlt,rlt,hlt,mlt,plt,glt,llt];function Clt(e){var t,n;const r=[...Slt,...(t=e._features)!=null?t:[]];let i={_features:r};const a=i._features.reduce((h,m)=>Object.assign(h,m.getDefaultOptions==null?void 0:m.getDefaultOptions(i)),{}),o=h=>i.options.mergeOptions?i.options.mergeOptions(a,h):{...a,...h};let c={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(h=>{var m;c=(m=h.getInitialState==null?void 0:h.getInitialState(c))!=null?m:c});const u=[];let d=!1;const f={_features:r,options:{...a,...e},initialState:c,_queue:h=>{u.push(h),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(m=>setTimeout(()=>{throw m})))},reset:()=>{i.setState(i.initialState)},setOptions:h=>{const m=cu(h,i.options);i.options=o(m)},getState:()=>i.options.state,setState:h=>{i.options.onStateChange==null||i.options.onStateChange(h)},_getRowId:(h,m,g)=>{var p;return(p=i.options.getRowId==null?void 0:i.options.getRowId(h,m,g))!=null?p:`${g?[g.id,m].join("."):m}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(h,m)=>{let g=(m?i.getPrePaginationRowModel():i.getRowModel()).rowsById[h];if(!g&&(g=i.getCoreRowModel().rowsById[h],!g))throw new Error;return g},_getDefaultColumnDef:Tt(()=>[i.options.defaultColumn],h=>{var m;return h=(m=h)!=null?m:{},{header:g=>{const p=g.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:g=>{var p,v;return(p=(v=g.renderValue())==null||v.toString==null?void 0:v.toString())!=null?p:null},...i._features.reduce((g,p)=>Object.assign(g,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...h}},Dt(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Tt(()=>[i._getColumnDefs()],h=>{const m=function(g,p,v){return v===void 0&&(v=0),g.map(b=>{const y=Uot(i,b,v,p),j=b;return y.columns=j.columns?m(j.columns,y,v+1):[],y})};return m(h)},Dt(e,"debugColumns")),getAllFlatColumns:Tt(()=>[i.getAllColumns()],h=>h.flatMap(m=>m.getFlatColumns()),Dt(e,"debugColumns")),_getAllFlatColumnsById:Tt(()=>[i.getAllFlatColumns()],h=>h.reduce((m,g)=>(m[g.id]=g,m),{}),Dt(e,"debugColumns")),getAllLeafColumns:Tt(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(h,m)=>{let g=h.flatMap(p=>p.getLeafColumns());return m(g)},Dt(e,"debugColumns")),getColumn:h=>i._getAllFlatColumnsById()[h]};Object.assign(i,f);for(let h=0;h<i._features.length;h++){const m=i._features[h];m==null||m.createTable==null||m.createTable(i)}return i}function klt(){return e=>Tt(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,a,o){a===void 0&&(a=0);const l=[];for(let u=0;u<i.length;u++){const d=KM(e,e._getRowId(i[u],u,o),i[u],u,a,void 0,o==null?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,l.push(d),e.options.getSubRows){var c;d.originalSubRows=e.options.getSubRows(i[u],u),(c=d.originalSubRows)!=null&&c.length&&(d.subRows=r(d.originalSubRows,a+1,d))}}return l};return n.rows=r(t),n},Dt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Plt(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Elt(e,t,n){return n.options.filterFromLeafRows?_lt(e,t,n):Alt(e,t,n)}function _lt(e,t,n){var r;const i=[],a={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){var f;let m=c[h];const g=KM(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);if(g.columnFilters=m.columnFilters,(f=m.subRows)!=null&&f.length&&u<o){if(g.subRows=l(m.subRows,u+1),m=g,t(m)&&!g.subRows.length){d.push(m),a[m.id]=m,i.push(m);continue}if(t(m)||g.subRows.length){d.push(m),a[m.id]=m,i.push(m);continue}}else m=g,t(m)&&(d.push(m),a[m.id]=m,i.push(m))}return d};return{rows:l(e),flatRows:i,rowsById:a}}function Alt(e,t,n){var r;const i=[],a={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){let m=c[h];if(t(m)){var f;if((f=m.subRows)!=null&&f.length&&u<o){const p=KM(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);p.subRows=l(m.subRows,u+1),m=p}d.push(m),i.push(m),a[m.id]=m}}return d};return{rows:l(e),flatRows:i,rowsById:a}}function Tlt(){return e=>Tt(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let h=0;h<t.flatRows.length;h++)t.flatRows[h].columnFilters={},t.flatRows[h].columnFiltersMeta={};return t}const i=[],a=[];(n??[]).forEach(h=>{var m;const g=e.getColumn(h.id);if(!g)return;const p=g.getFilterFn();p&&i.push({id:h.id,filterFn:p,resolvedValue:(m=p.resolveFilterValue==null?void 0:p.resolveFilterValue(h.value))!=null?m:h.value})});const o=(n??[]).map(h=>h.id),l=e.getGlobalFilterFn(),c=e.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());r&&l&&c.length&&(o.push("__global__"),c.forEach(h=>{var m;a.push({id:h.id,filterFn:l,resolvedValue:(m=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?m:r})}));let u,d;for(let h=0;h<t.flatRows.length;h++){const m=t.flatRows[h];if(m.columnFilters={},i.length)for(let g=0;g<i.length;g++){u=i[g];const p=u.id;m.columnFilters[p]=u.filterFn(m,p,u.resolvedValue,v=>{m.columnFiltersMeta[p]=v})}if(a.length){for(let g=0;g<a.length;g++){d=a[g];const p=d.id;if(d.filterFn(m,p,d.resolvedValue,v=>{m.columnFiltersMeta[p]=v})){m.columnFilters.__global__=!0;break}}m.columnFilters.__global__!==!0&&(m.columnFilters.__global__=!1)}}const f=h=>{for(let m=0;m<o.length;m++)if(h.columnFilters[o[m]]===!1)return!1;return!0};return Elt(t.rows,f,e)},Dt(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Dlt(e){return t=>Tt(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:a}=n;let{rows:o,flatRows:l,rowsById:c}=r;const u=i*a,d=u+i;o=o.slice(u,d);let f;t.options.paginateExpandedRows?f={rows:o,flatRows:l,rowsById:c}:f=Plt({rows:o,flatRows:l,rowsById:c}),f.flatRows=[];const h=m=>{f.flatRows.push(m),m.subRows.length&&m.subRows.forEach(h)};return f.rows.forEach(h),f},Dt(t.options,"debugTable"))}function Olt(){return e=>Tt(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],a=r.filter(c=>{var u;return(u=e.getColumn(c.id))==null?void 0:u.getCanSort()}),o={};a.forEach(c=>{const u=e.getColumn(c.id);u&&(o[c.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const l=c=>{const u=c.map(d=>({...d}));return u.sort((d,f)=>{for(let m=0;m<a.length;m+=1){var h;const g=a[m],p=o[g.id],v=p.sortUndefined,b=(h=g==null?void 0:g.desc)!=null?h:!1;let y=0;if(v){const j=d.getValue(g.id),N=f.getValue(g.id),w=j===void 0,S=N===void 0;if(w||S){if(v==="first")return w?-1:1;if(v==="last")return w?1:-1;y=w&&S?0:w?v:-v}}if(y===0&&(y=p.sortingFn(d,f,g.id)),y!==0)return b&&(y*=-1),p.invertSorting&&(y*=-1),y}return d.index-f.index}),u.forEach(d=>{var f;i.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=l(d.subRows))}),u};return{rows:l(n.rows),flatRows:i,rowsById:n.rowsById}},Dt(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Cj(e,t){return e?Ilt(e)?x.createElement(e,t):e:null}function Ilt(e){return Mlt(e)||typeof e=="function"||Rlt(e)}function Mlt(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function Rlt(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function $lt(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=x.useState(()=>({current:Clt(t)})),[r,i]=x.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}function od({columns:e,data:t,searchKey:n,searchPlaceholder:r="Search...",enableSelection:i=!1,enableColumnVisibility:a=!0,enableExport:o=!0,enableSorting:l=!0,enableFiltering:c=!0,enablePagination:u=!1,maxHeight:d="calc(100vh - 300px)",onSelectionChange:f,onExport:h,className:m,emptyMessage:g="No results found.",getRowId:p}){var T,R;const[v,b]=x.useState([]),[y,j]=x.useState([]),[N,w]=x.useState({}),[S,k]=x.useState({}),[C,A]=x.useState(""),D=x.useMemo(()=>i?[{id:"select",header:({table:E})=>s.jsx(Wt,{checked:E.getIsAllPageRowsSelected()||E.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:B=>E.toggleAllPageRowsSelected(!!B),"aria-label":"Select all"}),cell:({row:E})=>s.jsx(Wt,{checked:E.getIsSelected(),onCheckedChange:B=>E.toggleSelected(!!B),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},...e]:e,[e,i]),P=$lt({data:t,columns:D,onSortingChange:b,onColumnFiltersChange:j,getCoreRowModel:klt(),...u?{getPaginationRowModel:Dlt()}:{},getSortedRowModel:Olt(),getFilteredRowModel:Tlt(),onColumnVisibilityChange:w,onRowSelectionChange:k,onGlobalFilterChange:A,globalFilterFn:n?(F,E,B)=>{const L=String(B).toLowerCase();if(n==="name"){const $=String(F.original.firstName||"").toLowerCase(),z=String(F.original.lastName||"").toLowerCase(),Y=`${$} ${z}`.trim(),ne=String(F.original.email||"").toLowerCase(),te=String(F.original.company||"").toLowerCase();return Y.includes(L)||ne.includes(L)||te.includes(L)}const I=String(F.original[n]||"").toLowerCase(),q=String(F.original.code||"").toLowerCase();return I.includes(L)||q.includes(L)}:void 0,state:{sorting:v,columnFilters:y,columnVisibility:N,rowSelection:S,globalFilter:C},enableSorting:l,enableColumnResizing:!1,getRowId:p});x.useEffect(()=>{if(f){const F=P.getFilteredSelectedRowModel().rows.map(E=>E.original);f(F)}},[S,P,f]);const _=P.getFilteredSelectedRowModel().rows,O=_.length>0,M=F=>{if(h)if(F)h(null);else{const E=_.map(B=>B.original);h(E)}};return s.jsxs("div",{className:he("space-y-4",m),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2 flex-1",children:c&&n&&s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{placeholder:r,value:C??"",onChange:F=>A(F.target.value),className:"pl-9"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[O&&i&&s.jsxs("div",{className:"text-sm text-muted-foreground mr-2",children:[_.length," selected"]}),o&&h&&s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"Export",s.jsx(ar,{className:"h-4 w-4 ml-2"})]})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>M(!1),disabled:!O,children:["Export Selected (",_.length,")"]}),s.jsxs(ct,{onClick:()=>M(!0),children:["Export All (",P.getFilteredRowModel().rows.length,")"]})]})]}),a&&s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(Eu,{className:"h-4 w-4 mr-2"}),"Columns",s.jsx(ar,{className:"h-4 w-4 ml-2"})]})}),s.jsxs(Nn,{align:"end",className:"w-[200px]",children:[s.jsx(hi,{children:"Toggle columns"}),s.jsx(fr,{}),P.getAllColumns().filter(F=>F.getCanHide()).map(F=>s.jsx(Mh,{className:"capitalize",checked:F.getIsVisible(),onCheckedChange:E=>F.toggleVisibility(!!E),children:F.id==="select"?"Select":String(F.id).replace(/_/g," ")},F.id))]})]})]})]}),s.jsx("div",{className:"rounded-md border",children:u?s.jsxs(Um,{children:[s.jsx(Wm,{children:P.getHeaderGroups().map(F=>s.jsx(la,{children:F.headers.map(E=>s.jsx(ns,{className:"h-12",children:E.isPlaceholder?null:Cj(E.column.columnDef.header,E.getContext())},E.id))},F.id))}),s.jsx(Hm,{children:(T=P.getRowModel().rows)!=null&&T.length?P.getRowModel().rows.map(F=>s.jsx(la,{"data-state":F.getIsSelected()&&"selected",className:he(F.getIsSelected()&&"bg-muted/50"),children:F.getVisibleCells().map(E=>s.jsx(Mr,{children:Cj(E.column.columnDef.cell,E.getContext())},E.id))},F.id)):s.jsx(la,{children:s.jsx(Mr,{colSpan:D.length,className:"h-24 text-center",children:g})})})]}):s.jsx("div",{style:{maxHeight:d},className:"overflow-auto",children:s.jsxs(Um,{children:[s.jsx(Wm,{className:"sticky top-0 bg-background z-10",children:P.getHeaderGroups().map(F=>s.jsx(la,{children:F.headers.map(E=>s.jsx(ns,{className:"h-12",children:E.isPlaceholder?null:Cj(E.column.columnDef.header,E.getContext())},E.id))},F.id))}),s.jsx(Hm,{children:(R=P.getRowModel().rows)!=null&&R.length?P.getRowModel().rows.map(F=>s.jsx(la,{"data-state":F.getIsSelected()&&"selected",className:he(F.getIsSelected()&&"bg-muted/50"),children:F.getVisibleCells().map(E=>s.jsx(Mr,{children:Cj(E.column.columnDef.cell,E.getContext())},E.id))},F.id)):s.jsx(la,{children:s.jsx(Mr,{colSpan:D.length,className:"h-24 text-center",children:g})})})]})})}),u&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[P.getFilteredRowModel().rows.length," row(s) total"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>P.previousPage(),disabled:!P.getCanPreviousPage(),children:"Previous"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",P.getState().pagination.pageIndex+1," of ",P.getPageCount()]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>P.nextPage(),disabled:!P.getCanNextPage(),children:"Next"})]})]}),!u&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[P.getFilteredRowModel().rows.length," row(s) total"]})]})}function Qn({column:e,children:t,className:n}){return s.jsxs(H,{variant:"ghost",onClick:e.getToggleSortingHandler(),className:he("h-8 -ml-4 hover:bg-transparent",n),children:[t,s.jsx(cme,{className:"ml-2 h-4 w-4"})]})}function Flt(){var D;const{selectedProjectId:e}=jt(),{toast:t}=Nt(),{selectedStakeholders:n,setSelectedStakeholders:r}=eg(),[i,a]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState({name:"",role:"other",email:"",phone:"",organization:"",communicationStyle:"",preferredChannel:"",updateFrequency:"",engagementLevel:void 0}),{data:h=[],isLoading:m,error:g,refetch:p}=je({queryKey:[`/api/projects/${e}/stakeholders`],enabled:!!e,retry:1}),v=Pe({mutationFn:async P=>{if(!e)throw new Error("No project selected");await fe("POST","/api/stakeholders",{...P,projectId:e})},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/stakeholders`]}),a(!1),l(null),f({name:"",role:"other",email:"",phone:"",organization:"",communicationStyle:"",preferredChannel:"",updateFrequency:"",engagementLevel:void 0}),t({title:"Success",description:"Stakeholder added successfully"})},onError:P=>{t({title:"Error",description:P.message||"Failed to add stakeholder",variant:"destructive"})}}),b=Pe({mutationFn:async({id:P,data:_})=>{await fe("PATCH",`/api/stakeholders/${P}`,_)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/stakeholders`]}),a(!1),l(null),f({name:"",role:"other",email:"",phone:"",organization:"",communicationStyle:"",preferredChannel:"",updateFrequency:"",engagementLevel:void 0}),t({title:"Success",description:"Stakeholder updated successfully"})},onError:P=>{t({title:"Error",description:P.message||"Failed to update stakeholder",variant:"destructive"})}}),y=Pe({mutationFn:async P=>{await fe("DELETE",`/api/stakeholders/${P}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/stakeholders`]}),t({title:"Success",description:"Stakeholder deleted successfully"})},onError:P=>{t({title:"Error",description:P.message||"Failed to delete stakeholder",variant:"destructive"})}}),j=P=>{P.preventDefault(),o?b.mutate({id:o.id,data:d}):v.mutate(d)},N=P=>{l(P),f({name:P.name,role:P.role,email:P.email||"",phone:P.phone||"",organization:P.organization||"",communicationStyle:P.communicationStyle||"",preferredChannel:P.preferredChannel||"",updateFrequency:P.updateFrequency||"",engagementLevel:P.engagementLevel||void 0}),a(!0)},w=async P=>{window.confirm("Are you sure you want to delete this stakeholder?")&&y.mutate(P)},S=()=>{l(null),f({name:"",role:"other",email:"",phone:"",organization:"",communicationStyle:"",preferredChannel:"",updateFrequency:"",engagementLevel:void 0}),a(!0)},k=Pe({mutationFn:async P=>{await Promise.all(P.map(_=>fe("DELETE",`/api/stakeholders/${_}`)))},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/stakeholders`]}),u(!1),r([]),t({title:"Success",description:`${n.length} stakeholder(s) deleted successfully`})},onError:P=>{t({title:"Error",description:P.message||"Failed to delete stakeholders",variant:"destructive"})}}),C=x.useCallback((P,_)=>{P==="delete"&&u(!0)},[u]);Q.useEffect(()=>eb("stakeholders",C),[C]);const A=x.useMemo(()=>[{accessorKey:"name",header:({column:P})=>s.jsx(Qn,{column:P,children:"Name"}),cell:({row:P})=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yi,{className:"h-8 w-8",children:s.jsx(bi,{className:"text-xs",children:P.original.name.split(" ").map(_=>_[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:P.original.name}),P.original.organization&&s.jsx("div",{className:"text-xs text-muted-foreground",children:P.original.organization})]})]})},{accessorKey:"role",header:({column:P})=>s.jsx(Qn,{column:P,children:"Role"}),cell:({row:P})=>s.jsx(ae,{variant:"secondary",className:"capitalize",children:P.original.role})},{id:"contactInfo",header:"Contact Info",cell:({row:P})=>s.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[P.original.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:P.original.email})]}),P.original.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o1,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:P.original.phone})]}),!P.original.email&&!P.original.phone&&s.jsx("span",{className:"text-muted-foreground",children:"-"})]})},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:P})=>{const _=P.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>N(_),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>w(_.id),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})}}],[]);return e?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Stakeholders"}),s.jsx("p",{className:"text-muted-foreground",children:"Project team and external contacts"})]}),s.jsx(H,{onClick:S,"data-testid":"button-add-stakeholder",children:"Add Stakeholder"})]}),g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Failed to load stakeholders. ",g.message]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>p(),"data-testid":"button-retry",children:"Retry"})]})]}),m?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading stakeholders..."})}):s.jsx("div",{className:"space-y-4",children:s.jsx(od,{columns:A,data:h,searchKey:"name",searchPlaceholder:"Search stakeholders by name, email, or organization...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,enablePagination:!1,maxHeight:"calc(100vh - 400px)",onSelectionChange:r,emptyMessage:h.length===0?"No stakeholders yet. Add your first stakeholder!":"No stakeholders found.",getRowId:P=>P.id.toString()})}),s.jsx(Bs,{open:c,onOpenChange:u,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Stakeholders"}),s.jsxs(bs,{children:["Are you sure you want to delete ",n.length," selected stakeholder(s)? This action cannot be undone.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Stakeholders to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:n.map(P=>s.jsxs("li",{children:[P.name," ",P.email?`(${P.email})`:""]},P.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const P=n.map(_=>_.id);k.mutate(P)},className:"bg-destructive text-destructive-foreground",disabled:k.isPending,children:k.isPending?"Deleting...":`Delete ${n.length} Stakeholder(s)`})]})]})}),s.jsx(zt,{open:i,onOpenChange:a,children:s.jsxs(Rt,{"data-testid":"dialog-stakeholder",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:o?"Edit Stakeholder":"Add Stakeholder"})}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs(Vr,{defaultValue:"basic",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"basic",children:"Basic Info"}),s.jsx(tt,{value:"communication",children:"Communication"})]}),s.jsxs(ht,{value:"basic",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",children:"Name"}),s.jsx(Ce,{id:"name",value:d.name,onChange:P=>f({...d,name:P.target.value}),required:!0,"data-testid":"input-stakeholder-name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"role",children:"Role"}),s.jsxs(ze,{value:d.role,onValueChange:P=>f({...d,role:P}),children:[s.jsx(Fe,{"data-testid":"select-stakeholder-role",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"sponsor",children:"Sponsor"}),s.jsx(X,{value:"client",children:"Client"}),s.jsx(X,{value:"team-member",children:"Team Member"}),s.jsx(X,{value:"contractor",children:"Contractor"}),s.jsx(X,{value:"consultant",children:"Consultant"}),s.jsx(X,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"email",children:"Email"}),s.jsx(Ce,{id:"email",type:"email",value:d.email,onChange:P=>f({...d,email:P.target.value}),"data-testid":"input-stakeholder-email"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"phone",children:"Phone"}),s.jsx(Ce,{id:"phone",type:"tel",value:d.phone,onChange:P=>f({...d,phone:P.target.value}),"data-testid":"input-stakeholder-phone"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"organization",children:"Organization"}),s.jsx(Ce,{id:"organization",value:d.organization,onChange:P=>f({...d,organization:P.target.value}),"data-testid":"input-stakeholder-organization"})]})]}),s.jsxs(ht,{value:"communication",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"communicationStyle",children:"Communication Style"}),s.jsxs(ze,{value:d.communicationStyle,onValueChange:P=>f({...d,communicationStyle:P}),children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select style..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"direct",children:"Direct / Brief"}),s.jsx(X,{value:"diplomatic",children:"Diplomatic / Formal"}),s.jsx(X,{value:"detailed",children:"Detailed / Comprehensive"}),s.jsx(X,{value:"brief",children:"Brief / Concise"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"How this stakeholder prefers to communicate"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"preferredChannel",children:"Preferred Channel"}),s.jsxs(ze,{value:d.preferredChannel,onValueChange:P=>f({...d,preferredChannel:P}),children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select channel..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"email",children:"Email"}),s.jsx(X,{value:"chat",children:"Chat / Instant Message"}),s.jsx(X,{value:"phone",children:"Phone Call"}),s.jsx(X,{value:"meeting",children:"In-Person Meeting"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Preferred method for updates and communication"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"updateFrequency",children:"Update Frequency"}),s.jsxs(ze,{value:d.updateFrequency,onValueChange:P=>f({...d,updateFrequency:P}),children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select frequency..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"daily",children:"Daily"}),s.jsx(X,{value:"weekly",children:"Weekly"}),s.jsx(X,{value:"bi-weekly",children:"Bi-weekly"}),s.jsx(X,{value:"milestone-only",children:"Milestone Only"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"How often this stakeholder expects project updates"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"engagementLevel",children:"Engagement Level (1-5)"}),s.jsxs(ze,{value:((D=d.engagementLevel)==null?void 0:D.toString())||"",onValueChange:P=>f({...d,engagementLevel:P?parseInt(P):void 0}),children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select level..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"1",children:"1 - Low Engagement"}),s.jsx(X,{value:"2",children:"2 - Below Average"}),s.jsx(X,{value:"3",children:"3 - Average"}),s.jsx(X,{value:"4",children:"4 - High Engagement"}),s.jsx(X,{value:"5",children:"5 - Very High Engagement"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current level of stakeholder engagement (can be updated over time)"})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel",children:"Cancel"}),s.jsx(H,{type:"submit",disabled:v.isPending||b.isPending,"data-testid":"button-submit",children:v.isPending||b.isPending?"Saving...":o?"Update Stakeholder":"Add Stakeholder"})]})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select a project from the dropdown above"})]})})}var Joe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Vl,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var D=w(A);D.chunkSize=parseInt(D.chunkSize),A.step||A.chunk||(D.chunkSize=null),this._handle=new p(D),(this._handle.streamer=this)._config=D}).call(this,C),this.parseChunk=function(A,D){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let O=this._config.newline;O||(_=this._config.quoteChar||'"',O=this._handle.guessLineEndings(A,_)),A=[...A.split(O).slice(P)].join(O)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(_=this._config.beforeFirstChunk(A))!==void 0&&(A=_),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+A,_=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=_.meta.cursor,P=(this._finished||(this._partialLine=P.substring(A-this._baseIndex),this._baseIndex=A),_&&_.data&&(this._rowCount+=_.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:_,workerId:u.WORKER_ID,finished:P});else if(k(this._config.chunk)&&!D){if(this._config.chunk(_,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=_=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(_.data),this._completeResults.errors=this._completeResults.errors.concat(_.errors),this._completeResults.meta=_.meta),this._completed||!P||!k(this._config.complete)||_&&_.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||_&&_.meta.paused||this._nextChunk(),_}this._halted=!0},this._sendError=function(A){k(this._config.error)?this._config.error(A):o&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:A,finished:!1})}}function f(C){var A;(C=C||{}).chunkSize||(C.chunkSize=u.RemoteChunkSize),d.call(this,C),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),a||(A.onload=S(this._chunkLoaded,this),A.onerror=S(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var D,P=this._config.downloadRequestHeaders;for(D in P)A.setRequestHeader(D,P[D])}var _;this._config.chunkSize&&(_=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+_));try{A.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}a&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(D){D=A.statusText||D,this._sendError(new Error(D))}}function h(C){(C=C||{}).chunkSize||(C.chunkSize=u.LocalChunkSize),d.call(this,C);var A,D,P=typeof FileReader<"u";this.stream=function(_){this._input=_,D=_.slice||_.webkitSlice||_.mozSlice,P?((A=new FileReader).onload=S(this._chunkLoaded,this),A.onerror=S(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),_=D.call(_,this._start,O)),A.readAsText(_,this._config.encoding));P||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(A.error)}}function m(C){var A;d.call(this,C=C||{}),this.stream=function(D){return A=D,this._nextChunk()},this._nextChunk=function(){var D,P;if(!this._finished)return D=this._config.chunkSize,A=D?(P=A.substring(0,D),A.substring(D)):(P=A,""),this._finished=!A,this.parseChunk(P)}}function g(C){d.call(this,C=C||{});var A=[],D=!0,P=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):D=!0},this._streamData=S(function(_){try{A.push(typeof _=="string"?_:_.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(O){this._streamError(O)}},this),this._streamError=S(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=S(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(C){var A,D,P,_,O=Math.pow(2,53),M=-O,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,E=0,B=0,L=!1,I=!1,q=[],$={data:[],errors:[],meta:{}};function z(pe){return C.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function Y(){if($&&P&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),P=!1),C.skipEmptyLines&&($.data=$.data.filter(function(ye){return!z(ye)})),ne()){let ye=function(re,ue){k(C.transformHeader)&&(re=C.transformHeader(re,ue)),q.push(re)};if($)if(Array.isArray($.data[0])){for(var pe=0;ne()&&pe<$.data.length;pe++)$.data[pe].forEach(ye);$.data.splice(0,1)}else $.data.forEach(ye)}function J(ye,re){for(var ue=C.header?{}:[],ke=0;ke<ye.length;ke++){var $e=ke,Ve=ye[ke],Ve=((gt,He)=>(be=>(C.dynamicTypingFunction&&C.dynamicTyping[be]===void 0&&(C.dynamicTyping[be]=C.dynamicTypingFunction(be)),(C.dynamicTyping[be]||C.dynamicTyping)===!0))(gt)?He==="true"||He==="TRUE"||He!=="false"&&He!=="FALSE"&&((be=>{if(T.test(be)&&(be=parseFloat(be),M<be&&be<O))return 1})(He)?parseFloat(He):R.test(He)?new Date(He):He===""?null:He):He)($e=C.header?ke>=q.length?"__parsed_extra":q[ke]:$e,Ve=C.transform?C.transform(Ve,$e):Ve);$e==="__parsed_extra"?(ue[$e]=ue[$e]||[],ue[$e].push(Ve)):ue[$e]=Ve}return C.header&&(ke>q.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+q.length+" fields but parsed "+ke,B+re):ke<q.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+q.length+" fields but parsed "+ke,B+re)),ue}var xe;$&&(C.header||C.dynamicTyping||C.transform)&&(xe=1,!$.data.length||Array.isArray($.data[0])?($.data=$.data.map(J),xe=$.data.length):$.data=J($.data,0),C.header&&$.meta&&($.meta.fields=q),B+=xe)}function ne(){return C.header&&q.length===0}function te(pe,J,xe,ye){pe={type:pe,code:J,message:xe},ye!==void 0&&(pe.row=ye),$.errors.push(pe)}k(C.step)&&(_=C.step,C.step=function(pe){$=pe,ne()?Y():(Y(),$.data.length!==0&&(E+=pe.data.length,C.preview&&E>C.preview?D.abort():($.data=$.data[0],_($,F))))}),this.parse=function(pe,J,xe){var ye=C.quoteChar||'"',ye=(C.newline||(C.newline=this.guessLineEndings(pe,ye)),P=!1,C.delimiter?k(C.delimiter)&&(C.delimiter=C.delimiter(pe),$.meta.delimiter=C.delimiter):((ye=((re,ue,ke,$e,Ve)=>{var gt,He,be,xt;Ve=Ve||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var sn=0;sn<Ve.length;sn++){for(var K,de=Ve[sn],ve=0,Oe=0,Z=0,W=(be=void 0,new b({comments:$e,delimiter:de,newline:ue,preview:10}).parse(re)),me=0;me<W.data.length;me++)ke&&z(W.data[me])?Z++:(K=W.data[me].length,Oe+=K,be===void 0?be=K:0<K&&(ve+=Math.abs(K-be),be=K));0<W.data.length&&(Oe/=W.data.length-Z),(He===void 0||ve<=He)&&(xt===void 0||xt<Oe)&&1.99<Oe&&(He=ve,gt=de,xt=Oe)}return{successful:!!(C.delimiter=gt),bestDelimiter:gt}})(pe,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=ye.bestDelimiter:(P=!0,C.delimiter=u.DefaultDelimiter),$.meta.delimiter=C.delimiter),w(C));return C.preview&&C.header&&ye.preview++,A=pe,D=new b(ye),$=D.parse(A,J,xe),Y(),L?{meta:{paused:!0}}:$||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,D.abort(),A=k(C.chunk)?"":A.substring(D.getCharIndex())},this.resume=function(){F.streamer._halted?(L=!1,F.streamer.parseChunk(A,!0)):setTimeout(F.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,D.abort(),$.meta.aborted=!0,k(C.complete)&&C.complete($),A=""},this.guessLineEndings=function(re,ye){re=re.substring(0,1048576);var ye=new RegExp(v(ye)+"([^]*?)"+v(ye),"gm"),xe=(re=re.replace(ye,"")).split("\r"),ye=re.split(`
`),re=1<ye.length&&ye[0].length<xe[0].length;if(xe.length===1||re)return`
`;for(var ue=0,ke=0;ke<xe.length;ke++)xe[ke][0]===`
`&&ue++;return ue>=xe.length/2?`\r
`:"\r"}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(C){var A=(C=C||{}).delimiter,D=C.newline,P=C.comments,_=C.step,O=C.preview,M=C.fastMode,T=null,R=!1,F=C.quoteChar==null?'"':C.quoteChar,E=F;if(C.escapeChar!==void 0&&(E=C.escapeChar),(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=","),P===A)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<u.BAD_DELIMITERS.indexOf(P))&&(P=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var B=0,L=!1;this.parse=function(I,q,$){if(typeof I!="string")throw new Error("Input must be a string");var z=I.length,Y=A.length,ne=D.length,te=P.length,pe=k(_),J=[],xe=[],ye=[],re=B=0;if(!I)return ve();if(M||M!==!1&&I.indexOf(F)===-1){for(var ue=I.split(D),ke=0;ke<ue.length;ke++){if(ye=ue[ke],B+=ye.length,ke!==ue.length-1)B+=D.length;else if($)return ve();if(!P||ye.substring(0,te)!==P){if(pe){if(J=[],xt(ye.split(A)),Oe(),L)return ve()}else xt(ye.split(A));if(O&&O<=ke)return J=J.slice(0,O),ve(!0)}}return ve()}for(var $e=I.indexOf(A,B),Ve=I.indexOf(D,B),gt=new RegExp(v(E)+v(F),"g"),He=I.indexOf(F,B);;)if(I[B]===F)for(He=B,B++;;){if((He=I.indexOf(F,He+1))===-1)return $||xe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:J.length,index:B}),K();if(He===z-1)return K(I.substring(B,He).replace(gt,F));if(F===E&&I[He+1]===E)He++;else if(F===E||He===0||I[He-1]!==E){$e!==-1&&$e<He+1&&($e=I.indexOf(A,He+1));var be=sn((Ve=Ve!==-1&&Ve<He+1?I.indexOf(D,He+1):Ve)===-1?$e:Math.min($e,Ve));if(I.substr(He+1+be,Y)===A){ye.push(I.substring(B,He).replace(gt,F)),I[B=He+1+be+Y]!==F&&(He=I.indexOf(F,B)),$e=I.indexOf(A,B),Ve=I.indexOf(D,B);break}if(be=sn(Ve),I.substring(He+1+be,He+1+be+ne)===D){if(ye.push(I.substring(B,He).replace(gt,F)),de(He+1+be+ne),$e=I.indexOf(A,B),He=I.indexOf(F,B),pe&&(Oe(),L))return ve();if(O&&J.length>=O)return ve(!0);break}xe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:J.length,index:B}),He++}}else if(P&&ye.length===0&&I.substring(B,B+te)===P){if(Ve===-1)return ve();B=Ve+ne,Ve=I.indexOf(D,B),$e=I.indexOf(A,B)}else if($e!==-1&&($e<Ve||Ve===-1))ye.push(I.substring(B,$e)),B=$e+Y,$e=I.indexOf(A,B);else{if(Ve===-1)break;if(ye.push(I.substring(B,Ve)),de(Ve+ne),pe&&(Oe(),L))return ve();if(O&&J.length>=O)return ve(!0)}return K();function xt(Z){J.push(Z),re=B}function sn(Z){var W=0;return W=Z!==-1&&(Z=I.substring(He+1,Z))&&Z.trim()===""?Z.length:W}function K(Z){return $||(Z===void 0&&(Z=I.substring(B)),ye.push(Z),B=z,xt(ye),pe&&Oe()),ve()}function de(Z){B=Z,xt(ye),ye=[],Ve=I.indexOf(D,B)}function ve(Z){if(C.header&&!q&&J.length&&!R){var W=J[0],me=Object.create(null),Ae=new Set(W);let Je=!1;for(let St=0;St<W.length;St++){let Jn=W[St];if(me[Jn=k(C.transformHeader)?C.transformHeader(Jn,St):Jn]){let Rn,Cs=me[Jn];for(;Rn=Jn+"_"+Cs,Cs++,Ae.has(Rn););Ae.add(Rn),W[St]=Rn,me[Jn]++,Je=!0,(T=T===null?{}:T)[Rn]=Jn}else me[Jn]=1,W[St]=Jn;Ae.add(Jn)}Je&&console.warn("Duplicate headers found and renamed."),R=!0}return{data:J,errors:xe,meta:{delimiter:A,linebreak:D,aborted:L,truncated:!!Z,cursor:re+(q||0),renamedHeaders:T}}}function Oe(){_(ve()),J=[],xe=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return B}}function y(C){var A=C.data,D=l[A.workerId],P=!1;if(A.error)D.userError(A.error,A.file);else if(A.results&&A.results.data){var _={abort:function(){P=!0,j(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:N,resume:N};if(k(D.userStep)){for(var O=0;O<A.results.data.length&&(D.userStep({data:A.results.data[O],errors:A.results.errors,meta:A.results.meta},_),!P);O++);delete A.results}else k(D.userChunk)&&(D.userChunk(A.results,_,A.file),delete A.results)}A.finished&&!P&&j(A.workerId,A.results)}function j(C,A){var D=l[C];k(D.userComplete)&&D.userComplete(A),D.terminate(),delete l[C]}function N(){throw new Error("Not implemented.")}function w(C){if(typeof C!="object"||C===null)return C;var A,D=Array.isArray(C)?[]:{};for(A in C)D[A]=w(C[A]);return D}function S(C,A){return function(){C.apply(A,arguments)}}function k(C){return typeof C=="function"}return u.parse=function(C,A){var D=(A=A||{}).dynamicTyping||!1;if(k(D)&&(A.dynamicTypingFunction=D,D={}),A.dynamicTyping=D,A.transform=!!k(A.transform)&&A.transform,!A.worker||!u.WORKERS_SUPPORTED)return D=null,u.NODE_STREAM_INPUT,typeof C=="string"?(C=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(C),D=new(A.download?f:m)(A)):C.readable===!0&&k(C.read)&&k(C.on)?D=new g(A):(r.File&&C instanceof File||C instanceof Object)&&(D=new h(A)),D.stream(C);(D=(()=>{var P;return!!u.WORKERS_SUPPORTED&&(P=(()=>{var _=r.URL||r.webkitURL||null,O=n.toString();return u.BLOB_URL||(u.BLOB_URL=_.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(P=new r.Worker(P)).onmessage=y,P.id=c++,l[P.id]=P)})()).userStep=A.step,D.userChunk=A.chunk,D.userComplete=A.complete,D.userError=A.error,A.step=k(A.step),A.chunk=k(A.chunk),A.complete=k(A.complete),A.error=k(A.error),delete A.worker,D.postMessage({input:C,config:A,workerId:D.id})},u.unparse=function(C,A){var D=!1,P=!0,_=",",O=`\r
`,M='"',T=M+M,R=!1,F=null,E=!1,B=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||u.BAD_DELIMITERS.filter(function(q){return A.delimiter.indexOf(q)!==-1}).length||(_=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(D=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(R=A.skipEmptyLines),typeof A.newline=="string"&&(O=A.newline),typeof A.quoteChar=="string"&&(M=A.quoteChar),typeof A.header=="boolean"&&(P=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");F=A.columns}A.escapeChar!==void 0&&(T=A.escapeChar+M),A.escapeFormulae instanceof RegExp?E=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(E=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(M),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return L(null,C,R);if(typeof C[0]=="object")return L(F||Object.keys(C[0]),C,R)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||F),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),L(C.fields||[],C.data||[],R);throw new Error("Unable to serialize unrecognized input");function L(q,$,z){var Y="",ne=(typeof q=="string"&&(q=JSON.parse(q)),typeof $=="string"&&($=JSON.parse($)),Array.isArray(q)&&0<q.length),te=!Array.isArray($[0]);if(ne&&P){for(var pe=0;pe<q.length;pe++)0<pe&&(Y+=_),Y+=I(q[pe],pe);0<$.length&&(Y+=O)}for(var J=0;J<$.length;J++){var xe=(ne?q:$[J]).length,ye=!1,re=ne?Object.keys($[J]).length===0:$[J].length===0;if(z&&!ne&&(ye=z==="greedy"?$[J].join("").trim()==="":$[J].length===1&&$[J][0].length===0),z==="greedy"&&ne){for(var ue=[],ke=0;ke<xe;ke++){var $e=te?q[ke]:ke;ue.push($[J][$e])}ye=ue.join("").trim()===""}if(!ye){for(var Ve=0;Ve<xe;Ve++){0<Ve&&!re&&(Y+=_);var gt=ne&&te?q[Ve]:Ve;Y+=I($[J][gt],Ve)}J<$.length-1&&(!z||0<xe&&!re)&&(Y+=O)}}return Y}function I(q,$){var z,Y;return q==null?"":q.constructor===Date?JSON.stringify(q).slice(1,25):(Y=!1,E&&typeof q=="string"&&E.test(q)&&(q="'"+q,Y=!0),z=q.toString().replace(B,T),(Y=Y||D===!0||typeof D=="function"&&D(q,$)||Array.isArray(D)&&D[$]||((ne,te)=>{for(var pe=0;pe<te.length;pe++)if(-1<ne.indexOf(te[pe]))return!0;return!1})(z,u.BAD_DELIMITERS)||-1<z.indexOf(_)||z.charAt(0)===" "||z.charAt(z.length-1)===" ")?M+z+M:z)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!a&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=b,u.ParserHandle=p,u.NetworkStreamer=f,u.FileStreamer=h,u.StringStreamer=m,u.ReadableStreamStreamer=g,r.jQuery&&((i=r.jQuery).fn.parse=function(C){var A=C.config||{},D=[];return this.each(function(O){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)D.push({file:this.files[M],inputElem:this,instanceConfig:i.extend({},A)})}),P(),this;function P(){if(D.length===0)k(C.complete)&&C.complete();else{var O,M,T,R,F=D[0];if(k(C.before)){var E=C.before(F.file,F.inputElem);if(typeof E=="object"){if(E.action==="abort")return O="AbortError",M=F.file,T=F.inputElem,R=E.reason,void(k(C.error)&&C.error({name:O},M,T,R));if(E.action==="skip")return void _();typeof E.config=="object"&&(F.instanceConfig=i.extend(F.instanceConfig,E.config))}else if(E==="skip")return void _()}var B=F.instanceConfig.complete;F.instanceConfig.complete=function(L){k(B)&&B(L,F.file,F.inputElem),_()},u.parse(F.file,F.instanceConfig)}}function _(){D.splice(0,1),P()}}),o&&(r.onmessage=function(C){C=C.data,u.WORKER_ID===void 0&&C&&(u.WORKER_ID=C.workerId),typeof C.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(C.input,C.config),finished:!0}):(r.File&&C.input instanceof File||C.input instanceof Object)&&(C=u.parse(C.input,C.config))&&r.postMessage({workerId:u.WORKER_ID,results:C,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(h.prototype=Object.create(d.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(g.prototype=Object.create(d.prototype)).constructor=g,u})})(Joe);var Llt=Joe.exports;const Ap=yn(Llt),OP=[{key:"R",label:"Responsible",description:"Does the work to complete the task",color:"bg-blue-500 text-white"},{key:"A",label:"Accountable",description:"Ultimately answerable for the task",color:"bg-green-500 text-white"},{key:"C",label:"Consulted",description:"Provides input before work is done",color:"bg-yellow-500 text-black"},{key:"I",label:"Informed",description:"Kept up-to-date on progress",color:"bg-purple-500 text-white"}];function zlt({selectedPeople:e,allPeople:t,onSelectionChange:n,raciRole:r,taskId:i,isInherited:a,hasParent:o,onResetToInherited:l,disabled:c}){const[u,d]=x.useState(!1),f=r==="A"&&e.length>1,h=o&&!a&&e.length>0&&l,m=v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);n(b?e.filter(y=>!(y.id===v.id&&y.type===v.type)):[...e,v])},g=t.filter(v=>v.type==="stakeholder"),p=t.filter(v=>v.type==="resource");return s.jsxs("div",{className:"relative",children:[s.jsxs(Ls,{open:u,onOpenChange:d,children:[s.jsx(Si,{asChild:!0,children:s.jsx(H,{variant:"outline",size:"sm",className:`w-full justify-start text-left font-normal min-h-[36px] ${a?"border-dashed bg-muted/50":""} ${f?"border-amber-500":""}`,disabled:c,"data-testid":`raci-cell-${i}-${r}`,children:e.length===0?s.jsx("span",{className:"text-muted-foreground text-xs",children:"Select..."}):s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.slice(0,2).map(v=>s.jsxs(ae,{variant:"secondary",className:`text-[10px] px-1 py-0 ${a?"opacity-70":""}`,children:[v.type==="resource"&&s.jsx(bf,{className:"h-2 w-2 mr-0.5"}),v.name.split(" ")[0]]},`${v.type}-${v.id}`)),e.length>2&&s.jsxs(ae,{variant:"secondary",className:"text-[10px] px-1 py-0",children:["+",e.length-2]})]})})}),s.jsxs(ps,{className:"w-64 p-0",align:"start",children:[s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search people..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No people found."}),g.length>0&&s.jsx(Ms,{heading:"Stakeholders",children:g.map(v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);return s.jsx(Rs,{onSelect:()=>m(v),className:"cursor-pointer",children:s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(Wt,{checked:b,className:"pointer-events-none"}),s.jsx(Bn,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:v.name}),v.role&&s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:v.role})]})]})},`stakeholder-${v.id}`)})}),p.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(bO,{}),s.jsx(Ms,{heading:"Resources",children:p.map(v=>{const b=e.some(y=>y.id===v.id&&y.type===v.type);return s.jsx(Rs,{onSelect:()=>m(v),className:"cursor-pointer",children:s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(Wt,{checked:b,className:"pointer-events-none"}),s.jsx(bf,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm truncate",children:v.name}),v.role&&s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:v.role})]})]})},`resource-${v.id}`)})})]})]})]}),h&&s.jsx("div",{className:"border-t p-2",children:s.jsxs(H,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{l(),d(!1)},children:[s.jsx(OK,{className:"h-3 w-3 mr-1"}),"Reset to parent"]})})]})]}),f&&s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsx("div",{className:"absolute -top-1 -right-1",children:s.jsx(ft,{className:"h-3 w-3 text-amber-500"})})}),s.jsx(dc,{children:s.jsx("p",{className:"text-xs",children:"Warning: Multiple people accountable. Best practice is one person per task."})})]})}),a&&s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsx("div",{className:"absolute -bottom-1 -left-1",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-400"})})}),s.jsx(dc,{children:s.jsx("p",{className:"text-xs",children:"Inherited from parent task"})})]})})]})}function Blt(){const{selectedProject:e}=jt(),{toast:t}=Nt(),[,n]=yr(),[r,i]=x.useState(""),[a,o]=x.useState(new Set),[l,c]=x.useState(!0),u=e==null?void 0:e.id,{data:d=[],isLoading:f}=je({queryKey:["/api/projects",u,"tasks"],enabled:!!u}),{data:h=[],isLoading:m}=je({queryKey:["/api/projects",u,"stakeholders"],enabled:!!u}),{data:g=[],isLoading:p}=je({queryKey:["/api/projects",u,"resources"],enabled:!!u}),{data:v=[],isLoading:b}=je({queryKey:["/api/projects",u,"raci"],enabled:!!u}),y=x.useMemo(()=>{const E=[];return h.forEach(B=>{E.push({id:B.id,name:B.name,type:"stakeholder",role:B.role,organization:B.organization||void 0})}),g.filter(B=>B.type==="human").forEach(B=>{E.push({id:B.id,name:B.name,type:"resource",role:B.discipline||void 0})}),E},[h,g]),j=x.useMemo(()=>{const E=new Map;return v.forEach(B=>{E.has(B.taskId)||E.set(B.taskId,new Map);const L=E.get(B.taskId),I=B.raciType;L.has(I)||L.set(I,{people:[],isInherited:B.isInherited||!1});const q=L.get(I);if(B.stakeholderId){const $=h.find(z=>z.id===B.stakeholderId);$&&q.people.push({id:$.id,name:$.name,type:"stakeholder",role:$.role,organization:$.organization||void 0})}else if(B.resourceId){const $=g.find(z=>z.id===B.resourceId);$&&q.people.push({id:$.id,name:$.name,type:"resource",role:$.discipline||void 0})}}),E},[v,h,g]),N=Pe({mutationFn:async({taskId:E,raciType:B,people:L,isInherited:I=!1,inheritedFromTaskId:q=null})=>{if(!u)throw new Error("No project selected");const $=v.filter(z=>z.taskId===E&&z.raciType===B);for(const z of $)await fe("DELETE",`/api/raci/${z.id}`);for(const z of L)await fe("POST","/api/raci",{projectId:u,taskId:E,raciType:B,stakeholderId:z.type==="stakeholder"?z.id:null,resourceId:z.type==="resource"?z.id:null,isInherited:I,inheritedFromTaskId:q});return{taskId:E,raciType:B,people:L}},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",u,"raci"]})},onError:E=>{t({title:"Update Failed",description:E.message,variant:"destructive"})}}),w=x.useCallback((E,B)=>{const L=j.get(E);return L?L.get(B)||{people:[],isInherited:!1}:{people:[],isInherited:!1}},[j]),S=Pe({mutationFn:async({taskId:E,raciType:B})=>{if(!u)throw new Error("No project selected");return await fe("POST","/api/raci/reset",{taskId:E,raciType:B,projectId:u}),{taskId:E,raciType:B}},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",u,"raci"]}),t({title:"Reset Successful",description:"RACI assignment has been reset to inherit from parent task."})},onError:E=>{t({title:"Reset Failed",description:E.message,variant:"destructive"})}}),k=x.useCallback((E,B,L)=>{B==="A"&&L.length>1&&t({title:"Multiple Accountable Warning",description:"Best practice is to have only one person Accountable per task. Consider reviewing this assignment.",variant:"default"}),N.mutate({taskId:E,raciType:B,people:L})},[N,t]),C=x.useCallback((E,B)=>{S.mutate({taskId:E,raciType:B})},[S]),A=x.useMemo(()=>{if(!r)return d;const E=r.toLowerCase();return d.filter(B=>B.name.toLowerCase().includes(E)||B.wbsCode.toLowerCase().includes(E))},[d,r]),D=x.useMemo(()=>A.filter(E=>!E.parentId).sort((E,B)=>E.wbsCode.localeCompare(B.wbsCode,void 0,{numeric:!0})),[A]),P=x.useCallback(E=>A.filter(B=>B.parentId===E).sort((B,L)=>B.wbsCode.localeCompare(L.wbsCode,void 0,{numeric:!0})),[A]),_=x.useCallback(E=>{o(B=>{const L=new Set(B);return L.has(E)?L.delete(E):L.add(E),L})},[]),O=x.useCallback(()=>{o(new Set(d.map(E=>E.id)))},[d]),M=x.useCallback(()=>{o(new Set)},[]),T=x.useCallback(()=>{if(!e){t({title:"Error",description:"No project selected",variant:"destructive"});return}const E=[],B=(z,Y)=>{const{people:ne,isInherited:te}=w(z.id,"R"),{people:pe,isInherited:J}=w(z.id,"A"),{people:xe,isInherited:ye}=w(z.id,"C"),{people:re,isInherited:ue}=w(z.id,"I");E.push({"WBS Code":z.wbsCode||`#${z.id}`,"Task Name":z.name,Level:Y,Responsible:ne.map($e=>$e.name).join("; ")||"",Accountable:pe.map($e=>$e.name).join("; ")||"",Consulted:xe.map($e=>$e.name).join("; ")||"",Informed:re.map($e=>$e.name).join("; ")||"",Inherited:[te&&"R",J&&"A",ye&&"C",ue&&"I"].filter(Boolean).join(", ")||"None"}),P(z.id).forEach($e=>B($e,Y+1))};D.forEach(z=>B(z,0));const L=Ap.unparse(E),I=new Blob([L],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),$=URL.createObjectURL(I);q.setAttribute("href",$),q.setAttribute("download",`${e.code||"project"}_raci_matrix_${new Date().toISOString().split("T")[0]}.csv`),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL($),t({title:"Success",description:"RACI Matrix exported successfully"})},[e,D,w,P,t]),R=(E,B=0)=>{const L=P(E.id),I=L.length>0,q=a.has(E.id);return s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-[minmax(250px,2fr),repeat(4,minmax(120px,1fr))] gap-2 items-center py-2 px-3 border-b hover:bg-muted/30","data-testid":`raci-row-${E.id}`,children:[s.jsxs("div",{className:"flex items-center gap-1",style:{paddingLeft:`${B*1.25}rem`},children:[I?s.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",onClick:()=>_(E.id),"data-testid":`expand-toggle-${E.id}`,children:q?s.jsx(ar,{className:"h-4 w-4"}):s.jsx(qa,{className:"h-4 w-4"})}):s.jsx("div",{className:"w-6"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:E.name}),s.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:E.wbsCode})]})]}),OP.map($=>{const{people:z,isInherited:Y}=w(E.id,$.key);return s.jsx(zlt,{selectedPeople:z,allPeople:y,onSelectionChange:ne=>k(E.id,$.key,ne),raciRole:$.key,taskId:E.id,isInherited:Y,hasParent:!!E.parentId,onResetToInherited:()=>C(E.id,$.key),disabled:N.isPending||S.isPending},$.key)})]}),q&&L.map($=>R($,B+1))]},E.id)};if(!e)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project to view the RACI Matrix."})]})});const F=f||m||p||b;return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"text-raci-title",children:"RACI Matrix"}),s.jsx("p",{className:"text-muted-foreground",children:"Assign Responsible, Accountable, Consulted, and Informed roles for each WBS item"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ae,{variant:"outline",className:"gap-1",children:[s.jsx(jme,{className:"h-3 w-3"}),d.length," Tasks"]}),s.jsxs(ae,{variant:"outline",className:"gap-1",children:[s.jsx(Cn,{className:"h-3 w-3"}),y.length," People"]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-3",children:s.jsx(Se,{className:"text-base",children:"RACI Legend"})}),s.jsxs(ce,{children:[s.jsx("div",{className:"flex flex-wrap gap-4",children:OP.map(({key:E,label:B,description:L,color:I})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`h-6 w-6 rounded flex items-center justify-center font-bold text-xs ${I}`,children:E}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm",children:B}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",L]})]})]},E))}),s.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-400"}),s.jsx("span",{children:"Inherited from parent"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(ft,{className:"h-3 w-3 text-amber-500"}),s.jsx("span",{children:"Multiple accountable (warning)"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search tasks by name or WBS code...",value:r,onChange:E=>i(E.target.value),className:"pl-10","data-testid":"input-search-tasks"})]}),s.jsx(H,{variant:"outline",size:"sm",onClick:O,"data-testid":"button-expand-all",children:"Expand All"}),s.jsx(H,{variant:"outline",size:"sm",onClick:M,"data-testid":"button-collapse-all",children:"Collapse All"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:T,className:"gap-2",children:[s.jsx(ds,{className:"h-4 w-4"}),"Export CSV"]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Responsibility Assignment Matrix"}),s.jsx(it,{children:"Click on cells to assign people. Children inherit parent assignments unless explicitly overridden."})]}),s.jsx(ce,{className:"p-0",children:F?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx(Ke,{className:"h-12 w-full"}),s.jsx(Ke,{className:"h-64 w-full"})]}):y.length===0?s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"space-y-4",children:[s.jsx("div",{children:"No stakeholders or resources found. Add people to this project before creating RACI assignments."}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs(H,{variant:"default",size:"sm",onClick:()=>n("/stakeholders"),className:"gap-2",children:[s.jsx(Cn,{className:"h-4 w-4"}),"Add Stakeholders"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>n("/resources"),className:"gap-2",children:[s.jsx(bf,{className:"h-4 w-4"}),"Add Resources"]})]})]})]})}):A.length===0?s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"No tasks found matching your search. Try adjusting your search criteria."})]})}):s.jsxs("div",{className:"relative",children:[l&&s.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-2 bg-background/95 backdrop-blur-sm border rounded-md px-3 py-1.5 text-xs text-muted-foreground shadow-sm",children:[s.jsx(pme,{className:"h-3 w-3 animate-pulse"}),s.jsx("span",{children:"Scroll horizontally to see all columns"}),s.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>c(!1),children:s.jsx(Fn,{className:"h-3 w-3"})})]}),s.jsx(On,{className:"h-[calc(100vh-400px)]",children:s.jsxs("div",{className:"min-w-[700px]",children:[s.jsxs("div",{className:"grid grid-cols-[minmax(250px,2fr),repeat(4,minmax(120px,1fr))] gap-2 items-center py-3 px-3 bg-muted/50 border-b sticky top-0 z-10 backdrop-blur-sm",children:[s.jsx("div",{className:"font-medium text-sm",children:"WBS / Task"}),OP.map(E=>s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsxs("div",{className:"flex items-center justify-center gap-1 cursor-help",children:[s.jsx("div",{className:`h-5 w-5 rounded flex items-center justify-center font-bold text-[10px] ${E.color}`,children:E.key}),s.jsx("span",{className:"font-medium text-xs",children:E.label})]})}),s.jsx(dc,{children:s.jsx("p",{className:"text-sm",children:E.description})})]})},E.key))]}),s.jsx("div",{children:D.map(E=>R(E,0))})]})})]})})]})]})}const Vlt=[{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"electrical",label:"Electrical"},{value:"piping",label:"Piping"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hvac",label:"HVAC"},{value:"architectural",label:"Architectural"},{value:"general",label:"General"}],qlt=[{value:"technical",label:"Technical"},{value:"external",label:"External"},{value:"organizational",label:"Organizational"},{value:"project-management",label:"Project Management"},{value:"commercial",label:"Commercial"},{value:"hse",label:"HSE"},{value:"quality",label:"Quality"},{value:"schedule",label:"Schedule"},{value:"resource",label:"Resource"}],Ult=[{value:"avoid",label:"Avoid",description:"Eliminate the threat entirely"},{value:"transfer",label:"Transfer",description:"Shift to third party (insurance, contract)"},{value:"mitigate",label:"Mitigate",description:"Reduce probability or impact"},{value:"accept",label:"Accept",description:"Acknowledge and monitor"},{value:"escalate",label:"Escalate",description:"Raise to higher authority"}],IP={title:"",description:"",probability:3,impact:"medium",status:"identified",mitigationPlan:"",owner:"",categoryEpc:"technical",responseStrategy:"mitigate",costImpact:"",scheduleImpact:"",triggerEvents:"",contingencyReserve:"",secondaryRisks:"",residualProbability:"",residualImpact:"",reviewDate:"",discipline:"general"};function Wlt(){const{selectedProjectId:e,selectedOrgId:t}=jt(),{toast:n}=Nt(),[r,i]=x.useState(!1),[a,o]=x.useState(null),[l,c]=x.useState([]),[u,d]=x.useState(IP),[f,h]=x.useState(""),[m,g]=x.useState([]),[p,v]=x.useState(!1),{data:b=[]}=je({queryKey:[`/api/organizations/${t}/tags`],enabled:!!t});x.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="new"&&(setTimeout(()=>{d(IP),o(null),i(!0)},100),window.history.replaceState({},"",window.location.pathname))},[]);const{data:y=[],isLoading:j,error:N,refetch:w}=je({queryKey:[`/api/projects/${e}/risks`],enabled:!!e,retry:1}),S=x.useMemo(()=>y.map(I=>I.id),[y]),{data:k={}}=je({queryKey:["/api/risks/tags",S],queryFn:async()=>{const I={};return await Promise.all(y.map(async q=>{try{const $=await fe("GET",`/api/tags/entity/risk/${q.id}`);I[q.id]=await $.json()}catch{I[q.id]=[]}})),I},enabled:y.length>0}),C=x.useMemo(()=>{let I=y;if(f){const q=f.toLowerCase();I=I.filter($=>{var z,Y;return $.title.toLowerCase().includes(q)||((z=$.description)==null?void 0:z.toLowerCase().includes(q))||((Y=$.code)==null?void 0:Y.toLowerCase().includes(q))})}return m.length>0&&(I=I.filter(q=>{const $=k[q.id]||[];return m.every(z=>$.some(Y=>Y.id===z))})),I},[y,f,k,m]),A=(I,q,$)=>{const z={low:1,medium:2,high:3,critical:4},Y=parseFloat($)||0;return I/5*(z[q]||1)*Y},D=x.useMemo(()=>A(u.probability,u.impact,u.costImpact),[u.probability,u.impact,u.costImpact]),P=Pe({mutationFn:async I=>{if(!e)throw new Error("No project selected");const q={...I,projectId:e,costImpact:I.costImpact||null,scheduleImpact:I.scheduleImpact?parseInt(I.scheduleImpact):null,contingencyReserve:I.contingencyReserve||null,residualProbability:I.residualProbability?parseInt(I.residualProbability):null,residualImpact:I.residualImpact||null,reviewDate:I.reviewDate||null,riskExposure:D>0?D.toFixed(2):null};await fe("POST","/api/risks",q)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/risks`]}),i(!1),o(null),M(),n({title:"Success",description:"Risk added successfully"})},onError:I=>{n({title:"Error",description:I.message,variant:"destructive"})}}),_=Pe({mutationFn:async({id:I,data:q})=>{const $={...q,costImpact:q.costImpact||null,scheduleImpact:q.scheduleImpact?parseInt(q.scheduleImpact):null,contingencyReserve:q.contingencyReserve||null,residualProbability:q.residualProbability?parseInt(q.residualProbability):null,residualImpact:q.residualImpact||null,reviewDate:q.reviewDate||null,riskExposure:D>0?D.toFixed(2):null};await fe("PATCH",`/api/risks/${I}`,$)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/risks`]}),i(!1),o(null),M(),n({title:"Success",description:"Risk updated successfully"})},onError:I=>{n({title:"Error",description:I.message,variant:"destructive"})}}),O=Pe({mutationFn:async I=>{await fe("DELETE",`/api/risks/${I}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/risks`]}),n({title:"Success",description:"Risk deleted successfully"})},onError:I=>{n({title:"Error",description:I.message,variant:"destructive"})}}),M=()=>{d(IP)},T=I=>{I.preventDefault(),a?_.mutate({id:a.id,data:u}):P.mutate(u)},R=I=>{var q,$,z,Y;o(I),d({title:I.title,description:I.description||"",probability:I.probability,impact:I.impact,status:I.status,mitigationPlan:I.mitigationPlan||"",owner:I.owner||"",categoryEpc:I.categoryEpc||"technical",responseStrategy:I.responseStrategy||"mitigate",costImpact:((q=I.costImpact)==null?void 0:q.toString())||"",scheduleImpact:(($=I.scheduleImpact)==null?void 0:$.toString())||"",triggerEvents:I.triggerEvents||"",contingencyReserve:((z=I.contingencyReserve)==null?void 0:z.toString())||"",secondaryRisks:I.secondaryRisks||"",residualProbability:((Y=I.residualProbability)==null?void 0:Y.toString())||"",residualImpact:I.residualImpact||"",reviewDate:I.reviewDate?new Date(I.reviewDate).toISOString().split("T")[0]:"",discipline:I.discipline||"general"}),i(!0)},F=I=>{window.confirm("Are you sure you want to delete this risk?")&&O.mutate(I)},E=()=>{o(null),M(),i(!0)},B=(I,q)=>I>=4&&(q==="high"||q==="critical")||I===5?{level:"Critical",variant:"destructive"}:I>=3&&(q==="high"||q==="critical")||I>=4&&q==="medium"?{level:"High",variant:"default"}:I>=2&&q==="medium"||I>=3&&q==="low"?{level:"Medium",variant:"secondary"}:{level:"Low",variant:"outline"},L=I=>{if(!I)return"-";const q=typeof I=="string"?parseFloat(I):I;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(q)};return e?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Risk Register"}),s.jsx("p",{className:"text-muted-foreground",children:"EPC Risk Management with Cost & Schedule Impact Analysis"})]}),s.jsx(H,{onClick:E,"data-testid":"button-add-risk",children:"Add Risk"})]}),N&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Failed to load risks. ",N.message]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>w(),"data-testid":"button-retry",children:"Retry"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("div",{className:"relative max-w-md flex-1",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{type:"search",placeholder:"Search risks...",className:"pl-9",value:f,onChange:I=>h(I.target.value),"data-testid":"input-search-risks"})]}),b.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs(Ls,{open:p,onOpenChange:v,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(_u,{className:"h-4 w-4 mr-2"}),"Filter by Tags",m.length>0&&s.jsx(ae,{variant:"secondary",className:"ml-2",children:m.length})]})}),s.jsx(ps,{className:"w-[300px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search tags..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No tags found."}),s.jsx(Ms,{children:b.map(I=>{const q=m.includes(I.id);return s.jsxs(Rs,{onSelect:()=>{g($=>q?$.filter(z=>z!==I.id):[...$,I.id])},children:[s.jsx("div",{className:he("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",q?"bg-primary text-primary-foreground":"opacity-50"),children:q&&s.jsx(Sr,{className:"h-4 w-4"})}),I.color&&s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:I.color}}),s.jsx("span",{children:I.name}),I.category&&s.jsx(ae,{variant:"outline",className:"ml-auto text-xs",children:I.category})]},I.id)})})]})]})})]}),m.length>0&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>g([]),children:[s.jsx(Fn,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]}),j?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading risks..."})}):C.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Risks Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding risks to your project"}),s.jsx(H,{onClick:E,"data-testid":"button-add-first-risk",children:"Add Risk"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[60px,3fr,1fr,1fr,1fr,1fr,1fr,100px] gap-4 px-4 py-2 text-sm font-medium text-muted-foreground border-b",children:[s.jsx("div",{children:"Code"}),s.jsx("div",{children:"Risk"}),s.jsx("div",{children:"Category"}),s.jsx("div",{children:"Risk Level"}),s.jsx("div",{children:"Response"}),s.jsx("div",{children:"Exposure"}),s.jsx("div",{children:"Status"}),s.jsx("div",{children:"Actions"})]}),C.map(I=>{var z;const q=B(I.probability,I.impact),$=I.riskExposure?parseFloat(I.riskExposure.toString()):A(I.probability,I.impact,((z=I.costImpact)==null?void 0:z.toString())||"0");return s.jsx(LM,{id:I.id.toString(),selected:l.includes(I.id),onSelect:Y=>{c(ne=>Y?[...ne,I.id]:ne.filter(te=>te!==I.id))},"data-testid":`row-risk-${I.id}`,children:s.jsxs("div",{className:"grid grid-cols-[60px,3fr,1fr,1fr,1fr,1fr,1fr,100px] gap-4 items-center flex-1",children:[s.jsx("div",{className:"text-sm font-mono text-muted-foreground",children:I.code}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:I.title}),I.description&&s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:I.description}),I.discipline&&s.jsx(ae,{variant:"outline",className:"mt-1 text-xs capitalize",children:I.discipline})]}),s.jsx(ae,{variant:"outline",className:"capitalize",children:I.categoryEpc||"technical"}),s.jsx(ae,{variant:q.variant,children:q.level}),s.jsx(ae,{variant:"secondary",className:"capitalize",children:I.responseStrategy||"mitigate"}),s.jsx("div",{className:"font-mono text-sm",children:$>0?L($):"-"}),s.jsx(ae,{variant:I.status==="closed"?"secondary":"default",className:"capitalize",children:I.status}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm","data-testid":`button-actions-${I.id}`,children:"Actions"})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>R(I),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>F(I.id),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},I.id)})]}),s.jsx(zt,{open:r,onOpenChange:i,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-risk",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:a?"Edit Risk":"Add Risk"})}),s.jsxs("form",{onSubmit:T,children:[s.jsxs(Vr,{defaultValue:"basic",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"basic",children:"Basic Info"}),s.jsx(tt,{value:"impact",children:"Impact Analysis"}),s.jsx(tt,{value:"response",children:"Response & Residual"})]}),s.jsx(ht,{value:"basic",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"title",children:"Risk Title"}),s.jsx(Ce,{id:"title",value:u.title,onChange:I=>d({...u,title:I.target.value}),placeholder:"Brief description of the risk",required:!0,"data-testid":"input-risk-title"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",value:u.description,onChange:I=>d({...u,description:I.target.value}),placeholder:"Detailed description of the risk, its causes and potential consequences",rows:3,"data-testid":"input-risk-description"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"categoryEpc",children:"Risk Category (AACE)"}),s.jsxs(ze,{value:u.categoryEpc,onValueChange:I=>d({...u,categoryEpc:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-category",children:s.jsx(Be,{})}),s.jsx(Le,{children:qlt.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"discipline",children:"Discipline"}),s.jsxs(ze,{value:u.discipline,onValueChange:I=>d({...u,discipline:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-discipline",children:s.jsx(Be,{})}),s.jsx(Le,{children:Vlt.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:u.status,onValueChange:I=>d({...u,status:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-status",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"identified",children:"Identified"}),s.jsx(X,{value:"assessed",children:"Assessed"}),s.jsx(X,{value:"mitigating",children:"Mitigating"}),s.jsx(X,{value:"closed",children:"Closed"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"owner",children:"Risk Owner"}),s.jsx(Ce,{id:"owner",value:u.owner,onChange:I=>d({...u,owner:I.target.value}),placeholder:"Person responsible for this risk","data-testid":"input-risk-owner"})]})]})}),s.jsx(ht,{value:"impact",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"probability",children:"Probability (1-5)"}),s.jsxs(ze,{value:u.probability.toString(),onValueChange:I=>d({...u,probability:parseInt(I)}),children:[s.jsx(Fe,{"data-testid":"select-risk-probability",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"1",children:"1 - Very Unlikely (10%)"}),s.jsx(X,{value:"2",children:"2 - Unlikely (11-30%)"}),s.jsx(X,{value:"3",children:"3 - Possible (31-50%)"}),s.jsx(X,{value:"4",children:"4 - Likely (51-70%)"}),s.jsx(X,{value:"5",children:"5 - Very Likely (>70%)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"impact",children:"Impact Severity"}),s.jsxs(ze,{value:u.impact,onValueChange:I=>d({...u,impact:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-impact",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"low",children:"Low - Minor impact"}),s.jsx(X,{value:"medium",children:"Medium - Moderate impact"}),s.jsx(X,{value:"high",children:"High - Major impact"}),s.jsx(X,{value:"critical",children:"Critical - Severe impact"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"costImpact",children:[s.jsx(ur,{className:"inline h-4 w-4 mr-1"}),"Cost Impact ($)"]}),s.jsx(Ce,{id:"costImpact",type:"number",min:"0",step:"1000",value:u.costImpact,onChange:I=>d({...u,costImpact:I.target.value}),placeholder:"Estimated cost if risk occurs","data-testid":"input-risk-cost-impact"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"scheduleImpact",children:[s.jsx(bn,{className:"inline h-4 w-4 mr-1"}),"Schedule Impact (days)"]}),s.jsx(Ce,{id:"scheduleImpact",type:"number",min:"0",value:u.scheduleImpact,onChange:I=>d({...u,scheduleImpact:I.target.value}),placeholder:"Days delay if risk occurs","data-testid":"input-risk-schedule-impact"})]}),s.jsxs("div",{className:"col-span-2 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ft,{className:"h-5 w-5 text-amber-500"}),s.jsx("span",{className:"font-medium",children:"Risk Exposure (Calculated)"})]}),s.jsx("div",{className:"text-2xl font-bold",children:L(D)}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["P  Impact  Cost = ",u.probability,"/5  ",u.impact,"  ",L(parseFloat(u.costImpact)||0)]})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"triggerEvents",children:"Trigger Events"}),s.jsx(Ht,{id:"triggerEvents",value:u.triggerEvents,onChange:I=>d({...u,triggerEvents:I.target.value}),placeholder:"Conditions or events that would activate this risk",rows:2,"data-testid":"input-risk-triggers"})]})]})}),s.jsx(ht,{value:"response",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"responseStrategy",children:"Response Strategy"}),s.jsxs(ze,{value:u.responseStrategy,onValueChange:I=>d({...u,responseStrategy:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-response",children:s.jsx(Be,{})}),s.jsx(Le,{children:Ult.map(I=>s.jsx(X,{value:I.value,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:I.label}),s.jsx("span",{className:"text-xs text-muted-foreground",children:I.description})]})},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"contingencyReserve",children:[s.jsx(ur,{className:"inline h-4 w-4 mr-1"}),"Contingency Reserve ($)"]}),s.jsx(Ce,{id:"contingencyReserve",type:"number",min:"0",step:"1000",value:u.contingencyReserve,onChange:I=>d({...u,contingencyReserve:I.target.value}),placeholder:"Budget allocated for this risk","data-testid":"input-risk-contingency"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"mitigationPlan",children:"Mitigation Plan"}),s.jsx(Ht,{id:"mitigationPlan",value:u.mitigationPlan,onChange:I=>d({...u,mitigationPlan:I.target.value}),placeholder:"Specific actions to reduce probability or impact",rows:3,"data-testid":"input-risk-mitigation"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"secondaryRisks",children:"Secondary Risks"}),s.jsx(Ht,{id:"secondaryRisks",value:u.secondaryRisks,onChange:I=>d({...u,secondaryRisks:I.target.value}),placeholder:"New risks that may arise from mitigation actions",rows:2,"data-testid":"input-risk-secondary"})]}),s.jsx(nl,{className:"col-span-2"}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Residual Risk (After Mitigation)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"residualProbability",children:"Residual Probability (1-5)"}),s.jsxs(ze,{value:u.residualProbability,onValueChange:I=>d({...u,residualProbability:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-residual-probability",children:s.jsx(Be,{placeholder:"Select..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"1",children:"1 - Very Unlikely"}),s.jsx(X,{value:"2",children:"2 - Unlikely"}),s.jsx(X,{value:"3",children:"3 - Possible"}),s.jsx(X,{value:"4",children:"4 - Likely"}),s.jsx(X,{value:"5",children:"5 - Very Likely"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"residualImpact",children:"Residual Impact"}),s.jsxs(ze,{value:u.residualImpact,onValueChange:I=>d({...u,residualImpact:I}),children:[s.jsx(Fe,{"data-testid":"select-risk-residual-impact",children:s.jsx(Be,{placeholder:"Select..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"low",children:"Low"}),s.jsx(X,{value:"medium",children:"Medium"}),s.jsx(X,{value:"high",children:"High"}),s.jsx(X,{value:"critical",children:"Critical"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"reviewDate",children:[s.jsx(Br,{className:"inline h-4 w-4 mr-1"}),"Next Review Date"]}),s.jsx(Ce,{id:"reviewDate",type:"date",value:u.reviewDate,onChange:I=>d({...u,reviewDate:I.target.value}),"data-testid":"input-risk-review-date"})]})]})})]}),s.jsxs(on,{className:"mt-6",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:P.isPending||_.isPending,"data-testid":"button-submit",children:P.isPending||_.isPending?"Saving...":a?"Update Risk":"Add Risk"})]})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select a project from the dropdown above"})]})})}function ele({selectedCount:e,selectedItems:t,onClearSelection:n,onBulkAction:r,bulkActions:i=[],className:a,position:o="sticky"}){if(e===0)return null;const l=[{label:"Export Selected",action:"export",icon:s.jsx(ds,{className:"h-4 w-4"}),variant:"outline"},{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}],c=i.length>0?i:l,u={fixed:"fixed bottom-0 left-0 right-0 z-50 md:left-64",sticky:"sticky top-0 z-40",inline:""};return s.jsx("div",{className:he("border-t bg-background p-3 shadow-sm",u[o],a),children:s.jsxs("div",{className:he("flex items-center justify-between",o==="fixed"&&"container mx-auto"),children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-sm font-medium",children:[e," item",e!==1?"s":""," selected"]}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:n,children:[s.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.map(d=>s.jsxs(H,{variant:d.variant||"outline",size:"sm",onClick:()=>r==null?void 0:r(d.action,t),children:[d.icon,d.label]},d.action)),c.length>2&&s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsx(Nn,{align:"end",children:c.slice(2).map(d=>s.jsxs(ct,{onClick:()=>r==null?void 0:r(d.action,t),children:[d.icon,d.label]},d.action))})]})]})]})})}const Hlt=[{value:"design",label:"Design"},{value:"procurement",label:"Procurement"},{value:"construction",label:"Construction"},{value:"commissioning",label:"Commissioning"},{value:"hse",label:"HSE"},{value:"quality",label:"Quality"},{value:"commercial",label:"Commercial"},{value:"interface",label:"Interface"},{value:"resource",label:"Resource"}],Klt=[{value:"design-error",label:"Design Error"},{value:"material-defect",label:"Material Defect"},{value:"workmanship",label:"Workmanship"},{value:"equipment-failure",label:"Equipment Failure"},{value:"communication",label:"Communication"},{value:"planning",label:"Planning"},{value:"external-factors",label:"External Factors"},{value:"unknown",label:"Unknown"}],Glt=[{value:"project",label:"Project Level",description:"Resolved within project team"},{value:"program",label:"Program Level",description:"Escalated to program management"},{value:"executive",label:"Executive Level",description:"Requires executive decision"},{value:"client",label:"Client Level",description:"Client involvement required"}],Qlt=[{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"electrical",label:"Electrical"},{value:"piping",label:"Piping"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hvac",label:"HVAC"},{value:"architectural",label:"Architectural"},{value:"general",label:"General"}],MP={title:"",description:"",priority:"medium",status:"open",assignedTo:"",issueType:"design",impactCost:!1,impactSchedule:!1,impactQuality:!1,impactSafety:!1,rootCauseCategory:"",rootCauseAnalysis:"",escalationLevel:"project",targetResolutionDate:"",verificationRequired:!1,resolution:"",discipline:"general",areaCode:""};function Ylt(){const{selectedProjectId:e,selectedOrgId:t}=jt(),{toast:n}=Nt(),[r,i]=x.useState(!1),[a,o]=x.useState(null),[l,c]=x.useState([]),[u,d]=x.useState(MP),[f,h]=x.useState(!1),[m,g]=x.useState([]),[p,v]=x.useState(!1),{data:b=[]}=je({queryKey:[`/api/organizations/${t}/tags`],enabled:!!t});x.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="new"&&(setTimeout(()=>{d(MP),o(null),i(!0)},100),window.history.replaceState({},"",window.location.pathname))},[]);const{data:y=[],isLoading:j,error:N,refetch:w}=je({queryKey:[`/api/projects/${e}/issues`],enabled:!!e,retry:1}),S=x.useMemo(()=>y.map(z=>z.id),[y]),{data:k={}}=je({queryKey:["/api/issues/tags",S],queryFn:async()=>{const z={};return await Promise.all(y.map(async Y=>{try{const ne=await fe("GET",`/api/tags/entity/issue/${Y.id}`);z[Y.id]=await ne.json()}catch{z[Y.id]=[]}})),z},enabled:y.length>0}),C=x.useMemo(()=>m.length===0?y:y.filter(z=>{const Y=k[z.id]||[];return m.every(ne=>Y.some(te=>te.id===ne))}),[y,k,m]),A=z=>{const Y=[];return z.impactCost&&Y.push({icon:ur,label:"Cost",color:"text-amber-500"}),z.impactSchedule&&Y.push({icon:bn,label:"Schedule",color:"text-blue-500"}),z.impactQuality&&Y.push({icon:Qa,label:"Quality",color:"text-purple-500"}),z.impactSafety&&Y.push({icon:ul,label:"Safety",color:"text-red-500"}),Y},D=x.useMemo(()=>[{accessorKey:"code",header:({column:z})=>s.jsx(Qn,{column:z,children:"Code"}),cell:({row:z})=>s.jsx("div",{className:"text-sm font-mono text-muted-foreground",children:z.original.code})},{accessorKey:"title",header:({column:z})=>s.jsx(Qn,{column:z,children:"Issue"}),cell:({row:z})=>s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:z.original.title}),z.original.description&&s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:z.original.description}),z.original.discipline&&s.jsx(ae,{variant:"outline",className:"mt-1 text-xs capitalize",children:z.original.discipline})]})},{accessorKey:"issueType",header:({column:z})=>s.jsx(Qn,{column:z,children:"Type"}),cell:({row:z})=>s.jsx(ae,{variant:"outline",className:"capitalize",children:z.original.issueType||"design"})},{accessorKey:"priority",header:({column:z})=>s.jsx(Qn,{column:z,children:"Priority"}),cell:({row:z})=>s.jsx(ae,{variant:q(z.original.priority),className:"capitalize",children:z.original.priority})},{id:"impacts",header:"Impacts",cell:({row:z})=>{const Y=A(z.original);return s.jsx("div",{className:"flex gap-1",children:Y.length>0?Y.map((ne,te)=>s.jsx("span",{title:ne.label,children:s.jsx(ne.icon,{className:`h-4 w-4 ${ne.color}`})},te)):s.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})})}},{accessorKey:"escalationLevel",header:({column:z})=>s.jsx(Qn,{column:z,children:"Escalation"}),cell:({row:z})=>s.jsx(ae,{variant:"secondary",className:"capitalize",children:z.original.escalationLevel||"project"})},{accessorKey:"status",header:({column:z})=>s.jsx(Qn,{column:z,children:"Status"}),cell:({row:z})=>s.jsx(ae,{variant:$(z.original.status),className:"capitalize",children:z.original.status.replace("-"," ")})},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:z})=>{const Y=z.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm","data-testid":`button-actions-${Y.id}`,children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>B(Y),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>L(Y.id),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})}}],[]),P=z=>{const Y=z||y,ne=Ap.unparse(Y.map(xe=>({Code:xe.code||"",Title:xe.title,Type:xe.issueType||"",Priority:xe.priority,Status:xe.status,"Escalation Level":xe.escalationLevel||"",Discipline:xe.discipline||"","Impact Cost":xe.impactCost?"Yes":"No","Impact Schedule":xe.impactSchedule?"Yes":"No","Impact Quality":xe.impactQuality?"Yes":"No","Impact Safety":xe.impactSafety?"Yes":"No","Assigned To":xe.assignedTo||"","Target Resolution Date":xe.targetResolutionDate?new Date(xe.targetResolutionDate).toLocaleDateString():""}))),te=new Blob([ne],{type:"text/csv;charset=utf-8;"}),pe=document.createElement("a"),J=URL.createObjectURL(te);pe.setAttribute("href",J),pe.setAttribute("download",`issues_${new Date().toISOString().split("T")[0]}.csv`),pe.style.visibility="hidden",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),n({title:"Success",description:"Issues exported successfully"})},_=(z,Y)=>{z==="export"?P(Y):z==="delete"&&h(!0)},O=Pe({mutationFn:async z=>{if(!e)throw new Error("No project selected");const Y={...z,projectId:e,rootCauseCategory:z.rootCauseCategory||null,targetResolutionDate:z.targetResolutionDate||null,discipline:z.discipline||null,areaCode:z.areaCode||null};await fe("POST","/api/issues",Y)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/issues`]}),i(!1),o(null),F(),n({title:"Success",description:"Issue reported successfully"})},onError:z=>{n({title:"Error",description:z.message,variant:"destructive"})}}),M=Pe({mutationFn:async({id:z,data:Y})=>{const ne={...Y,rootCauseCategory:Y.rootCauseCategory||null,targetResolutionDate:Y.targetResolutionDate||null,discipline:Y.discipline||null,areaCode:Y.areaCode||null};await fe("PATCH",`/api/issues/${z}`,ne)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/issues`]}),i(!1),o(null),F(),n({title:"Success",description:"Issue updated successfully"})},onError:z=>{n({title:"Error",description:z.message,variant:"destructive"})}}),T=Pe({mutationFn:async z=>{await fe("DELETE",`/api/issues/${z}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/issues`]}),n({title:"Success",description:"Issue deleted successfully"})},onError:z=>{n({title:"Error",description:z.message,variant:"destructive"})}}),R=Pe({mutationFn:async z=>{await Promise.all(z.map(Y=>fe("DELETE",`/api/issues/${Y}`)))},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/issues`]}),h(!1),c([]),n({title:"Success",description:`${l.length} issue(s) deleted successfully`})},onError:z=>{n({title:"Error",description:z.message||"Failed to delete issues",variant:"destructive"})}}),F=()=>{d(MP)},E=z=>{z.preventDefault(),a?M.mutate({id:a.id,data:u}):O.mutate(u)},B=z=>{o(z),d({title:z.title,description:z.description||"",priority:z.priority,status:z.status,assignedTo:z.assignedTo||"",issueType:z.issueType||"design",impactCost:z.impactCost||!1,impactSchedule:z.impactSchedule||!1,impactQuality:z.impactQuality||!1,impactSafety:z.impactSafety||!1,rootCauseCategory:z.rootCauseCategory||"",rootCauseAnalysis:z.rootCauseAnalysis||"",escalationLevel:z.escalationLevel||"project",targetResolutionDate:z.targetResolutionDate?new Date(z.targetResolutionDate).toISOString().split("T")[0]:"",verificationRequired:z.verificationRequired||!1,resolution:z.resolution||"",discipline:z.discipline||"general",areaCode:z.areaCode||""}),i(!0)},L=z=>{window.confirm("Are you sure you want to delete this issue?")&&T.mutate(z)},I=()=>{o(null),F(),i(!0)},q=z=>{switch(z){case"critical":return"destructive";case"high":return"default";case"medium":return"secondary";default:return"outline"}},$=z=>{switch(z){case"open":return"destructive";case"in-progress":return"default";case"resolved":return"outline";default:return"secondary"}};return e?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Issue Log"}),s.jsx("p",{className:"text-muted-foreground",children:"EPC Issue Tracking with Impact Assessment & Root Cause Analysis"})]}),s.jsx(H,{onClick:I,"data-testid":"button-add-issue",children:"Report Issue"})]}),N&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Failed to load issues. ",N.message]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>w(),"data-testid":"button-retry",children:"Retry"})]})]}),j?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading issues..."})}):y.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Issues Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by reporting issues to your project"}),s.jsx(H,{onClick:I,"data-testid":"button-add-first-issue",children:"Report Issue"})]}):s.jsxs("div",{className:"space-y-4",children:[b.length>0&&s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs(Ls,{open:p,onOpenChange:v,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(_u,{className:"h-4 w-4 mr-2"}),"Filter by Tags",m.length>0&&s.jsx(ae,{variant:"secondary",className:"ml-2",children:m.length})]})}),s.jsx(ps,{className:"w-[300px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search tags..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No tags found."}),s.jsx(Ms,{children:b.map(z=>{const Y=m.includes(z.id);return s.jsxs(Rs,{onSelect:()=>{g(ne=>Y?ne.filter(te=>te!==z.id):[...ne,z.id])},children:[s.jsx("div",{className:he("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",Y?"bg-primary text-primary-foreground":"opacity-50"),children:Y&&s.jsx(Sr,{className:"h-4 w-4"})}),z.color&&s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:z.color}}),s.jsx("span",{children:z.name}),z.category&&s.jsx(ae,{variant:"outline",className:"ml-auto text-xs",children:z.category})]},z.id)})})]})]})})]}),m.length>0&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>g([]),children:[s.jsx(Fn,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),s.jsx(od,{columns:D,data:C,searchKey:"title",searchPlaceholder:"Search issues by title, code, or description...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,onSelectionChange:c,onExport:P,emptyMessage:"No issues found",getRowId:z=>z.id.toString()}),s.jsx(ele,{selectedCount:l.length,selectedItems:l,onClearSelection:()=>c([]),onBulkAction:_,position:"sticky",bulkActions:[{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"},{label:"Export Selected",action:"export",icon:s.jsx(ur,{className:"h-4 w-4"}),variant:"outline"}]}),s.jsx(Bs,{open:f,onOpenChange:h,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Issues"}),s.jsxs(bs,{children:["Are you sure you want to delete ",l.length," selected issue(s)? This action cannot be undone.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Issues to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:l.map(z=>s.jsxs("li",{children:[z.code,": ",z.title]},z.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const z=l.map(Y=>Y.id);R.mutate(z)},className:"bg-destructive text-destructive-foreground",disabled:R.isPending,children:R.isPending?"Deleting...":`Delete ${l.length} Issue(s)`})]})]})})]}),s.jsx(zt,{open:r,onOpenChange:i,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-issue",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:a?"Edit Issue":"Report Issue"})}),s.jsxs("form",{onSubmit:E,children:[s.jsxs(Vr,{defaultValue:"basic",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"basic",children:"Basic Info"}),s.jsx(tt,{value:"impact",children:"Impact Analysis"}),s.jsx(tt,{value:"resolution",children:"Resolution"})]}),s.jsx(ht,{value:"basic",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"title",children:"Issue Title"}),s.jsx(Ce,{id:"title",value:u.title,onChange:z=>d({...u,title:z.target.value}),placeholder:"Brief description of the issue",required:!0,"data-testid":"input-issue-title"})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",value:u.description,onChange:z=>d({...u,description:z.target.value}),placeholder:"Detailed description of the issue, when it was discovered, and current situation",rows:3,"data-testid":"input-issue-description"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"issueType",children:"Issue Type"}),s.jsxs(ze,{value:u.issueType,onValueChange:z=>d({...u,issueType:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-type",children:s.jsx(Be,{})}),s.jsx(Le,{children:Hlt.map(z=>s.jsx(X,{value:z.value,children:z.label},z.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"discipline",children:"Discipline"}),s.jsxs(ze,{value:u.discipline,onValueChange:z=>d({...u,discipline:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-discipline",children:s.jsx(Be,{})}),s.jsx(Le,{children:Qlt.map(z=>s.jsx(X,{value:z.value,children:z.label},z.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"priority",children:"Priority"}),s.jsxs(ze,{value:u.priority,onValueChange:z=>d({...u,priority:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-priority",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"low",children:"Low"}),s.jsx(X,{value:"medium",children:"Medium"}),s.jsx(X,{value:"high",children:"High"}),s.jsx(X,{value:"critical",children:"Critical"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:u.status,onValueChange:z=>d({...u,status:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-status",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"open",children:"Open"}),s.jsx(X,{value:"in-progress",children:"In Progress"}),s.jsx(X,{value:"resolved",children:"Resolved"}),s.jsx(X,{value:"closed",children:"Closed"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"areaCode",children:"Area/Zone Code"}),s.jsx(Ce,{id:"areaCode",value:u.areaCode,onChange:z=>d({...u,areaCode:z.target.value}),placeholder:"e.g., AREA-100, ZONE-A","data-testid":"input-issue-area"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"assignedTo",children:"Assigned To"}),s.jsx(Ce,{id:"assignedTo",value:u.assignedTo,onChange:z=>d({...u,assignedTo:z.target.value}),placeholder:"Person responsible for resolution","data-testid":"input-issue-assigned"})]})]})}),s.jsx(ht,{value:"impact",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(G,{className:"mb-3 block",children:"Impact Assessment"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wt,{id:"impactCost",checked:u.impactCost,onCheckedChange:z=>d({...u,impactCost:!!z}),"data-testid":"checkbox-impact-cost"}),s.jsxs(G,{htmlFor:"impactCost",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(ur,{className:"h-4 w-4 text-amber-500"}),"Cost Impact"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wt,{id:"impactSchedule",checked:u.impactSchedule,onCheckedChange:z=>d({...u,impactSchedule:!!z}),"data-testid":"checkbox-impact-schedule"}),s.jsxs(G,{htmlFor:"impactSchedule",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(bn,{className:"h-4 w-4 text-blue-500"}),"Schedule Impact"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wt,{id:"impactQuality",checked:u.impactQuality,onCheckedChange:z=>d({...u,impactQuality:!!z}),"data-testid":"checkbox-impact-quality"}),s.jsxs(G,{htmlFor:"impactQuality",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(Qa,{className:"h-4 w-4 text-purple-500"}),"Quality Impact"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wt,{id:"impactSafety",checked:u.impactSafety,onCheckedChange:z=>d({...u,impactSafety:!!z}),"data-testid":"checkbox-impact-safety"}),s.jsxs(G,{htmlFor:"impactSafety",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(ul,{className:"h-4 w-4 text-red-500"}),"Safety Impact"]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"escalationLevel",children:"Escalation Level"}),s.jsxs(ze,{value:u.escalationLevel,onValueChange:z=>d({...u,escalationLevel:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-escalation",children:s.jsx(Be,{})}),s.jsx(Le,{children:Glt.map(z=>s.jsx(X,{value:z.value,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:z.label}),s.jsx("span",{className:"text-xs text-muted-foreground",children:z.description})]})},z.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(G,{htmlFor:"targetResolutionDate",children:[s.jsx(Br,{className:"inline h-4 w-4 mr-1"}),"Target Resolution Date"]}),s.jsx(Ce,{id:"targetResolutionDate",type:"date",value:u.targetResolutionDate,onChange:z=>d({...u,targetResolutionDate:z.target.value}),"data-testid":"input-issue-target-date"})]}),s.jsx(nl,{className:"col-span-2"}),s.jsx("div",{className:"col-span-2",children:s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Root Cause Analysis"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"rootCauseCategory",children:"Root Cause Category"}),s.jsxs(ze,{value:u.rootCauseCategory,onValueChange:z=>d({...u,rootCauseCategory:z}),children:[s.jsx(Fe,{"data-testid":"select-issue-root-cause",children:s.jsx(Be,{placeholder:"Select category..."})}),s.jsx(Le,{children:Klt.map(z=>s.jsx(X,{value:z.value,children:z.label},z.value))})]})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"rootCauseAnalysis",children:"Root Cause Analysis (5 Whys)"}),s.jsx(Ht,{id:"rootCauseAnalysis",value:u.rootCauseAnalysis,onChange:z=>d({...u,rootCauseAnalysis:z.target.value}),placeholder:"Document the 5 Whys analysis or other root cause investigation",rows:4,"data-testid":"input-issue-root-analysis"})]})]})}),s.jsx(ht,{value:"resolution",className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(G,{htmlFor:"resolution",children:"Resolution / Corrective Action"}),s.jsx(Ht,{id:"resolution",value:u.resolution,onChange:z=>d({...u,resolution:z.target.value}),placeholder:"Describe the actions taken to resolve this issue",rows:4,"data-testid":"input-issue-resolution"})]}),s.jsx("div",{className:"col-span-2 p-4 bg-muted rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wt,{id:"verificationRequired",checked:u.verificationRequired,onCheckedChange:z=>d({...u,verificationRequired:!!z}),"data-testid":"checkbox-verification-required"}),s.jsxs(G,{htmlFor:"verificationRequired",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(pr,{className:"h-4 w-4"}),"Verification Required",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(Does the fix require independent verification?)"})]})]})})]})})]}),s.jsxs(on,{className:"mt-6",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:O.isPending||M.isPending,"data-testid":"button-submit",children:O.isPending||M.isPending?"Saving...":a?"Update Issue":"Report Issue"})]})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select a project from the dropdown above"})]})})}const Xlt=["labor","materials","equipment","subcontractor","overhead","other"];function Rc(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function rx(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}function $i(e){const t=parseFloat(e);return isNaN(t)?0:t}function Zlt(e){const t=new Map;return e.forEach(n=>{const r=n.category||"other",i=t.get(r)||{budgeted:0,actual:0,committed:0,forecast:0,count:0};i.budgeted+=$i(n.budgeted),i.actual+=$i(n.actual),i.committed+=$i(n.committed||"0"),i.forecast+=$i(n.forecast||"0"),i.count+=1,t.set(r,i)}),Array.from(t.entries()).map(([n,r])=>({category:n,budgeted:r.budgeted,actual:r.actual,committed:r.committed,forecast:r.forecast,variance:r.actual-r.budgeted,itemCount:r.count})).sort((n,r)=>r.budgeted-n.budgeted)}function Jlt(e,t){const n=e.reduce((g,p)=>g+$i(p.budgeted),0),r=e.reduce((g,p)=>g+$i(p.actual),0),i=t.length;t.filter(g=>g.status==="completed").length;const a=i>0?t.reduce((g,p)=>g+(p.progress||0),0)/i/100:0,o=i>0?t.filter(g=>g.endDate?new Date(g.endDate)<=new Date:!1).length/i:.5,l=n*Math.max(o,.1),c=n*a,u=r,d=u>0?c/u:c>0?1:0,f=l>0?c/l:c>0?1:0,h=c-u,m=c-l;return{pv:l,ev:c,ac:u,cpi:d,spi:f,cv:h,sv:m}}function ect(){var F;const{selectedProject:e}=jt(),{toast:t}=Nt(),n=e==null?void 0:e.id,r=(e==null?void 0:e.currency)||"USD",[i,a]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState({category:"labor",description:"",budgeted:"",actual:"0",currency:r,taskId:void 0}),[d,f]=x.useState({}),[h,m]=x.useState(""),{data:g=[],isLoading:p}=je({queryKey:["/api/projects",n,"costs"],enabled:!!n,retry:1,queryFn:async()=>{const E=await fetch(`/api/projects/${n}/costs`,{credentials:"include"});if(E.status===401)return[];if(!E.ok)throw new Error("Failed to fetch costs");return E.json()}}),{data:v=[]}=je({queryKey:["/api/projects",n,"tasks"],enabled:!!n,retry:1,queryFn:async()=>{const E=await fetch(`/api/projects/${n}/tasks`,{credentials:"include"});if(E.status===401)return[];if(!E.ok)throw new Error("Failed to fetch tasks");return E.json()}}),b=()=>{const E={};c.description.trim()||(E.description="Description is required");const B=parseFloat(c.budgeted);(isNaN(B)||B<0)&&(E.budgeted="Please enter a valid positive number");const L=parseFloat(c.actual);return c.actual&&(isNaN(L)||L<0)&&(E.actual="Please enter a valid positive number"),f(E),Object.keys(E).length===0},y=Pe({mutationFn:async E=>{const B=parseFloat(E.budgeted)||0,L=parseFloat(E.actual)||0;return(await fe("POST","/api/costs",{projectId:n,category:E.category,description:E.description.trim(),budgeted:B.toString(),actual:L.toString(),currency:E.currency,taskId:E.taskId||null})).json()},onSuccess:()=>{t({title:"Cost item created successfully"}),we.invalidateQueries({queryKey:["/api/projects",n,"costs"]}),S()},onError:E=>{t({title:"Failed to create cost item",description:E.message,variant:"destructive"})}}),j=Pe({mutationFn:async({id:E,data:B})=>{const L=parseFloat(B.budgeted)||0,I=parseFloat(B.actual)||0,q=parseFloat(B.committed)||0,$=B.forecast?parseFloat(B.forecast):null;return(await fe("PATCH",`/api/costs/${E}`,{category:B.category,description:B.description.trim(),budgeted:L.toString(),actual:I.toString(),committed:q.toString(),forecast:($==null?void 0:$.toString())||null,currency:B.currency,status:B.status,referenceNumber:B.referenceNumber.trim()||null,date:B.date?new Date(B.date).toISOString():new Date().toISOString(),invoiceDate:B.invoiceDate?new Date(B.invoiceDate).toISOString():null,paidDate:B.paidDate?new Date(B.paidDate).toISOString():null,taskId:B.taskId||null})).json()},onSuccess:()=>{t({title:"Cost item updated successfully"}),we.invalidateQueries({queryKey:["/api/projects",n,"costs"]}),S()},onError:E=>{t({title:"Failed to update cost item",description:E.message,variant:"destructive"})}}),N=Pe({mutationFn:async E=>{await fe("DELETE",`/api/costs/${E}`)},onSuccess:()=>{t({title:"Cost item deleted successfully"}),we.invalidateQueries({queryKey:["/api/projects",n,"costs"]})},onError:E=>{t({title:"Failed to delete cost item",description:E.message,variant:"destructive"})}}),w=E=>{var B,L;if(f({}),E){l(E);const I=E.date?new Date(E.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],q=E.invoiceDate?new Date(E.invoiceDate).toISOString().split("T")[0]:"",$=E.paidDate?new Date(E.paidDate).toISOString().split("T")[0]:"";u({category:E.category,description:E.description,budgeted:E.budgeted,actual:E.actual||"0",committed:((B=E.committed)==null?void 0:B.toString())||"0",forecast:((L=E.forecast)==null?void 0:L.toString())||"",currency:E.currency,status:E.status||"planned",referenceNumber:E.referenceNumber||"",date:I,invoiceDate:q,paidDate:$,taskId:E.taskId||void 0})}else l(null),u({category:"labor",description:"",budgeted:"",actual:"0",committed:"0",forecast:"",currency:r,status:"planned",referenceNumber:"",date:new Date().toISOString().split("T")[0],invoiceDate:"",paidDate:"",taskId:void 0});a(!0)},S=()=>{a(!1),l(null),f({})},k=()=>{b()&&(o?j.mutate({id:o.id,data:c}):y.mutate(c))};if(!e)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(Is,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project to view cost management."})]})});const C=g.reduce((E,B)=>E+$i(B.budgeted),0),A=g.reduce((E,B)=>E+$i(B.actual),0),D=g.reduce((E,B)=>E+$i(B.committed||"0"),0),P=g.reduce((E,B)=>E+$i(B.forecast||"0"),0),_=A-C,O=C>0?Math.round(_/C*100):0,M=Zlt(g),T=Jlt(g,v),R=g.filter(E=>E.description.toLowerCase().includes(h.toLowerCase())||E.category.toLowerCase().includes(h.toLowerCase())||E.referenceNumber&&E.referenceNumber.toLowerCase().includes(h.toLowerCase()));return s.jsxs("div",{className:"p-6 space-y-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap shrink-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"text-cost-title",children:"Cost Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Budget tracking and cost analytics"})]}),s.jsxs(H,{onClick:()=>w(),"data-testid":"button-add-cost",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Cost Item"]})]}),p?s.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6 shrink-0",children:Array.from({length:6}).map((E,B)=>s.jsx(Ke,{className:"h-32"},B))}):s.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6 shrink-0",children:[s.jsx(Ts,{title:"Total Budget",value:rx(C),icon:ur,"data-testid":"metric-total-budget"}),s.jsx(Ts,{title:"Actual Cost",value:rx(A),change:O<0?Math.abs(O):void 0,icon:Gu,"data-testid":"metric-actual-cost"}),s.jsx(Ts,{title:"Budget Remaining",value:rx(Math.max(0,C-A)),change:O>0?-O:void 0,icon:ri,"data-testid":"metric-remaining"}),s.jsx(Ts,{title:"Committed",value:rx(D),icon:ur,"data-testid":"metric-committed"}),s.jsx(Ts,{title:"Forecast",value:rx(P||C),icon:ri,"data-testid":"metric-forecast"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 flex-1 min-h-0",children:[s.jsx("div",{className:"lg:col-span-3 flex flex-col gap-4 min-h-0",children:s.jsxs(ie,{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(Ne,{className:"shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Se,{children:"Cost Items"}),s.jsx(it,{children:"All cost line items for this project"})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search costs...",className:"pl-8",value:h,onChange:E=>m(E.target.value)})]})]})}),s.jsx(ce,{className:"flex-1 overflow-auto",children:p?s.jsx(Ke,{className:"h-full"}):R.length>0?s.jsx("div",{className:"space-y-2",children:R.map(E=>s.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 rounded-lg border bg-card hover-elevate","data-testid":`cost-item-${E.id}`,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-sm truncate",children:E.description}),s.jsx(ae,{variant:"outline",className:"text-xs capitalize",children:E.category})]}),s.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1 flex-wrap",children:[s.jsxs("span",{children:["Budget: ",Rc($i(E.budgeted),E.currency)]}),s.jsxs("span",{children:["Actual: ",Rc($i(E.actual),E.currency)]}),$i(E.committed||"0")>0&&s.jsxs("span",{children:["Committed: ",Rc($i(E.committed||"0"),E.currency)]}),E.status&&s.jsx(ae,{variant:"outline",className:"text-xs",children:E.status})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w(E),"data-testid":`button-edit-cost-${E.id}`,children:s.jsx(lc,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>N.mutate(E.id),"data-testid":`button-delete-cost-${E.id}`,children:s.jsx(wn,{className:"h-4 w-4"})})]})]},E.id))}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No cost items found."})})]})}),s.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-4 overflow-y-auto pr-1",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Breakdown by Category"})}),s.jsx(ce,{className:"space-y-4",children:p?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ke,{className:"h-24"}),s.jsx(Ke,{className:"h-24"})]}):M.length>0?M.map(E=>{const B=E.budgeted>0?E.actual/E.budgeted*100:0,L=E.budgeted>0?E.variance/E.budgeted*100:0;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold capitalize text-sm",children:E.category}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Rc(E.actual,r)," / ",Rc(E.budgeted,r)]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(ae,{variant:E.variance>0?"destructive":"default",className:"text-xs px-1.5 py-0",children:[E.variance>0?"+":"",L.toFixed(0),"%"]})})]}),s.jsx("div",{className:"space-y-1",children:s.jsx(fn,{value:Math.min(B,100),className:`h-1.5 ${B>100?"bg-destructive/20":""}`})})]},E.category)}):s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No data available."})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Earned Value Analysis"})}),s.jsx(ce,{className:"space-y-4",children:p?s.jsx(Ke,{className:"h-48"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Planned Value (PV)"}),s.jsx("span",{className:"font-semibold font-mono text-sm",children:Rc(T.pv,r)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Earned Value (EV)"}),s.jsx("span",{className:"font-semibold font-mono text-sm",children:Rc(T.ev,r)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Actual Cost (AC)"}),s.jsx("span",{className:"font-semibold font-mono text-sm",children:Rc(T.ac,r)})]}),s.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"CPI"}),s.jsx(ae,{variant:T.cpi>=1?"default":"destructive",children:T.cpi.toFixed(2)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"SPI"}),s.jsx(ae,{variant:T.spi>=1?"default":"secondary",children:T.spi.toFixed(2)})]})]})]})})]})]})]}),s.jsx(zt,{open:i,onOpenChange:a,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:o?"Edit Cost Item":"Add Cost Item"}),s.jsx(ir,{children:o?"Update the cost item details.":"Add a new cost item to track budget and expenses."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"category",children:"Category"}),s.jsxs(ze,{value:c.category,onValueChange:E=>u({...c,category:E}),children:[s.jsx(Fe,{"data-testid":"select-category",children:s.jsx(Be,{placeholder:"Select category"})}),s.jsx(Le,{children:Xlt.map(E=>s.jsx(X,{value:E,className:"capitalize",children:E},E))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description *"}),s.jsx(Ht,{id:"description",value:c.description,onChange:E=>{u({...c,description:E.target.value}),d.description&&f({...d,description:""})},placeholder:"Enter cost description","data-testid":"input-description",className:d.description?"border-destructive":""}),d.description&&s.jsx("p",{className:"text-xs text-destructive",children:d.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"budgeted",children:"Budgeted Amount *"}),s.jsx(Ce,{id:"budgeted",type:"number",min:"0",step:"0.01",value:c.budgeted,onChange:E=>{u({...c,budgeted:E.target.value}),d.budgeted&&f({...d,budgeted:""})},placeholder:"0","data-testid":"input-budgeted",className:d.budgeted?"border-destructive":""}),d.budgeted&&s.jsx("p",{className:"text-xs text-destructive",children:d.budgeted})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"actual",children:"Actual Amount"}),s.jsx(Ce,{id:"actual",type:"number",min:"0",step:"0.01",value:c.actual,onChange:E=>{u({...c,actual:E.target.value}),d.actual&&f({...d,actual:""})},placeholder:"0","data-testid":"input-actual",className:d.actual?"border-destructive":""}),d.actual&&s.jsx("p",{className:"text-xs text-destructive",children:d.actual})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"committed",children:"Committed Amount"}),s.jsx(Ce,{id:"committed",type:"number",min:"0",step:"0.01",value:c.committed,onChange:E=>u({...c,committed:E.target.value}),placeholder:"0","data-testid":"input-committed"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"POs, contracts not yet invoiced"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"forecast",children:"Forecast Amount"}),s.jsx(Ce,{id:"forecast",type:"number",min:"0",step:"0.01",value:c.forecast,onChange:E=>u({...c,forecast:E.target.value}),placeholder:"Optional","data-testid":"input-forecast"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Projected future cost"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:c.status,onValueChange:E=>u({...c,status:E}),children:[s.jsx(Fe,{"data-testid":"select-status",children:s.jsx(Be,{placeholder:"Select status"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"planned",children:"Planned"}),s.jsx(X,{value:"committed",children:"Committed"}),s.jsx(X,{value:"invoiced",children:"Invoiced"}),s.jsx(X,{value:"paid",children:"Paid"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"date",children:"Date"}),s.jsx(Ce,{id:"date",type:"date",value:c.date,onChange:E=>u({...c,date:E.target.value}),"data-testid":"input-date"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"referenceNumber",children:"Reference Number (PO/Invoice)"}),s.jsx(Ce,{id:"referenceNumber",value:c.referenceNumber,onChange:E=>u({...c,referenceNumber:E.target.value}),placeholder:"PO-12345 or INV-67890","data-testid":"input-reference"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"invoiceDate",children:"Invoice Date"}),s.jsx(Ce,{id:"invoiceDate",type:"date",value:c.invoiceDate,onChange:E=>u({...c,invoiceDate:E.target.value}),"data-testid":"input-invoice-date"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"paidDate",children:"Paid Date"}),s.jsx(Ce,{id:"paidDate",type:"date",value:c.paidDate,onChange:E=>u({...c,paidDate:E.target.value}),"data-testid":"input-paid-date"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"task",children:"Link to Task (optional)"}),s.jsxs(ze,{value:((F=c.taskId)==null?void 0:F.toString())||"none",onValueChange:E=>u({...c,taskId:E&&E!=="none"?parseInt(E):void 0}),children:[s.jsx(Fe,{"data-testid":"select-task",children:s.jsx(Be,{placeholder:"Select task (optional)"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"none",children:"None"}),v.map(E=>s.jsxs(X,{value:E.id.toString(),children:[E.wbsCode," - ",E.name]},E.id))]})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:S,children:"Cancel"}),s.jsx(H,{onClick:k,disabled:y.isPending||j.isPending,"data-testid":"button-submit-cost",children:y.isPending||j.isPending?"Saving...":o?"Update":"Create"})]})]})})]})}var XM="Radio",[tct,tle]=Er(XM),[nct,rct]=tct(XM),nle=x.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,h]=x.useState(null),m=kt(t,v=>h(v)),g=x.useRef(!1),p=f?u||!!f.closest("form"):!0;return s.jsxs(nct,{scope:n,checked:i,disabled:o,children:[s.jsx(Qe.button,{type:"button",role:"radio","aria-checked":i,"data-state":ile(i),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:Re(e.onClick,v=>{i||c==null||c(),p&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),p&&s.jsx(sct,{control:f,bubbles:!g.current,name:r,value:l,checked:i,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});nle.displayName=XM;var rle="RadioIndicator",sle=x.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,a=rct(rle,n);return s.jsx(Yr,{present:r||a.checked,children:s.jsx(Qe.span,{"data-state":ile(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});sle.displayName=rle;var sct=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,a=x.useRef(null),o=zy(n),l=Ay(t);return x.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const h=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(h)}},[o,n,r]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ile(e){return e?"checked":"unchecked"}var ict=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ZM="RadioGroup",[act]=Er(ZM,[Qp,tle]),ale=Qp(),ole=tle(),[oct,lct]=act(ZM),lle=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=ale(n),g=Yu(u),[p,v]=ni({prop:a,defaultProp:i,onChange:f});return s.jsx(oct,{scope:n,name:r,required:o,disabled:l,value:p,onValueChange:v,children:s.jsx(VD,{asChild:!0,...m,orientation:c,dir:g,loop:d,children:s.jsx(Qe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})});lle.displayName=ZM;var cle="RadioGroupItem",ule=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,a=lct(cle,n),o=a.disabled||r,l=ale(n),c=ole(n),u=x.useRef(null),d=kt(t,u),f=a.value===i.value,h=x.useRef(!1);return x.useEffect(()=>{const m=p=>{ict.includes(p.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),s.jsx(qD,{asChild:!0,...l,focusable:!o,active:f,children:s.jsx(nle,{disabled:o,required:a.required,checked:f,...c,...i,name:a.name,ref:d,onCheck:()=>a.onValueChange(i.value),onKeyDown:Re(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Re(i.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});ule.displayName=cle;var cct="RadioGroupIndicator",dle=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=ole(n);return s.jsx(sle,{...i,...r,ref:t})});dle.displayName=cct;var fle=lle,hle=ule,uct=dle;const mle=x.forwardRef(({className:e,...t},n)=>s.jsx(fle,{className:he("grid gap-2",e),...t,ref:n}));mle.displayName=fle.displayName;const l0=x.forwardRef(({className:e,...t},n)=>s.jsx(hle,{ref:n,className:he("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(uct,{className:"flex items-center justify-center",children:s.jsx(jK,{className:"h-2.5 w-2.5 fill-current text-current"})})}));l0.displayName=hle.displayName;var ple=["PageUp","PageDown"],gle=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xle={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pg="Slider",[qA,dct,fct]=Fp(pg),[vle]=Er(pg,[fct]),[hct,rC]=vle(pg),yle=x.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:g,...p}=e,v=x.useRef(new Set),b=x.useRef(0),j=o==="horizontal"?mct:pct,[N=[],w]=ni({prop:d,defaultProp:u,onChange:P=>{var O;(O=[...v.current][b.current])==null||O.focus(),f(P)}}),S=x.useRef(N);function k(P){const _=bct(N,P);D(P,_)}function C(P){D(P,b.current)}function A(){const P=S.current[b.current];N[b.current]!==P&&h(N)}function D(P,_,{commit:O}={commit:!1}){const M=Sct(a),T=Cct(Math.round((P-r)/a)*a+r,M),R=Pv(T,[r,i]);w((F=[])=>{const E=vct(F,R,_);if(Nct(E,c*a)){b.current=E.indexOf(R);const B=String(E)!==String(F);return B&&O&&h(E),B?E:F}else return F})}return s.jsx(hct,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:i,valueIndexToChangeRef:b,thumbs:v.current,values:N,orientation:o,form:g,children:s.jsx(qA.Provider,{scope:e.__scopeSlider,children:s.jsx(qA.Slot,{scope:e.__scopeSlider,children:s.jsx(j,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:Re(p.onPointerDown,()=>{l||(S.current=N)}),min:r,max:i,inverted:m,onSlideStart:l?void 0:k,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&D(r,0,{commit:!0}),onEndKeyDown:()=>!l&&D(i,N.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:_})=>{if(!l){const T=ple.includes(P.key)||P.shiftKey&&gle.includes(P.key)?10:1,R=b.current,F=N[R],E=a*T*_;D(F+E,R,{commit:!0})}}})})})})});yle.displayName=pg;var[ble,jle]=vle(pg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mct=x.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=x.useState(null),m=kt(t,j=>h(j)),g=x.useRef(void 0),p=Yu(i),v=p==="ltr",b=v&&!a||!v&&a;function y(j){const N=g.current||f.getBoundingClientRect(),w=[0,N.width],k=JM(w,b?[n,r]:[r,n]);return g.current=N,k(j-N.left)}return s.jsx(ble,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:s.jsx(wle,{dir:p,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const N=y(j.clientX);o==null||o(N)},onSlideMove:j=>{const N=y(j.clientX);l==null||l(N)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:j=>{const w=xle[b?"from-left":"from-right"].includes(j.key);u==null||u({event:j,direction:w?-1:1})}})})}),pct=x.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=x.useRef(null),f=kt(t,d),h=x.useRef(void 0),m=!i;function g(p){const v=h.current||d.current.getBoundingClientRect(),b=[0,v.height],j=JM(b,m?[r,n]:[n,r]);return h.current=v,j(p-v.top)}return s.jsx(ble,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(wle,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const v=g(p.clientY);a==null||a(v)},onSlideMove:p=>{const v=g(p.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:p=>{const b=xle[m?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:b?-1:1})}})})}),wle=x.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=rC(pg,n);return s.jsx(Qe.span,{...u,ref:t,onKeyDown:Re(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):ple.concat(gle).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Re(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():r(f)}),onPointerMove:Re(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:Re(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),a(f))})})}),Nle="SliderTrack",Sle=x.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=rC(Nle,n);return s.jsx(Qe.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});Sle.displayName=Nle;var UA="SliderRange",Cle=x.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=rC(UA,n),a=jle(UA,n),o=x.useRef(null),l=kt(t,o),c=i.values.length,u=i.values.map(h=>Ple(h,i.min,i.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Qe.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:d+"%",[a.endEdge]:f+"%"}})});Cle.displayName=UA;var WA="SliderThumb",kle=x.forwardRef((e,t)=>{const n=dct(e.__scopeSlider),[r,i]=x.useState(null),a=kt(t,l=>i(l)),o=x.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(gct,{...e,ref:a,index:o})}),gct=x.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...a}=e,o=rC(WA,n),l=jle(WA,n),[c,u]=x.useState(null),d=kt(t,y=>u(y)),f=c?o.form||!!c.closest("form"):!0,h=Ay(c),m=o.values[r],g=m===void 0?0:Ple(m,o.min,o.max),p=yct(r,o.values.length),v=h==null?void 0:h[l.size],b=v?jct(v,g,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${b}px)`},children:[s.jsx(qA.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Qe.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:Re(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&s.jsx(xct,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},r)]})});kle.displayName=WA;var xct=e=>{const{value:t,...n}=e,r=x.useRef(null),i=zy(t);return x.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==t&&c){const u=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(u)}},[i,t]),s.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function vct(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,a)=>i-a)}function Ple(e,t,n){const a=100/(n-t)*(e-t);return Pv(a,[0,100])}function yct(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function bct(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function jct(e,t,n){const r=e/2,a=JM([0,50],[0,r]);return(r-a(t)*n)*n}function wct(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Nct(e,t){if(t>0){const n=wct(e);return Math.min(...n)>=t}return!0}function JM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Sct(e){return(String(e).split(".")[1]||"").length}function Cct(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Ele=yle,kct=Sle,Pct=Cle,Ect=kle;const _le=x.forwardRef(({className:e,...t},n)=>s.jsxs(Ele,{ref:n,className:he("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(kct,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(Pct,{className:"absolute h-full bg-primary"})}),s.jsx(Ect,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_le.displayName=Ele.displayName;const c0={personality:"professional",verbosity:50,focusAreas:["tasks","risks","costs","resources"],autoSuggest:!0},Ale="ai_assistant_settings";function HA(){if(typeof window>"u")return c0;try{const e=localStorage.getItem(Ale);if(e)return{...c0,...JSON.parse(e)}}catch(e){console.error("Failed to load AI settings:",e)}return c0}function _ct(e){if(!(typeof window>"u"))try{localStorage.setItem(Ale,JSON.stringify(e))}catch(t){console.error("Failed to save AI settings:",t)}}function Act({open:e,onOpenChange:t,onSettingsChange:n}){const{toast:r}=Nt(),[i,a]=x.useState(HA);x.useEffect(()=>{e&&a(HA())},[e]);const o=[{id:"tasks",label:"Tasks & WBS"},{id:"risks",label:"Risk Management"},{id:"issues",label:"Issue Tracking"},{id:"costs",label:"Cost & Budget"},{id:"resources",label:"Resources"},{id:"stakeholders",label:"Stakeholders"},{id:"schedule",label:"Schedule & Milestones"}],l=d=>{a(f=>({...f,focusAreas:f.focusAreas.includes(d)?f.focusAreas.filter(h=>h!==d):[...f.focusAreas,d]}))},c=()=>{_ct(i),n==null||n(i),r({title:"Settings saved",description:"AI Assistant preferences updated"}),t(!1)},u=()=>{a(c0)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-md",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{"data-testid":"text-settings-dialog-title",children:"AI Assistant Settings"}),s.jsx(ir,{"data-testid":"text-settings-dialog-description",children:"Customize how the AI Assistant responds to your queries."})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(G,{className:"text-sm font-medium",children:"Response Style"}),s.jsxs(mle,{value:i.personality,onValueChange:d=>a(f=>({...f,personality:d})),className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx(l0,{value:"professional",id:"professional",className:"peer sr-only","data-testid":"radio-professional"}),s.jsxs(G,{htmlFor:"professional",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[s.jsx("span",{className:"text-sm font-medium",children:"Professional"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Formal tone"})]})]}),s.jsxs("div",{children:[s.jsx(l0,{value:"friendly",id:"friendly",className:"peer sr-only","data-testid":"radio-friendly"}),s.jsxs(G,{htmlFor:"friendly",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[s.jsx("span",{className:"text-sm font-medium",children:"Friendly"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Casual tone"})]})]}),s.jsxs("div",{children:[s.jsx(l0,{value:"technical",id:"technical",className:"peer sr-only","data-testid":"radio-technical"}),s.jsxs(G,{htmlFor:"technical",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[s.jsx("span",{className:"text-sm font-medium",children:"Technical"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Detailed data"})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(G,{className:"text-sm font-medium",children:"Response Length"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:i.verbosity<33?"Concise":i.verbosity<66?"Balanced":"Detailed"})]}),s.jsx(_le,{value:[i.verbosity],onValueChange:([d])=>a(f=>({...f,verbosity:d})),max:100,step:1,className:"w-full","data-testid":"slider-verbosity"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Brief"}),s.jsx("span",{children:"Comprehensive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(G,{className:"text-sm font-medium",children:"Focus Areas"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"AI will prioritize these areas when analyzing your project"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(d=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:d.id,checked:i.focusAreas.includes(d.id),onCheckedChange:()=>l(d.id),"data-testid":`checkbox-focus-${d.id}`}),s.jsx(G,{htmlFor:d.id,className:"text-sm cursor-pointer",children:d.label})]},d.id))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"autoSuggest",checked:i.autoSuggest,onCheckedChange:d=>a(f=>({...f,autoSuggest:d===!0})),"data-testid":"checkbox-auto-suggest"}),s.jsx(G,{htmlFor:"autoSuggest",className:"text-sm cursor-pointer",children:"Show follow-up suggestions after responses"})]})]}),s.jsxs("div",{className:"flex gap-2 justify-between",children:[s.jsx(H,{variant:"outline",onClick:u,"data-testid":"button-reset-settings",children:"Reset to Default"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),"data-testid":"button-cancel-settings",children:"Cancel"}),s.jsx(H,{onClick:c,"data-testid":"button-save-settings",children:"Save Settings"})]})]})]})})}function Tct({preview:e,functionName:t,args:n,onModify:r,onApprove:i,onDismiss:a}){var y,j,N,w,S,k,C,A,D,P,_,O;const{toast:o}=Nt(),[,l]=yr(),[c,u]=x.useState(new Set(["overview"])),[d,f]=x.useState(!1),h=M=>{const T=new Set(c);T.has(M)?T.delete(M):T.add(M),u(T)},m=Pe({mutationFn:async()=>{if(!e)throw new Error("No preview available");return(await fe("POST","/api/ai/execute-action",{actionId:e.actionId,functionName:t,args:n})).json()},onSuccess:async M=>{var T,R;if(we.invalidateQueries(),o({title:"Project Created",description:"Your project has been created successfully!"}),M!=null&&M.result)try{const F=typeof M.result=="string"?JSON.parse(M.result):M.result;(T=F.project)!=null&&T.id?l(`/projects/${F.project.id}`):(R=F.summary)!=null&&R.projectId&&l(`/projects/${F.summary.projectId}`)}catch{we.invalidateQueries({queryKey:["/api/projects"]})}i==null||i()},onError:M=>{o({title:"Execution Failed",description:M.message,variant:"destructive"})}}),g=()=>{f(!0),r("Please modify the project based on my feedback:")};if(!e)return null;const p=((y=e.preview)==null?void 0:y.summary)||((j=e.preview)==null?void 0:j.project)||n,v=((w=(N=e.preview)==null?void 0:N.summary)==null?void 0:w.tasksCreated)||((k=(S=e.preview)==null?void 0:S.summary)==null?void 0:k.tasksCount)||((C=n==null?void 0:n.initialTasks)==null?void 0:C.length)||0,b=((D=(A=e.preview)==null?void 0:A.summary)==null?void 0:D.risksCreated)||((_=(P=e.preview)==null?void 0:P.summary)==null?void 0:_.risksCount)||((O=n==null?void 0:n.initialRisks)==null?void 0:O.length)||0;return s.jsxs(ie,{className:"w-96 h-full flex flex-col border-l",children:[s.jsxs(Ne,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(Sn,{className:"h-5 w-5 text-primary"}),"Project Preview"]}),a&&s.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:a,children:""})]}),s.jsx(ae,{variant:"outline",className:"w-fit",children:e.type==="create"?"CREATE":e.type.toUpperCase()})]}),s.jsx(On,{className:"flex-1 px-4",children:s.jsxs("div",{className:"space-y-4 pb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>h("overview"),className:"w-full flex items-center justify-between text-sm font-semibold hover:text-primary transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4"}),"Project Overview"]}),c.has("overview")?s.jsx(kx,{className:"h-4 w-4"}):s.jsx(ar,{className:"h-4 w-4"})]}),c.has("overview")&&s.jsx(ie,{className:"bg-muted/50",children:s.jsxs(ce,{className:"pt-4 space-y-3",children:[p!=null&&p.projectName||n!=null&&n.name?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Name"}),s.jsx("p",{className:"text-sm font-medium",children:(p==null?void 0:p.projectName)||(n==null?void 0:n.name)})]}):null,p!=null&&p.code||n!=null&&n.code?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Code"}),s.jsx("p",{className:"text-sm font-medium",children:(p==null?void 0:p.code)||(n==null?void 0:n.code)})]}):null,p!=null&&p.description||n!=null&&n.description?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Description"}),s.jsx("p",{className:"text-sm text-xs line-clamp-3",children:(p==null?void 0:p.description)||(n==null?void 0:n.description)})]}):null,s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(n==null?void 0:n.startDate)&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[s.jsx(Br,{className:"h-3 w-3"}),"Start Date"]}),s.jsx("p",{className:"text-sm font-medium",children:new Date(n.startDate).toLocaleDateString()})]}),(n==null?void 0:n.endDate)&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[s.jsx(Br,{className:"h-3 w-3"}),"End Date"]}),s.jsx("p",{className:"text-sm font-medium",children:new Date(n.endDate).toLocaleDateString()})]})]}),(n==null?void 0:n.budget)&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[s.jsx(ur,{className:"h-3 w-3"}),"Budget"]}),s.jsx("p",{className:"text-sm font-medium",children:new Intl.NumberFormat("en-US",{style:"currency",currency:(n==null?void 0:n.currency)||"USD",minimumFractionDigits:0}).format(n.budget)})]}),(n==null?void 0:n.status)&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),s.jsx(ae,{variant:"outline",className:"capitalize",children:n.status})]})]})})]}),s.jsx(nl,{}),v>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>h("tasks"),className:"w-full flex items-center justify-between text-sm font-semibold hover:text-primary transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ome,{className:"h-4 w-4"}),"Tasks (",v,")"]}),c.has("tasks")?s.jsx(kx,{className:"h-4 w-4"}):s.jsx(ar,{className:"h-4 w-4"})]}),c.has("tasks")&&s.jsx(ie,{className:"bg-muted/50",children:s.jsx(ce,{className:"pt-4",children:n!=null&&n.initialTasks&&Array.isArray(n.initialTasks)?s.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[n.initialTasks.slice(0,10).map((M,T)=>s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[s.jsx(pr,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:M.title}),M.description&&s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:M.description})]})]},T)),n.initialTasks.length>10&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["+",n.initialTasks.length-10," more tasks"]})]}):s.jsxs("p",{className:"text-sm text-muted-foreground",children:[v," tasks will be created"]})})})]}),s.jsx(nl,{}),b>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>h("risks"),className:"w-full flex items-center justify-between text-sm font-semibold hover:text-primary transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ul,{className:"h-4 w-4"}),"Risks (",b,")"]}),c.has("risks")?s.jsx(kx,{className:"h-4 w-4"}):s.jsx(ar,{className:"h-4 w-4"})]}),c.has("risks")&&s.jsx(ie,{className:"bg-muted/50",children:s.jsx(ce,{className:"pt-4",children:n!=null&&n.initialRisks&&Array.isArray(n.initialRisks)?s.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[n.initialRisks.slice(0,10).map((M,T)=>s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[s.jsx(ft,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:M.title}),M.category&&s.jsx("p",{className:"text-xs text-muted-foreground",children:M.category})]})]},T)),n.initialRisks.length>10&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["+",n.initialRisks.length-10," more risks"]})]}):s.jsxs("p",{className:"text-sm text-muted-foreground",children:[b," risks will be created"]})})})]}),e.warnings&&e.warnings.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(nl,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[s.jsx(ft,{className:"h-4 w-4"}),"Warnings"]}),s.jsx(ie,{className:"bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800",children:s.jsx(ce,{className:"pt-4",children:s.jsx("ul",{className:"space-y-1 text-sm text-amber-800 dark:text-amber-200",children:e.warnings.map((M,T)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"mt-0.5",children:""}),s.jsx("span",{children:M})]},T))})})})]})]})]})}),s.jsxs("div",{className:"p-4 border-t space-y-2",children:[s.jsxs(H,{variant:"outline",className:"w-full",onClick:g,disabled:m.isPending||d,children:[s.jsx(Bme,{className:"h-4 w-4 mr-2"}),"Modify with AI"]}),s.jsx(H,{className:"w-full",onClick:()=>m.mutate(),disabled:m.isPending,children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pr,{className:"h-4 w-4 mr-2"}),"Approve & Create"]})})]})]})}function Dct(){var Oe,Z;const{selectedProjectId:e,selectedProject:t,selectedOrgId:n,terminology:r,organizations:i}=jt(),{context:a}=vRe(),{toast:o}=Nt(),{pendingPrompt:l,clearPendingPrompt:c}=Ene();yr();const[u,d]=x.useState(null),[f,h]=x.useState(""),[m,g]=x.useState(!1),[p,v]=x.useState(null),[b,y]=x.useState(!1),[j,N]=x.useState(null),[w,S]=x.useState(""),[k,C]=x.useState(null),[A,D]=x.useState(!1),[P,_]=x.useState(()=>HA()),[O,M]=x.useState([]),[T,R]=x.useState(null),[F,E]=x.useState("gemini-2.5-pro"),B=x.useRef(null),L=x.useRef(null),I=new URLSearchParams(window.location.search),q=I.get("mode")==="create-project",$=I.get("orgId"),z=$?parseInt($):n,Y=x.useMemo(()=>{const W=q?z:n;if(!W)return r;const me=i.find(St=>St.id===W);if(!me)return r;const Ae=me.topLevelEntityLabel==="custom"?me.topLevelEntityLabelCustom||"Organization":me.topLevelEntityLabel||"Organization",Je=me.programEntityLabel==="custom"?me.programEntityLabelCustom||"Program":me.programEntityLabel||"Program";return{topLevel:Ae,program:Je}},[q,z,n,i,r]),ne=[{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Best reasoning for complex analysis",tier:"premium",limits:"150 RPM, 2M TPM, 10K/day",warning:"Premium model - Limited usage or higher cost"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Balanced performance and speed",tier:"standard",limits:"1K RPM, 1M TPM, 10K/day",warning:null},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",description:"High throughput for simple queries",tier:"standard",limits:"4K RPM, 4M TPM, Unlimited/day",warning:null}];x.useEffect(()=>{l&&(h(l),c())},[l,c]),x.useEffect(()=>{L.current&&L.current!==e&&(we.removeQueries({queryKey:[`/api/ai/conversations/project/${L.current}`]}),we.removeQueries({predicate:W=>{const me=W.queryKey[0];return(me==null?void 0:me.startsWith("/api/ai/conversations/"))&&(me==null?void 0:me.endsWith("/messages"))}})),d(null),L.current=e},[e]);const{data:te=[],isLoading:pe}=je({queryKey:e?[`/api/ai/conversations/project/${e}`]:["__disabled__"],enabled:!!e,retry:1}),{data:J=[],isLoading:xe}=je({queryKey:u?[`/api/ai/conversations/${u}/messages`]:["__disabled__"],enabled:!!u,retry:1}),ye=Pe({mutationFn:async()=>{if(!q&&!e)throw new Error("Please select a project first");return await fe("POST","/api/ai/conversations",{title:q?"Create New Project":"New Conversation",projectId:q?null:e})},onSuccess:W=>{e&&we.invalidateQueries({queryKey:[`/api/ai/conversations/project/${e}`]}),d(W.id),q||o({title:"Success",description:"New conversation created"})},onError:W=>{o({title:"Error",description:W.message,variant:"destructive"})}});x.useEffect(()=>{q&&!u&&!ye.isPending&&ye.mutate()},[q,u]);const re=Pe({mutationFn:async W=>{if(!u)throw new Error("No conversation selected");return(await fe("POST","/api/ai/chat",{conversationId:u,message:W,context:{currentPage:q?"create-project-ai":a.currentPage,selectedTaskId:a.selectedTaskId,selectedRiskId:a.selectedRiskId,selectedIssueId:a.selectedIssueId,selectedResourceId:a.selectedResourceId,selectedItemIds:a.selectedItemIds,modelName:F,organizationId:q?z:n||void 0,terminology:Y}})).json()},onSuccess:W=>{if(we.invalidateQueries({queryKey:[`/api/ai/conversations/${u}/messages`]}),e&&we.invalidateQueries({queryKey:[`/api/ai/conversations/project/${e}`]}),h(""),W.functionCalls&&Array.isArray(W.functionCalls)&&W.functionCalls.length>0)for(const me of W.functionCalls)try{const Ae=typeof me.result=="string"?JSON.parse(me.result):me.result;if(Ae.preview){const Je={...me.args,organizationId:me.args.organizationId||z};R({preview:Ae.preview,functionName:me.name,args:Je});break}}catch{continue}},onError:W=>{o({title:"Error",description:W.message,variant:"destructive"})}}),ue=Pe({mutationFn:async W=>{await fe("DELETE",`/api/ai/conversations/${W}`)},onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/ai/conversations/project/${e}`]}),u===p&&d(null),g(!1),v(null),o({title:"Success",description:"Conversation deleted"})},onError:W=>{o({title:"Error",description:W.message,variant:"destructive"})}}),ke=Pe({mutationFn:async({id:W,title:me})=>await fe("PATCH",`/api/ai/conversations/${W}`,{title:me}),onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/ai/conversations/project/${e}`]}),y(!1),N(null),S(""),o({title:"Success",description:"Conversation renamed"})},onError:W=>{o({title:"Error",description:W.message,variant:"destructive"})}});x.useEffect(()=>{var W;(W=B.current)==null||W.scrollIntoView({behavior:"smooth"})},[J]);const $e=async W=>{if(W.preventDefault(),!f.trim()||!u)return;let me=f;if(O.length>0){const Ae=await rJ(O);me=f+Ae,M([])}re.mutate(me)},Ve=W=>{v(W),g(!0)},gt=W=>{N(W),S(W.title||""),y(!0)},He=()=>{!j||!w.trim()||ke.mutate({id:j.id,title:w.trim()})},be=async(W,me)=>{try{await navigator.clipboard.writeText(W),C(me),setTimeout(()=>C(null),2e3)}catch{o({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},xt=W=>{h(W),setTimeout(()=>{const me=document.querySelector('textarea[placeholder*="Describe your project"]');me&&(me.focus(),me.scrollIntoView({behavior:"smooth",block:"nearest"}))},100)},sn=()=>{R(null)},K=te.find(W=>W.id===u),de=(t==null?void 0:t.name)||(q?"Creating New Project":"No project selected"),ve=q&&T&&T.functionName==="create_project_from_ai";return s.jsxs("div",{className:"flex h-full gap-4 p-6",children:[s.jsxs(ie,{className:"w-80 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yl,{className:"h-5 w-5 text-primary","data-testid":"icon-bot"}),s.jsx("h2",{className:"font-semibold","data-testid":"text-conversations-title",children:"AI Assistant"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(H,{size:"icon",variant:"ghost",onClick:()=>D(!0),"data-testid":"button-ai-settings",title:"AI Settings",children:s.jsx(c1,{className:"h-4 w-4"})}),s.jsx(H,{size:"icon",variant:"ghost",onClick:()=>ye.mutate(),disabled:ye.isPending||!q&&!e,"data-testid":"button-new-conversation",title:!q&&!e?"Please select a project first":"Create new conversation",children:s.jsx(Et,{className:"h-4 w-4"})})]})]}),s.jsx(On,{className:"flex-1",children:s.jsx("div",{className:"p-2 space-y-1",children:!q&&!e?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground","data-testid":"text-select-project",children:[s.jsx(bt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"Please select a project to view AI conversations"]}):pe?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground","data-testid":"text-loading",children:"Loading conversations..."}):te.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground","data-testid":"text-no-conversations",children:"No conversations yet. Start a new one!"}):te.map(W=>s.jsxs("div",{className:`p-3 rounded-md cursor-pointer hover-elevate flex items-start justify-between gap-2 ${u===W.id?"bg-accent":""}`,onClick:()=>d(W.id),"data-testid":`conversation-item-${W.id}`,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium truncate","data-testid":`text-conversation-title-${W.id}`,children:W.title||"New Conversation"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(W.updatedAt).toLocaleDateString()})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[s.jsx(H,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:me=>{me.stopPropagation(),gt(W)},"data-testid":`button-rename-conversation-${W.id}`,title:"Rename conversation",children:s.jsx(lc,{className:"h-3 w-3"})}),s.jsx(H,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:me=>{me.stopPropagation(),Ve(W.id)},"data-testid":`button-delete-conversation-${W.id}`,title:"Delete conversation",children:s.jsx(wn,{className:"h-3 w-3"})})]})]},W.id))})})]}),s.jsx(ie,{className:"flex-1 flex flex-col",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold","data-testid":"text-chat-title",children:(K==null?void 0:K.title)||"Conversation"}),s.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-chat-project",children:de})]}),K&&s.jsxs(ae,{variant:"secondary","data-testid":"badge-updated-time",children:["Last updated: ",new Date(K.updatedAt).toLocaleTimeString()]})]})}),s.jsx(On,{className:"flex-1 p-4",children:xe?s.jsx("div",{className:"text-center text-muted-foreground","data-testid":"text-messages-loading",children:"Loading messages..."}):J.length===0?s.jsx("div",{className:"text-center text-muted-foreground","data-testid":"text-no-messages",children:s.jsx($t,{children:s.jsx(Ft,{children:q?"Describe your project and I'll help you create a comprehensive project structure with tasks, risks, and milestones. You can attach files with specifications, requirements, or contracts.":"Start the conversation by asking me anything about your project. I can analyze risks, track resources, provide insights, and help you manage your EPC project effectively."})})}):s.jsxs("div",{className:"space-y-4",children:[J.map((W,me)=>s.jsxs("div",{className:`flex gap-3 ${W.role==="user"?"justify-end":"justify-start"}`,"data-testid":`message-${W.role}-${me}`,children:[W.role==="assistant"&&s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-1",children:s.jsx(Yl,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 relative group ${W.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[W.role==="assistant"?s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none","data-testid":`text-message-content-${me}`,children:s.jsx(hO,{remarkPlugins:[xO],components:{p:({children:Ae})=>s.jsx("p",{className:"mb-2 last:mb-0",children:Ae}),ul:({children:Ae})=>s.jsx("ul",{className:"mb-2 ml-4 list-disc",children:Ae}),ol:({children:Ae})=>s.jsx("ol",{className:"mb-2 ml-4 list-decimal",children:Ae}),li:({children:Ae})=>s.jsx("li",{className:"mb-1",children:Ae}),h1:({children:Ae})=>s.jsx("h1",{className:"text-lg font-bold mb-2",children:Ae}),h2:({children:Ae})=>s.jsx("h2",{className:"text-base font-bold mb-2",children:Ae}),h3:({children:Ae})=>s.jsx("h3",{className:"text-sm font-bold mb-1",children:Ae}),code:({className:Ae,children:Je})=>!Ae?s.jsx("code",{className:"bg-background/50 px-1 py-0.5 rounded text-xs font-mono",children:Je}):s.jsx("code",{className:"block bg-background/50 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:Je}),pre:({children:Ae})=>s.jsx("pre",{className:"bg-background/50 p-2 rounded overflow-x-auto mb-2",children:Ae}),table:({children:Ae})=>s.jsx("table",{className:"border-collapse border border-border mb-2 w-full text-xs",children:Ae}),th:({children:Ae})=>s.jsx("th",{className:"border border-border p-1 bg-background/50 font-semibold",children:Ae}),td:({children:Ae})=>s.jsx("td",{className:"border border-border p-1",children:Ae}),blockquote:({children:Ae})=>s.jsx("blockquote",{className:"border-l-2 border-primary pl-2 italic mb-2",children:Ae}),a:({href:Ae,children:Je})=>s.jsx("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:Je})},children:W.content})}):s.jsx("p",{className:"text-sm whitespace-pre-wrap","data-testid":`text-message-content-${me}`,children:W.content}),W.role==="assistant"&&s.jsx(H,{size:"icon",variant:"ghost",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>be(W.content,me),"data-testid":`button-copy-message-${me}`,title:"Copy message",children:k===me?s.jsx(Sr,{className:"h-3 w-3 text-green-500"}):s.jsx(cv,{className:"h-3 w-3"})}),W.tokensUsed>0&&W.role==="assistant"&&s.jsxs("div",{className:"mt-2 text-xs opacity-70","data-testid":`text-tokens-${me}`,children:[W.tokensUsed," tokens"]})]}),W.role==="user"&&s.jsx("div",{className:"h-8 w-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0 mt-1",children:s.jsx(Bn,{className:"h-4 w-4"})})]},me)),re.isPending&&s.jsxs("div",{className:"flex gap-3 justify-start","data-testid":"typing-indicator",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(Yl,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"bg-muted rounded-lg p-3 flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"AI is thinking..."})]})]}),s.jsx("div",{ref:B})]})}),s.jsxs("div",{className:"p-4 border-t",children:[s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground shrink-0",children:"Model:"}),s.jsxs(ze,{value:F,onValueChange:E,disabled:re.isPending,children:[s.jsx(Fe,{className:"w-[200px] min-w-[200px]",children:s.jsx(Be,{})}),s.jsx(Le,{children:ne.map(W=>s.jsx(X,{value:W.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:W.name}),W.tier==="premium"&&s.jsxs(ae,{variant:"outline",className:"text-xs",children:[s.jsx(d1,{className:"h-3 w-3 mr-1"}),"Premium"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:W.description})]})},W.id))})]}),((Oe=ne.find(W=>W.id===F))==null?void 0:Oe.tier)==="premium"&&s.jsx(Ou,{children:s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 dark:text-amber-400 shrink-0",children:[s.jsx(a1,{className:"h-3 w-3"}),s.jsx("span",{className:"whitespace-nowrap",children:"Premium model - Limited usage or higher cost"})]})}),s.jsx(dc,{side:"top",className:"max-w-xs",children:s.jsx("p",{className:"text-xs",children:"Pro models consume more of your monthly AI usage quota. Use Flash models for standard queries to save usage."})})]})}),s.jsxs("div",{className:"text-xs text-muted-foreground shrink-0",children:["Limits: ",(Z=ne.find(W=>W.id===F))==null?void 0:Z.limits]})]}),O.length>0&&s.jsx("div",{className:"mb-2",children:s.jsx(mw,{attachments:O,onAttachmentsChange:M,disabled:re.isPending})}),s.jsxs("form",{onSubmit:$e,className:"flex gap-2 items-end",children:[s.jsx(mw,{attachments:[],onAttachmentsChange:W=>M(me=>[...me,...W]),disabled:re.isPending}),s.jsx(sJ,{value:f,onChange:h,placeholder:q?"Describe your project... Use @ to mention items or attach files":"Ask me anything about your project... Use @ to mention items",onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),$e(W))},disabled:re.isPending}),s.jsx(H,{type:"submit",size:"icon",disabled:!f.trim()||re.isPending,"data-testid":"button-send",children:s.jsx(l1,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2","data-testid":"text-hint",children:"Press Enter to send, Shift+Enter for new line. Use @ to mention items, or click the paperclip to attach files."})]})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[s.jsx(jf,{className:"h-16 w-16 text-primary/20 mb-4","data-testid":"icon-sparkles"}),s.jsx("h3",{className:"text-xl font-semibold mb-2","data-testid":"text-welcome-title",children:"Welcome to AI Project Assistant"}),s.jsx("p",{className:"text-muted-foreground max-w-md mb-4","data-testid":"text-welcome-description",children:"I can help you analyze project data, identify risks, track resources, and provide actionable insights for your EPC projects."}),!q&&!e?s.jsxs($t,{"data-testid":"alert-no-project",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the top bar to use the AI Assistant."})]}):q?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Create Project with AI"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe your project and I'll help you create a comprehensive project structure with tasks, risks, and milestones. You can attach files with specifications, requirements, or contracts."})]}):s.jsxs(H,{onClick:()=>ye.mutate(),disabled:ye.isPending,"data-testid":"button-start-conversation",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Start New Conversation"]})]})}),s.jsx(zt,{open:m,onOpenChange:g,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{"data-testid":"text-delete-dialog-title",children:"Delete Conversation"}),s.jsx(ir,{"data-testid":"text-delete-dialog-description",children:"Are you sure you want to delete this conversation? This action cannot be undone."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(H,{variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:()=>p&&ue.mutate(p),disabled:ue.isPending,"data-testid":"button-confirm-delete",children:"Delete"})]})]})}),s.jsx(zt,{open:b,onOpenChange:y,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{"data-testid":"text-rename-dialog-title",children:"Rename Conversation"}),s.jsx(ir,{"data-testid":"text-rename-dialog-description",children:"Enter a new name for this conversation."})]}),s.jsx(Ce,{value:w,onChange:W=>S(W.target.value),placeholder:"Conversation name...",maxLength:100,onKeyDown:W=>{W.key==="Enter"&&(W.preventDefault(),He())},"data-testid":"input-rename"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(H,{variant:"outline",onClick:()=>{y(!1),N(null),S("")},"data-testid":"button-cancel-rename",children:"Cancel"}),s.jsx(H,{onClick:He,disabled:!w.trim()||ke.isPending,"data-testid":"button-confirm-rename",children:"Rename"})]})]})}),s.jsx(Act,{open:A,onOpenChange:D,onSettingsChange:_}),ve&&s.jsx(Tct,{preview:T.preview,functionName:T.functionName,args:T.args,onModify:xt,onApprove:()=>{R(null)},onDismiss:sn}),T&&!ve&&s.jsx(iJ,{open:!!T,onOpenChange:W=>{W||R(null)},preview:T.preview,functionName:T.functionName,args:T.args,onApproved:()=>{e&&(we.invalidateQueries({queryKey:[`/api/projects/${e}/tasks`]}),we.invalidateQueries({queryKey:[`/api/projects/${e}/risks`]}),we.invalidateQueries({queryKey:[`/api/projects/${e}/issues`]})),R(null)}})]})}const Oct=[{id:"status",name:"Project Status Report",description:"Comprehensive overview of project progress, task completion, budget summary, and key metrics.",icon:Ka,endpoint:"status",category:"project"},{id:"risk-register",name:"Risk Register Report",description:"Complete list of identified risks with probability, impact, status, and mitigation plans.",icon:ft,endpoint:"risk-register",category:"risk"},{id:"eva",name:"Earned Value Analysis (EVA)",description:"Financial performance analysis including PV, EV, AC, schedule/cost variances, and forecasting.",icon:ur,endpoint:"eva",category:"financial"},{id:"issues",name:"Issue Log Report",description:"Complete log of project issues with status, priority, assignment, and resolution details.",icon:JT,endpoint:"issues",category:"project"}];function Ict(){const{selectedProjectId:e,selectedProject:t}=jt(),{toast:n}=Nt(),[r,i]=x.useState(new Set),a=async l=>{if(!e){n({title:"No Project Selected",description:"Please select a project to generate reports.",variant:"destructive"});return}i(c=>new Set(c).add(l.id));try{const c=await fetch(`/api/projects/${e}/reports/${l.endpoint}`,{credentials:"include"});if(!c.ok){const p=await c.json();throw new Error(p.message||"Failed to generate report")}const u=await c.blob(),d=window.URL.createObjectURL(u),f=c.headers.get("Content-Disposition");let h;if(f){const p=f.match(/filename="?([^";\n]+)"?/);h=(p==null?void 0:p[1])||`${(t==null?void 0:t.code)||"Project"}_${l.name.replace(/\s+/g,"_")}.pdf`}else h=`${(t==null?void 0:t.code)||"Project"}_${l.name.replace(/\s+/g,"_")}.pdf`;const m=h.replace(/[<>:"/\\|?*\x00-\x1f]/g,"_").replace(/\.\./g,"_").substring(0,255),g=document.createElement("a");g.href=d,g.download=m,g.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>window.URL.revokeObjectURL(d),100),n({title:"Report Downloaded",description:`${l.name} has been generated and downloaded successfully.`})}catch(c){console.error("Error downloading report:",c),n({title:"Error",description:c.message||"Failed to generate report. Please try again.",variant:"destructive"})}finally{i(c=>{const u=new Set(c);return u.delete(l.id),u})}},o=l=>{switch(l){case"project":return"bg-blue-500/10 text-blue-600 dark:text-blue-400";case"financial":return"bg-green-500/10 text-green-600 dark:text-green-400";case"risk":return"bg-orange-500/10 text-orange-600 dark:text-orange-400";default:return"bg-gray-500/10 text-gray-600 dark:text-gray-400"}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:"Reports"}),s.jsx("p",{className:"text-muted-foreground","data-testid":"text-page-description",children:"Generate and download professional PDF reports for your project"})]}),t&&s.jsxs(ae,{variant:"outline",className:"text-sm","data-testid":"badge-project",children:[s.jsx(Sn,{className:"h-3 w-3 mr-1"}),t.name]})]}),e?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Oct.map(l=>{const c=l.icon,u=r.has(l.id);return s.jsxs(ie,{className:"hover-elevate transition-all","data-testid":`card-report-${l.id}`,children:[s.jsx(Ne,{className:"pb-3",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(c,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(Se,{className:"text-lg","data-testid":`text-report-title-${l.id}`,children:l.name}),s.jsx(ae,{variant:"secondary",className:`mt-1 ${o(l.category)}`,children:l.category})]})]})})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsx(it,{className:"text-sm","data-testid":`text-report-description-${l.id}`,children:l.description}),s.jsx(H,{onClick:()=>a(l),disabled:u,className:"w-full","data-testid":`button-download-${l.id}`,children:u?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"Download PDF"]})})]})]},l.id)})}):s.jsx(ie,{className:"border-dashed","data-testid":"card-no-project",children:s.jsxs(ce,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Sn,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:"Please select a project from the top navigation bar to generate reports."})]})}),s.jsxs(ie,{"data-testid":"card-report-info",children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-base",children:"Report Information"})}),s.jsxs(ce,{className:"space-y-3 text-sm text-muted-foreground",children:[s.jsx("p",{children:"Reports are generated in PDF format with professional formatting suitable for client presentations and project documentation."}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Project Status Report:"})," Includes task progress, budget summary, and key metrics"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Risk Register:"})," Complete risk inventory with mitigation strategies"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"EVA Report:"})," Earned value metrics and cost/schedule performance indices"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Issue Log:"})," Full issue tracking with resolution status"]})]}),s.jsx("p",{children:"All reports include the project header, generation date, and are formatted for EPC industry standards."})]})]})]})}var Tle={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q6=Q.createContext&&Q.createContext(Tle),Mct=["attr","size","title"];function Rct(e,t){if(e==null)return{};var n=$ct(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $ct(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ON(){return ON=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ON.apply(this,arguments)}function U6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U6(Object(n),!0).forEach(function(r){Fct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fct(e,t,n){return t=Lct(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lct(e){var t=zct(e,"string");return typeof t=="symbol"?t:t+""}function zct(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dle(e){return e&&e.map((t,n)=>Q.createElement(t.tag,IN({key:n},t.attr),Dle(t.child)))}function Ole(e){return t=>Q.createElement(Bct,ON({attr:IN({},e.attr)},t),Dle(e.child))}function Bct(e){var t=n=>{var{attr:r,size:i,title:a}=e,o=Rct(e,Mct),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Q.createElement("svg",ON({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:IN(IN({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Q.createElement("title",null,a),e.children)};return q6!==void 0?Q.createElement(q6.Consumer,null,n=>t(n)):t(Tle)}function Vct(e){return Ole({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 1.807L0 5.629l6 3.822 6.001-3.822L6 1.807zM18 1.807l-6 3.822 6 3.822 6-3.822-6-3.822zM0 13.274l6 3.822 6.001-3.822L6 9.452l-6 3.822zM18 9.452l-6 3.822 6 3.822 6-3.822-6-3.822zM6 18.371l6.001 3.822 6-3.822-6-3.822L6 18.371z"},child:[]}]})(e)}function qct(e){return Ole({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.01 1.485c-2.082 0-3.754.02-3.743.047.01.02 1.708 3.001 3.774 6.62l3.76 6.574h3.76c2.081 0 3.753-.02 3.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76 1.73a789.828 789.861 0 0 0-3.63 6.319L0 15.868l1.89 3.298 1.885 3.297 3.62-6.335 3.618-6.33-1.88-3.287C8.1 4.704 7.255 3.22 7.25 3.214zm2.259 12.653-.203.348c-.114.198-.96 1.672-1.88 3.287a423.93 423.948 0 0 1-1.698 2.97c-.01.026 3.24.042 7.222.042h7.244l1.796-3.157c.992-1.734 1.85-3.23 1.906-3.323l.104-.167h-7.249z"},child:[]}]})(e)}var eR="Switch",[Uct]=Er(eR),[Wct,Hct]=Uct(eR),Ile=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=x.useState(null),g=kt(t,j=>m(j)),p=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[b=!1,y]=ni({prop:i,defaultProp:a,onChange:u});return s.jsxs(Wct,{scope:n,checked:b,disabled:l,children:[s.jsx(Qe.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":$le(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:Re(e.onClick,j=>{y(N=>!N),v&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),v&&s.jsx(Kct,{control:h,bubbles:!p.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Ile.displayName=eR;var Mle="SwitchThumb",Rle=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=Hct(Mle,n);return s.jsx(Qe.span,{"data-state":$le(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Rle.displayName=Mle;var Kct=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,a=x.useRef(null),o=zy(n),l=Ay(t);return x.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const h=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(h)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $le(e){return e?"checked":"unchecked"}var Fle=Ile,Gct=Rle;const Tp=x.forwardRef(({className:e,...t},n)=>s.jsx(Fle,{className:he("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(Gct,{className:he("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tp.displayName=Fle.displayName;function Qct({open:e,onOpenChange:t,rule:n,projectId:r,organizationId:i,onSuccess:a}){var N,w,S,k,C,A,D;const{toast:o}=Nt(),[l,c]=x.useState("trigger"),[u,d]=x.useState({name:"",description:"",triggerType:"time-based",triggerConfig:{},scopeType:"all-tasks",taskIds:[],recipientType:"individual",recipients:{},emailTemplateId:null,reportType:null,documentIds:[],customMessage:"",frequency:"one-time",maxOccurrences:null,isActive:!0}),{data:f=[]}=je({queryKey:["/api/organizations",i,"email-templates"],enabled:!!i}),{data:h=[]}=je({queryKey:["/api/projects",r,"tasks"],enabled:!!r&&u.scopeType==="specific-tasks"}),{data:m=[]}=je({queryKey:["/api/projects",r,"stakeholders"],enabled:!!r}),{data:g=[]}=je({queryKey:["/api/projects",r,"resources"],enabled:!!r}),{data:p=[]}=je({queryKey:["/api/organizations",i,"contacts"],enabled:!!i});x.useEffect(()=>{if(n){const P=n.condition||{};d({name:n.name||"",description:n.description||"",triggerType:P.triggerType||"time-based",triggerConfig:P.triggerConfig||{},scopeType:P.scopeType||"all-tasks",taskIds:P.taskIds||[],recipientType:P.recipientType||"individual",recipients:P.recipientConfig||{},emailTemplateId:P.emailTemplateId||null,reportType:P.reportType||null,documentIds:P.documentIds||[],customMessage:P.customMessage||"",frequency:P.frequency||"one-time",maxOccurrences:P.maxOccurrences||null,isActive:n.isActive??!0})}else d({name:"",description:"",triggerType:"time-based",triggerConfig:{},scopeType:"all-tasks",taskIds:[],recipientType:"individual",recipients:{},emailTemplateId:null,reportType:null,documentIds:[],customMessage:"",frequency:"one-time",maxOccurrences:null,isActive:!0})},[n,e]);const v=Pe({mutationFn:async P=>{const _={...P,projectId:(u.scopeType==="project-level"||u.scopeType==="all-tasks"||u.scopeType==="specific-tasks")&&r?r:void 0,organizationId:u.scopeType==="project-level"?void 0:i};await fe("POST","/api/notification-rules",_)},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",r,"notification-rules"]}),we.invalidateQueries({queryKey:["/api/organizations",i,"notification-rules"]}),o({title:"Rule Created",description:"Notification rule has been created successfully."}),a==null||a()},onError:P=>{o({title:"Create Failed",description:P.message,variant:"destructive"})}}),b=Pe({mutationFn:async P=>{await fe("PATCH",`/api/notification-rules/${n.id}`,P)},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",r,"notification-rules"]}),we.invalidateQueries({queryKey:["/api/organizations",i,"notification-rules"]}),o({title:"Rule Updated",description:"Notification rule has been updated successfully."}),a==null||a()},onError:P=>{o({title:"Update Failed",description:P.message,variant:"destructive"})}}),y=()=>{var M;if(!u.name.trim()){o({title:"Validation Error",description:"Rule name is required",variant:"destructive"});return}const P={triggerType:u.triggerType,triggerConfig:u.triggerConfig,scopeType:u.scopeType,taskIds:u.taskIds.length>0?u.taskIds:void 0,recipientType:u.recipientType,recipientConfig:u.recipients,emailTemplateId:u.emailTemplateId,reportType:u.reportType,documentIds:u.documentIds.length>0?u.documentIds:void 0,customMessage:u.customMessage,frequency:u.frequency,maxOccurrences:u.maxOccurrences},_={name:u.name,description:u.description||null,eventType:u.triggerType==="event-based"?(M=u.triggerConfig)==null?void 0:M.eventType:"scheduled",condition:P,recipients:[],channel:"email",isActive:u.isActive,projectId:(u.scopeType==="project-level"||u.scopeType==="all-tasks"||u.scopeType==="specific-tasks")&&r?r:void 0,organizationId:u.scopeType==="project-level"?void 0:i},O=Hje.safeParse(_);if(!O.success){const T=O.error.issues.map(R=>`${R.path.join(".")}: ${R.message}`).join(`
`);o({title:"Validation Error",description:`Please check the following fields:
`+T,variant:"destructive"});return}n?b.mutate(O.data):v.mutate(O.data)},j=v.isPending||b.isPending;return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:n?`Edit Notification Rule: ${n.name}`:"Create Notification Rule"})}),s.jsxs(Vr,{value:l,onValueChange:c,className:"flex-1 flex flex-col min-h-0",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-5",children:[s.jsx(tt,{value:"trigger",children:"Trigger"}),s.jsx(tt,{value:"scope",children:"Scope"}),s.jsx(tt,{value:"recipients",children:"Recipients"}),s.jsx(tt,{value:"content",children:"Content"}),s.jsx(tt,{value:"schedule",children:"Schedule"})]}),s.jsxs(On,{className:"flex-1 mt-4",children:[s.jsx(ht,{value:"trigger",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"When to Send"}),s.jsx(it,{children:"Configure what triggers this notification"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Trigger Type"}),s.jsxs(ze,{value:u.triggerType,onValueChange:P=>{d({...u,triggerType:P,triggerConfig:{}})},children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"time-based",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),"Time-Based (Relative to Dates)"]})}),s.jsx(X,{value:"event-based",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Event-Based (State Changes)"]})}),s.jsx(X,{value:"custom-date",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"h-4 w-4"}),"Custom Date"]})})]})]})]}),u.triggerType==="time-based"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Trigger On"}),s.jsxs(ze,{value:((N=u.triggerConfig)==null?void 0:N.triggerOn)||"",onValueChange:P=>{d({...u,triggerConfig:{...u.triggerConfig,triggerOn:P}})},children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select event"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"baseline-start",children:"Baseline Start"}),s.jsx(X,{value:"baseline-finish",children:"Baseline Finish"}),s.jsx(X,{value:"actual-start",children:"Actual Start"}),s.jsx(X,{value:"actual-finish",children:"Actual Finish"}),s.jsx(X,{value:"project-start",children:"Project Start"}),s.jsx(X,{value:"project-end",children:"Project End"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Days Before"}),s.jsx(Ce,{type:"number",value:((w=u.triggerConfig)==null?void 0:w.daysBefore)||"",onChange:P=>{d({...u,triggerConfig:{...u.triggerConfig,daysBefore:P.target.value?parseInt(P.target.value):void 0}})},placeholder:"e.g., 7"})]})]})}),u.triggerType==="event-based"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Event Type"}),s.jsxs(ze,{value:((S=u.triggerConfig)==null?void 0:S.eventType)||"",onValueChange:P=>{d({...u,triggerConfig:{...u.triggerConfig,eventType:P}})},children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select event"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"task-status-change",children:"Task Status Change"}),s.jsx(X,{value:"task-progress-milestone",children:"Task Progress Milestone"}),s.jsx(X,{value:"risk-created",children:"Risk Created"}),s.jsx(X,{value:"risk-impact-changed",children:"Risk Impact Changed"}),s.jsx(X,{value:"issue-created",children:"Issue Created"}),s.jsx(X,{value:"issue-resolved",children:"Issue Resolved"}),s.jsx(X,{value:"change-request-submitted",children:"Change Request Submitted"}),s.jsx(X,{value:"change-request-approved",children:"Change Request Approved"})]})]})]}),u.triggerType==="custom-date"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Custom Date"}),s.jsx(Ce,{type:"date",value:((k=u.triggerConfig)==null?void 0:k.customDate)||"",onChange:P=>{d({...u,triggerConfig:{...u.triggerConfig,customDate:P.target.value}})}})]})]})]})}),s.jsx(ht,{value:"scope",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Where to Apply"}),s.jsx(it,{children:"Define the scope of this notification rule"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Scope Type"}),s.jsxs(ze,{value:u.scopeType,onValueChange:P=>{d({...u,scopeType:P,taskIds:[]})},children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all-tasks",children:"All Tasks in Project"}),s.jsx(X,{value:"specific-tasks",children:"Specific Tasks"}),s.jsx(X,{value:"project-level",children:"Project Level"}),s.jsx(X,{value:"calendar-event",children:"Calendar Events"})]})]})]}),u.scopeType==="specific-tasks"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Select Tasks"}),s.jsx(On,{className:"h-48 border rounded-md p-2",children:h.map(P=>s.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[s.jsx(Wt,{checked:u.taskIds.includes(P.id),onCheckedChange:_=>{d(_?{...u,taskIds:[...u.taskIds,P.id]}:{...u,taskIds:u.taskIds.filter(O=>O!==P.id)})}}),s.jsxs(G,{className:"text-sm",children:[P.wbsCode," - ",P.name]})]},P.id))})]})]})]})}),s.jsx(ht,{value:"recipients",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Who Receives"}),s.jsx(it,{children:"Select recipients for this notification"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Recipient Type"}),s.jsxs(ze,{value:u.recipientType,onValueChange:P=>{d({...u,recipientType:P,recipients:{}})},children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"individual",children:"Individual Selection"}),s.jsx(X,{value:"raci-based",children:"RACI-Based (Task Assignments)"}),s.jsx(X,{value:"role-based",children:"Role-Based"}),s.jsx(X,{value:"group",children:"Group (Future)"})]})]})]}),u.recipientType==="individual"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Stakeholders"}),s.jsx(On,{className:"h-32 border rounded-md p-2",children:m.map(P=>{var _,O;return s.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[s.jsx(Wt,{checked:((O=(_=u.recipients)==null?void 0:_.stakeholderIds)==null?void 0:O.includes(P.id))||!1,onCheckedChange:M=>{var R;const T=((R=u.recipients)==null?void 0:R.stakeholderIds)||[];d({...u,recipients:{...u.recipients,stakeholderIds:M?[...T,P.id]:T.filter(F=>F!==P.id)}})}}),s.jsx(G,{className:"text-sm",children:P.name})]},P.id)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Resources"}),s.jsx(On,{className:"h-32 border rounded-md p-2",children:g.filter(P=>P.type==="human").map(P=>{var _,O;return s.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[s.jsx(Wt,{checked:((O=(_=u.recipients)==null?void 0:_.resourceIds)==null?void 0:O.includes(P.id))||!1,onCheckedChange:M=>{var R;const T=((R=u.recipients)==null?void 0:R.resourceIds)||[];d({...u,recipients:{...u.recipients,resourceIds:M?[...T,P.id]:T.filter(F=>F!==P.id)}})}}),s.jsx(G,{className:"text-sm",children:P.name})]},P.id)})})]})]}),u.recipientType==="raci-based"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"RACI Types"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["R","A","C","I"].map(P=>{var _,O;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{checked:((O=(_=u.recipients)==null?void 0:_.raciTypes)==null?void 0:O.includes(P))||!1,onCheckedChange:M=>{var R;const T=((R=u.recipients)==null?void 0:R.raciTypes)||[];d({...u,recipients:{...u.recipients,raciTypes:M?[...T,P]:T.filter(F=>F!==P)}})}}),s.jsxs(G,{className:"text-sm",children:[P==="R"&&"Responsible",P==="A"&&"Accountable",P==="C"&&"Consulted",P==="I"&&"Informed"]})]},P)})})]}),u.recipientType==="role-based"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Roles"}),s.jsx(Ce,{placeholder:"Enter roles (comma-separated)",value:((A=(C=u.recipients)==null?void 0:C.roles)==null?void 0:A.join(", "))||"",onChange:P=>{d({...u,recipients:{...u.recipients,roles:P.target.value.split(",").map(_=>_.trim()).filter(Boolean)}})}})]})]})]})}),s.jsx(ht,{value:"content",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"What to Send"}),s.jsx(it,{children:"Configure the content of the notification"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Email Template"}),s.jsxs(ze,{value:((D=u.emailTemplateId)==null?void 0:D.toString())||"",onValueChange:P=>{d({...u,emailTemplateId:P?parseInt(P):null})},children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select email template"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"",children:"None"}),f.map(P=>s.jsx(X,{value:P.id.toString(),children:P.name},P.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Report Type (Optional)"}),s.jsxs(ze,{value:u.reportType||"",onValueChange:P=>{d({...u,reportType:P||null})},children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select report type"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"",children:"None"}),s.jsx(X,{value:"task-summary",children:"Task Summary"}),s.jsx(X,{value:"progress-report",children:"Progress Report"}),s.jsx(X,{value:"risk-report",children:"Risk Report"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Custom Message (Optional)"}),s.jsx(Ht,{value:u.customMessage,onChange:P=>d({...u,customMessage:P.target.value}),placeholder:"Additional message to include in the notification...",rows:4})]})]})]})}),s.jsx(ht,{value:"schedule",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Schedule & Frequency"}),s.jsx(it,{children:"Configure how often to send notifications"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Rule Name"}),s.jsx(Ce,{value:u.name,onChange:P=>d({...u,name:P.target.value}),placeholder:"e.g., Task Start Reminder",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Description (Optional)"}),s.jsx(Ht,{value:u.description,onChange:P=>d({...u,description:P.target.value}),placeholder:"Describe what this rule does...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Frequency"}),s.jsxs(ze,{value:u.frequency,onValueChange:P=>{d({...u,frequency:P})},children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"one-time",children:"One-Time"}),s.jsx(X,{value:"daily",children:"Daily"}),s.jsx(X,{value:"weekly",children:"Weekly"}),s.jsx(X,{value:"monthly",children:"Monthly"})]})]})]}),u.frequency!=="one-time"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Max Occurrences (Optional)"}),s.jsx(Ce,{type:"number",value:u.maxOccurrences||"",onChange:P=>{d({...u,maxOccurrences:P.target.value?parseInt(P.target.value):null})},placeholder:"Leave empty for unlimited"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tp,{checked:u.isActive,onCheckedChange:P=>d({...u,isActive:P})}),s.jsx(G,{children:"Active"})]})]})]})})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(H,{onClick:y,disabled:j,children:[j&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Update Rule":"Create Rule"]})]})]})})}function Yct(){const{selectedProject:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(""),[i,a]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState(null),h=e==null?void 0:e.id,m=e==null?void 0:e.organizationId,{data:g=[],isLoading:p}=je({queryKey:["/api/projects",h,"notification-rules"],enabled:!!h}),{data:v=[],isLoading:b}=je({queryKey:["/api/organizations",m,"notification-rules"],enabled:!!m}),y=[...g,...v],j=p||b,N=Pe({mutationFn:async O=>{await fe("DELETE",`/api/notification-rules/${O}`)},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",h,"notification-rules"]}),we.invalidateQueries({queryKey:["/api/organizations",m,"notification-rules"]}),t({title:"Rule Deleted",description:"Notification rule has been deleted successfully."}),u(!1),f(null)},onError:O=>{t({title:"Delete Failed",description:O.message,variant:"destructive"})}}),w=Pe({mutationFn:async({id:O,isActive:M})=>{await fe("PATCH",`/api/notification-rules/${O}`,{isActive:M})},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",h,"notification-rules"]}),we.invalidateQueries({queryKey:["/api/organizations",m,"notification-rules"]}),t({title:"Rule Updated",description:"Notification rule status has been updated."})},onError:O=>{t({title:"Update Failed",description:O.message,variant:"destructive"})}}),S=O=>{l(O),a(!0)},k=O=>{f(O),u(!0)},C=()=>{l(null),a(!0)},A=y.filter(O=>{var M;return O.name.toLowerCase().includes(n.toLowerCase())||((M=O.description)==null?void 0:M.toLowerCase().includes(n.toLowerCase()))}),D=O=>O.condition||{},P=O=>{const M=D(O),T=M.triggerConfig,R=M.triggerType;if(!T)return"No trigger configured";switch(R){case"time-based":return T.triggerOn==="baseline-start"&&T.daysBefore?`${T.daysBefore} days before baseline start`:T.triggerOn==="baseline-finish"&&T.daysBefore?`${T.daysBefore} days before baseline finish`:T.triggerOn==="project-start"&&T.daysBefore?`${T.daysBefore} days before project start`:T.triggerOn==="project-end"&&T.daysBefore?`${T.daysBefore} days before project end`:`Time-based: ${T.triggerOn||"Unknown"}`;case"event-based":return`Event: ${T.eventType||"Unknown"}`;case"threshold-based":return`Threshold: ${T.thresholdType||"Unknown"}`;case"custom-date":return`Custom date: ${T.customDate?new Date(T.customDate).toLocaleDateString():"Not set"}`;default:return"Unknown trigger"}},_=O=>{var F,E,B,L,I,q,$;const M=D(O),T=M.recipientConfig,R=M.recipientType;if(!T)return"No recipients";switch(R){case"individual":return`${(((F=T.stakeholderIds)==null?void 0:F.length)||0)+(((E=T.resourceIds)==null?void 0:E.length)||0)+(((B=T.contactIds)==null?void 0:B.length)||0)+(((L=T.userIds)==null?void 0:L.length)||0)} individual(s)`;case"raci-based":return`RACI: ${((I=T.raciTypes)==null?void 0:I.join(", "))||"All"}`;case"role-based":return`Roles: ${((q=T.roles)==null?void 0:q.join(", "))||"All"}`;case"group":return`${(($=T.groupIds)==null?void 0:$.length)||0} group(s)`;default:return"Unknown"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Zd,{className:"h-5 w-5"}),"Automation & Notification Rules"]}),s.jsx(it,{children:"Configure automated notifications for tasks, risks, issues, and project events. Rules can be set at project or organization level."})]}),s.jsxs(H,{onClick:C,"data-testid":"button-create-notification-rule",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]})}),s.jsxs(ce,{children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search rules...",value:n,onChange:O=>r(O.target.value),className:"pl-10","data-testid":"input-search-rules"})]})}),j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{className:"h-16 w-full"}),s.jsx(Ke,{className:"h-16 w-full"}),s.jsx(Ke,{className:"h-16 w-full"})]}):A.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zd,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:n?"No rules match your search.":"No notification rules configured."}),!n&&s.jsxs(H,{onClick:C,variant:"outline",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Your First Rule"]})]}):s.jsxs(Um,{children:[s.jsx(Wm,{children:s.jsxs(la,{children:[s.jsx(ns,{children:"Name"}),s.jsx(ns,{children:"Trigger"}),s.jsx(ns,{children:"Recipients"}),s.jsx(ns,{children:"Frequency"}),s.jsx(ns,{children:"Scope"}),s.jsx(ns,{children:"Status"}),s.jsx(ns,{className:"w-[50px]"})]})}),s.jsx(Hm,{children:A.map(O=>{const M=D(O);return s.jsxs(la,{children:[s.jsx(Mr,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:O.name}),O.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:O.description})]})}),s.jsx(Mr,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[M.triggerType==="time-based"&&s.jsx(bn,{className:"h-4 w-4 text-muted-foreground"}),M.triggerType==="event-based"&&s.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),M.triggerType==="custom-date"&&s.jsx(Br,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:P(O)})]})}),s.jsx(Mr,{children:s.jsx("span",{className:"text-sm",children:_(O)})}),s.jsx(Mr,{children:s.jsx(ae,{variant:"outline",children:M.frequency||"one-time"})}),s.jsx(Mr,{children:s.jsx(ae,{variant:"secondary",children:O.projectId?"Project":O.organizationId?"Organization":"Unknown"})}),s.jsx(Mr,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tp,{checked:O.isActive||!1,onCheckedChange:T=>w.mutate({id:O.id,isActive:T}),disabled:w.isPending}),s.jsx(ae,{variant:O.isActive?"default":"secondary",children:O.isActive?"Active":"Inactive"})]})}),s.jsx(Mr,{children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",children:s.jsx(i1,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>S(O),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>k(O),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},O.id)})})]})]})]}),i&&s.jsx(Qct,{open:i,onOpenChange:a,rule:o,projectId:h,organizationId:m,onSuccess:()=>{a(!1),l(null)}}),s.jsx(Bs,{open:c,onOpenChange:u,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Notification Rule"}),s.jsxs(bs,{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"? This action cannot be undone.']})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsxs(js,{onClick:()=>d&&N.mutate(d.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[N.isPending&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}function W6(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function Xct(){const{user:e}=zs(),{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState([]),[h,m]=x.useState(!1),[g,p]=x.useState(""),[v,b]=x.useState({name:"",slug:"",currency:"EUR"}),{data:y=[],isLoading:j}=je({queryKey:["/api/organizations"],enabled:!!e}),{data:N=[]}=je({queryKey:["/api/organizations/stats",y],enabled:y.length>0,queryFn:async()=>{const E=y.map(async B=>{try{const I=await(await fe("GET",`/api/organizations/${B.id}/stats`)).json();return{...B,projectCount:I.projectCount,userCount:I.userCount}}catch{return{...B,projectCount:0,userCount:0}}});return Promise.all(E)}}),w=x.useMemo(()=>[{accessorKey:"name",header:({column:E})=>s.jsx(Qn,{column:E,children:"Name"}),cell:({row:E})=>s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"}),E.original.name]})},{accessorKey:"slug",header:({column:E})=>s.jsx(Qn,{column:E,children:"Slug"}),cell:({row:E})=>s.jsx("div",{className:"font-mono text-sm text-muted-foreground",children:E.original.slug})},{accessorKey:"currency",header:({column:E})=>s.jsx(Qn,{column:E,children:"Currency"}),cell:({row:E})=>s.jsx(ae,{variant:"outline",children:E.original.currency})},{id:"stats",header:"Stats",cell:({row:E})=>{const B=E.original;return s.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[s.jsxs("span",{children:[B.projectCount??0," projects"]}),s.jsxs("span",{children:[B.userCount??0," users"]})]})}},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:E})=>{const B=E.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>M(B),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>T(B),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})}}],[]),S=E=>{const B=E||N,L=Ap.unparse(B.map(z=>({Name:z.name,Slug:z.slug,Currency:z.currency,"Project Count":z.projectCount??0,"User Count":z.userCount??0}))),I=new Blob([L],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),$=URL.createObjectURL(I);q.setAttribute("href",$),q.setAttribute("download",`organizations_${new Date().toISOString().split("T")[0]}.csv`),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q),t({title:"Success",description:"Organizations exported successfully"})},k=(E,B)=>{E==="delete"?m(!0):E==="export"&&S(B)},C=Pe({mutationFn:async E=>(await fe("POST","/api/organizations",E)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/organizations"]}),r(!1),_(),t({title:"Success",description:"Organization created successfully"})},onError:E=>{t({title:"Error",description:E.message||"Failed to create organization",variant:"destructive"})}}),A=Pe({mutationFn:async({id:E,...B})=>(await fe("PATCH",`/api/organizations/${E}`,B)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/organizations"]}),r(!1),a(null),_(),t({title:"Success",description:"Organization updated successfully"})},onError:E=>{t({title:"Error",description:E.message||"Failed to update organization",variant:"destructive"})}}),D=Pe({mutationFn:async E=>(await fe("DELETE",`/api/organizations/${E}`)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/organizations"]}),l(!1),u(null),p(""),t({title:"Success",description:"Organization deleted successfully"})},onError:E=>{t({title:"Error",description:E.message||"Failed to delete organization",variant:"destructive"})}}),P=Pe({mutationFn:async E=>{await Promise.all(E.map(B=>fe("DELETE",`/api/organizations/${B}`)))},onSuccess:()=>{we.invalidateQueries({queryKey:["/api/organizations"]}),m(!1),f([]),t({title:"Success",description:`${d.length} organization(s) deleted successfully`})},onError:E=>{t({title:"Error",description:E.message||"Failed to delete organizations",variant:"destructive"})}}),_=()=>{b({name:"",slug:"",currency:"EUR"})},O=()=>{a(null),_(),r(!0)},M=E=>{a(E),b({name:E.name,slug:E.slug,currency:E.currency}),r(!0)},T=E=>{u(E),p(""),l(!0)},R=E=>{b(B=>({...B,name:E,slug:i?B.slug:W6(E)}))},F=()=>{if(!v.name.trim()){t({title:"Error",description:"Name is required",variant:"destructive"});return}if(!v.slug.trim()){t({title:"Error",description:"Slug is required",variant:"destructive"});return}i?A.mutate({id:i.id,name:v.name,slug:v.slug,currency:v.currency}):C.mutate(v)};return j?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Organizations"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your organizations"})]}),s.jsxs(H,{onClick:O,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Organization"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(od,{columns:w,data:N,searchKey:"name",searchPlaceholder:"Search organizations by name or slug...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,onSelectionChange:f,onExport:S,emptyMessage:N.length===0?"No organizations yet. Create your first organization!":"No organizations found.",getRowId:E=>E.id.toString()}),s.jsx(ele,{selectedCount:d.length,selectedItems:d,onClearSelection:()=>f([]),onBulkAction:k,position:"sticky",bulkActions:[{label:"Delete Selected",action:"delete",icon:s.jsx(wn,{className:"h-4 w-4"}),variant:"destructive"}]})]}),s.jsx(zt,{open:n,onOpenChange:r,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:i?"Edit Organization":"Create Organization"}),s.jsx(ir,{children:i?"Update organization details":"Create a new organization"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",children:"Name *"}),s.jsx(Ce,{id:"name",value:v.name,onChange:E=>R(E.target.value),placeholder:"My Organization"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"slug",children:"Slug *"}),s.jsx(Ce,{id:"slug",value:v.slug,onChange:E=>b(B=>({...B,slug:W6(E.target.value)})),placeholder:"my-organization"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"URL-friendly identifier (auto-generated from name)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"currency",children:"Currency"}),s.jsxs("select",{id:"currency",value:v.currency,onChange:E=>b(B=>({...B,currency:E.target.value})),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[s.jsx("option",{value:"EUR",children:"EUR"}),s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"GBP",children:"GBP"}),s.jsx("option",{value:"JPY",children:"JPY"}),s.jsx("option",{value:"CAD",children:"CAD"}),s.jsx("option",{value:"AUD",children:"AUD"})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(H,{onClick:F,disabled:C.isPending||A.isPending,children:i?"Update":"Create"})]})]})}),s.jsx(Bs,{open:o,onOpenChange:l,children:s.jsxs(gs,{className:"max-w-lg",children:[s.jsxs(xs,{children:[s.jsx(ys,{className:"text-destructive",children:"Delete Organization"}),s.jsxs(bs,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-foreground mb-2",children:"This action cannot be undone. This will permanently delete the organization and all associated data."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This will delete:"}),s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-muted-foreground",children:[s.jsxs("li",{children:[s.jsxs("strong",{children:[(c==null?void 0:c.projectCount)??0," project(s)"]})," and all their data"]}),s.jsxs("li",{children:[s.jsxs("strong",{children:[(c==null?void 0:c.userCount)??0," user(s)"]})," will be removed from the organization"]}),s.jsx("li",{children:"All tasks, risks, issues, resources, and other project data"}),s.jsx("li",{children:"All documents and files"}),s.jsx("li",{children:"All settings and configurations"})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[s.jsxs(G,{htmlFor:"delete-confirmation",className:"text-sm font-semibold",children:["Please type ",s.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:c==null?void 0:c.name})," to confirm:"]}),s.jsx(Ce,{id:"delete-confirmation",value:g,onChange:E=>p(E.target.value),placeholder:c==null?void 0:c.name,className:"font-mono"})]})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{onClick:()=>p(""),children:"Cancel"}),s.jsx(js,{onClick:()=>{c&&g===c.name&&D.mutate(c.id)},disabled:g!==(c==null?void 0:c.name)||D.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:D.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Organization"})]})]})}),s.jsx(Bs,{open:h,onOpenChange:m,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Organizations"}),s.jsxs(bs,{children:["Are you sure you want to delete ",d.length," selected organization(s)? This action cannot be undone and will delete all projects, users, and other data for these organizations.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Organizations to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:d.map(E=>s.jsxs("li",{children:[E.name," (",E.projectCount??0," projects, ",E.userCount??0," users)"]},E.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsxs(js,{onClick:()=>{P.mutate(d.map(E=>E.id))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Delete ",d.length," Organization(s)"]})]})]})})]})}function Zct(){const{selectedOrg:e,selectedOrgId:t,terminology:n}=jt(),{toast:r}=Nt(),[i,a]=x.useState((e==null?void 0:e.topLevelEntityLabel)||"Organization"),[o,l]=x.useState((e==null?void 0:e.topLevelEntityLabelCustom)||""),[c,u]=x.useState((e==null?void 0:e.programEntityLabel)||"Program"),[d,f]=x.useState((e==null?void 0:e.programEntityLabelCustom)||""),h=Pe({mutationFn:async g=>{if(!t)throw new Error("No organization selected");return(await fe("PATCH",`/api/organizations/${t}/terminology`,g)).json()},onSuccess:()=>{r({title:"Success",description:"Terminology updated successfully"}),we.invalidateQueries({queryKey:["/api/organizations"]})},onError:g=>{r({title:"Error",description:g.message||"Failed to update terminology",variant:"destructive"})}}),m=()=>{if(!t){r({title:"Error",description:"No organization selected",variant:"destructive"});return}h.mutate({topLevelEntityLabel:i,topLevelEntityLabelCustom:i==="custom"?o:null,programEntityLabel:c,programEntityLabelCustom:c==="custom"?d:null})};return e?s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Customize Terminology"}),s.jsx(it,{children:"Adjust labels to match your organization's structure and terminology. Changes will be reflected throughout the application."})]}),s.jsxs(ce,{className:"space-y-6",children:[s.jsxs($t,{children:[s.jsx(a1,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Only organization owners can change terminology. These labels will be used throughout the application to match your organization's naming conventions."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"top-level-label",children:"Top-Level Entity Label"}),s.jsxs(ze,{value:i,onValueChange:a,children:[s.jsx(Fe,{id:"top-level-label",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"Organization",children:"Organization"}),s.jsx(X,{value:"Portfolio",children:"Portfolio"}),s.jsx(X,{value:"custom",children:"Custom"})]})]}),i==="custom"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{placeholder:"Enter custom label (e.g., 'Company', 'Division', 'Business Unit')",value:o,onChange:g=>l(g.target.value),maxLength:50}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'This label will replace "Organization" throughout the application'})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current value: ",s.jsx("strong",{children:n.topLevel})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"program-label",children:"Program/Group Entity Label"}),s.jsxs(ze,{value:c,onValueChange:u,children:[s.jsx(Fe,{id:"program-label",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"Program",children:"Program"}),s.jsx(X,{value:"Group",children:"Group"}),s.jsx(X,{value:"custom",children:"Custom"})]})]}),c==="custom"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{placeholder:"Enter custom label (e.g., 'Department', 'Business Unit', 'Division')",value:d,onChange:g=>f(g.target.value),maxLength:50}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'This label will replace "Program" throughout the application'})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current value: ",s.jsx("strong",{children:n.program})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(H,{variant:"outline",onClick:()=>{a(e.topLevelEntityLabel||"Organization"),l(e.topLevelEntityLabelCustom||""),u(e.programEntityLabel||"Program"),f(e.programEntityLabelCustom||"")},disabled:h.isPending,children:"Reset"}),s.jsxs(H,{onClick:m,disabled:h.isPending||i==="custom"&&!o.trim()||c==="custom"&&!d.trim(),children:[h.isPending&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]}):s.jsx($t,{children:s.jsx(Ft,{children:"Please select an organization to configure terminology."})})}function Jct(){const{selectedOrgId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(null),[h,m]=x.useState("all"),[g,p]=x.useState({name:"",category:"",color:"",description:""}),{data:v=[],isLoading:b}=je({queryKey:[`/api/organizations/${e}/tags`,h],queryFn:async()=>{const P=h==="all"?`/api/organizations/${e}/tags`:`/api/organizations/${e}/tags?category=${h}`;return(await fe("GET",P)).json()},enabled:!!e}),y=Array.from(new Set(v.map(P=>P.category).filter(Boolean))),j=Pe({mutationFn:async P=>(await fe("POST",`/api/organizations/${e}/tags`,{name:P.name,category:P.category||void 0,color:P.color||void 0,description:P.description||void 0})).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/tags`]}),r(!1),p({name:"",category:"",color:"",description:""}),t({title:"Success",description:"Tag created successfully"})},onError:P=>{t({title:"Error",description:P.message,variant:"destructive"})}}),N=Pe({mutationFn:async({id:P,data:_})=>(await fe("PATCH",`/api/tags/${P}`,{name:_.name,category:_.category||void 0,color:_.color||void 0,description:_.description||void 0})).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/tags`]}),a(!1),u(null),p({name:"",category:"",color:"",description:""}),t({title:"Success",description:"Tag updated successfully"})},onError:P=>{t({title:"Error",description:P.message,variant:"destructive"})}}),w=Pe({mutationFn:async P=>{await fe("DELETE",`/api/tags/${P}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/tags`]}),l(!1),f(null),t({title:"Success",description:"Tag deleted successfully"})},onError:P=>{t({title:"Error",description:P.message,variant:"destructive"})}}),S=()=>{u(null),p({name:"",category:"",color:"",description:""}),r(!0)},k=P=>{u(P),p({name:P.name,category:P.category||"",color:P.color||"",description:P.description||""}),a(!0)},C=P=>{f(P),l(!0)},A=()=>{if(!g.name.trim()){t({title:"Error",description:"Tag name is required",variant:"destructive"});return}c?N.mutate({id:c.id,data:g}):j.mutate(g)},D=[{accessorKey:"name",header:"Name",cell:({row:P})=>{const _=P.original;return s.jsxs("div",{className:"flex items-center gap-2",children:[_.color&&s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),s.jsx("span",{className:"font-medium",children:_.name})]})}},{accessorKey:"category",header:"Category",cell:({row:P})=>{const _=P.original.category;return _?s.jsx(ae,{variant:"outline",children:_}):s.jsx("span",{className:"text-muted-foreground",children:""})}},{accessorKey:"usageCount",header:"Usage",cell:({row:P})=>s.jsx("span",{className:"text-muted-foreground",children:P.original.usageCount})},{accessorKey:"description",header:"Description",cell:({row:P})=>{const _=P.original.description;return _?s.jsx("span",{className:"text-sm text-muted-foreground",children:_}):s.jsx("span",{className:"text-muted-foreground",children:""})}},{id:"actions",header:"Actions",cell:({row:P})=>{const _=P.original;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>k(_),children:s.jsx(lc,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>C(_),children:s.jsx(wn,{className:"h-4 w-4"})})]})}}];return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(_u,{className:"h-5 w-5"}),"Tag Management"]}),s.jsx(it,{children:"Create and manage tags for categorizing and filtering projects, tasks, risks, issues, and other entities."})]}),s.jsxs(H,{onClick:S,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Tag"]})]})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(G,{children:"Filter by Category"}),s.jsxs(ze,{value:h,onValueChange:m,children:[s.jsx(Fe,{className:"w-[200px]",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Categories"}),y.map(P=>s.jsx(X,{value:P,children:P},P))]})]})]}),s.jsx(od,{columns:D,data:v,isLoading:b,enablePagination:!0,enableSearch:!0,searchPlaceholder:"Search tags..."})]})]}),s.jsx(zt,{open:n||i,onOpenChange:P=>{P||(r(!1),a(!1),u(null),p({name:"",category:"",color:"",description:""}))},children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:c?"Edit Tag":"Create Tag"}),s.jsx(ir,{children:c?"Update tag details":"Create a new tag for your organization"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",children:"Name *"}),s.jsx(Ce,{id:"name",value:g.name,onChange:P=>p(_=>({..._,name:P.target.value})),placeholder:"e.g., construction, quality-issue, HSE"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"category",children:"Category (Optional)"}),s.jsx(Ce,{id:"category",value:g.category,onChange:P=>p(_=>({..._,category:P.target.value})),placeholder:"e.g., project-type, issue-type"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"color",children:"Color (Optional)"}),s.jsx(Ce,{id:"color",value:g.color,onChange:P=>p(_=>({..._,color:P.target.value})),placeholder:"e.g., blue, #FF5733"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description (Optional)"}),s.jsx(Ce,{id:"description",value:g.description,onChange:P=>p(_=>({..._,description:P.target.value})),placeholder:"Tag description"})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>{r(!1),a(!1),u(null),p({name:"",category:"",color:"",description:""})},children:"Cancel"}),s.jsx(H,{onClick:A,disabled:j.isPending||N.isPending,children:c?"Update":"Create"})]})]})}),s.jsx(Bs,{open:o,onOpenChange:l,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Tag"}),s.jsxs(bs,{children:['Are you sure you want to delete the tag "',d==null?void 0:d.name,`"? This will remove it from all entities it's assigned to.`]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>d&&w.mutate(d.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):s.jsx(ie,{children:s.jsxs(ce,{className:"p-6 text-center",children:[s.jsx(_u,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Organization Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select an organization to manage tags."})]})})}function eut(){const{user:e}=zs(),[t,n]=x.useState(!1),[r,i]=x.useState("default"),[a,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(!1);x.useEffect(()=>{(()=>{const p="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;n(p),p&&"Notification"in window&&i(Notification.permission)})()},[]),x.useEffect(()=>{if(!t||!e)return;(async()=>{try{const p=await fetch("/api/push/vapid-public-key",{credentials:"include"});if(p.ok){const v=await p.json();c(v.publicKey)}}catch(p){console.error("[Push] Failed to get VAPID key:",p)}})()},[t,e]),x.useEffect(()=>{if(!t||!l)return;(async()=>{try{const v=await(await navigator.serviceWorker.ready).pushManager.getSubscription();o(!!v)}catch(p){console.error("[Push] Failed to check subscription:",p)}})()},[t,l]);const f=x.useCallback(async()=>{if(!t)return console.warn("[Push] Push notifications not supported"),!1;try{const g=await Notification.requestPermission();return i(g),g==="granted"}catch(g){return console.error("[Push] Failed to request permission:",g),!1}},[t]),h=x.useCallback(async()=>{if(!t||!l||!e)return console.warn("[Push] Cannot subscribe - missing requirements"),!1;d(!0);try{if(r!=="granted"&&!await f())return d(!1),!1;const p=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tut(l)}),v={endpoint:p.endpoint,keys:{p256dh:H6(p.getKey("p256dh")),auth:H6(p.getKey("auth"))}};if((await fe("POST","/api/push/subscribe",v)).ok)return o(!0),console.log("[Push] Successfully subscribed to push notifications"),!0;throw new Error("Failed to save subscription")}catch(g){return console.error("[Push] Failed to subscribe:",g),g.name==="NotAllowedError"&&alert("Push notifications were blocked. Please enable them in your browser settings."),!1}finally{d(!1)}},[t,l,e,r,f]),m=x.useCallback(async()=>{if(!t||!e)return!1;d(!0);try{const p=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(p){const v=await fetch("/api/push/subscriptions",{credentials:"include"});if(v.ok){const y=(await v.json()).find(j=>j.endpoint===p.endpoint);y&&await fe("DELETE",`/api/push/unsubscribe/${y.id}`)}return await p.unsubscribe(),o(!1),console.log("[Push] Successfully unsubscribed from push notifications"),!0}}catch(g){return console.error("[Push] Failed to unsubscribe:",g),!1}finally{d(!1)}return!1},[t,e]);return{isSupported:t,permission:r,isSubscribed:a,isLoading:u,subscribe:h,unsubscribe:m,requestPermission:f}}function tut(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}function H6(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return window.btoa(n)}function nut(){const{isSupported:e,permission:t,isSubscribed:n,isLoading:r,subscribe:i,unsubscribe:a}=eut(),o=async()=>{n?await a():await i()};return e?t==="denied"?s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(dme,{className:"h-5 w-5"}),"Push Notifications"]}),s.jsx(it,{children:"Receive notifications even when the app is closed"})]}),s.jsx(ce,{children:s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Push notifications are blocked. Please enable them in your browser settings."})]})})]}):s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Zd,{className:"h-5 w-5"}),"Push Notifications"]}),s.jsx(it,{children:"Receive notifications even when the app is closed"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(G,{htmlFor:"push-notifications",children:"Enable Push Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about important project updates, task assignments, and more."})]}),s.jsx(Tp,{id:"push-notifications",checked:n,onCheckedChange:o,disabled:r||t!=="granted"})]}),t==="default"&&s.jsx(H,{onClick:async()=>{await i()||alert("Please allow notifications to enable push notifications.")},disabled:r,className:"w-full",children:r?"Enabling...":"Enable Notifications"}),n&&s.jsxs($t,{children:[s.jsx(Zd,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Push notifications are enabled. You'll receive notifications for important updates."})]})]})]}):s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Zd,{className:"h-5 w-5"}),"Push Notifications"]}),s.jsx(it,{children:"Receive notifications even when the app is closed"})]}),s.jsx(ce,{children:s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Push notifications are not supported in this browser."})]})})]})}function K6({provider:e,className:t="h-5 w-5"}){switch(e){case"google_drive":return s.jsx(qct,{className:t});case"onedrive":return s.jsx(J2,{className:t});case"dropbox":return s.jsx(Vct,{className:t});default:return s.jsx(J2,{className:t})}}function kj(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function rut({projectId:e}){var w,S;const{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(null),[o,l]=x.useState(""),[c,u]=x.useState(""),{data:d,isLoading:f,refetch:h}=je({queryKey:["/api/projects",e,"labels","disciplines"],enabled:!!e}),{data:m,isLoading:g,refetch:p}=je({queryKey:["/api/projects",e,"labels","assignees"],enabled:!!e}),v=Pe({mutationFn:async({oldValue:k,newValue:C})=>{if(!e)throw new Error("No project selected");return(await fe("POST",`/api/projects/${e}/labels/disciplines/replace`,{oldValue:k,newValue:C,updateEnum:!0})).json()},onSuccess:k=>{t({title:"Labels Updated",description:k.message||`Successfully updated ${k.updated||0} tasks`}),h(),r(!1),a(null),l("")},onError:k=>{t({title:"Update Failed",description:k.message,variant:"destructive"})}}),b=Pe({mutationFn:async({oldValue:k,newValue:C})=>{if(!e)throw new Error("No project selected");return(await fe("POST",`/api/projects/${e}/labels/assignees/replace`,{oldValue:k,newValue:C})).json()},onSuccess:k=>{t({title:"Labels Updated",description:k.message||`Successfully updated ${k.updated||0} tasks`}),p(),r(!1),a(null),l("")},onError:k=>{t({title:"Update Failed",description:k.message,variant:"destructive"})}}),y=()=>{!i||!o.trim()||(i.type==="discipline"?v.mutate({oldValue:i.value,newValue:o.trim()}):b.mutate({oldValue:i.value,newValue:o.trim()}))},j=((d==null?void 0:d.disciplines)||[]).filter(k=>k.value.toLowerCase().includes(c.toLowerCase())),N=((m==null?void 0:m.assignees)||[]).filter(k=>k.value.toLowerCase().includes(c.toLowerCase()));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(_u,{className:"h-5 w-5"}),"Label Management"]}),s.jsx(it,{children:"Normalize discipline and assignee labels for consistency. After importing data with flexible labels, use this tool to standardize terminology across your project."})]}),s.jsx(ce,{className:"space-y-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search labels...",value:c,onChange:k=>u(k.target.value),className:"pl-10","data-testid":"input-search-labels"})]})})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{className:"text-lg",children:"Discipline Labels"}),s.jsxs(it,{children:[((w=d==null?void 0:d.disciplines)==null?void 0:w.length)||0," unique discipline values in ",(d==null?void 0:d.total)||0," tasks"]})]}),s.jsx(ce,{children:f?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{className:"h-10"}),s.jsx(Ke,{className:"h-10"}),s.jsx(Ke,{className:"h-10"})]}):j.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No discipline labels found"}):s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:j.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover-elevate","data-testid":`label-discipline-${k.value}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ae,{variant:"outline",children:k.taskCount}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:k.value}),k.disciplineLabel&&k.disciplineLabel!==k.value&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Label: ",k.disciplineLabel]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{a({type:"discipline",value:k.value}),l(k.value),r(!0)},"data-testid":`button-replace-discipline-${k.value}`,children:s.jsx(Y4,{className:"h-4 w-4"})})]},k.value))})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{className:"text-lg",children:"Assignee Labels"}),s.jsxs(it,{children:[((S=m==null?void 0:m.assignees)==null?void 0:S.length)||0," unique assignee identifiers"]})]}),s.jsx(ce,{children:g?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{className:"h-10"}),s.jsx(Ke,{className:"h-10"}),s.jsx(Ke,{className:"h-10"})]}):N.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No assignee labels found"}):s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:N.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover-elevate","data-testid":`label-assignee-${k.value}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ae,{variant:"outline",children:k.taskCount}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:k.value}),k.linkedUserId&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Linked to user"})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{a({type:"assignee",value:k.value}),l(k.value),r(!0)},"data-testid":`button-replace-assignee-${k.value}`,children:s.jsx(Y4,{className:"h-4 w-4"})})]},k.value))})})]})]}),s.jsx(Bs,{open:n,onOpenChange:r,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Replace Label"}),s.jsxs(bs,{children:['Replace all occurrences of "',i==null?void 0:i.value,'" with a new value. This will update all tasks that use this ',(i==null?void 0:i.type)==="discipline"?"discipline":"assignee"," label."]})]}),s.jsx("div",{className:"py-4",children:s.jsx(Ce,{value:o,onChange:k=>l(k.target.value),placeholder:"Enter new value...","data-testid":"input-new-label-value"})}),s.jsxs(vs,{children:[s.jsx(ws,{onClick:()=>{a(null),l("")},children:"Cancel"}),s.jsx(js,{onClick:y,disabled:!o.trim()||v.isPending||b.isPending,children:v.isPending||b.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Replace All"})]})]})})]})}const RP=[{value:"task-assigned",label:"Task Assigned"},{value:"task-due-reminder",label:"Task Due Reminder"},{value:"risk-identified",label:"Risk Identified"},{value:"issue-reported",label:"Issue Reported"},{value:"change-request-submitted",label:"Change Request Submitted"},{value:"change-request-approved",label:"Change Request Approved"},{value:"change-request-rejected",label:"Change Request Rejected"},{value:"project-update",label:"Project Update"},{value:"milestone-reached",label:"Milestone Reached"},{value:"custom",label:"Custom Template"}];function sut(){const{selectedOrg:e,selectedOrgId:t,terminology:n}=jt(),{toast:r}=Nt(),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(null),[g,p]=x.useState(null),[v,b]=x.useState({type:"custom",name:"",subject:"",body:"",isActive:!0}),[y,j]=x.useState(""),[N,w]=x.useState({}),{data:S,isLoading:k}=je({queryKey:[`/api/organizations/${t}/email-templates`],enabled:!!t}),{data:C}=je({queryKey:["/api/email-templates/defaults"]}),{data:A}=je({queryKey:[`/api/email-templates/placeholders/${v.type}`],enabled:!!v.type}),{data:D}=je({queryKey:[`/api/organizations/${t}/email-usage`],enabled:!!t}),P=Pe({mutationFn:async I=>(await fe("POST",`/api/organizations/${t}/email-templates`,I)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${t}/email-templates`]}),a(!1),T(),r({title:"Template created successfully"})},onError:I=>{r({title:"Failed to create template",description:I.message,variant:"destructive"})}}),_=Pe({mutationFn:async({id:I,data:q})=>(await fe("PATCH",`/api/organizations/${t}/email-templates/${I}`,q)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${t}/email-templates`]}),l(!1),m(null),T(),r({title:"Template updated successfully"})},onError:I=>{r({title:"Failed to update template",description:I.message,variant:"destructive"})}}),O=Pe({mutationFn:async I=>{await fe("DELETE",`/api/organizations/${t}/email-templates/${I}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${t}/email-templates`]}),r({title:"Template deleted successfully"})},onError:I=>{r({title:"Failed to delete template",description:I.message,variant:"destructive"})}}),M=Pe({mutationFn:async({id:I,toEmail:q,placeholders:$})=>(await fe("POST",`/api/organizations/${t}/email-templates/${I}/send-test`,{toEmail:q,placeholders:$})).json(),onSuccess:I=>{we.invalidateQueries({queryKey:[`/api/organizations/${t}/email-usage`]}),f(!1),m(null),j(""),w({}),r({title:I.success?"Test email sent":"Email queued",description:I.message})},onError:I=>{r({title:"Failed to send test email",description:I.message,variant:"destructive"})}}),T=()=>{b({type:"custom",name:"",subject:"",body:"",isActive:!0})},R=I=>{const q=C==null?void 0:C.find($=>$.type===I);q&&b($=>({...$,subject:q.subject,body:q.body}))},F=I=>{m(I),b({type:I.type,name:I.name,subject:I.subject,body:I.body,isActive:I.isActive}),l(!0)},E=async I=>{m(I);const q={};((A==null?void 0:A.placeholders)||[]).forEach(z=>{q[z]=`[${z.replace(/_/g," ").toUpperCase()}]`});try{const Y=await(await fe("POST",`/api/organizations/${t}/email-templates/${I.id}/preview`,{placeholders:q})).json();p(Y),u(!0)}catch{r({title:"Failed to preview template",variant:"destructive"})}},B=I=>{m(I),f(!0)},L=I=>{var q;return((q=RP.find($=>$.value===I))==null?void 0:q.label)||I};return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Email Templates"}),s.jsx("p",{className:"text-muted-foreground",children:"Customize notification emails sent from the platform"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[D&&s.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":"text-email-usage",children:[s.jsx("span",{className:"font-medium",children:D.emailsSent})," / ",D.emailLimit," emails this month"]}),s.jsxs(H,{onClick:()=>a(!0),"data-testid":"button-create-template",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),k?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(I=>s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Ke,{className:"h-6 w-3/4"}),s.jsx(Ke,{className:"h-4 w-1/2"})]}),s.jsx(ce,{children:s.jsx(Ke,{className:"h-20 w-full"})})]},I))}):(S==null?void 0:S.length)===0?s.jsx(ie,{className:"text-center py-12",children:s.jsxs(ce,{children:[s.jsx(ji,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No Templates Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Create custom email templates for notifications"}),s.jsxs(H,{onClick:()=>a(!0),"data-testid":"button-create-first-template",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create First Template"]})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S==null?void 0:S.map(I=>s.jsxs(ie,{className:"flex flex-col","data-testid":`card-template-${I.id}`,children:[s.jsx(Ne,{children:s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(Se,{className:"text-lg truncate","data-testid":`text-template-name-${I.id}`,children:I.name}),s.jsxs(it,{className:"flex items-center gap-2 mt-1",children:[s.jsx(ae,{variant:"secondary",className:"text-xs",children:L(I.type)}),I.isActive?s.jsxs(ae,{variant:"outline",className:"text-xs text-green-600",children:[s.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(ae,{variant:"outline",className:"text-xs text-muted-foreground",children:[s.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Inactive"]})]})]})})}),s.jsxs(ce,{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Subject:"}),s.jsx("p",{className:"text-sm truncate mb-3","data-testid":`text-template-subject-${I.id}`,children:I.subject})]}),s.jsxs(Gp,{className:"flex flex-wrap gap-2 border-t pt-4",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>E(I),"data-testid":`button-preview-${I.id}`,children:[s.jsx(Eu,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>F(I),"data-testid":`button-edit-${I.id}`,children:[s.jsx(lc,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>B(I),"data-testid":`button-send-test-${I.id}`,children:[s.jsx(l1,{className:"h-4 w-4 mr-1"}),"Test"]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this template?")&&O.mutate(I.id)},"data-testid":`button-delete-${I.id}`,children:s.jsx(wn,{className:"h-4 w-4"})})]})]},I.id))}),s.jsx(zt,{open:i,onOpenChange:a,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Create Email Template"}),s.jsx(ir,{children:"Create a custom email template for notifications"})]}),s.jsxs(Vr,{defaultValue:"editor",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"editor",children:"Editor"}),s.jsx(tt,{value:"placeholders",children:"Placeholders"})]}),s.jsxs(ht,{value:"editor",className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Template Type"}),s.jsxs(ze,{value:v.type,onValueChange:I=>{b(q=>({...q,type:I}))},children:[s.jsx(Fe,{"data-testid":"select-template-type",children:s.jsx(Be,{placeholder:"Select type"})}),s.jsx(Le,{children:RP.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Template Name"}),s.jsx(Ce,{value:v.name,onChange:I=>b(q=>({...q,name:I.target.value})),placeholder:"e.g., Task Assignment Notification","data-testid":"input-template-name"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tp,{checked:v.isActive,onCheckedChange:I=>b(q=>({...q,isActive:I})),"data-testid":"switch-template-active"}),s.jsx(G,{children:"Active"})]}),v.type!=="custom"&&s.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:()=>R(v.type),"data-testid":"button-load-default",children:[s.jsx(cv,{className:"h-4 w-4 mr-2"}),"Load Default Template"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Subject Line"}),s.jsx(Ce,{value:v.subject,onChange:I=>b(q=>({...q,subject:I.target.value})),placeholder:"[{{project_name}}] Notification Subject","data-testid":"input-template-subject"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Email Body (HTML)"}),s.jsx(Ht,{value:v.body,onChange:I=>b(q=>({...q,body:I.target.value})),placeholder:"Enter HTML email content with {{placeholders}}...",className:"min-h-[300px] font-mono text-sm","data-testid":"textarea-template-body"})]})]}),s.jsx(ht,{value:"placeholders",className:"mt-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{className:"text-lg",children:"Available Placeholders"}),s.jsxs(it,{children:["Use these in your template with double curly braces: ","{{placeholder_name}}"]})]}),s.jsx(ce,{children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[A==null?void 0:A.placeholders.map(I=>s.jsxs(ae,{variant:"secondary",className:"cursor-pointer hover-elevate",onClick:()=>{navigator.clipboard.writeText(`{{${I}}}`),r({title:"Copied to clipboard"})},children:[s.jsx(eD,{className:"h-3 w-3 mr-1"}),I]},I)),(!(A!=null&&A.placeholders)||A.placeholders.length===0)&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"No predefined placeholders for this template type. You can use any custom placeholders."})]})})]})})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-create",children:"Cancel"}),s.jsx(H,{onClick:()=>P.mutate(v),disabled:P.isPending||!v.name||!v.subject,"data-testid":"button-save-template",children:P.isPending?"Creating...":"Create Template"})]})]})}),s.jsx(zt,{open:o,onOpenChange:l,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Edit Email Template"}),s.jsx(ir,{children:"Modify the template settings and content"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Template Type"}),s.jsxs(ze,{value:v.type,disabled:!0,children:[s.jsx(Fe,{"data-testid":"select-edit-template-type",children:s.jsx(Be,{})}),s.jsx(Le,{children:RP.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Template Name"}),s.jsx(Ce,{value:v.name,onChange:I=>b(q=>({...q,name:I.target.value})),"data-testid":"input-edit-template-name"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tp,{checked:v.isActive,onCheckedChange:I=>b(q=>({...q,isActive:I})),"data-testid":"switch-edit-template-active"}),s.jsx(G,{children:"Active"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Subject Line"}),s.jsx(Ce,{value:v.subject,onChange:I=>b(q=>({...q,subject:I.target.value})),"data-testid":"input-edit-template-subject"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Email Body (HTML)"}),s.jsx(Ht,{value:v.body,onChange:I=>b(q=>({...q,body:I.target.value})),className:"min-h-[300px] font-mono text-sm","data-testid":"textarea-edit-template-body"})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>l(!1),"data-testid":"button-cancel-edit",children:"Cancel"}),s.jsx(H,{onClick:()=>h&&_.mutate({id:h.id,data:v}),disabled:_.isPending,"data-testid":"button-update-template",children:_.isPending?"Saving...":"Save Changes"})]})]})}),s.jsx(zt,{open:c,onOpenChange:u,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh]",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Template Preview"}),s.jsx(ir,{children:"Preview how your email will look"})]}),g&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{className:"text-muted-foreground",children:"Subject"}),s.jsx("p",{className:"font-medium","data-testid":"text-preview-subject",children:g.subject})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-muted-foreground",children:"Body"}),s.jsx("div",{className:"border rounded-lg p-4 bg-white dark:bg-background",dangerouslySetInnerHTML:{__html:g.body},"data-testid":"preview-body"})]})]}),s.jsx(on,{children:s.jsx(H,{variant:"outline",onClick:()=>u(!1),"data-testid":"button-close-preview",children:"Close"})})]})}),s.jsx(zt,{open:d,onOpenChange:f,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Send Test Email"}),s.jsx(ir,{children:"Send a test email to verify your template"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Recipient Email"}),s.jsx(Ce,{type:"email",value:y,onChange:I=>j(I.target.value),placeholder:"test@example.com","data-testid":"input-test-email"})]}),s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx("span",{children:"Test emails will use sample placeholder values"})]})})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-cancel-test",children:"Cancel"}),s.jsx(H,{onClick:()=>h&&M.mutate({id:h.id,toEmail:y,placeholders:N}),disabled:M.isPending||!y,"data-testid":"button-send-test-email",children:M.isPending?"Sending...":"Send Test Email"})]})]})})]}):s.jsx(ie,{children:s.jsxs(ce,{className:"p-6 text-center",children:[s.jsx(ji,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),s.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["No ",n.topLevel," Selected"]}),s.jsxs("p",{className:"text-muted-foreground",children:["Please select a ",n.topLevel.toLowerCase()," to manage email templates."]})]})})}function iut(){const{selectedOrgId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(""),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(null),[h,m]=x.useState(""),[g,p]=x.useState("member"),[v,b]=x.useState("member"),{data:y=[],isLoading:j}=je({queryKey:[`/api/organizations/${e}/users`],enabled:!!e,retry:1}),{data:N=[]}=je({queryKey:[`/api/organizations/${e}/users/invitations`],enabled:!!e,retry:1}),w=Pe({mutationFn:async O=>(await fe("POST",`/api/organizations/${e}/users/invite`,O)).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/users/invitations`]}),a(!1),m(""),p("member"),t({title:"Success",description:"Invitation sent"})},onError:O=>{t({title:"Error",description:O.message,variant:"destructive"})}}),S=Pe({mutationFn:async({userId:O,role:M})=>(await fe("PATCH",`/api/organizations/${e}/users/${O}`,{role:M})).json(),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/users`]}),l(!1),f(null),t({title:"Success",description:"User role updated"})},onError:O=>{t({title:"Error",description:O.message,variant:"destructive"})}}),k=Pe({mutationFn:async O=>{await fe("DELETE",`/api/organizations/${e}/users/${O}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/users`]}),u(!1),f(null),t({title:"Success",description:"User removed from organization"})},onError:O=>{t({title:"Error",description:O.message,variant:"destructive"})}}),C=Pe({mutationFn:async O=>{await fe("DELETE",`/api/organizations/${e}/users/invitations/${O}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/organizations/${e}/users/invitations`]}),t({title:"Success",description:"Invitation cancelled"})},onError:O=>{t({title:"Error",description:O.message,variant:"destructive"})}}),A=y.filter(O=>{var M;return`${O.firstName} ${O.lastName}`.toLowerCase().includes(n.toLowerCase())||((M=O.email)==null?void 0:M.toLowerCase().includes(n.toLowerCase()))}),D=N.filter(O=>!O.acceptedAt),P=O=>{switch(O){case"owner":return"default";case"admin":return"secondary";case"member":return"outline";default:return"outline"}},_=O=>{var M,T,R,F;return`${((M=O.firstName)==null?void 0:M[0])||""}${((T=O.lastName)==null?void 0:T[0])||""}`.toUpperCase()||((F=(R=O.email)==null?void 0:R[0])==null?void 0:F.toUpperCase())||"U"};return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"User Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage users and permissions for your organization"})]}),s.jsxs(H,{onClick:()=>a(!0),children:[s.jsx(MK,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),D.length>0&&s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-5 w-5"}),"Pending Invitations"]}),s.jsx(it,{children:"Invitations awaiting acceptance"})]}),s.jsx(ce,{children:s.jsx("div",{className:"space-y-2",children:D.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yi,{children:s.jsx(bi,{children:O.email[0].toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:O.email}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited ",en(new Date(O.createdAt),"MMM d, yyyy"),"  Expires ",en(new Date(O.expiresAt),"MMM d, yyyy")]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:P(O.role),children:O.role}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>C.mutate(O.id),disabled:C.isPending,children:s.jsx(wn,{className:"h-4 w-4"})})]})]},O.id))})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"Organization Members"]}),s.jsxs(it,{children:[y.length," members in your organization"]})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search users...",value:n,onChange:O=>r(O.target.value),className:"pl-8"})]})]})}),s.jsx(ce,{children:j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{className:"h-12 w-full"}),s.jsx(Ke,{className:"h-12 w-full"}),s.jsx(Ke,{className:"h-12 w-full"})]}):A.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n?"No users found":"No users in this organization"}):s.jsxs(Um,{children:[s.jsx(Wm,{children:s.jsxs(la,{children:[s.jsx(ns,{children:"User"}),s.jsx(ns,{children:"Email"}),s.jsx(ns,{children:"Role"}),s.jsx(ns,{children:"Joined"}),s.jsx(ns,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(Hm,{children:A.map(O=>s.jsxs(la,{children:[s.jsx(Mr,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(yi,{children:[s.jsx(Bu,{src:O.profileImageUrl||void 0}),s.jsx(bi,{children:_(O)})]}),s.jsx("div",{children:s.jsxs("p",{className:"font-medium",children:[O.firstName," ",O.lastName]})})]})}),s.jsx(Mr,{children:O.email}),s.jsx(Mr,{children:s.jsx(ae,{variant:P(O.role),children:O.role})}),s.jsx(Mr,{children:O.joinedAt?en(new Date(O.joinedAt),"MMM d, yyyy"):"-"}),s.jsx(Mr,{children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",children:s.jsx(i1,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>{f(O),b(O.role),l(!0)},children:[s.jsx(lc,{className:"mr-2 h-4 w-4"}),"Change Role"]}),s.jsxs(ct,{onClick:()=>{f(O),u(!0)},className:"text-destructive",children:[s.jsx(wn,{className:"mr-2 h-4 w-4"}),"Remove"]})]})]})})]},O.id))})]})})]}),s.jsx(zt,{open:i,onOpenChange:a,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Invite User to Organization"}),s.jsx(ir,{children:"Send an invitation email to add a new member to your organization"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"email",children:"Email Address"}),s.jsx(Ce,{id:"email",type:"email",placeholder:"user@example.com",value:h,onChange:O=>m(O.target.value)})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"role",children:"Role"}),s.jsxs(ze,{value:g,onValueChange:O=>p(O),children:[s.jsx(Fe,{id:"role",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"viewer",children:"Viewer - Read only access"}),s.jsx(X,{value:"member",children:"Member - Standard access"}),s.jsx(X,{value:"admin",children:"Admin - Manage users and settings"}),s.jsx(X,{value:"owner",children:"Owner - Full control"})]})]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(H,{onClick:()=>w.mutate({email:h,role:g}),disabled:!h||w.isPending,children:[w.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})}),s.jsx(zt,{open:o,onOpenChange:l,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Change User Role"}),s.jsxs(ir,{children:["Update the role for ",d==null?void 0:d.firstName," ",d==null?void 0:d.lastName]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(G,{htmlFor:"edit-role",children:"Role"}),s.jsxs(ze,{value:v,onValueChange:O=>b(O),children:[s.jsx(Fe,{id:"edit-role",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"viewer",children:"Viewer - Read only access"}),s.jsx(X,{value:"member",children:"Member - Standard access"}),s.jsx(X,{value:"admin",children:"Admin - Manage users and settings"}),s.jsx(X,{value:"owner",children:"Owner - Full control"})]})]})]})}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(H,{onClick:()=>d&&S.mutate({userId:d.id,role:v}),disabled:S.isPending,children:[S.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Role"]})]})]})}),s.jsx(Bs,{open:c,onOpenChange:u,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Remove User from Organization"}),s.jsxs(bs,{children:["Are you sure you want to remove ",d==null?void 0:d.firstName," ",d==null?void 0:d.lastName," from this organization? They will lose access to all organization projects and data."]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsxs(js,{onClick:()=>d&&k.mutate(d.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[k.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Remove"]})]})]})})]}):s.jsx(ie,{children:s.jsx(ce,{className:"p-6 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Please select an organization to manage users"})})})}function aut(){var A,D,P,_,O,M;const{selectedProject:e,selectedOrgId:t,terminology:n}=jt(),{toast:r}=Nt(),[,i]=yr(),a=new URLSearchParams(window.location.search),[o,l]=x.useState(null),[c,u]=x.useState(null),[d,f]=x.useState("usage"),h=t;x.useEffect(()=>{const T=a.get("tab");T&&["usage","cloud-storage","storage","users","labels","email-templates","automation","organizations","terminology","tags"].includes(T)&&f(T)},[a]),x.useEffect(()=>{const T=a.get("success"),R=a.get("error"),F=a.get("provider");if(T==="cloud_storage_connected"&&F)r({title:"Cloud Storage Connected",description:`Successfully connected your ${F.replace("_"," ")} account.`}),window.history.replaceState({},"","/settings");else if(R){let E="An error occurred during connection.";R==="oauth_failed"&&(E="OAuth authentication failed."),R==="state_expired"&&(E="Session expired. Please try again."),R==="invalid_callback"&&(E="Invalid callback received."),r({title:"Connection Failed",description:E,variant:"destructive"}),window.history.replaceState({},"","/settings")}},[a,r]);const{data:m=[],isLoading:g}=je({queryKey:["/api/cloud-storage/providers"],queryFn:async()=>{const T=await fetch("/api/cloud-storage/providers",{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch providers");return T.json()}}),{data:p=[],isLoading:v}=je({queryKey:["/api/organizations",h,"cloud-storage"],enabled:!!h,queryFn:async()=>{const T=await fetch(`/api/organizations/${h}/cloud-storage`,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch connections");return T.json()}}),{data:b,isLoading:y}=je({queryKey:["/api/organizations",h,"storage"],enabled:!!h,queryFn:async()=>{const T=await fetch(`/api/organizations/${h}/storage`,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch storage quota");return T.json()}}),{data:j,isLoading:N}=je({queryKey:["/api/organizations",h,"usage"],enabled:!!h,queryFn:async()=>{const T=await fetch(`/api/organizations/${h}/usage`,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch usage stats");return T.json()}}),w=Pe({mutationFn:async T=>(await fe("POST",`/api/organizations/${h}/cloud-storage/auth-url`,{provider:T})).json(),onSuccess:T=>{window.location.href=T.authUrl},onError:T=>{r({title:"Connection Failed",description:T.message,variant:"destructive"})}}),S=Pe({mutationFn:async T=>{await fe("DELETE",`/api/organizations/${h}/cloud-storage/${T}`)},onSuccess:()=>{r({title:"Disconnected",description:"Cloud storage has been disconnected."}),we.invalidateQueries({queryKey:["/api/organizations",h,"cloud-storage"]}),l(null)},onError:T=>{r({title:"Disconnect Failed",description:T.message,variant:"destructive"})}}),k=Pe({mutationFn:async({connectionId:T,projectId:R})=>(await fe("POST",`/api/organizations/${h}/cloud-storage/${T}/sync`,{projectId:R})).json(),onSuccess:T=>{r({title:"Sync Complete",description:`Added ${T.added} files, updated ${T.updated} files.`}),we.invalidateQueries({queryKey:["/api/organizations",h,"cloud-storage"]}),u(null)},onError:T=>{r({title:"Sync Failed",description:T.message,variant:"destructive"}),u(null)}}),C=()=>p.map(T=>T.provider);return h?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"text-settings-title",children:"Settings"}),s.jsxs("p",{className:"text-muted-foreground",children:["Manage integrations and storage for your ",n.topLevel.toLowerCase()]})]}),s.jsxs(Vr,{value:d,onValueChange:f,className:"space-y-4",children:[s.jsxs(Pr,{children:[s.jsxs(tt,{value:"usage","data-testid":"tab-usage",children:[s.jsx(wK,{className:"h-4 w-4 mr-2"}),"Usage & Plan"]}),s.jsxs(tt,{value:"cloud-storage","data-testid":"tab-cloud-storage",children:[s.jsx(J2,{className:"h-4 w-4 mr-2"}),"Cloud Storage"]}),s.jsxs(tt,{value:"storage","data-testid":"tab-storage",children:[s.jsx(z0,{className:"h-4 w-4 mr-2"}),"Storage Quota"]}),s.jsxs(tt,{value:"users","data-testid":"tab-users",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2"}),"User Management"]}),s.jsxs(tt,{value:"labels","data-testid":"tab-labels",children:[s.jsx(_u,{className:"h-4 w-4 mr-2"}),"Label Management"]}),s.jsxs(tt,{value:"email-templates","data-testid":"tab-email-templates",children:[s.jsx(ji,{className:"h-4 w-4 mr-2"}),"Email Templates"]}),s.jsxs(tt,{value:"automation","data-testid":"tab-automation",children:[s.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Automation"]}),s.jsxs(tt,{value:"organizations","data-testid":"tab-organizations",children:[s.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Organizations"]}),s.jsxs(tt,{value:"terminology","data-testid":"tab-terminology",children:[s.jsx(eD,{className:"h-4 w-4 mr-2"}),"Terminology"]}),s.jsxs(tt,{value:"tags","data-testid":"tab-tags",children:[s.jsx(_u,{className:"h-4 w-4 mr-2"}),"Tags"]})]}),s.jsx(ht,{value:"usage",className:"space-y-4",children:N?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ke,{className:"h-48"}),s.jsx(Ke,{className:"h-48"})]}):j?s.jsxs(s.Fragment,{children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:["Current Plan",s.jsx(ae,{variant:((A=j.plan)==null?void 0:A.tier)==="free"?"secondary":"default",children:((D=j.plan)==null?void 0:D.name)||"Free"})]}),s.jsx(it,{children:"Your organization's subscription and resource usage"})]}),s.jsx(H,{variant:"outline",size:"sm","data-testid":"button-upgrade-plan",onClick:()=>i("/payment/plans"),children:"Upgrade Plan"})]})}),s.jsxs(ce,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(z0,{className:"h-4 w-4 text-muted-foreground"}),"Storage"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[kj(j.storage.usedBytes)," / ",kj(j.storage.quotaBytes)]})]}),s.jsx(fn,{value:j.storage.usedPercent,className:j.storage.usedPercent>90?"bg-destructive/20":""})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(jf,{className:"h-4 w-4 text-muted-foreground"}),"AI Tokens"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.ai.tokensUsed.toLocaleString()," / ",j.ai.tokenLimit.toLocaleString()]})]}),s.jsx(fn,{value:j.ai.usedPercent,className:j.ai.usedPercent>90?"bg-destructive/20":""})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}),"Emails Sent"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.email.emailsSent," / ",j.email.emailLimit]})]}),s.jsx(fn,{value:j.email.usedPercent,className:j.email.usedPercent>90?"bg-destructive/20":""})]})]}),s.jsx(nl,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-md bg-muted",children:s.jsx(Is,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Projects"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active projects"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-semibold",children:j.projects.count}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",j.projects.limit," max"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-md bg-muted",children:s.jsx(Cn,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Team Members"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Organization users"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-semibold",children:j.users.count}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",j.users.limit," max"]})]})]})]})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Plan Features"}),s.jsx(it,{children:"Features included in your current subscription"})]}),s.jsx(ce,{children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[(P=j.plan)!=null&&P.includesCloudSync?s.jsx(Sr,{className:"h-4 w-4 text-green-500"}):s.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:(_=j.plan)!=null&&_.includesCloudSync?"":"text-muted-foreground",children:"Cloud Storage Sync"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[(O=j.plan)!=null&&O.includesAdvancedReports?s.jsx(Sr,{className:"h-4 w-4 text-green-500"}):s.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:(M=j.plan)!=null&&M.includesAdvancedReports?"":"text-muted-foreground",children:"Advanced Reports"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[s.jsx(Sr,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{children:"AI Assistant"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[s.jsx(Sr,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{children:"Email Notifications"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[s.jsx(Sr,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{children:"Real-time Collaboration"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[s.jsx(Sr,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{children:"PDF Reports"})]})]})})]})]}):s.jsx(ie,{children:s.jsx(ce,{className:"py-8",children:s.jsx("p",{className:"text-muted-foreground text-center",children:"Unable to load usage information."})})})}),s.jsxs(ht,{value:"cloud-storage",className:"space-y-4",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Connected Cloud Storage"}),s.jsx(it,{children:"Connect your cloud storage accounts to sync files with your projects. Files are synchronized one-way from cloud storage to the platform."})]}),s.jsx(ce,{className:"space-y-4",children:v?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ke,{className:"h-20 w-full"}),s.jsx(Ke,{className:"h-20 w-full"})]}):p.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No cloud storage connected. Connect a provider below."}):s.jsx("div",{className:"space-y-3",children:p.map(T=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card","data-testid":`connection-${T.provider}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 rounded-md bg-muted",children:s.jsx(K6,{provider:T.provider,className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:T.accountName||T.accountEmail}),T.syncStatus==="syncing"&&s.jsxs(ae,{variant:"outline",children:[s.jsx(Mm,{className:"h-3 w-3 mr-1 animate-spin"}),"Syncing"]}),T.syncStatus==="error"&&s.jsxs(ae,{variant:"destructive",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Error"]}),T.syncStatus==="idle"&&T.lastSyncAt&&s.jsxs(ae,{variant:"secondary",children:[s.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Synced"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("span",{children:T.accountEmail}),T.lastSyncAt&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"-"}),s.jsx(bn,{className:"h-3 w-3"}),s.jsxs("span",{children:["Last sync: ",xne(new Date(T.lastSyncAt))," ago"]})]})]}),T.syncError&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:T.syncError})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{if(!e){r({title:"Project Required",description:"Please select a project to sync files.",variant:"destructive"});return}u(T.id),k.mutate({connectionId:T.id,projectId:e.id})},disabled:k.isPending&&c===T.id||!e,"data-testid":`button-sync-${T.provider}`,title:e?"Sync files to selected project":"Select a project to sync files",children:[k.isPending&&c===T.id?s.jsx(pt,{className:"h-4 w-4 animate-spin"}):s.jsx(bme,{className:"h-4 w-4 mr-1"}),"Sync Now"]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>l(T.id),"data-testid":`button-disconnect-${T.provider}`,children:s.jsx(Kme,{className:"h-4 w-4"})})]})]},T.id))})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Available Providers"}),s.jsx(it,{children:"Connect additional cloud storage providers to access your files."})]}),s.jsx(ce,{children:g?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(Ke,{className:"h-24"}),s.jsx(Ke,{className:"h-24"}),s.jsx(Ke,{className:"h-24"})]}):s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:m.map(T=>{const R=C().includes(T.id);return s.jsxs("div",{className:`p-4 rounded-lg border ${R?"bg-muted/50":"bg-card hover-elevate"}`,"data-testid":`provider-${T.id}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"p-2 rounded-md bg-muted",children:s.jsx(K6,{provider:T.id,className:"h-5 w-5"})}),s.jsx("span",{className:"font-medium",children:T.name})]}),R?s.jsxs(ae,{variant:"secondary",className:"w-full justify-center",children:[s.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Connected"]}):T.configured?s.jsxs(H,{size:"sm",className:"w-full",onClick:()=>w.mutate(T.id),disabled:w.isPending,"data-testid":`button-connect-${T.id}`,children:[w.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin mr-1"}):s.jsx(NK,{className:"h-4 w-4 mr-1"}),"Connect"]}):s.jsx(ae,{variant:"outline",className:"w-full justify-center",children:"Not Configured"})]},T.id)})})})]})]}),s.jsx(ht,{value:"storage",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Storage Usage"}),s.jsx(it,{children:"Monitor your organization's storage usage and quota."})]}),s.jsx(ce,{children:y?s.jsx(Ke,{className:"h-32"}):b?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-2xl font-semibold",children:kj(b.usedBytes)}),s.jsxs("span",{className:"text-muted-foreground",children:["of ",kj(b.quotaBytes)]})]}),s.jsx("div",{className:"h-4 rounded-full bg-muted overflow-hidden",children:s.jsx("div",{className:`h-full transition-all ${b.usedPercent>90?"bg-destructive":b.usedPercent>75?"bg-yellow-500":"bg-primary"}`,style:{width:`${Math.min(b.usedPercent,100)}%`}})}),s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:[b.usedPercent,"% of storage used"]}),b.usedPercent>90&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Storage is almost full. Consider deleting unused files or upgrading your plan."})]})]}):s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Unable to load storage information."})})]})}),s.jsx(ht,{value:"users",className:"space-y-4",children:s.jsx(iut,{})}),s.jsx(ht,{value:"labels",className:"space-y-4",children:e?s.jsx(rut,{projectId:e.id}):s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project to manage labels."})]})}),s.jsx(ht,{value:"email-templates",className:"space-y-4",children:s.jsx(sut,{})}),s.jsxs(ht,{value:"automation",className:"space-y-4",children:[s.jsx(nut,{}),s.jsx(Yct,{})]}),s.jsx(ht,{value:"organizations",className:"space-y-4",children:s.jsx(Xct,{})}),s.jsx(ht,{value:"terminology",className:"space-y-4",children:s.jsx(Zct,{})}),s.jsx(ht,{value:"tags",className:"space-y-4",children:s.jsx(Jct,{})})]}),s.jsx(Bs,{open:o!==null,onOpenChange:()=>l(null),children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Disconnect Cloud Storage"}),s.jsx(bs,{children:"Are you sure you want to disconnect this cloud storage? Synced files will remain in your projects, but future syncs will stop."})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>o&&S.mutate(o),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Disconnect"})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select an organization to configure settings."})]})})}function G6(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function Di(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function out(e){switch(e){case"enterprise":return"default";case"pro":return"secondary";default:return"outline"}}function lut(){var h,m,g,p,v,b,y;zs();const{data:e,isLoading:t,error:n}=je({queryKey:["/api/admin/stats"],retry:1,queryFn:async()=>{const j=await fetch("/api/admin/stats",{credentials:"include"});if(j.status===401)throw new Error("Unauthorized");if(j.status===403)throw new Error("Admin access required");if(!j.ok)throw new Error("Failed to fetch platform stats");return j.json()}}),{data:r=[],isLoading:i}=je({queryKey:["/api/admin/organizations"],retry:1,queryFn:async()=>{const j=await fetch("/api/admin/organizations",{credentials:"include"});if(j.status===401||j.status===403)return[];if(!j.ok)throw new Error("Failed to fetch organizations");return j.json()}}),{data:a,isLoading:o}=je({queryKey:["/api/admin/marketing-stats"],retry:1,queryFn:async()=>{const j=await fetch("/api/admin/marketing-stats",{credentials:"include"});if(j.status===401||j.status===403)throw new Error("Unauthorized");if(!j.ok)throw new Error("Failed to fetch marketing stats");return j.json()}}),{data:l=[],isLoading:c}=je({queryKey:["/api/admin/lead-scores"],retry:1,queryFn:async()=>{const j=await fetch("/api/admin/lead-scores",{credentials:"include"});return j.status===401||j.status===403?[]:j.ok?j.json():[]}}),{data:u,isLoading:d}=je({queryKey:["/api/admin/seo-health"],retry:1,queryFn:async()=>{const j=await fetch("/api/admin/seo-health",{credentials:"include"});return j.status===401||j.status===403||!j.ok?null:j.json()}});if(n)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{variant:"destructive",children:[s.jsx(ul,{className:"h-4 w-4"}),s.jsx(Ft,{children:n.message==="Admin access required"?"You do not have admin access to view this dashboard.":"Unable to load admin dashboard. Please try again later."})]})});const f=e?e.activeSubscriptions.free+e.activeSubscriptions.pro+e.activeSubscriptions.enterprise:0;return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"text-admin-title",children:"Admin Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Platform-wide analytics and management"})]}),s.jsxs(ae,{variant:"default",className:"uppercase tracking-wide",children:[s.jsx(ul,{className:"h-3 w-3 mr-1"}),"Admin"]})]}),t?s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(Ke,{className:"h-32"}),s.jsx(Ke,{className:"h-32"}),s.jsx(Ke,{className:"h-32"}),s.jsx(Ke,{className:"h-32"})]}):e?s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(Ts,{title:"Organizations",value:Di(e.organizations),icon:Hi,"data-testid":"metric-organizations"}),s.jsx(Ts,{title:"Total Users",value:Di(e.users),icon:Cn,"data-testid":"metric-users"}),s.jsx(Ts,{title:"Active Projects",value:Di(e.projects),icon:Is,"data-testid":"metric-projects"}),s.jsx(Ts,{title:"Total Tasks",value:Di(e.tasks),icon:ri,"data-testid":"metric-tasks"})]}):null,s.jsxs(Vr,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(Pr,{children:[s.jsx(tt,{value:"overview","data-testid":"tab-overview",children:"Overview"}),s.jsx(tt,{value:"subscriptions","data-testid":"tab-subscriptions",children:"Subscriptions"}),s.jsx(tt,{value:"usage","data-testid":"tab-usage",children:"Usage"}),s.jsx(tt,{value:"marketing","data-testid":"tab-marketing",children:"Marketing & SEO"}),s.jsx(tt,{value:"organizations","data-testid":"tab-organizations",children:"Organizations"}),s.jsx(tt,{value:"users","data-testid":"tab-users",children:"Users"}),s.jsxs(tt,{value:"bug-reports","data-testid":"tab-bug-reports",children:[s.jsx(bt,{className:"h-4 w-4 mr-2"}),"Bug Reports"]})]}),s.jsx(ht,{value:"overview",className:"space-y-6",children:s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Subscription Distribution"}),s.jsx(it,{children:"Active subscriptions by tier"})]}),s.jsx(ce,{className:"space-y-4",children:t?s.jsx(Ke,{className:"h-32"}):e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Enterprise"}),s.jsx("span",{className:"font-mono text-sm",children:e.activeSubscriptions.enterprise})]}),s.jsx(fn,{value:f>0?e.activeSubscriptions.enterprise/f*100:0,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Pro"}),s.jsx("span",{className:"font-mono text-sm",children:e.activeSubscriptions.pro})]}),s.jsx(fn,{value:f>0?e.activeSubscriptions.pro/f*100:0,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Free"}),s.jsx("span",{className:"font-mono text-sm",children:e.activeSubscriptions.free})]}),s.jsx(fn,{value:f>0?e.activeSubscriptions.free/f*100:0,className:"h-2"})]})]}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No data available"})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Platform Health"}),s.jsx(it,{children:"System status and resource usage"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z0,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Storage Used"})]}),s.jsx("span",{className:"font-mono text-sm",children:G6((e==null?void 0:e.storageUsed)||0)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F0,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"AI Tokens Used"})]}),s.jsx("span",{className:"font-mono text-sm",children:Di((e==null?void 0:e.aiTokensUsed)||0)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Emails Sent"})]}),s.jsx("span",{className:"font-mono text-sm",children:Di((e==null?void 0:e.emailsSent)||0)})]})]})]})]})}),s.jsx(ht,{value:"subscriptions",className:"space-y-6",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx(Se,{className:"text-lg",children:"Free Tier"}),s.jsx(ae,{variant:"outline",children:"Basic"})]})}),s.jsxs(ce,{children:[s.jsx("div",{className:"text-3xl font-bold",children:(e==null?void 0:e.activeSubscriptions.free)||0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Organizations"}),s.jsxs("div",{className:"mt-4 text-xs space-y-1 text-muted-foreground",children:[s.jsx("p",{children:"5 projects, 100 tasks/project"}),s.jsx("p",{children:"100K AI tokens, 1GB storage"})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx(Se,{className:"text-lg",children:"Pro Tier"}),s.jsx(ae,{variant:"secondary",children:"Popular"})]})}),s.jsxs(ce,{children:[s.jsx("div",{className:"text-3xl font-bold",children:(e==null?void 0:e.activeSubscriptions.pro)||0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Organizations"}),s.jsxs("div",{className:"mt-4 text-xs space-y-1 text-muted-foreground",children:[s.jsx("p",{children:"50 projects, 1K tasks/project"}),s.jsx("p",{children:"1M AI tokens, 10GB storage"})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx(Se,{className:"text-lg",children:"Enterprise"}),s.jsx(ae,{children:"Premium"})]})}),s.jsxs(ce,{children:[s.jsx("div",{className:"text-3xl font-bold",children:(e==null?void 0:e.activeSubscriptions.enterprise)||0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Organizations"}),s.jsxs("div",{className:"mt-4 text-xs space-y-1 text-muted-foreground",children:[s.jsx("p",{children:"100 projects, 10K tasks/project"}),s.jsx("p",{children:"10M AI tokens, 100GB storage"})]})]})]})]})}),s.jsx(ht,{value:"usage",className:"space-y-6",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Resource Usage Summary"}),s.jsx(it,{children:"Platform-wide resource consumption"})]}),s.jsx(ce,{children:t?s.jsx(Ke,{className:"h-48"}):s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z0,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Storage"})]}),s.jsx("div",{className:"text-2xl font-bold font-mono",children:G6((e==null?void 0:e.storageUsed)||0)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total storage consumed across all organizations"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F0,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"AI Tokens"})]}),s.jsx("div",{className:"text-2xl font-bold font-mono",children:Di((e==null?void 0:e.aiTokensUsed)||0)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total AI tokens used for assistant queries"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Emails"})]}),s.jsx("div",{className:"text-2xl font-bold font-mono",children:Di((e==null?void 0:e.emailsSent)||0)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total emails sent via notification system"})]})]})})]})}),s.jsxs(ht,{value:"marketing",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(Ts,{title:"Page Views",value:Di((a==null?void 0:a.pageViews)||0),icon:Eu}),s.jsx(Ts,{title:"Unique Visitors",value:Di((a==null?void 0:a.uniqueVisitors)||0),icon:Cn}),s.jsx(Ts,{title:"Bounce Rate",value:`${((a==null?void 0:a.bounceRate)||0).toFixed(1)}%`,icon:ri}),s.jsx(Ts,{title:"Avg Session",value:`${Math.floor(((a==null?void 0:a.avgSessionDuration)||0)/60)}m`,icon:bn})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Top Pages"}),s.jsx(it,{children:"Most visited pages"})]}),s.jsx(ce,{children:o?s.jsx(Ke,{className:"h-48"}):a!=null&&a.topPages&&a.topPages.length>0?s.jsx("div",{className:"space-y-2",children:a.topPages.map((j,N)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[s.jsx("span",{className:"text-sm font-mono",children:j.path}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[Di(j.views)," views"]})]},N))}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No page data available"})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Traffic Sources"}),s.jsx(it,{children:"Where visitors come from"})]}),s.jsx(ce,{children:o?s.jsx(Ke,{className:"h-48"}):a!=null&&a.trafficSources&&a.trafficSources.length>0?s.jsx("div",{className:"space-y-2",children:a.trafficSources.map((j,N)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[s.jsx("span",{className:"text-sm",children:j.source}),s.jsx("span",{className:"text-sm text-muted-foreground",children:Di(j.count)})]},N))}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No traffic source data available"})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"SEO Metrics"}),s.jsx(it,{children:"Search engine optimization performance"})]}),s.jsx(ce,{children:o?s.jsx(Ke,{className:"h-48"}):s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:((h=a==null?void 0:a.seoMetrics)==null?void 0:h.indexedPages)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Indexed Pages"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:Di(((m=a==null?void 0:a.seoMetrics)==null?void 0:m.backlinks)||0)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Backlinks"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:((g=a==null?void 0:a.seoMetrics)==null?void 0:g.domainAuthority)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Domain Authority"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:Di(((p=a==null?void 0:a.seoMetrics)==null?void 0:p.organicTraffic)||0)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Organic Traffic"})]})]})})]}),u&&s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Se,{children:"SEO Health"}),s.jsx(it,{children:"Overall SEO health score and recommendations"})]}),s.jsxs(ae,{variant:u.overallScore>=70?"default":u.overallScore>=50?"secondary":"destructive",className:"text-lg px-3 py-1",children:[u.overallScore,"/100"]})]})}),s.jsx(ce,{className:"space-y-4",children:d?s.jsx(Ke,{className:"h-48"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold",children:u.averagePosition.toFixed(1)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Position"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[(u.clickThroughRate*100).toFixed(2),"%"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Click-Through Rate"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold",children:u.coverageIssues.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage Issues"})]})]}),u.recommendations&&u.recommendations.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Recommendations"}),u.recommendations.slice(0,3).map((j,N)=>s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded border text-sm",children:[j.priority==="high"?s.jsx(bt,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}):j.priority==="medium"?s.jsx(bt,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}):s.jsx(s1,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium",children:j.title}),s.jsx("div",{className:"text-muted-foreground text-xs",children:j.description})]})]},N))]})]})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Lead Scores"}),s.jsx(it,{children:"Product-Qualified Leads (PQLs) and engagement scores"})]}),s.jsx(ce,{children:c?s.jsx(Ke,{className:"h-48"}):l.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs("div",{className:"text-center p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.filter(j=>j.tier==="pql").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PQLs"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.filter(j=>j.tier==="hot").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hot Leads"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.filter(j=>j.tier==="warm").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Warm Leads"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:l.filter(j=>j.tier==="cold").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cold Leads"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Top PQLs"}),l.filter(j=>j.tier==="pql").slice(0,5).map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center flex-shrink-0 ${j.tier==="pql"?"bg-blue-100 text-blue-600":j.tier==="hot"?"bg-orange-100 text-orange-600":j.tier==="warm"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:s.jsx(u1,{className:"h-5 w-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:j.email}),j.organizationName&&s.jsx("div",{className:"text-sm text-muted-foreground truncate",children:j.organizationName})]})]}),s.jsx("div",{className:"flex items-center gap-4 flex-shrink-0",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold",children:j.score}),s.jsx(ae,{variant:j.tier==="pql"?"default":j.tier==="hot"?"secondary":"outline",className:"text-xs capitalize",children:j.tier})]})})]},j.userId)),l.filter(j=>j.tier==="pql").length===0&&s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No PQLs found"})]})]}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No lead score data available"})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Conversions"}),s.jsx(it,{children:"Marketing funnel performance"})]}),s.jsx(ce,{children:o?s.jsx(Ke,{className:"h-48"}):s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:((v=a==null?void 0:a.conversions)==null?void 0:v.signups)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Signups"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:((b=a==null?void 0:a.conversions)==null?void 0:b.trialStarts)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Trial Starts"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:((y=a==null?void 0:a.conversions)==null?void 0:y.paidConversions)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Conversions"})]})]})})]})]}),s.jsx(ht,{value:"organizations",className:"space-y-6",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Organizations"}),s.jsx(it,{children:"All registered organizations on the platform"})]}),s.jsx(ce,{children:i?s.jsx(Ke,{className:"h-48"}):r.length>0?s.jsx("div",{className:"space-y-2",children:r.map(j=>{const N=j.storageLimitMB>0?j.storageUsedMB/j.storageLimitMB*100:0;return s.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg border bg-card hover-elevate","data-testid":`org-row-${j.id}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[s.jsx(Hi,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium truncate",children:j.name}),s.jsx(ae,{variant:out(j.tier),className:"capitalize",children:j.tier})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.userCount," users, ",j.projectCount," projects"]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("div",{className:"text-sm font-mono",children:[j.storageUsedMB.toFixed(1),"MB / ",j.storageLimitMB,"MB"]}),s.jsx(fn,{value:Math.min(N,100),className:"h-1 w-24 mt-1"})]})]},j.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ft,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No organizations found"})]})})]})}),s.jsx(ht,{value:"users",className:"space-y-6",children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Cn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"User management is available from the organization context."}),s.jsx("p",{className:"text-sm mt-2",children:"Select an organization and use the User Management page."})]})}),s.jsx(ht,{value:"bug-reports",className:"space-y-6",children:s.jsx(cut,{})})]})]})}function cut(){const{toast:e}=Nt(),t=Pi(),[n,r]=x.useState("all"),[i,a]=x.useState("all"),[o,l]=x.useState(null),[c,u]=x.useState(""),[d,f]=x.useState(""),{data:h=[],isLoading:m}=je({queryKey:["/api/admin/bug-reports",n,i],queryFn:async()=>{const w=new URLSearchParams;return n!=="all"&&w.append("status",n),i!=="all"&&w.append("category",i),(await fe("GET",`/api/admin/bug-reports?${w.toString()}`)).json()}}),g=Pe({mutationFn:async({id:w,status:S,resolutionNotes:k,internalNotes:C})=>(await fe("PATCH",`/api/admin/bug-reports/${w}`,{status:S,resolutionNotes:k,internalResolutionNotes:C})).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/admin/bug-reports"]}),l(null),u(""),f(""),e({title:"Report updated successfully"})},onError:w=>{e({title:"Failed to update report",description:w.message,variant:"destructive"})}}),p=Pe({mutationFn:async w=>(await fe("POST",`/api/admin/bug-reports/${w}/create-backlog`)).json(),onSuccess:w=>{t.invalidateQueries({queryKey:["/api/admin/bug-reports"]}),e({title:"Backlog item created",description:`Backlog item #${w.backlogItem.id} created from this report.`}),o&&l({...o,backlogItemId:w.backlogItem.id,backlogStatus:w.backlogItem.status})},onError:w=>{e({title:"Failed to create backlog item",description:w.message,variant:"destructive"})}}),v=Pe({mutationFn:async w=>{await fe("DELETE",`/api/admin/bug-reports/${w}`)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/admin/bug-reports"]}),e({title:"Report deleted successfully"})},onError:()=>{e({title:"Failed to delete report",variant:"destructive"})}}),b=w=>{const S={pending:"outline",reviewing:"secondary","in-progress":"default",resolved:"default",rejected:"destructive",duplicate:"secondary"},C={pending:bn,reviewing:Eu,"in-progress":bn,resolved:pr,rejected:Im,duplicate:Im}[w]||bt;return s.jsxs(ae,{variant:S[w]||"outline",children:[s.jsx(C,{className:"h-3 w-3 mr-1"}),w]})},y=w=>({bug:L0,"feature-request":jf,feedback:fa,other:oc})[w]||oc,j=w=>{l(w),u(w.resolutionNotes||""),f(w.internalResolutionNotes||"")},N=w=>{o&&g.mutate({id:o.id,status:w,resolutionNotes:w==="resolved"?c:void 0,internalNotes:d})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Bug Reports Management"}),s.jsx(it,{children:"Review and manage user-submitted bug reports and feedback"})]}),s.jsxs(ce,{children:[s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsxs(ze,{value:n,onValueChange:r,children:[s.jsx(Fe,{className:"w-48",children:s.jsx(Be,{placeholder:"Filter by status"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Statuses"}),s.jsx(X,{value:"pending",children:"Pending"}),s.jsx(X,{value:"reviewing",children:"Reviewing"}),s.jsx(X,{value:"in-progress",children:"In Progress"}),s.jsx(X,{value:"resolved",children:"Resolved"}),s.jsx(X,{value:"rejected",children:"Rejected"}),s.jsx(X,{value:"duplicate",children:"Duplicate"})]})]}),s.jsxs(ze,{value:i,onValueChange:a,children:[s.jsx(Fe,{className:"w-48",children:s.jsx(Be,{placeholder:"Filter by category"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Categories"}),s.jsx(X,{value:"bug",children:"Bug Reports"}),s.jsx(X,{value:"feature-request",children:"Feature Requests"}),s.jsx(X,{value:"feedback",children:"Feedback"}),s.jsx(X,{value:"other",children:"Other"})]})]})]}),m?s.jsx(Ke,{className:"h-48"}):h.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(bt,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No reports found"})]}):s.jsx("div",{className:"space-y-2",children:h.map(w=>{const S=y(w.category);return s.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 rounded-lg border bg-card hover-elevate cursor-pointer",onClick:()=>j(w),children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium truncate",children:w.title}),b(w.status)]}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:w.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["#",w.id]}),s.jsx("span",{children:""}),s.jsx("span",{children:en(new Date(w.createdAt),"MMM d, yyyy")}),w.severity&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{className:"capitalize",children:[w.severity," severity"]})]})]})]}),s.jsx(H,{variant:"ghost",size:"icon",onClick:k=>{k.stopPropagation(),v.mutate(w.id)},children:s.jsx(wn,{className:"h-4 w-4"})})]},w.id)})})]})]}),s.jsx(zt,{open:!!o,onOpenChange:()=>l(null),children:s.jsx(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:o&&s.jsxs(s.Fragment,{children:[s.jsxs(Bt,{children:[s.jsxs(Vt,{className:"flex items-center gap-2",children:[(()=>{const w=y(o.category);return s.jsx(w,{className:"h-5 w-5"})})(),o.title]}),s.jsxs(ir,{children:["Report #",o.id,"  ",en(new Date(o.createdAt),"PPpp")]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[b(o.status),s.jsx(ae,{variant:"outline",className:"capitalize",children:o.category}),o.severity&&s.jsx(ae,{variant:"outline",className:"capitalize",children:o.severity})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:o.description})]}),o.stepsToReproduce&&s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Steps to Reproduce"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:o.stepsToReproduce})]}),o.expectedBehavior&&s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Expected Behavior"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:o.expectedBehavior})]}),o.actualBehavior&&s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Actual Behavior"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:o.actualBehavior})]}),o.screenshots&&o.screenshots.length>0&&s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Screenshots"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:o.screenshots.map((w,S)=>s.jsx("img",{src:w,alt:`Screenshot ${S+1}`,className:"w-full rounded border"},S))})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Resolution Notes (Public)"}),s.jsx(Ht,{value:c,onChange:w=>u(w.target.value),placeholder:"Notes visible to the user...",rows:3,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(G,{className:"text-sm font-medium",children:"Internal Notes (Private)"}),s.jsx(Ht,{value:d,onChange:w=>f(w.target.value),placeholder:"Internal notes for team...",rows:3,className:"mt-1"})]})]}),s.jsxs(on,{className:"flex-col sm:flex-row gap-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[!o.backlogItemId&&s.jsxs(H,{variant:"secondary",onClick:()=>p.mutate(o.id),disabled:p.isPending,children:[p.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Is,{className:"h-4 w-4 mr-2"}),"Create Backlog Item"]}),o.backlogItemId&&s.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(Is,{className:"h-3 w-3"}),"Backlog #",o.backlogItemId]}),s.jsx(H,{variant:"outline",onClick:()=>N("pending"),disabled:g.isPending,children:"Set Pending"}),s.jsx(H,{variant:"outline",onClick:()=>N("in-progress"),disabled:g.isPending,children:"In Progress"}),s.jsx(H,{variant:"default",onClick:()=>N("resolved"),disabled:g.isPending,children:g.isPending?s.jsx(pt,{className:"h-4 w-4 animate-spin"}):"Resolve"}),s.jsx(H,{variant:"destructive",onClick:()=>N("rejected"),disabled:g.isPending,children:"Reject"})]}),s.jsx(H,{variant:"outline",onClick:()=>l(null),children:"Close"})]})]})})})]})}const uut={human:Bn,equipment:Qa,material:Kr},dut={human:"Human Resource",equipment:"Equipment",material:"Material"},fut={civil:"Civil",structural:"Structural",mechanical:"Mechanical",electrical:"Electrical",piping:"Piping",instrumentation:"Instrumentation",process:"Process",hvac:"HVAC",architectural:"Architectural",general:"General"},hut={available:"bg-green-500",partially_available:"bg-amber-500",unavailable:"bg-red-500",on_leave:"bg-blue-500"},Q6={available:"Available",partially_available:"Partially Available",unavailable:"Unavailable",on_leave:"On Leave"};function mut({resource:e,open:t,onOpenChange:n}){const{data:r=[],isLoading:i}=je({queryKey:["/api/resources",e==null?void 0:e.id,"assignments"],enabled:!!(e!=null&&e.id)&&t});if(!e)return null;const a=uut[e.type]||Bn,o=dut[e.type]||e.type,l=fut[e.discipline||"general"]||e.discipline;return s.jsx(zt,{open:t,onOpenChange:n,children:s.jsxs(Rt,{className:"max-w-2xl max-h-[85vh]","data-testid":"modal-resource-details","aria-describedby":"resource-details-description",children:[s.jsx(Bt,{children:s.jsxs(Vt,{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(a,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("span",{children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(ae,{variant:"secondary",children:o}),s.jsx(ae,{variant:"outline",children:l}),e.status&&s.jsx(ae,{className:`${hut[e.status]||"bg-gray-500"} text-white`,children:Q6[e.status]||e.status})]})]})]})}),s.jsxs("p",{id:"resource-details-description",className:"sr-only",children:["Detailed information about ",e.name," resource"]}),s.jsx(On,{className:"h-[60vh]",children:s.jsxs(Vr,{defaultValue:"overview",className:"w-full",children:[s.jsxs(Pr,{className:"grid w-full grid-cols-4",children:[s.jsx(tt,{value:"overview","data-testid":"tab-overview",children:"Overview"}),s.jsx(tt,{value:"pricing","data-testid":"tab-pricing",children:"Pricing"}),s.jsx(tt,{value:"assignments","data-testid":"tab-assignments",children:"Assignments"})]}),s.jsxs(ht,{value:"overview",className:"mt-4 space-y-4",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4"}),"Basic Information"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),s.jsx("p",{className:"text-sm font-medium",children:o})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Discipline"}),s.jsx("p",{className:"text-sm font-medium",children:l})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Availability"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fn,{value:Number(e.availability||100),className:"flex-1 h-2"}),s.jsxs("span",{className:"text-sm font-mono",children:[Number(e.availability||100),"%"]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Status"}),s.jsx("p",{className:"text-sm font-medium",children:Q6[e.status||"active"]||"Active"})]})]}),e.notes&&s.jsxs("div",{className:"pt-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes"}),s.jsx("p",{className:"text-sm",children:e.notes})]})]})]}),e.notes&&s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),"Notes"]})}),s.jsx(ce,{children:s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})})]})]}),s.jsx(ht,{value:"assignments",className:"mt-4",children:s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-sm flex items-center gap-2",children:[s.jsx(bf,{className:"h-4 w-4"}),"Project Assignments (",r.length,")"]})}),s.jsx(ce,{children:i?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(pt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):r.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active assignments"}):s.jsx("div",{className:"space-y-3",children:r.map(c=>{const u=c.task,d=u!=null&&u.startDate&&(u!=null&&u.endDate)?i0(new Date(u.endDate),new Date(u.startDate))+1:null;return s.jsxs("div",{className:"p-4 rounded-lg border space-y-3","data-testid":`assignment-${c.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(u==null?void 0:u.wbsCode)&&s.jsx(ae,{variant:"outline",className:"font-mono text-xs",children:u.wbsCode}),s.jsx("p",{className:"font-medium truncate","data-testid":`task-name-${c.id}`,children:(u==null?void 0:u.name)||`Task #${c.taskId}`})]}),(u==null?void 0:u.status)&&s.jsx(ae,{variant:"secondary",className:"mt-1 capitalize text-xs","data-testid":`task-status-${c.id}`,children:u.status.replace(/_/g," ")})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsxs(ae,{"data-testid":`allocation-${c.id}`,children:[c.allocation,"% allocated"]}),c.effortHours&&s.jsxs("span",{className:"text-xs text-muted-foreground font-mono","data-testid":`planned-hours-${c.id}`,children:[c.effortHours,"h planned"]})]})]}),((u==null?void 0:u.startDate)||(u==null?void 0:u.endDate))&&s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground border-t pt-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Br,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[u.startDate?en(new Date(u.startDate),"MMM d, yyyy"):"No start","  ",u.endDate?en(new Date(u.endDate),"MMM d, yyyy"):"No end"]})]}),d&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(bn,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[d," days"]})]})]}),(u==null?void 0:u.progress)!==void 0&&u.progress!==null&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"font-mono",children:[u.progress,"%"]})]}),s.jsx(fn,{value:u.progress,className:"h-1.5"})]})]},c.id)})})})]})})]})})]})})}const put={human:Bn,equipment:Qa,material:Kr};function gut(e){return e===0?"bg-muted":e<=50?"bg-green-500/70":e<=80?"bg-yellow-500/70":e<=100?"bg-orange-500/70":"bg-red-500"}function xut(e){return e===0?"text-muted-foreground":"text-white"}function vut(){var o;const{selectedProjectId:e}=jt(),{data:t,isLoading:n,error:r}=je({queryKey:[`/api/projects/${e}/resource-utilization`],enabled:!!e});if(n)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(r)return s.jsx(ie,{children:s.jsx(ce,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[s.jsx(ft,{className:"h-5 w-5"}),s.jsx("p",{children:"Failed to load resource utilization data"})]})})});if(!t||t.resources.length===0)return s.jsx(ie,{children:s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx(Br,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Utilization Data"}),s.jsx("p",{className:"text-muted-foreground",children:"Add resources and assign them to tasks to see utilization data."})]})});const i=((o=t.resources[0])==null?void 0:o.periods)||[],a=t.resources.filter(l=>l.periods.some(c=>c.isOverAllocated));return s.jsxs("div",{className:"space-y-4",children:[a.length>0&&s.jsx(ie,{className:"border-destructive/50 bg-destructive/5",children:s.jsxs(ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5 text-destructive"}),s.jsxs("p",{className:"font-medium text-destructive",children:[a.length," resource(s) are over-allocated"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.map(l=>l.resourceName).join(", ")})]})}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"pb-2",children:[s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(Br,{className:"h-5 w-5"}),"Resource Utilization Timeline"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Weekly view of resource allocation across project tasks"})]}),s.jsxs(ce,{children:[s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-500/70"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"0-50%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-yellow-500/70"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"51-80%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-orange-500/70"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"81-100%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Over-allocated"})]})]}),s.jsxs(On,{className:"w-full",type:"always",children:[s.jsxs("div",{className:"min-w-max",children:[s.jsxs("div",{className:"flex border-b",children:[s.jsx("div",{className:"w-48 shrink-0 p-2 font-medium text-sm border-r bg-muted/30",children:"Resource"}),i.map((l,c)=>s.jsx("div",{className:"w-16 shrink-0 p-2 text-center text-xs text-muted-foreground border-r",children:en(new Date(l.periodStart),"MMM d")},c))]}),t.resources.map(l=>{const c=put[l.resourceType]||Bn;return s.jsxs("div",{className:"flex border-b hover:bg-muted/20","data-testid":`utilization-row-${l.resourceId}`,children:[s.jsxs("div",{className:"w-48 shrink-0 p-2 border-r flex items-center gap-2",children:[s.jsx(c,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium truncate",title:l.resourceName,children:l.resourceName})]}),l.periods.map((u,d)=>s.jsxs(Iu,{children:[s.jsx(Mu,{asChild:!0,children:s.jsx("div",{className:`w-16 shrink-0 p-1 border-r flex items-center justify-center cursor-pointer ${u.isOverAllocated?"animate-pulse":""}`,"data-testid":`utilization-cell-${l.resourceId}-${d}`,children:s.jsx("div",{className:`w-12 h-8 rounded flex items-center justify-center text-xs font-mono ${gut(u.utilization)} ${xut(u.utilization)}`,children:u.utilization>0?`${u.utilization}%`:"-"})})}),s.jsx(dc,{side:"bottom",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"font-medium",children:[en(new Date(u.periodStart),"MMM d")," - ",en(new Date(u.periodEnd),"MMM d, yyyy")]}),s.jsxs("div",{className:"text-sm",children:["Utilization: ",s.jsxs("span",{className:u.isOverAllocated?"text-destructive font-bold":"",children:[u.utilization,"%"]}),u.isOverAllocated&&s.jsx(ae,{variant:"destructive",className:"ml-2 text-xs",children:"Over-allocated"})]}),u.assignments.length>0&&s.jsxs("div",{className:"border-t pt-2 mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Assigned Tasks:"}),s.jsx("ul",{className:"text-xs space-y-1",children:u.assignments.map((f,h)=>s.jsxs("li",{className:"flex justify-between gap-4",children:[s.jsx("span",{className:"truncate",children:f.taskName}),s.jsxs("span",{className:"shrink-0 font-mono",children:[f.allocation,"%"]})]},h))})]})]})})]},d))]},l.resourceId)})]}),s.jsx(YD,{orientation:"horizontal"})]})]})]})]})}function yut({projectId:e,materialResourceId:t}){const[n,r]=x.useState(""),[i,a]=x.useState("all"),{data:o=[]}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e}),{data:l=[],isLoading:c}=je({queryKey:[`/api/projects/${e}/materials`],enabled:!!e,queryFn:async()=>{const p=o.map(async b=>{try{return(await(await fe("GET",`/api/tasks/${b.id}/materials`)).json()).map(N=>({...N,task:b,resource:null}))}catch{return[]}}),v=(await Promise.all(p)).flat();return t?v.filter(b=>b.materialId===t):v}}),u=l.filter(p=>{var j,N,w,S;if(n){const k=n.toLowerCase(),C=((N=(j=p.task)==null?void 0:j.name)==null?void 0:N.toLowerCase())||"",A=((S=(w=p.resource)==null?void 0:w.name)==null?void 0:S.toLowerCase())||"";if(!C.includes(k)&&!A.includes(k))return!1}const v=parseFloat(p.quantity||"0"),b=parseFloat(p.actualQuantity||"0"),y=v>0?b/v*100:0;return!(i==="on-track"&&y>80||i==="at-risk"&&(y<=80||y>100)||i==="over-consumed"&&y<=100)}),d=u.reduce((p,v)=>p+parseFloat(v.quantity||"0"),0),f=u.reduce((p,v)=>p+parseFloat(v.actualQuantity||"0"),0),h=d-f,m=d>0?f/d*100:0,g=u.reduce((p,v)=>{const b=v.materialId;return p[b]||(p[b]=[]),p[b].push(v),p},{});return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Kr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Kr,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:u.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Material Items"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500/10 flex items-center justify-center",children:s.jsx(ri,{className:"h-5 w-5 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.toFixed(1)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Planned"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-500/10 flex items-center justify-center",children:s.jsx(Kr,{className:"h-5 w-5 text-amber-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:f.toFixed(1)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Consumed"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-green-500/10 flex items-center justify-center",children:s.jsx(ri,{className:"h-5 w-5 text-green-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:h.toFixed(1)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining"})]})]})})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-lg",children:"Overall Material Consumption"})}),s.jsx(ce,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[m.toFixed(1),"%"]})]}),s.jsx(fn,{value:Math.min(m,100),className:he("h-3",m>100&&"bg-destructive",m>80&&m<=100&&"bg-amber-500",m<=80&&"bg-primary")}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Consumed: ",f.toFixed(1)]}),s.jsxs("span",{children:["Planned: ",d.toFixed(1)]})]})]})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search by task or material name...",value:n,onChange:p=>r(p.target.value),className:"pl-9"})]}),s.jsxs(ze,{value:i,onValueChange:p=>a(p),children:[s.jsxs(Fe,{className:"w-[180px]",children:[s.jsx(kK,{className:"h-4 w-4 mr-2"}),s.jsx(Be,{})]}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Status"}),s.jsx(X,{value:"on-track",children:"On Track (<80%)"}),s.jsx(X,{value:"at-risk",children:"At Risk (80-100%)"}),s.jsx(X,{value:"over-consumed",children:"Over Consumed (>100%)"})]})]})]}),Object.keys(g).length===0?s.jsx(ie,{children:s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx(Kr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Materials Found"}),s.jsx("p",{className:"text-muted-foreground",children:n||i!=="all"?"Try adjusting your filters":"No materials have been added to tasks yet."})]})}):s.jsx("div",{className:"space-y-4",children:Object.entries(g).map(([p,v])=>{const b=v.reduce((N,w)=>N+parseFloat(w.quantity||"0"),0),y=v.reduce((N,w)=>N+parseFloat(w.actualQuantity||"0"),0),j=b>0?y/b*100:0;return s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(Kr,{className:"h-5 w-5"}),"Material Resource #",p]}),s.jsxs(ae,{variant:j>100?"destructive":j>80?"default":"secondary",children:[j.toFixed(0),"% Used"]})]})}),s.jsx(ce,{children:s.jsx("div",{className:"space-y-3",children:v.map(N=>{var A,D;const w=parseFloat(N.quantity||"0"),S=parseFloat(N.actualQuantity||"0"),k=w-S,C=w>0?S/w*100:0;return s.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:((A=N.task)==null?void 0:A.name)||`Task #${N.taskId}`}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[((D=N.task)==null?void 0:D.wbsCode)||"","  Unit: ",N.unit]})]}),s.jsxs(ae,{variant:C>100?"destructive":C>80?"default":"secondary",children:[C.toFixed(0),"%"]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Planned:"})," ",s.jsxs("span",{className:"font-medium",children:[w.toFixed(2)," ",N.unit]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Consumed:"})," ",s.jsxs("span",{className:"font-medium",children:[S.toFixed(2)," ",N.unit]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Remaining:"})," ",s.jsxs("span",{className:he("font-medium",k<0&&"text-destructive"),children:[k.toFixed(2)," ",N.unit]})]})]}),s.jsx(fn,{value:Math.min(C,100),className:he("h-2",C>100&&"bg-destructive",C>80&&C<=100&&"bg-amber-500",C<=80&&"bg-primary")}),C>100&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[s.jsx(ft,{className:"h-3 w-3"}),s.jsx("span",{children:"Consumption exceeds planned quantity"})]})]},N.id)})})})]},p)})})]})}function but({open:e,onOpenChange:t,projectId:n,group:r}){const{toast:i}=Nt(),[a,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState("#3b82f6"),[f,h]=x.useState([]),{data:m=[]}=je({queryKey:[`/api/projects/${n}/resources`],enabled:e&&!!n}),{data:g}=je({queryKey:[`/api/projects/${n}`],enabled:!!n}),{data:p=[]}=je({queryKey:[`/api/resource-groups/${r==null?void 0:r.id}/members`],enabled:e&&!!(r!=null&&r.id),queryFn:async()=>(await(await fe("GET",`/api/resource-groups/${r.id}/members`)).json()).map(S=>S.resourceId)});x.useEffect(()=>{r?(o(r.name),c(r.description||""),d(r.color||"#3b82f6")):(o(""),c(""),d("#3b82f6"),h([]))},[r,e]),x.useEffect(()=>{p.length>0&&h(p)},[p]);const v=Pe({mutationFn:async N=>{const S=await(await fe("POST","/api/resource-groups",N)).json();for(const k of f)await fe("POST",`/api/resource-groups/${S.id}/members`,{resourceId:k});return S},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n}/resource-groups`]}),we.invalidateQueries({queryKey:[`/api/projects/${n}/resources`]}),i({title:"Group Created",description:"Resource group has been created successfully."}),t(!1)},onError:N=>{i({title:"Error",description:N.message,variant:"destructive"})}}),b=Pe({mutationFn:async N=>{const w=await fe("PATCH",`/api/resource-groups/${r.id}`,N),S=p,k=f.filter(A=>!S.includes(A)),C=S.filter(A=>!f.includes(A));for(const A of k)await fe("POST",`/api/resource-groups/${r.id}/members`,{resourceId:A});for(const A of C)await fe("DELETE",`/api/resource-groups/${r.id}/members/${A}`);return w},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${n}/resource-groups`]}),we.invalidateQueries({queryKey:[`/api/resource-groups/${r.id}/members`]}),i({title:"Group Updated",description:"Resource group has been updated successfully."}),t(!1)},onError:N=>{i({title:"Error",description:N.message,variant:"destructive"})}}),y=N=>{h(w=>w.includes(N)?w.filter(S=>S!==N):[...w,N])},j=()=>{if(!a.trim()){i({title:"Name Required",description:"Please enter a group name.",variant:"destructive"});return}if(!g)return;const N={organizationId:g.organizationId,projectId:n,name:a.trim(),description:l.trim()||void 0,color:u};r?b.mutate(N):v.mutate(N)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{className:"max-w-2xl",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:r?"Edit Resource Group":"Create Resource Group"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",children:"Group Name *"}),s.jsx(Ce,{id:"name",value:a,onChange:N=>o(N.target.value),placeholder:"e.g., Engineering Team, Equipment Pool"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",value:l,onChange:N=>c(N.target.value),placeholder:"Optional description...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"color",children:"Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ce,{id:"color",type:"color",value:u,onChange:N=>d(N.target.value),className:"w-20 h-10"}),s.jsx(Ce,{value:u,onChange:N=>d(N.target.value),placeholder:"#3b82f6",className:"flex-1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Select Resources"}),s.jsx(On,{className:"h-64 border rounded-md p-4",children:s.jsxs("div",{className:"space-y-2",children:[m.map(N=>s.jsxs("div",{className:"flex items-center gap-3 p-2 rounded hover:bg-muted cursor-pointer",onClick:()=>y(N.id),children:[s.jsx(Wt,{checked:f.includes(N.id),onCheckedChange:()=>y(N.id)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:N.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.type,"  ",N.discipline]})]}),f.includes(N.id)&&s.jsxs(ae,{variant:"secondary",children:[f.length," selected"]})]},N.id)),m.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No resources available"})]})}),f.length>0&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," resource",f.length!==1?"s":""," selected"]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:j,disabled:v.isPending||b.isPending,children:v.isPending||b.isPending?"Saving...":r?"Update":"Create"})]})]})})}function jut({stats:e}){const t=e.cpi>=1?"text-green-500":"text-red-500";e.cpi>=1;const n=e.efficiency>=100?"text-green-500":"text-amber-500";return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Se,{className:"text-sm font-medium",children:"Cost Performance Index (CPI)"}),s.jsx(ur,{className:`h-4 w-4 ${t}`})]}),s.jsxs(ce,{children:[s.jsx("div",{className:`text-2xl font-bold ${t}`,children:e.cpi.toFixed(2)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"EV / AC (Target: > 1.0)"}),s.jsx(fn,{value:Math.min(e.cpi*50,100),className:`h-2 mt-2 ${e.cpi<1?"bg-red-100":"bg-green-100"}`})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Se,{className:"text-sm font-medium",children:"Time Efficiency"}),s.jsx(bn,{className:`h-4 w-4 ${n}`})]}),s.jsxs(ce,{children:[s.jsxs("div",{className:`text-2xl font-bold ${n}`,children:[e.efficiency.toFixed(0),"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Budgeted vs Actual Hours"}),s.jsxs("div",{className:"text-xs mt-2 flex justify-between",children:[s.jsxs("span",{children:[e.totalActualHours,"h Actual"]}),s.jsxs("span",{children:[e.totalBudgetedHours,"h Planned"]})]}),s.jsx(fn,{value:Math.min(e.efficiency,100),className:"h-2 mt-1"})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Se,{className:"text-sm font-medium",children:"Cost Variance"}),s.jsx(vf,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ce,{children:[s.jsxs("div",{className:`text-2xl font-bold ${e.costVariance>=0?"text-green-500":"text-red-500"}`,children:[e.costVariance>=0?"+":"",e.costVariance.toFixed(0)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Budget Surplus/Deficit"})]})]})]})}const Y6=[{value:"human",label:"Human Resource",icon:Bn},{value:"equipment",label:"Equipment",icon:Qa},{value:"material",label:"Material",icon:Kr}],wut=[{value:"general",label:"General"},{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"piping",label:"Piping"},{value:"electrical",label:"Electrical"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hse",label:"HSE"}];function Nut(){const{selectedProjectId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState(!1),{selectedResources:c,setSelectedResources:u}=eg(),[d,f]=x.useState(null),[h,m]=x.useState(null),[g,p]=x.useState(!1),{data:v=[],isLoading:b}=je({queryKey:[`/api/projects/${e}/resources`],enabled:!!e}),y=x.useMemo(()=>({cpi:1.12,efficiency:105,totalBudgetedHours:1200,totalActualHours:1140,costVariance:5e3}),[v]),j=Pe({mutationFn:async R=>await fe("DELETE",`/api/resources/${R}`),onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/resources`]}),t({title:"Success",description:"Resource deleted successfully"})},onError:R=>{t({title:"Error",description:R.message||"Failed to delete resource",variant:"destructive"})}}),N=()=>{f(null),r(!0)},w=R=>{f(R),r(!0)},S=R=>{f(R),a(!0)},k=R=>{confirm(`Are you sure you want to delete "${R.name}"?`)&&j.mutate(R.id)},C=R=>{const F=Y6.find(E=>E.value===R);return F?F.icon:Bn},A=R=>{const F=Y6.find(E=>E.value===R);return(F==null?void 0:F.label)||R},D=R=>{if(!R)return"General";const F=wut.find(E=>E.value===R);return(F==null?void 0:F.label)||R},P=v.length,_=v.length>0?Math.round(v.reduce((R,F)=>R+F.availability,0)/v.length):0,O=Pe({mutationFn:async R=>{await Promise.all(R.map(F=>fe("DELETE",`/api/resources/${F}`)))},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/resources`]}),p(!1),u([]),t({title:"Success",description:`${c.length} resource(s) deleted successfully`})},onError:R=>{t({title:"Error",description:R.message||"Failed to delete resources",variant:"destructive"})}}),M=x.useCallback((R,F)=>{R==="add-to-group"?(m(null),l(!0)):R==="delete"&&p(!0)},[m,l,p]);Q.useEffect(()=>eb("resources",M),[M]);const T=x.useMemo(()=>[{accessorKey:"name",header:({column:R})=>s.jsx(Qn,{column:R,children:"Name"}),cell:({row:R})=>{const F=R.original,E=C(F.type);return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:s.jsx(E,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:F.name}),F.pricingModels&&Array.isArray(F.pricingModels)&&F.pricingModels.length>1&&s.jsx(ae,{variant:"outline",className:"text-xs",children:"Tiered Pricing"})]}),F.vendorName&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Vendor: ",F.vendorName]})]})]})}},{accessorKey:"type",header:({column:R})=>s.jsx(Qn,{column:R,children:"Type"}),cell:({row:R})=>{const F=R.original,E=C(F.type);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(ae,{variant:"secondary",className:"capitalize",children:A(F.type)})]})}},{accessorKey:"discipline",header:({column:R})=>s.jsx(Qn,{column:R,children:"Discipline"}),cell:({row:R})=>s.jsx(ae,{variant:"outline",className:"text-xs",children:D(R.original.discipline)})},{accessorKey:"availability",header:({column:R})=>s.jsx(Qn,{column:R,children:"Availability"}),cell:({row:R})=>{const F=R.original.availability;return s.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[s.jsx(fn,{value:F,className:"w-16 h-2"}),s.jsxs("span",{className:"text-sm font-mono w-12 text-right",children:[F,"%"]})]})}},{id:"rate",header:"Rate/Cost",cell:({row:R})=>{const F=R.original;if(!F.rate&&!F.costPerHour)return s.jsx("span",{className:"text-muted-foreground",children:"-"});const E=parseFloat(F.rate||F.costPerHour||"0");return s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-mono text-sm flex items-center justify-end gap-1",children:[s.jsx(ur,{className:"h-3 w-3"}),E.toFixed(2),F.rateType==="per-hour"&&"/hr",F.rateType==="per-use"&&"/use",F.rateType==="per-unit"&&`/${F.unitType||"unit"}`,!F.rateType&&"/hr"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:F.currency})]})}},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:R})=>{const F=R.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>S(F),children:[s.jsx(Eu,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(ct,{onClick:()=>w(F),children:[s.jsx(lc,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsx(fr,{}),s.jsxs(ct,{className:"text-destructive",onClick:()=>k(F),children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})}}],[]);return e?b?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-resources",children:"Resources"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage project resources and assignments"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:"outline",onClick:()=>{m(null),l(!0)},children:[s.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Manage Groups"]}),s.jsxs(H,{onClick:N,"data-testid":"button-add-resource",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Resource"]})]})]}),s.jsxs(Vr,{defaultValue:"list",className:"space-y-4",children:[s.jsxs(Pr,{children:[s.jsxs(tt,{value:"list","data-testid":"tab-resources-list",children:[s.jsx(nD,{className:"h-4 w-4 mr-2"}),"List View"]}),s.jsxs(tt,{value:"materials","data-testid":"tab-resources-materials",children:[s.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Materials"]}),s.jsxs(tt,{value:"utilization","data-testid":"tab-resources-utilization",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Utilization & Performance"]})]}),s.jsxs(ht,{value:"list",className:"space-y-6",children:[s.jsx(jut,{stats:y}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Bn,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:P}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Resources"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500/10 flex items-center justify-center",children:s.jsx(Bn,{className:"h-5 w-5 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.filter(R=>R.type==="human").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Human Resources"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-500/10 flex items-center justify-center",children:s.jsx(Qa,{className:"h-5 w-5 text-amber-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.filter(R=>R.type==="equipment").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Equipment"})]})]})})}),s.jsx(ie,{children:s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-green-500/10 flex items-center justify-center",children:s.jsx(DK,{className:"h-5 w-5 text-green-500"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[_,"%"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Availability"})]})]})})})]}),v.length===0?s.jsx(ie,{children:s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx(Bn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Resources Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add resources like team members, equipment, or materials to manage your project."}),s.jsxs(H,{onClick:N,"data-testid":"button-add-first-resource",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add First Resource"]})]})}):s.jsx("div",{className:"space-y-4",children:s.jsx(od,{columns:T,data:v,searchKey:"name",searchPlaceholder:"Search resources by name, type, or discipline...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,enablePagination:!1,maxHeight:"calc(100vh - 500px)",onSelectionChange:u,emptyMessage:v.length===0?"No resources yet. Add your first resource!":"No resources found.",getRowId:R=>R.id.toString()})})]}),s.jsx(ht,{value:"materials",children:s.jsx(yut,{projectId:e||0})}),s.jsx(ht,{value:"utilization",children:s.jsx(vut,{})})]}),s.jsx(mut,{resource:d,open:i,onOpenChange:a}),s.jsx(coe,{resource:d,open:n,onOpenChange:r}),s.jsx(but,{projectId:e||0,group:h||void 0,open:o,onOpenChange:R=>{l(R),R||(m(null),u([]))}}),s.jsx(Bs,{open:g,onOpenChange:p,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Resources"}),s.jsxs(bs,{children:["Are you sure you want to delete ",c.length," selected resource(s)? This action cannot be undone.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Resources to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:c.map(R=>s.jsxs("li",{children:[R.name," (",A(R.type),")"]},R.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const R=c.map(F=>F.id);O.mutate(R)},className:"bg-destructive text-destructive-foreground",disabled:O.isPending,children:O.isPending?"Deleting...":`Delete ${c.length} Resource(s)`})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view resources."})]})})}function Sut(){const{selectedProjectId:e}=jt(),{data:t=[],isLoading:n}=je({queryKey:[`/api/projects/${e}/tasks`],enabled:!!e}),{data:r=[],isLoading:i}=je({queryKey:[`/api/projects/${e}/risks`],enabled:!!e}),{data:a=[],isLoading:o}=je({queryKey:[`/api/projects/${e}/issues`],enabled:!!e}),{data:l=[],isLoading:c}=je({queryKey:[`/api/projects/${e}/costs`],enabled:!!e}),u=x.useMemo(()=>{const v=t.length,b=t.filter(C=>C.status==="completed").length,y=t.filter(C=>C.status==="in-progress").length,j=t.filter(C=>C.status==="not-started").length,N=t.filter(C=>C.status==="on-hold").length,w=t.filter(C=>C.status==="review").length,S=v>0?Math.round(t.reduce((C,A)=>C+(A.progress||0),0)/v):0,k={critical:t.filter(C=>C.priority==="critical").length,high:t.filter(C=>C.priority==="high").length,medium:t.filter(C=>C.priority==="medium").length,low:t.filter(C=>C.priority==="low").length};return{total:v,completed:b,inProgress:y,notStarted:j,onHold:N,review:w,avgProgress:S,byPriority:k}},[t]),d=x.useMemo(()=>{const v=r.length,b=r.filter(j=>j.status!=="closed").length,y={critical:r.filter(j=>j.impact==="critical").length,high:r.filter(j=>j.impact==="high").length,medium:r.filter(j=>j.impact==="medium").length,low:r.filter(j=>j.impact==="low").length};return{total:v,open:b,byImpact:y}},[r]),f=x.useMemo(()=>{const v=a.length,b=a.filter(N=>N.status==="open").length,y=a.filter(N=>N.status==="resolved").length,j={critical:a.filter(N=>N.priority==="critical").length,high:a.filter(N=>N.priority==="high").length,medium:a.filter(N=>N.priority==="medium").length,low:a.filter(N=>N.priority==="low").length};return{total:v,open:b,resolved:y,byPriority:j}},[a]),h=x.useMemo(()=>{const v=l.reduce((N,w)=>N+parseFloat(w.budgeted||"0"),0),b=l.reduce((N,w)=>N+parseFloat(w.actual||"0"),0),y=v-b,j=v>0?y/v*100:0;return{totalBudget:v,totalActual:b,variance:y,variancePercent:j}},[l]),m=[{name:"Completed",value:u.completed,color:"#22c55e"},{name:"In Progress",value:u.inProgress,color:"#3b82f6"},{name:"Not Started",value:u.notStarted,color:"#9ca3af"},{name:"On Hold",value:u.onHold,color:"#f59e0b"},{name:"Review",value:u.review,color:"#a855f7"}].filter(v=>v.value>0),g=[{name:"Critical",tasks:u.byPriority.critical,risks:d.byImpact.critical,issues:f.byPriority.critical},{name:"High",tasks:u.byPriority.high,risks:d.byImpact.high,issues:f.byPriority.high},{name:"Medium",tasks:u.byPriority.medium,risks:d.byImpact.medium,issues:f.byPriority.medium},{name:"Low",tasks:u.byPriority.low,risks:d.byImpact.low,issues:f.byPriority.low}],p=n||i||o||c;return e?p?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-analytics",children:"Analytics"}),s.jsx("p",{className:"text-muted-foreground",children:"Project performance and trends"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsxs(ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall Progress"}),s.jsxs("p",{className:"text-2xl font-bold",children:[u.avgProgress,"%"]})]}),s.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(vf,{className:"h-6 w-6 text-primary"})})]}),s.jsx(fn,{value:u.avgProgress,className:"mt-3"})]})}),s.jsx(ie,{children:s.jsxs(ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tasks Completed"}),s.jsxs("p",{className:"text-2xl font-bold",children:[u.completed,"/",u.total]})]}),s.jsx("div",{className:"h-12 w-12 rounded-full bg-green-500/10 flex items-center justify-center",children:s.jsx(pr,{className:"h-6 w-6 text-green-500"})})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[u.total>0?Math.round(u.completed/u.total*100):0,"% completion rate"]})]})}),s.jsx(ie,{children:s.jsxs(ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Open Risks"}),s.jsx("p",{className:"text-2xl font-bold",children:d.open})]}),s.jsx("div",{className:"h-12 w-12 rounded-full bg-amber-500/10 flex items-center justify-center",children:s.jsx(ft,{className:"h-6 w-6 text-amber-500"})})]}),s.jsxs("div",{className:"flex gap-1 mt-2",children:[d.byImpact.critical>0&&s.jsxs(ae,{variant:"destructive",className:"text-xs",children:[d.byImpact.critical," Critical"]}),d.byImpact.high>0&&s.jsxs(ae,{variant:"outline",className:"text-xs border-orange-500 text-orange-500",children:[d.byImpact.high," High"]})]})]})}),s.jsx(ie,{children:s.jsxs(ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Budget Variance"}),s.jsxs("p",{className:"text-2xl font-bold flex items-center gap-1",children:[h.variancePercent>=0?s.jsx(ri,{className:"h-5 w-5 text-green-500"}):s.jsx(Gu,{className:"h-5 w-5 text-red-500"}),Math.abs(h.variancePercent).toFixed(1),"%"]})]}),s.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-500/10 flex items-center justify-center",children:s.jsx(Ka,{className:"h-6 w-6 text-blue-500"})})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["$",h.variance.toLocaleString()," ",h.variance>=0?"under":"over"," budget"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Task Status Distribution"})}),s.jsx(ce,{children:m.length===0?s.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No tasks to display"}):s.jsx("div",{className:"h-[300px]",children:s.jsx(af,{width:"100%",height:"100%",children:s.jsxs(loe,{children:[s.jsx(Nl,{data:m,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",label:({name:v,percent:b})=>`${v} ${(b*100).toFixed(0)}%`,children:m.map((v,b)=>s.jsx(ug,{fill:v.color},`cell-${b}`))}),s.jsx(Qs,{})]})})})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Priority Breakdown"})}),s.jsx(ce,{children:s.jsx("div",{className:"h-[300px]",children:s.jsx(af,{width:"100%",height:"100%",children:s.jsxs(FM,{data:g,children:[s.jsx(Np,{strokeDasharray:"3 3",className:"stroke-muted"}),s.jsx(pl,{dataKey:"name",className:"text-muted-foreground"}),s.jsx(gl,{className:"text-muted-foreground"}),s.jsx(Qs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(Nu,{}),s.jsx(Eo,{dataKey:"tasks",name:"Tasks",fill:"hsl(var(--chart-1))"}),s.jsx(Eo,{dataKey:"risks",name:"Risks",fill:"hsl(var(--chart-2))"}),s.jsx(Eo,{dataKey:"issues",name:"Issues",fill:"hsl(var(--chart-3))"})]})})})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5"}),"Task Summary"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Not Started"}),s.jsx(ae,{variant:"secondary",children:u.notStarted})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"In Progress"}),s.jsx(ae,{children:u.inProgress})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"In Review"}),s.jsx(ae,{variant:"outline",children:u.review})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Completed"}),s.jsx(ae,{className:"bg-green-500",children:u.completed})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"On Hold"}),s.jsx(ae,{variant:"destructive",children:u.onHold})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5"}),"Risk Summary"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Total Risks"}),s.jsx(ae,{variant:"secondary",children:d.total})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Open Risks"}),s.jsx(ae,{variant:"destructive",children:d.open})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Critical Impact"}),s.jsx(ae,{variant:"destructive",children:d.byImpact.critical})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"High Impact"}),s.jsx(ae,{className:"bg-orange-500",children:d.byImpact.high})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Medium Impact"}),s.jsx(ae,{className:"bg-amber-500",children:d.byImpact.medium})]})]})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5"}),"Issue Summary"]})}),s.jsxs(ce,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Total Issues"}),s.jsx(ae,{variant:"secondary",children:f.total})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Open Issues"}),s.jsx(ae,{variant:"destructive",children:f.open})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Resolved"}),s.jsx(ae,{className:"bg-green-500",children:f.resolved})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"Critical Priority"}),s.jsx(ae,{variant:"destructive",children:f.byPriority.critical})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:"High Priority"}),s.jsx(ae,{className:"bg-orange-500",children:f.byPriority.high})]})]})]})]})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view analytics."})]})})}const Pj=[{value:"civil",label:"Civil"},{value:"structural",label:"Structural"},{value:"mechanical",label:"Mechanical"},{value:"piping",label:"Piping"},{value:"electrical",label:"Electrical"},{value:"instrumentation",label:"Instrumentation"},{value:"process",label:"Process"},{value:"hse",label:"HSE"},{value:"commissioning",label:"Commissioning"},{value:"other",label:"Other"}],Lle=[{label:"Technical",types:[{value:"drawing",label:"Drawing"},{value:"specification",label:"Specification"},{value:"datasheet",label:"Datasheet"},{value:"calculation",label:"Calculation"},{value:"report",label:"Report"}]},{label:"Procedures",types:[{value:"sop",label:"SOP"},{value:"procedure",label:"Procedure"},{value:"work-instruction",label:"Work Instruction"},{value:"checklist",label:"Checklist"}]},{label:"Commercial",types:[{value:"invoice",label:"Invoice"},{value:"rfp",label:"RFP"},{value:"contract",label:"Contract"},{value:"purchase-order",label:"Purchase Order"},{value:"quote",label:"Quote"}]},{label:"Vendor",types:[{value:"vendor-doc",label:"Vendor Document"},{value:"certificate",label:"Certificate"},{value:"warranty",label:"Warranty"}]},{label:"Project",types:[{value:"lessons-learned",label:"Lessons Learned"},{value:"bulletin",label:"Bulletin"},{value:"meeting-minutes",label:"Meeting Minutes"},{value:"transmittal",label:"Transmittal"}]},{label:"Correspondence",types:[{value:"correspondence",label:"Correspondence"},{value:"rfi",label:"RFI"},{value:"ncr",label:"NCR"}]},{label:"Other",types:[{value:"other",label:"Other"}]}],X6=Lle.flatMap(e=>e.types),$P=[{value:"draft",label:"Draft"},{value:"ifa",label:"Issued for Approval (IFA)"},{value:"ifc",label:"Issued for Construction (IFC)"},{value:"as-built",label:"As-Built"},{value:"superseded",label:"Superseded"},{value:"cancelled",label:"Cancelled"}];function Cut(){const{selectedProjectId:e}=jt(),{documents:t,isLoading:n,selectedDocumentId:r,setSelectedDocumentId:i}=IMe(),{toast:a}=Nt(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(""),[h,m]=x.useState("all"),[g,p]=x.useState("all"),[v,b]=x.useState("all"),[y,j]=x.useState({documentNumber:"",title:"",discipline:"civil",documentType:"drawing",revision:"A",status:"draft",description:"",file:null,filePath:null,fileSize:null}),[N,w]=x.useState(!1),S=x.useRef(null),k=Pe({mutationFn:async I=>await fe("POST","/api/documents",{...I,projectId:e}),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",e,"documents"]}),a({title:"Success",description:"Document created successfully"}),_()},onError:I=>{a({title:"Error",description:I.message||"Failed to create document",variant:"destructive"})}}),C=Pe({mutationFn:async({id:I,data:q})=>await fe("PATCH",`/api/documents/${I}`,q),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",e,"documents"]}),a({title:"Success",description:"Document updated successfully"}),_()},onError:I=>{a({title:"Error",description:I.message||"Failed to update document",variant:"destructive"})}}),A=Pe({mutationFn:async I=>await fe("DELETE",`/api/documents/${I}`),onSuccess:()=>{we.invalidateQueries({queryKey:["/api/projects",e,"documents"]}),a({title:"Success",description:"Document deleted successfully"})},onError:I=>{a({title:"Error",description:I.message||"Failed to delete document",variant:"destructive"})}}),D=x.useMemo(()=>t.filter(I=>{const q=d===""||I.title.toLowerCase().includes(d.toLowerCase())||I.documentNumber.toLowerCase().includes(d.toLowerCase()),$=h==="all"||I.discipline===h,z=g==="all"||I.documentType===g,Y=v==="all"||I.status===v;return q&&$&&z&&Y}),[t,d,h,g,v]);x.useMemo(()=>{const I={};return Pj.forEach(q=>{I[q.value]=[]}),D.forEach(q=>{const $=q.discipline||"other";I[$]||(I[$]=[]),I[$].push(q)}),I},[D]);const P=I=>{I?(u(I),j({documentNumber:I.documentNumber||"",title:I.title||"",discipline:I.discipline||"civil",documentType:I.documentType||"drawing",revision:I.revision||"A",status:I.status||"draft",description:I.description||"",file:null,filePath:I.fileUrl||null,fileSize:I.sizeBytes||null})):(u(null),j({documentNumber:"",title:"",discipline:"civil",documentType:"drawing",revision:"A",status:"draft",description:"",file:null,filePath:null,fileSize:null})),l(!0)},_=()=>{l(!1),u(null),S.current&&(S.current.value="")},O=I=>{var $;const q=($=I.target.files)==null?void 0:$[0];q&&j(z=>({...z,file:q,fileSize:q.size}))},M=()=>{j(I=>({...I,file:null,fileSize:null})),S.current&&(S.current.value="")},T=I=>{if(I===0)return"0 Bytes";const q=1024,$=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(I)/Math.log(q));return parseFloat((I/Math.pow(q,z)).toFixed(2))+" "+$[z]},R=async I=>{try{const q=await fe("POST",`/api/projects/${e}/files/upload-url`,{fileSize:I.size}),{uploadURL:$,objectId:z}=await q.json();return await fetch($,{method:"PUT",headers:{"Content-Type":I.type},body:I}),await fe("POST",`/api/projects/${e}/files`,{name:z,originalName:I.name,mimeType:I.type,size:I.size,objectPath:z,category:"document",description:`Attachment for ${y.documentNumber}`}),{filePath:z,fileSize:I.size}}catch(q){throw console.error("File upload error:",q),q}},F=async()=>{if(!y.documentNumber.trim()||!y.title.trim()){a({title:"Validation Error",description:"Document number and title are required",variant:"destructive"});return}let I=y.filePath,q=y.fileSize;if(y.file){w(!0);try{const z=await R(y.file);z&&(I=z.filePath,q=z.fileSize)}catch{a({title:"Upload Error",description:"Failed to upload file. Please try again.",variant:"destructive"}),w(!1);return}w(!1)}const $={documentNumber:y.documentNumber,title:y.title,discipline:y.discipline,documentType:y.documentType,revision:y.revision,status:y.status,description:y.description||null,filePath:I||null,fileSize:q||null};c?C.mutate({id:c.id,data:$}):k.mutate($)},E=I=>{confirm(`Are you sure you want to delete "${I.title}"?`)&&A.mutate(I.id)},B=I=>{const q=$P.find(z=>z.value===I),$={draft:"secondary",ifa:"outline",ifc:"default","as-built":"default",superseded:"destructive",cancelled:"destructive"};return s.jsx(ae,{variant:$[I]||"secondary",children:(q==null?void 0:q.label)||I})},L=k.isPending||C.isPending||N;return e?n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-documents",children:"Document Register"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage project documents, drawings, and procedures"})]}),s.jsxs(H,{onClick:()=>P(),"data-testid":"button-add-document",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Document"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search documents...",value:d,onChange:I=>f(I.target.value),className:"pl-9","data-testid":"input-search-documents"})]}),s.jsxs(ze,{value:h,onValueChange:m,children:[s.jsx(Fe,{className:"w-[180px]","data-testid":"select-filter-discipline",children:s.jsx(Be,{placeholder:"Discipline"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Disciplines"}),Pj.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))]})]}),s.jsxs(ze,{value:g,onValueChange:p,children:[s.jsx(Fe,{className:"w-[180px]","data-testid":"select-filter-doctype",children:s.jsx(Be,{placeholder:"Type"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Types"}),Lle.map(I=>s.jsxs("div",{children:[s.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:I.label}),I.types.map(q=>s.jsx(X,{value:q.value,children:q.label},q.value))]},I.label))]})]}),s.jsxs(ze,{value:v,onValueChange:b,children:[s.jsx(Fe,{className:"w-[180px]","data-testid":"select-filter-status",children:s.jsx(Be,{placeholder:"Status"})}),s.jsxs(Le,{children:[s.jsx(X,{value:"all",children:"All Statuses"}),$P.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))]})]})]}),t.length===0?s.jsx(ie,{children:s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx(Sn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Documents Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by adding project documents, drawings, and procedures."}),s.jsxs(H,{onClick:()=>P(),"data-testid":"button-add-first-document",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add First Document"]})]})}):D.length===0?s.jsx(ie,{children:s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx(os,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Results Found"}),s.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters."})]})}):s.jsx(ie,{children:s.jsx(ce,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/50",children:[s.jsx("th",{className:"text-left p-4 font-medium",children:"Document No."}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Title"}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Discipline"}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Type"}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Rev"}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Status"}),s.jsx("th",{className:"text-left p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:D.map(I=>{var q,$;return s.jsxs("tr",{className:`border-b cursor-pointer transition-colors ${r===I.id?"bg-primary/10 hover:bg-primary/15":"hover:bg-muted/30"}`,onClick:()=>i(I.id),"data-testid":`document-row-${I.id}`,children:[s.jsx("td",{className:"p-4 font-mono text-sm",children:I.documentNumber}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:I.title}),I.description&&s.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-[300px]",children:I.description})]}),s.jsx("td",{className:"p-4",children:s.jsx(ae,{variant:"outline",children:((q=Pj.find(z=>z.value===I.discipline))==null?void 0:q.label)||I.discipline})}),s.jsx("td",{className:"p-4 text-sm",children:(($=X6.find(z=>z.value===I.documentType))==null?void 0:$.label)||I.documentType}),s.jsx("td",{className:"p-4 font-mono",children:I.revision}),s.jsx("td",{className:"p-4",children:B(I.status)}),s.jsx("td",{className:"p-4",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon","data-testid":`button-doc-actions-${I.id}`,children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>P(I),children:[s.jsx(lc,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{className:"text-destructive",onClick:()=>E(I),children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},I.id)})})]})})})}),s.jsx(zt,{open:o,onOpenChange:l,children:s.jsxs(Rt,{className:"max-w-lg","data-testid":"modal-document",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:c?"Edit Document":"Add Document"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"doc-number",children:"Document Number *"}),s.jsx(Ce,{id:"doc-number",placeholder:"e.g., DWG-CIV-001",value:y.documentNumber,onChange:I=>j({...y,documentNumber:I.target.value}),"data-testid":"input-doc-number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"revision",children:"Revision"}),s.jsx(Ce,{id:"revision",placeholder:"e.g., A, B, 01",value:y.revision,onChange:I=>j({...y,revision:I.target.value}),"data-testid":"input-revision"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title *"}),s.jsx(Ce,{id:"title",placeholder:"Enter document title",value:y.title,onChange:I=>j({...y,title:I.target.value}),"data-testid":"input-doc-title"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"discipline",children:"Discipline"}),s.jsxs(ze,{value:y.discipline,onValueChange:I=>j({...y,discipline:I}),children:[s.jsx(Fe,{id:"discipline","data-testid":"select-doc-discipline",children:s.jsx(Be,{})}),s.jsx(Le,{children:Pj.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"doc-type",children:"Type"}),s.jsxs(ze,{value:y.documentType,onValueChange:I=>j({...y,documentType:I}),children:[s.jsx(Fe,{id:"doc-type","data-testid":"select-doc-type",children:s.jsx(Be,{})}),s.jsx(Le,{children:X6.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:y.status,onValueChange:I=>j({...y,status:I}),children:[s.jsx(Fe,{id:"status","data-testid":"select-doc-status",children:s.jsx(Be,{})}),s.jsx(Le,{children:$P.map(I=>s.jsx(X,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",placeholder:"Enter document description",rows:3,value:y.description,onChange:I=>j({...y,description:I.target.value}),"data-testid":"textarea-doc-description"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"File Attachment"}),s.jsx("input",{ref:S,type:"file",onChange:O,className:"hidden","data-testid":"input-file-upload"}),y.file?s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border bg-muted/30",children:[s.jsx(uv,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm truncate",children:y.file.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:T(y.file.size)})]}),s.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:M,"data-testid":"button-remove-file",children:s.jsx(Fn,{className:"h-4 w-4"})})]}):y.filePath?s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border bg-muted/30",children:[s.jsx(uv,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm truncate",children:"Existing file attached"}),y.fileSize&&s.jsx("p",{className:"text-xs text-muted-foreground",children:T(y.fileSize)})]}),s.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>{var I;return(I=S.current)==null?void 0:I.click()},"data-testid":"button-replace-file",children:"Replace"})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-md cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>{var I;return(I=S.current)==null?void 0:I.click()},"data-testid":"dropzone-file",children:[s.jsx(Rm,{className:"h-8 w-8 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload a file"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, DOC, XLS, DWG up to 50MB"})]})]})]}),s.jsxs(on,{className:"gap-2",children:[s.jsx(H,{variant:"outline",onClick:_,disabled:L,"data-testid":"button-cancel",children:"Cancel"}),s.jsxs(H,{onClick:F,disabled:L,"data-testid":"button-save-document",children:[L&&s.jsx(pt,{className:"h-4 w-4 mr-2 animate-spin"}),c?"Update":"Create"]})]})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select a project from the dropdown above to view documents."})]})})}function kut(){return s.jsx(OMe,{children:s.jsx(Cut,{})})}function FP(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}function Ej({title:e,value:t,subtitle:n,icon:r,trend:i,className:a}){return s.jsxs(ie,{className:he("relative overflow-hidden",a),children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[s.jsx(Se,{className:"text-sm font-medium",children:e}),s.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ce,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t}),n&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n}),i&&s.jsxs("div",{className:he("flex items-center text-xs mt-1",i.positive?"text-green-500":"text-red-500"),children:[s.jsx(ri,{className:he("h-3 w-3 mr-1",!i.positive&&"rotate-180")}),i.value,"%"]})]})]})}function Put({status:e}){const n={planning:{color:"bg-blue-500",label:"Planning"},active:{color:"bg-green-500",label:"Active"},"on-hold":{color:"bg-amber-500",label:"On Hold"},completed:{color:"bg-gray-500",label:"Completed"},cancelled:{color:"bg-red-500",label:"Cancelled"}}[e]||{color:"bg-gray-400",label:e};return s.jsxs(ae,{variant:"outline",className:"gap-1.5",children:[s.jsx("span",{className:he("w-2 h-2 rounded-full",n.color)}),n.label]})}function Eut(){const{selectedOrgId:e,selectedOrg:t,isLoadingOrgs:n}=jt(),{data:r,isLoading:i,error:a}=je({queryKey:[`/api/organizations/${e}/pmo/dashboard`],enabled:!!e});if(!e)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select an organization to view the PMO dashboard."})]})});if(i||n)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(Ke,{className:"h-8 w-64 mb-2"}),s.jsx(Ke,{className:"h-4 w-96"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((l,c)=>s.jsx(Ke,{className:"h-32"},c))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Ke,{className:"h-64"}),s.jsx(Ke,{className:"h-64"})]})]});if(a)return s.jsx("div",{className:"p-6",children:s.jsxs($t,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Failed to load PMO dashboard data. Please try again."})]})});const o=r!=null&&r.taskStats.total?Math.round(r.taskStats.completed/r.taskStats.total*100):0;return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-pmo-dashboard",children:"PMO Dashboard"}),s.jsxs("p",{className:"text-muted-foreground",children:["Organization-wide project portfolio overview for ",(t==null?void 0:t.name)||"All Projects"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ej,{title:"Total Projects",value:(r==null?void 0:r.projectCount)||0,subtitle:`${(r==null?void 0:r.projects.filter(l=>l.status==="active").length)||0} active`,icon:Is,"data-testid":"stat-total-projects"}),s.jsx(Ej,{title:"Total Tasks",value:(r==null?void 0:r.taskStats.total)||0,subtitle:`${o}% completion rate`,icon:vf,"data-testid":"stat-total-tasks"}),s.jsx(Ej,{title:"Open Risks",value:(r==null?void 0:r.riskStats.open)||0,subtitle:`${(r==null?void 0:r.riskStats.highRisks)||0} high priority`,icon:ft,"data-testid":"stat-open-risks"}),s.jsx(Ej,{title:"Open Issues",value:(r==null?void 0:r.issueStats.open)||0,subtitle:`${(r==null?void 0:r.issueStats.critical)||0} critical`,icon:K4,"data-testid":"stat-open-issues"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Ka,{className:"h-5 w-5"}),"Task Status Overview"]}),s.jsx(it,{children:"Aggregated task status across all projects"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"Completed"]}),s.jsx("span",{className:"font-medium",children:(r==null?void 0:r.taskStats.completed)||0})]}),s.jsx(fn,{value:r!=null&&r.taskStats.total?r.taskStats.completed/r.taskStats.total*100:0,className:"h-2 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"In Progress"]}),s.jsx("span",{className:"font-medium",children:(r==null?void 0:r.taskStats.inProgress)||0})]}),s.jsx(fn,{value:r!=null&&r.taskStats.total?r.taskStats.inProgress/r.taskStats.total*100:0,className:"h-2 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-gray-400"}),"Not Started"]}),s.jsx("span",{className:"font-medium",children:(r==null?void 0:r.taskStats.notStarted)||0})]}),s.jsx(fn,{value:r!=null&&r.taskStats.total?r.taskStats.notStarted/r.taskStats.total*100:0,className:"h-2 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),"On Hold"]}),s.jsx("span",{className:"font-medium",children:(r==null?void 0:r.taskStats.onHold)||0})]}),s.jsx(fn,{value:r!=null&&r.taskStats.total?r.taskStats.onHold/r.taskStats.total*100:0,className:"h-2 bg-muted"})]})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(ur,{className:"h-5 w-5"}),"Budget Overview"]}),s.jsx(it,{children:"Organization-wide budget utilization"})]}),s.jsxs(ce,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Budget"}),s.jsx("p",{className:"text-2xl font-bold",children:FP((r==null?void 0:r.budgetStats.totalBudget)||0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Actual Cost"}),s.jsx("p",{className:"text-2xl font-bold",children:FP((r==null?void 0:r.budgetStats.actualCost)||0)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Budget Utilization"}),s.jsxs("span",{className:"font-medium",children:[(r==null?void 0:r.budgetStats.utilizationPercent)||0,"%"]})]}),s.jsx(fn,{value:(r==null?void 0:r.budgetStats.utilizationPercent)||0,className:he("h-3",((r==null?void 0:r.budgetStats.utilizationPercent)||0)>90?"bg-red-100":"bg-muted")})]}),s.jsxs("div",{className:he("flex items-center justify-between p-3 rounded-lg",((r==null?void 0:r.budgetStats.variance)||0)>=0?"bg-green-500/10":"bg-red-500/10"),children:[s.jsx("span",{className:"text-sm font-medium",children:"Variance"}),s.jsxs("span",{className:he("font-bold",((r==null?void 0:r.budgetStats.variance)||0)>=0?"text-green-600":"text-red-600"),children:[((r==null?void 0:r.budgetStats.variance)||0)>=0?"+":"",FP((r==null?void 0:r.budgetStats.variance)||0)]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5"}),"Risk Summary"]}),s.jsx(it,{children:"Risk distribution across all projects"})]}),s.jsx(ce,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 rounded-lg bg-amber-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-amber-600",children:(r==null?void 0:r.riskStats.open)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Open"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(r==null?void 0:r.riskStats.mitigated)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mitigated"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:(r==null?void 0:r.riskStats.closed)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Closed"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-red-600",children:(r==null?void 0:r.riskStats.highRisks)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"High Priority"})]})]})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(K4,{className:"h-5 w-5"}),"Issue Summary"]}),s.jsx(it,{children:"Issue distribution across all projects"})]}),s.jsx(ce,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 rounded-lg bg-amber-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-amber-600",children:(r==null?void 0:r.issueStats.open)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Open"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(r==null?void 0:r.issueStats.inProgress)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:(r==null?void 0:r.issueStats.resolved)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved"})]}),s.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-500/10",children:[s.jsx("p",{className:"text-3xl font-bold text-red-600",children:(r==null?void 0:r.issueStats.critical)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Critical"})]})]})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"h-5 w-5"}),"Project Portfolio"]}),s.jsx(it,{children:"All projects in this organization"})]}),s.jsx(ce,{children:(r==null?void 0:r.projects.length)===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No projects found in this organization."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r==null?void 0:r.projects.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover-elevate","data-testid":`project-card-${l.id}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Hi,{className:"h-5 w-5 text-primary"})}),s.jsx("div",{children:s.jsx("p",{className:"font-medium truncate max-w-[200px]",children:l.name})})]}),s.jsx(Put,{status:l.status})]},l.id))})})]})]})}const _ut=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Z6=e=>{switch(e){case"critical":return"border-l-2 border-l-red-500";case"high":return"border-l-2 border-l-orange-500";default:return""}},LP=e=>{const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-teal-500","bg-indigo-500","bg-amber-500"];return t[e%t.length]};function Aut(){const{selectedOrgId:e,selectedOrg:t,isLoadingOrgs:n}=jt(),[r,i]=x.useState(new Date),[a,o]=x.useState(),[l,c]=x.useState(!1),[u,d]=x.useState(!0),[f,h]=x.useState(!0),{data:m=[],isLoading:g}=je({queryKey:[`/api/organizations/${e}/pmo/calendar`],enabled:!!e}),{year:p,month:v,daysInMonth:b,startDay:y,today:j,monthName:N}=x.useMemo(()=>{const M=r.getFullYear(),T=r.getMonth(),R=new Date(M,T,1),F=new Date(M,T+1,0),E=new Date;return{year:M,month:T,daysInMonth:F.getDate(),startDay:R.getDay(),today:E.getFullYear()===M&&E.getMonth()===T?E.getDate():-1,monthName:R.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},[r]),w=x.useMemo(()=>{const M=new Map;return m.forEach(T=>{let R=null,F=null,E="actual";if(u&&f?(R=T.actualStartDate?new Date(T.actualStartDate):T.baselineStart?new Date(T.baselineStart):T.startDate?new Date(T.startDate):null,F=T.actualFinishDate?new Date(T.actualFinishDate):T.baselineFinish?new Date(T.baselineFinish):T.endDate?new Date(T.endDate):null,E="both"):u?(R=T.actualStartDate?new Date(T.actualStartDate):null,F=T.actualFinishDate?new Date(T.actualFinishDate):null,E="actual"):f?(R=T.baselineStart?new Date(T.baselineStart):null,F=T.baselineFinish?new Date(T.baselineFinish):null,E="baseline"):(R=T.startDate?new Date(T.startDate):null,F=T.endDate?new Date(T.endDate):null),!R||!F)return;const B=new Date(R.getFullYear(),R.getMonth(),R.getDate()),L=new Date(F.getFullYear(),F.getMonth(),F.getDate()),I=new Date(p,v,1),q=new Date(p,v+1,0),$=B>I?B:I,z=L<q?L:q;if($<=z)for(let Y=$.getDate();Y<=z.getDate();Y++){M.has(Y)||M.set(Y,[]);const ne=M.get(Y);if(!ne.find(pe=>pe.id===T.id)){const pe=Y===B.getDate()&&B.getMonth()===v&&B.getFullYear()===p,J=Y===L.getDate()&&L.getMonth()===v&&L.getFullYear()===p;ne.push({...T,_isStart:pe,_isEnd:J,_dateType:E})}}}),M},[m,p,v,u,f]),S=x.useMemo(()=>{const M=new Date;return m.filter(T=>T.endDate?new Date(T.endDate)>=M&&T.status!=="completed":!1).sort((T,R)=>new Date(T.endDate).getTime()-new Date(R.endDate).getTime()).slice(0,10)},[m]),k=x.useMemo(()=>{const M=new Map;return m.forEach(T=>{const R=T.projectName;M.has(R)||M.set(R,{count:0,projectId:T.projectId}),M.get(R).count++}),Array.from(M.entries()).map(([T,R])=>({name:T,...R}))},[m]),C=Math.ceil((b+y)/7),A=()=>{i(new Date(p,v-1,1))},D=()=>{i(new Date(p,v+1,1))},P=()=>{i(new Date)},_=M=>{o(M),c(!0)},O=M=>{const T=typeof M=="string"?new Date(M):M,R=new Date,F=Math.ceil((T.getTime()-R.getTime())/(1e3*60*60*24));return F===0?"Today":F===1?"Tomorrow":F<0?`${Math.abs(F)} days ago`:`${F} days`};return e?g||n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-pmo-calendar",children:"PMO Calendar"}),s.jsxs("p",{className:"text-muted-foreground",children:["Organization-wide project timeline for ",(t==null?void 0:t.name)||"All Projects"]})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-3 border rounded-lg p-2",children:[s.jsx(G,{className:"text-sm font-medium",children:"Date Types:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-actual-pmo",checked:u,onCheckedChange:d}),s.jsx(G,{htmlFor:"show-actual-pmo",className:"text-sm cursor-pointer",children:"Actual"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wt,{id:"show-baseline-pmo",checked:f,onCheckedChange:h}),s.jsx(G,{htmlFor:"show-baseline-pmo",className:"text-sm cursor-pointer",children:"Baseline"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:P,"data-testid":"button-today",children:"Today"}),s.jsx(H,{variant:"outline",size:"icon",onClick:A,"data-testid":"button-prev-month",children:s.jsx(r1,{className:"h-4 w-4"})}),s.jsx("div",{className:"px-4 font-semibold min-w-[180px] text-center",children:N}),s.jsx(H,{variant:"outline",size:"icon",onClick:D,"data-testid":"button-next-month",children:s.jsx(qa,{className:"h-4 w-4"})})]})]})]}),k.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(({name:M,count:T,projectId:R})=>s.jsxs(ae,{variant:"outline",className:"gap-1.5",children:[s.jsx("span",{className:he("w-2 h-2 rounded-full",LP(R))}),M," (",T,")"]},R))}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Monthly View"})}),s.jsx(ce,{children:s.jsxs("div",{className:"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden",children:[_ut.map(M=>s.jsx("div",{className:"bg-muted p-3 text-center text-sm font-semibold",children:M},M)),Array.from({length:C*7}).map((M,T)=>{const R=T-y+1,F=R>0&&R<=b,E=R===j,B=w.get(R)||[];return s.jsx("div",{className:he("bg-background p-2 min-h-28",E&&"ring-2 ring-primary ring-inset",!F&&"bg-muted/30"),"data-testid":F?`calendar-day-${R}`:void 0,children:F&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:he("text-sm font-semibold mb-2",E&&"text-primary"),children:R}),s.jsxs("div",{className:"space-y-1",children:[B.slice(0,3).map(L=>{const I=L._isStart,q=L._isEnd,$=L._dateType==="actual"?"A":L._dateType==="baseline"?"B":"";return s.jsxs("div",{className:he("text-xs px-1.5 py-0.5 rounded text-white truncate cursor-pointer hover:opacity-80 flex items-center gap-1",LP(L.projectId),Z6(L.priority)),title:`${L.projectName}: ${L.name}${I?" (Start)":q?" (End)":" (Ongoing)"}${$?` [${$}]`:""}`,onClick:()=>_(L),"data-testid":`calendar-task-${L.id}`,children:[I?" ":q?" ":" ",L.name,$&&s.jsxs("span",{className:"text-[10px] opacity-75",children:["[",$,"]"]})]},`${L.id}-${R}`)}),B.length>3&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",B.length-3," more"]})]})]})},T)})]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-lg",children:"Upcoming Deadlines Across Projects"})}),s.jsx(ce,{children:S.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming deadlines. All tasks are either completed or have no end date set."}):s.jsx("div",{className:"space-y-3",children:S.map(M=>s.jsxs("div",{className:he("flex items-center gap-3 p-3 rounded-lg hover-elevate cursor-pointer",Z6(M.priority)),onClick:()=>_(M),"data-testid":`upcoming-task-${M.id}`,children:[s.jsx("div",{className:he("w-1 h-12 rounded",LP(M.projectId))}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:M.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[M.projectName,"  Due: ",new Date(M.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsx(ae,{variant:M.priority==="critical"?"destructive":"outline",children:O(M.endDate)})]},M.id))})})]}),s.jsx(hb,{open:l,onOpenChange:c,task:a})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select an organization to view the PMO calendar."})]})})}const Tut=e=>{switch(e){case"labor":return tE;case"equipment":return Qa;case"material":return Kr;default:return Cn}},Dut=e=>{switch(e){case"labor":return"bg-blue-500";case"equipment":return"bg-purple-500";case"material":return"bg-amber-500";default:return"bg-gray-400"}},J6=e=>{const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-teal-500","bg-indigo-500","bg-amber-500"];return t[e%t.length]};function El(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}function _j({title:e,value:t,subtitle:n,icon:r,className:i}){return s.jsxs(ie,{className:he("relative overflow-hidden",i),children:[s.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2 gap-2",children:[s.jsx(Se,{className:"text-sm font-medium",children:e}),s.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ce,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t}),n&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})]})}function Out(){const{selectedOrgId:e,selectedOrg:t,isLoadingOrgs:n}=jt(),{data:r=[],isLoading:i,error:a}=je({queryKey:[`/api/organizations/${e}/pmo/inventory`],enabled:!!e}),o=x.useMemo(()=>{const c=r.filter(p=>p.type==="labor"||p.type==="human"),u=r.filter(p=>p.type==="equipment"),d=r.filter(p=>p.type==="material"),f=r.reduce((p,v)=>p+(Number(v.rate)||0),0),h=c.reduce((p,v)=>p+(Number(v.rate)||0),0),m=u.reduce((p,v)=>p+(Number(v.rate)||0),0),g=d.reduce((p,v)=>p+(Number(v.rate)||0),0);return{total:r.length,labor:c.length,equipment:u.length,material:d.length,totalCost:f,laborCost:h,equipmentCost:m,materialCost:g}},[r]),l=x.useMemo(()=>{const c=new Map;return r.forEach(u=>{c.has(u.projectName)||c.set(u.projectName,{projectId:u.projectId,labor:0,equipment:0,material:0,totalCost:0});const d=c.get(u.projectName),f=Number(u.rate)||0;d.totalCost+=f,u.type==="labor"||u.type==="human"?d.labor++:u.type==="equipment"?d.equipment++:u.type==="material"&&d.material++}),Array.from(c.entries()).map(([u,d])=>({name:u,...d}))},[r]);return e?i||n?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(Ke,{className:"h-8 w-64 mb-2"}),s.jsx(Ke,{className:"h-4 w-96"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((c,u)=>s.jsx(Ke,{className:"h-32"},u))}),s.jsx(Ke,{className:"h-64"})]}):a?s.jsx("div",{className:"p-6",children:s.jsxs($t,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Failed to load inventory data. Please try again."})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold","data-testid":"page-title-pmo-inventory",children:"Inventory Management"}),s.jsxs("p",{className:"text-muted-foreground",children:["Organization-wide resource inventory for ",(t==null?void 0:t.name)||"All Projects"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(_j,{title:"Total Resources",value:o.total,subtitle:`Across ${l.length} projects`,icon:Kr,"data-testid":"stat-total-resources"}),s.jsx(_j,{title:"Labor Resources",value:o.labor,subtitle:El(o.laborCost),icon:tE,"data-testid":"stat-labor-resources"}),s.jsx(_j,{title:"Equipment",value:o.equipment,subtitle:El(o.equipmentCost),icon:Qa,"data-testid":"stat-equipment"}),s.jsx(_j,{title:"Materials",value:o.material,subtitle:El(o.materialCost),icon:Z4,"data-testid":"stat-materials"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(ur,{className:"h-5 w-5"}),"Resource Cost Distribution"]}),s.jsx(it,{children:"Cost breakdown by resource type"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Labor"]}),s.jsx("span",{className:"font-medium",children:El(o.laborCost)})]}),s.jsx(fn,{value:o.totalCost>0?o.laborCost/o.totalCost*100:0,className:"h-2 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500"}),"Equipment"]}),s.jsx("span",{className:"font-medium",children:El(o.equipmentCost)})]}),s.jsx(fn,{value:o.totalCost>0?o.equipmentCost/o.totalCost*100:0,className:"h-2 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),"Materials"]}),s.jsx("span",{className:"font-medium",children:El(o.materialCost)})]}),s.jsx(fn,{value:o.totalCost>0?o.materialCost/o.totalCost*100:0,className:"h-2 bg-muted"})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[s.jsx("span",{children:"Total Resource Value"}),s.jsx("span",{children:El(o.totalCost)})]})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Kr,{className:"h-5 w-5"}),"Resources by Project"]}),s.jsx(it,{children:"Resource distribution across projects"})]}),s.jsx(ce,{children:l.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No resources found in any project."}):s.jsx("div",{className:"space-y-4",children:l.map(({name:c,projectId:u,labor:d,equipment:f,material:h,totalCost:m})=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:he("w-2 h-2 rounded-full",J6(u))}),s.jsx("span",{className:"font-medium truncate max-w-[200px]",children:c})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:El(m)})]}),s.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[d>0&&s.jsxs(ae,{variant:"outline",className:"gap-1",children:[s.jsx(tE,{className:"h-3 w-3"})," ",d]}),f>0&&s.jsxs(ae,{variant:"outline",className:"gap-1",children:[s.jsx(Qa,{className:"h-3 w-3"})," ",f]}),h>0&&s.jsxs(ae,{variant:"outline",className:"gap-1",children:[s.jsx(Z4,{className:"h-3 w-3"})," ",h]})]})]},u))})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsxs(Se,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"All Resources"]}),s.jsx(it,{children:"Complete resource inventory across organization"})]}),s.jsx(ce,{children:r.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No resources found in this organization."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-muted-foreground",children:"Resource"}),s.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-muted-foreground",children:"Type"}),s.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-muted-foreground",children:"Project"}),s.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-muted-foreground",children:"Discipline"}),s.jsx("th",{className:"py-3 px-4 text-right text-sm font-medium text-muted-foreground",children:"Rate"}),s.jsx("th",{className:"py-3 px-4 text-center text-sm font-medium text-muted-foreground",children:"Availability"})]})}),s.jsx("tbody",{children:r.map(c=>{const u=Tut(c.type);return s.jsxs("tr",{className:"border-b hover-elevate","data-testid":`resource-row-${c.id}`,children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:he("w-8 h-8 rounded-full flex items-center justify-center",Dut(c.type)+"/10"),children:s.jsx(u,{className:he("h-4 w-4",(c.type==="labor"||c.type==="human")&&"text-blue-500",c.type==="equipment"&&"text-purple-500",c.type==="material"&&"text-amber-500")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:c.name}),c.discipline&&c.discipline!=="general"&&s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:c.discipline})]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx(ae,{variant:"outline",className:"capitalize",children:c.type})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:he("w-2 h-2 rounded-full",J6(c.projectId))}),s.jsx("span",{className:"text-sm truncate max-w-[150px]",children:c.projectName})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:"text-sm capitalize",children:c.discipline||"General"})}),s.jsxs("td",{className:"py-3 px-4 text-right font-mono text-sm",children:[El(Number(c.rate)||0),c.unitType&&s.jsxs("span",{className:"text-muted-foreground",children:["/",c.unitType]})]}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs(ae,{variant:c.availability===100?"outline":"secondary",children:[c.availability||100,"%"]})})]},c.id)})})]})})})]})]}):s.jsx("div",{className:"p-6",children:s.jsxs($t,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Please select an organization to view the inventory."})]})})}function Iut(){var re;const{user:e}=zs(),{selectedProjectId:t,setSelectedProjectId:n,terminology:r}=jt(),{toast:i}=Nt(),{selectedProjects:a,setSelectedProjects:o}=eg(),[l,c]=x.useState(!1),[u,d]=x.useState(null),[f,h]=x.useState(!1),[m,g]=x.useState(null),[p,v]=x.useState(!1),[b,y]=x.useState(null),[j,N]=x.useState(!1),[w,S]=x.useState([]),[k,C]=x.useState(!1),{data:A=[],isLoading:D}=je({queryKey:["/api/organizations"],enabled:!!e}),P=(re=A==null?void 0:A[0])==null?void 0:re.id,{data:_=[]}=je({queryKey:[`/api/organizations/${P}/tags`],enabled:!!P}),{data:O=[],isLoading:M}=je({queryKey:P?[`/api/organizations/${P}/projects`]:["/api/organizations/null/projects"],enabled:!!P&&!D}),T=x.useMemo(()=>O.map(ue=>ue.id),[O]),{data:R={}}=je({queryKey:["/api/projects/tags",T],queryFn:async()=>{const ue={};return await Promise.all(O.map(async ke=>{try{const $e=await fe("GET",`/api/tags/entity/project/${ke.id}`);ue[ke.id]=await $e.json()}catch{ue[ke.id]=[]}})),ue},enabled:O.length>0}),F=x.useMemo(()=>w.length===0?O:O.filter(ue=>{const ke=R[ue.id]||[];return w.every($e=>ke.some(Ve=>Ve.id===$e))}),[O,R,w]),E=D||M,B=ue=>({active:"bg-green-500","on-hold":"bg-amber-500",completed:"bg-gray-500",cancelled:"bg-red-500"})[ue]||"bg-blue-500",L=x.useMemo(()=>[{accessorKey:"name",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"Name"}),cell:({row:ue})=>s.jsx("div",{className:"font-medium",children:ue.original.name})},{accessorKey:"code",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"Code"}),cell:({row:ue})=>s.jsx("div",{className:"font-mono text-sm",children:ue.original.code})},{accessorKey:"status",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"Status"}),cell:({row:ue})=>s.jsx(ae,{className:B(ue.original.status),children:ue.original.status})},{accessorKey:"startDate",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"Start Date"}),cell:({row:ue})=>{const ke=ue.original.startDate;return ke?new Date(ke).toLocaleDateString():"-"}},{accessorKey:"endDate",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"End Date"}),cell:({row:ue})=>{const ke=ue.original.endDate;return ke?new Date(ke).toLocaleDateString():"-"}},{accessorKey:"budget",header:({column:ue})=>s.jsx(Qn,{column:ue,children:"Budget"}),cell:({row:ue})=>{const ke=ue.original.budget;return ke?`$${Number(ke).toLocaleString()}`:"-"}},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:ue})=>{const ke=ue.original;return s.jsxs("div",{className:"text-right flex items-center justify-end gap-2",children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>xe(ke),className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Delete project",children:s.jsx(wn,{className:"h-4 w-4"})}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>J(ke),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>ye(ke),children:[s.jsx(cv,{className:"h-4 w-4 mr-2"}),"Duplicate"]})]})]})]})}}],[]),I=x.useCallback(ue=>{const ke=ue||O,$e=Ap.unparse(ke.map(be=>({Name:be.name,Code:be.code,Status:be.status,"Start Date":be.startDate?new Date(be.startDate).toLocaleDateString():"","End Date":be.endDate?new Date(be.endDate).toLocaleDateString():"",Budget:be.budget?Number(be.budget).toLocaleString():""}))),Ve=new Blob([$e],{type:"text/csv;charset=utf-8;"}),gt=document.createElement("a"),He=URL.createObjectURL(Ve);gt.setAttribute("href",He),gt.setAttribute("download",`projects_${new Date().toISOString().split("T")[0]}.csv`),gt.style.visibility="hidden",document.body.appendChild(gt),gt.click(),document.body.removeChild(gt),i({title:"Success",description:"Projects exported successfully"})},[O,i]),q=x.useCallback((ue,ke)=>{ue==="delete"?N(!0):ue==="export"&&I(ke)},[I,N]);Q.useEffect(()=>eb("projects",q),[q]);const $=Pe({mutationFn:async ue=>(await fe("POST","/api/projects",ue)).json(),onSuccess:()=>{P&&we.invalidateQueries({queryKey:[`/api/organizations/${P}/projects`]}),c(!1),i({title:"Success",description:"Project created successfully"})},onError:ue=>{i({title:"Error",description:ue.message||"Failed to create project",variant:"destructive"})}}),z=Pe({mutationFn:async({id:ue,...ke})=>(await fe("PATCH",`/api/projects/${ue}`,ke)).json(),onSuccess:()=>{P&&we.invalidateQueries({queryKey:[`/api/organizations/${P}/projects`]}),c(!1),d(null),i({title:"Success",description:"Project updated successfully"})},onError:ue=>{i({title:"Error",description:ue.message||"Failed to update project",variant:"destructive"})}}),Y=Pe({mutationFn:async ue=>{await fe("DELETE",`/api/projects/${ue}`)},onSuccess:()=>{P&&we.invalidateQueries({queryKey:[`/api/organizations/${P}/projects`]}),h(!1),g(null),t===(m==null?void 0:m.id)&&n(null),i({title:"Success",description:"Project deleted successfully"})},onError:ue=>{i({title:"Error",description:ue.message||"Failed to delete project",variant:"destructive"})}}),ne=Pe({mutationFn:async ue=>{await Promise.all(ue.map(ke=>fe("DELETE",`/api/projects/${ke}`)))},onSuccess:()=>{P&&we.invalidateQueries({queryKey:[`/api/organizations/${P}/projects`]}),N(!1),o([]),t&&a.some(ue=>ue.id===t)&&n(null),i({title:"Success",description:`${a.length} project(s) deleted successfully`})},onError:ue=>{i({title:"Error",description:ue.message||"Failed to delete projects",variant:"destructive"})}}),te=Pe({mutationFn:async({id:ue,name:ke,code:$e})=>(await fe("POST",`/api/projects/${ue}/duplicate`,{name:ke,code:$e})).json(),onSuccess:()=>{P&&we.invalidateQueries({queryKey:[`/api/organizations/${P}/projects`]}),v(!1),y(null),i({title:"Success",description:"Project duplicated successfully"})},onError:ue=>{i({title:"Error",description:ue.message||"Failed to duplicate project",variant:"destructive"})}}),pe=()=>{d(null),c(!0)},J=ue=>{d(ue),c(!0)},xe=ue=>{g(ue),h(!0)},ye=ue=>{y(ue),v(!0)};return D?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):P?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Projects"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage all projects in your organization"})]}),s.jsxs(H,{onClick:pe,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create Project"]})]}),E?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-4",children:[_.length>0&&s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs(Ls,{open:k,onOpenChange:C,children:[s.jsx(Si,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(_u,{className:"h-4 w-4 mr-2"}),"Filter by Tags",w.length>0&&s.jsx(ae,{variant:"secondary",className:"ml-2",children:w.length})]})}),s.jsx(ps,{className:"w-[300px] p-0",align:"start",children:s.jsxs(Ya,{children:[s.jsx(Xa,{placeholder:"Search tags..."}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No tags found."}),s.jsx(Ms,{children:_.map(ue=>{const ke=w.includes(ue.id);return s.jsxs(Rs,{onSelect:()=>{S($e=>ke?$e.filter(Ve=>Ve!==ue.id):[...$e,ue.id])},children:[s.jsx("div",{className:he("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",ke?"bg-primary text-primary-foreground":"opacity-50"),children:ke&&s.jsx(Sr,{className:"h-4 w-4"})}),ue.color&&s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:ue.color}}),s.jsx("span",{children:ue.name}),ue.category&&s.jsx(ae,{variant:"outline",className:"ml-auto text-xs",children:ue.category})]},ue.id)})})]})]})})]}),w.length>0&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>S([]),children:[s.jsx(Fn,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),s.jsx(od,{columns:L,data:F,searchKey:"name",searchPlaceholder:"Search projects by name or code...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,enablePagination:!1,maxHeight:"calc(100vh - 400px)",onSelectionChange:o,onExport:I,emptyMessage:O.length===0?"No projects yet. Create your first project!":"No projects found.",getRowId:ue=>ue.id.toString()})]}),s.jsx(TJ,{open:l,onOpenChange:c,project:u,organizationId:P,onCreate:$.mutate,onUpdate:ue=>u&&z.mutate({...ue,id:u.id})}),s.jsx(Bs,{open:f,onOpenChange:h,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Project"}),s.jsxs(bs,{children:['Are you sure you want to delete "',m==null?void 0:m.name,'"? This action cannot be undone and will delete all tasks, resources, and other project data.']})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>m&&Y.mutate(m.id),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})}),s.jsx(Mut,{open:p,onOpenChange:v,project:b,onDuplicate:(ue,ke)=>b&&te.mutate({id:b.id,name:ue,code:ke})}),s.jsx(Bs,{open:j,onOpenChange:N,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Projects"}),s.jsxs(bs,{children:["Are you sure you want to delete ",a.length," selected project(s)? This action cannot be undone and will delete all tasks, resources, and other project data for these projects.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Projects to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:a.map(ue=>s.jsxs("li",{children:[ue.name," (",ue.code,")"]},ue.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const ue=a.map(ke=>ke.id);ne.mutate(ue)},className:"bg-destructive text-destructive-foreground",disabled:ne.isPending,children:ne.isPending?"Deleting...":`Delete ${a.length} Project(s)`})]})]})})]}):s.jsxs("div",{className:"p-6",children:[s.jsx(bt,{className:"h-8 w-8 text-muted-foreground mx-auto mb-4"}),s.jsxs("p",{className:"text-center text-muted-foreground",children:["No ",r.topLevel.toLowerCase()," found. Please contact your administrator."]})]})}function Mut({open:e,onOpenChange:t,project:n,onDuplicate:r}){const[i,a]=x.useState(""),[o,l]=x.useState("");x.useEffect(()=>{n?(a(`${n.name} (Copy)`),l(`${n.code}-COPY`)):(a(""),l(""))},[n]);const c=()=>{!i.trim()||!o.trim()||r(i,o)};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Duplicate Project"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"dup-name",children:"New Project Name *"}),s.jsx(Ce,{id:"dup-name",value:i,onChange:u=>a(u.target.value),placeholder:"Project name"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"dup-code",children:"New Project Code *"}),s.jsx(Ce,{id:"dup-code",value:o,onChange:u=>l(u.target.value),placeholder:"PRJ-001"})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:c,children:"Duplicate"})]})]})})}function Rut(){zs();const{selectedOrgId:e,terminology:t}=jt(),{toast:n}=Nt(),{selectedPrograms:r,setSelectedPrograms:i}=eg(),[a,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(!1),[f,h]=x.useState(null),[m,g]=x.useState(!1),{data:p=[],isLoading:v}=je({queryKey:e?[`/api/organizations/${e}/programs`]:["/api/organizations/null/programs"],enabled:!!e}),{data:b=[]}=je({queryKey:e?[`/api/organizations/${e}/projects`]:["/api/organizations/null/projects"],enabled:!!e}),y=v,j=x.useMemo(()=>[{accessorKey:"name",header:({column:_})=>s.jsx(Qn,{column:_,children:"Name"}),cell:({row:_})=>s.jsx("div",{className:"font-medium",children:_.original.name})},{accessorKey:"slug",header:({column:_})=>s.jsx(Qn,{column:_,children:"Slug"}),cell:({row:_})=>s.jsx("div",{className:"font-mono text-sm text-muted-foreground",children:_.original.slug})},{id:"description",header:"Description",cell:({row:_})=>s.jsx("div",{className:"text-sm text-muted-foreground max-w-md truncate",children:_.original.description||"-"})},{id:"type",header:"Type",cell:({row:_})=>s.jsx(ae,{variant:_.original.isVirtual?"secondary":"default",children:_.original.isVirtual?"Virtual":"Real"})},{id:"stats",header:"Stats",cell:({row:_})=>{const O=b.filter(M=>M.programId===_.original.id).length;return s.jsxs("div",{className:"text-sm",children:[O," project",O!==1?"s":""]})}},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:_})=>{const O=_.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>w(O),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>S(O),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})}}],[b]),N=()=>{c(null),o(!0)},w=_=>{c(_),o(!0)},S=_=>{h(_),d(!0)},k=(_,O)=>{_==="delete"&&g(!0)};Q.useEffect(()=>eb("programs",k),[]);const C=Pe({mutationFn:async _=>{if(!e)throw new Error("No organization selected");return(await fe("POST",`/api/organizations/${e}/programs`,_)).json()},onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/organizations/${e}/programs`]}),o(!1),n({title:"Success",description:`${t.program} created successfully`})},onError:_=>{n({title:"Error",description:_.message||`Failed to create ${t.program}`,variant:"destructive"})}}),A=Pe({mutationFn:async({id:_,...O})=>(await fe("PATCH",`/api/programs/${_}`,O)).json(),onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/organizations/${e}/programs`]}),o(!1),c(null),n({title:"Success",description:`${t.program} updated successfully`})},onError:_=>{n({title:"Error",description:_.message||`Failed to update ${t.program}`,variant:"destructive"})}}),D=Pe({mutationFn:async _=>{await fe("DELETE",`/api/programs/${_}`)},onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/organizations/${e}/programs`]}),d(!1),h(null),n({title:"Success",description:`${t.program} deleted successfully`})},onError:_=>{n({title:"Error",description:_.message||`Failed to delete ${t.program}`,variant:"destructive"})}}),P=Pe({mutationFn:async _=>{await Promise.all(_.map(O=>fe("DELETE",`/api/programs/${O}`)))},onSuccess:()=>{e&&we.invalidateQueries({queryKey:[`/api/organizations/${e}/programs`]}),g(!1),i([]),n({title:"Success",description:`${r.length} ${t.program}(s) deleted successfully`})},onError:_=>{n({title:"Error",description:_.message||`Failed to delete ${t.program}s`,variant:"destructive"})}});return e?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-semibold",children:[t.program,"s"]}),s.jsxs("p",{className:"text-muted-foreground mt-1",children:["Manage ",t.program.toLowerCase(),"s in your ",t.topLevel.toLowerCase()]})]}),s.jsxs(H,{onClick:N,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Create ",t.program]})]}),y?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx("div",{className:"space-y-4",children:s.jsx(od,{columns:j,data:p,searchKey:"name",searchPlaceholder:`Search ${t.program.toLowerCase()}s by name or slug...`,enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,enablePagination:!1,maxHeight:"calc(100vh - 400px)",onSelectionChange:i,emptyMessage:p.length===0?`No ${t.program.toLowerCase()}s yet. Create your first ${t.program.toLowerCase()}!`:`No ${t.program.toLowerCase()}s found.`,getRowId:_=>_.id.toString()})}),s.jsx($ut,{open:a,onOpenChange:o,program:l,organizationId:e,onCreate:C.mutate,onUpdate:_=>l&&A.mutate({..._,id:l.id}),terminology:t}),s.jsx(Bs,{open:u,onOpenChange:d,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsxs(ys,{children:["Delete ",t.program]}),s.jsxs(bs,{children:['Are you sure you want to delete "',f==null?void 0:f.name,'"? This action cannot be undone. Projects in this ',t.program.toLowerCase()," will remain but will no longer be grouped."]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>f&&D.mutate(f.id),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})}),s.jsx(Bs,{open:m,onOpenChange:g,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsxs(ys,{children:["Delete Multiple ",t.program,"s"]}),s.jsxs(bs,{children:["Are you sure you want to delete ",r.length," selected ",t.program.toLowerCase(),"(s)? This action cannot be undone. Projects in these ",t.program.toLowerCase(),"s will remain but will no longer be grouped.",s.jsx("br",{}),s.jsx("br",{}),s.jsxs("strong",{children:[t.program,"s to delete:"]}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:r.map(_=>s.jsxs("li",{children:[_.name," (",_.slug,")"]},_.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const _=r.map(O=>O.id);P.mutate(_)},className:"bg-destructive text-destructive-foreground",disabled:P.isPending,children:P.isPending?"Deleting...":`Delete ${r.length} ${t.program}(s)`})]})]})})]}):s.jsxs("div",{className:"p-6",children:[s.jsx(bt,{className:"h-8 w-8 text-muted-foreground mx-auto mb-4"}),s.jsxs("p",{className:"text-center text-muted-foreground",children:["No ",t.topLevel.toLowerCase()," found. Please select an ",t.topLevel.toLowerCase()," first."]})]})}function $ut({open:e,onOpenChange:t,program:n,organizationId:r,onCreate:i,onUpdate:a,terminology:o}){const[l,c]=x.useState(""),[u,d]=x.useState(""),[f,h]=x.useState(""),[m,g]=x.useState(!1);x.useEffect(()=>{n?(c(n.name),d(n.slug),h(n.description||""),g(n.isVirtual||!1)):(c(""),d(""),h(""),g(!1))},[n,e]),x.useEffect(()=>{if(!n&&l){const v=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");d(v)}},[l,n]);const p=()=>{!l.trim()||!u.trim()||(n?a({name:l,slug:u,description:f||void 0,isVirtual:m}):i({name:l,slug:u,description:f||void 0,isVirtual:m}))};return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:n?`Edit ${o.program}`:`Create ${o.program}`}),s.jsx(ir,{children:n?`Update ${o.program.toLowerCase()} details`:`Create a new ${o.program.toLowerCase()} to group related projects`})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"name",children:"Name *"}),s.jsx(Ce,{id:"name",value:l,onChange:v=>c(v.target.value),placeholder:`${o.program} name`})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"slug",children:"Slug *"}),s.jsx(Ce,{id:"slug",value:u,onChange:v=>d(v.target.value),placeholder:"url-friendly-identifier"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"URL-friendly identifier (auto-generated from name)"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ce,{id:"description",value:f,onChange:v=>h(v.target.value),placeholder:`Brief description of this ${o.program.toLowerCase()}`})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"isVirtual",checked:m,onChange:v=>g(v.target.checked),className:"rounded"}),s.jsxs(G,{htmlFor:"isVirtual",className:"text-sm font-normal cursor-pointer",children:["Virtual ",o.program," (organizational grouping, not a real department)"]})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:p,disabled:!l.trim()||!u.trim(),children:n?"Update":"Create"})]})]})})}function Fut(){const{selectedOrgId:e,terminology:t}=jt(),[n,r]=x.useState(""),[i,a]=x.useState(!1),{toast:o}=Nt(),l=Pi(),{data:c,isLoading:u}=je({queryKey:["lessons",e,n],queryFn:async()=>{if(!e)return[];const g=n?`/api/organizations/${e}/lessons/search?q=${encodeURIComponent(n)}`:`/api/organizations/${e}/lessons`,p=await fetch(g);if(!p.ok)throw new Error("Failed to fetch lessons");return p.json()},enabled:!!e}),d=Pe({mutationFn:async g=>{const p=await fetch(`/api/organizations/${e}/lessons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,organizationId:e})});if(!p.ok)throw new Error("Failed to create lesson");return p.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["lessons",e]}),a(!1),o({title:"Success",description:"Lesson learned added successfully"})},onError:g=>{o({title:"Error",description:"Failed to create lesson: "+g.message,variant:"destructive"})}}),[f,h]=x.useState({title:"",category:"General",description:"",rootCause:"",actionTaken:"",outcome:"",impactRating:3,applicability:"global",tags:[]}),m=g=>{g.preventDefault(),d.mutate(f)};return e?s.jsxs("div",{className:"container mx-auto p-6 max-w-7xl h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx($0,{className:"h-8 w-8"}),"Knowledge Base"]}),s.jsxs("p",{className:"text-muted-foreground",children:["Capture and share lessons learned across the ",t.topLevel]})]}),s.jsxs(zt,{open:i,onOpenChange:a,children:[s.jsx(xE,{asChild:!0,children:s.jsxs(H,{children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Add Lesson"]})}),s.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Add New Lesson Learned"})}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title"}),s.jsx(Ce,{id:"title",required:!0,value:f.title,onChange:g=>h({...f,title:g.target.value}),placeholder:"e.g., Vendor Delay on Concrete Delivery"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"category",children:"Category"}),s.jsxs(ze,{value:f.category,onValueChange:g=>h({...f,category:g}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"General",children:"General"}),s.jsx(X,{value:"Procurement",children:"Procurement"}),s.jsx(X,{value:"Safety",children:"Safety"}),s.jsx(X,{value:"Quality",children:"Quality"}),s.jsx(X,{value:"Schedule",children:"Schedule"}),s.jsx(X,{value:"Cost",children:"Cost"}),s.jsx(X,{value:"Technical",children:"Technical"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Situation / Context"}),s.jsx(Ht,{id:"description",required:!0,value:f.description,onChange:g=>h({...f,description:g.target.value}),placeholder:"Describe what happened...",className:"min-h-[100px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"rootCause",children:"Root Cause"}),s.jsx(Ht,{id:"rootCause",value:f.rootCause,onChange:g=>h({...f,rootCause:g.target.value}),placeholder:"Why did it happen?"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"actionTaken",children:"Action Taken"}),s.jsx(Ht,{id:"actionTaken",value:f.actionTaken,onChange:g=>h({...f,actionTaken:g.target.value}),placeholder:"What did you do about it?"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"outcome",children:"Outcome / Recommendation"}),s.jsx(Ht,{id:"outcome",value:f.outcome,onChange:g=>h({...f,outcome:g.target.value}),placeholder:"What was the result? What do you recommend for future?"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"impact",children:"Impact Rating (1-5)"}),s.jsxs(ze,{value:f.impactRating.toString(),onValueChange:g=>h({...f,impactRating:parseInt(g)}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"1",children:"1 - Low Impact"}),s.jsx(X,{value:"2",children:"2 - Minor Impact"}),s.jsx(X,{value:"3",children:"3 - Moderate Impact"}),s.jsx(X,{value:"4",children:"4 - High Impact"}),s.jsx(X,{value:"5",children:"5 - Critical Impact"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"applicability",children:"Applicability"}),s.jsxs(ze,{value:f.applicability,onValueChange:g=>h({...f,applicability:g}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"global",children:"Global (All Projects)"}),s.jsx(X,{value:"project_specific",children:"Project Specific"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Tags"}),s.jsx(Ky,{placeholder:"Add tags...",tags:f.tags.map(g=>({id:0,name:g,color:"#000",usageCount:0,organizationId:e})),setTags:g=>h({...f,tags:g.map(p=>p.name)}),organizationId:e,enableCreate:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tags help the AI Assistant find this lesson when analyzing similar situations."})]}),s.jsx(on,{children:s.jsxs(H,{type:"submit",disabled:d.isPending,children:[d.isPending&&s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Lesson"]})})]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 mb-6",children:s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search lessons...",value:n,onChange:g=>r(g.target.value),className:"pl-8"})]})}),u?s.jsx("div",{className:"flex items-center justify-center flex-1",children:s.jsx(pt,{className:"h-8 w-8 animate-spin"})}):s.jsx(On,{className:"flex-1",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:[c==null?void 0:c.map(g=>{var p;return s.jsxs(ie,{className:"flex flex-col",children:[s.jsxs(Ne,{className:"pb-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{variant:"outline",children:g.category}),g.impactRating&&g.impactRating>=4&&s.jsxs(ae,{variant:"destructive",className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"})," High Impact"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:en(new Date(g.createdAt),"MMM d, yyyy")})]}),s.jsx(Se,{className:"text-lg mt-2",children:g.title})]}),s.jsxs(ce,{className:"flex-1 flex flex-col gap-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:g.description}),g.outcome&&s.jsxs("div",{className:"bg-muted/50 p-3 rounded-md text-sm",children:[s.jsxs("p",{className:"font-medium flex items-center gap-2 mb-1",children:[s.jsx(s1,{className:"h-4 w-4 text-green-600"})," Recommendation"]}),s.jsx("p",{className:"text-muted-foreground line-clamp-2",children:g.outcome})]}),s.jsx("div",{className:"mt-auto pt-2 flex flex-wrap gap-1",children:(p=g.tags)==null?void 0:p.map((v,b)=>s.jsx(ae,{variant:"secondary",className:"text-xs",children:v},b))})]})]},g.id)}),(c==null?void 0:c.length)===0&&s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[s.jsx($0,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold",children:"No lessons learned found"}),s.jsx("p",{className:"text-muted-foreground max-w-sm mt-2",children:"Start building your organization's knowledge base by adding your first lesson learned."})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(ie,{className:"w-[400px]",children:s.jsxs(Ne,{children:[s.jsxs(Se,{children:["Select ",t.topLevel]}),s.jsxs(it,{children:["Please select an ",t.topLevel," to view lessons learned."]})]})})})}function Lut({selectedConversationId:e,onSelectConversation:t,onCreateConversation:n}){const[r,i]=x.useState(""),[a,o]=x.useState(!1),{data:l=[],isLoading:c}=hoe();Nt();const{data:u}=je({queryKey:["/api/chat/unread-count"],queryFn:async()=>(await(await fe("GET","/api/chat/unread-count")).json()).count||0,refetchInterval:3e4}),d=l.filter(m=>{var p;if(!r)return!0;const g=r.toLowerCase();return(p=m.name)==null?void 0:p.toLowerCase().includes(g)}),f=m=>m.name?m.name:m.type==="direct"?"Direct Message":m.type==="project"?"Project Chat":m.type==="task"?"Task Chat":"Group Chat",h=m=>m.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2);return s.jsxs("div",{className:"w-80 border-r bg-background flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Conversations"}),s.jsx(H,{size:"icon",variant:"ghost",onClick:n,title:"New conversation",children:s.jsx(Et,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search conversations...",value:r,onChange:m=>i(m.target.value),className:"pl-8"})]})]}),s.jsx(On,{className:"flex-1",children:s.jsx("div",{className:"p-2",children:c?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Loading conversations..."}):d.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:r?"No conversations found":"No conversations yet"}):d.map(m=>{const g=m.id===e;return s.jsx("button",{onClick:()=>t(m),className:`w-full text-left p-3 rounded-lg transition-colors ${g?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(yi,{className:"h-10 w-10",children:[s.jsx(Bu,{src:""}),s.jsx(bi,{children:h(f(m))})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("p",{className:"font-medium truncate",children:f(m)}),0>0]}),s.jsx("p",{className:`text-xs mt-1 ${g?"text-primary-foreground/70":"text-muted-foreground"}`,children:en(new Date(m.updatedAt),"MMM d, HH:mm")})]})]})},m.id)})})})]})}function zut({open:e,onOpenChange:t,onSelectConversation:n}){const[r,i]=x.useState(""),[,a]=yr(),{selectedProjectId:o}=jt(),{data:l=[]}=hoe(),c=l.filter(h=>{var g;if(!r)return!0;const m=r.toLowerCase();return(g=h.name)==null?void 0:g.toLowerCase().includes(m)}),u=h=>{n?n(h):a(`/chat?conversation=${h.id}`),t(!1),i("")},d=h=>{switch(h){case"direct":return s.jsx(Cn,{className:"h-4 w-4"});case"group":return s.jsx(Cn,{className:"h-4 w-4"});case"project":return s.jsx(tD,{className:"h-4 w-4"});case"task":return s.jsx(Sn,{className:"h-4 w-4"});default:return s.jsx(fa,{className:"h-4 w-4"})}},f=h=>h.name?h.name:h.type==="direct"?"Direct Message":h.type==="project"?"Project Chat":h.type==="task"?"Task Chat":"Group Chat";return s.jsx(zt,{open:e,onOpenChange:t,children:s.jsx(Rt,{className:"p-0 max-w-[600px]",children:s.jsxs(Ya,{className:"rounded-lg",children:[s.jsx(Xa,{placeholder:"Search conversations, people, or type a command...",value:r,onValueChange:i}),s.jsxs(Za,{children:[s.jsx(Ja,{children:"No results found."}),r.startsWith("/")&&s.jsx(Ms,{heading:"Commands",children:s.jsxs(Rs,{onSelect:()=>{r==="/task"||r.startsWith("/task ")?(o&&a("/wbs?action=create"),t(!1)):r==="/risk"||r.startsWith("/risk ")?(o&&a("/risks?action=create"),t(!1)):(r==="/issue"||r.startsWith("/issue "))&&(o&&a("/issues?action=create"),t(!1))},children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:[r==="/task"&&"Create Task",r==="/risk"&&"Create Risk",r==="/issue"&&"Create Issue",!["/task","/risk","/issue"].includes(r)&&"Type /task, /risk, or /issue"]})]})}),c.length>0&&s.jsx(Ms,{heading:"Conversations",children:c.map(h=>s.jsxs(Rs,{onSelect:()=>u(h),className:"flex items-center gap-2",children:[d(h.type),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"font-medium truncate",children:f(h)})})]},h.id))}),s.jsx(Ms,{heading:"Quick Actions",children:s.jsxs(Rs,{onSelect:()=>{a("/chat?action=create"),t(!1)},children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Create New Conversation"})]})})]})]})})})}function But(){const[e,t]=x.useState(null),[n,r]=x.useState(!1),[i,a]=x.useState(!1),[o,l]=x.useState("direct"),[c,u]=x.useState(""),[d,f]=x.useState(""),[h,m]=x.useState([]),g=moe();bit();const p=jit(),{user:v}=zs();x.useEffect(()=>{const N=w=>{(w.metaKey||w.ctrlKey)&&w.key==="k"&&(w.preventDefault(),a(!0))};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[]);const b=async()=>{if(v)try{const N=await g.mutateAsync({type:o,name:o!=="direct"?c:void 0,description:d||void 0,participantIds:h.length>0?h:void 0});t(N),r(!1),u(""),f(""),m([]),l("direct")}catch(N){console.error("Failed to create conversation:",N)}},y=async N=>{console.log("Edit message:",N)},j=async N=>{if(window.confirm("Are you sure you want to delete this message?"))try{await p.mutateAsync(N.id)}catch(w){console.error("Failed to delete message:",w)}};return s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsxs(Jne,{direction:"horizontal",className:"flex-1",children:[s.jsx(Ew,{defaultSize:25,minSize:20,maxSize:40,children:s.jsx(Lut,{selectedConversationId:(e==null?void 0:e.id)||null,onSelectConversation:t,onCreateConversation:()=>r(!0)})}),s.jsx(ere,{}),s.jsx(Ew,{defaultSize:75,minSize:60,children:s.jsx(foe,{conversation:e,onEditMessage:y,onDeleteMessage:j})})]}),s.jsx(zt,{open:n,onOpenChange:r,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Create New Conversation"}),s.jsx(ir,{children:"Start a new conversation with your team members."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(G,{htmlFor:"type",children:"Type"}),s.jsxs(ze,{value:o,onValueChange:N=>l(N),children:[s.jsx(Fe,{id:"type",children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"direct",children:"Direct Message"}),s.jsx(X,{value:"group",children:"Group Chat"}),s.jsx(X,{value:"project",children:"Project Chat"}),s.jsx(X,{value:"task",children:"Task Chat"})]})]})]}),o!=="direct"&&s.jsxs("div",{children:[s.jsx(G,{htmlFor:"name",children:"Name"}),s.jsx(Ce,{id:"name",value:c,onChange:N=>u(N.target.value),placeholder:"Enter conversation name"})]}),s.jsxs("div",{children:[s.jsx(G,{htmlFor:"description",children:"Description (optional)"}),s.jsx(Ht,{id:"description",value:d,onChange:N=>f(N.target.value),placeholder:"Enter description",rows:3})]})]}),s.jsxs(on,{children:[s.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(H,{onClick:b,disabled:g.isPending||o!=="direct"&&!c,children:g.isPending?"Creating...":"Create"})]})]})}),s.jsx(zut,{open:i,onOpenChange:a,onSelectConversation:t})]})}function Vut(){const{selectedOrgId:e,selectedProjectId:t}=jt(),n=e,{toast:r}=Nt(),i=Pi(),{selectedContacts:a,setSelectedContacts:o}=eg(),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(!1),[m,g]=x.useState(null),[p,v]=x.useState(!1),{data:b=[],isLoading:y}=je({queryKey:[`/api/organizations/${n}/contacts`],enabled:!!n}),j=x.useMemo(()=>[{accessorKey:"name",header:({column:_})=>s.jsx(Qn,{column:_,children:"Name"}),cell:({row:_})=>s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-medium",children:[_.original.firstName," ",_.original.lastName]}),_.original.jobTitle&&s.jsx("span",{className:"text-xs text-muted-foreground",children:_.original.jobTitle})]}),accessorFn:_=>`${_.firstName} ${_.lastName}`},{id:"contactInfo",header:"Contact Info",cell:({row:_})=>s.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[_.original.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:_.original.email})]}),_.original.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o1,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:_.original.phone})]}),!_.original.email&&!_.original.phone&&s.jsx("span",{className:"text-muted-foreground",children:"-"})]})},{accessorKey:"company",header:({column:_})=>s.jsx(Qn,{column:_,children:"Company"}),cell:({row:_})=>_.original.company?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:_.original.company})]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})},{accessorKey:"type",header:({column:_})=>s.jsx(Qn,{column:_,children:"Type"}),cell:({row:_})=>s.jsx(ae,{variant:"secondary",className:"capitalize",children:_.original.type})},{id:"actions",header:()=>s.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:_})=>{const O=_.original;return s.jsx("div",{className:"text-right",children:s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(xl,{className:"h-4 w-4"})})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>g(O),children:[s.jsx(kme,{className:"mr-2 h-4 w-4"}),"View History"]}),s.jsx(ct,{children:"Edit Details"})]})]})})}}],[]),N=x.useCallback(_=>{const O=_||b,M=Ap.unparse(O.map(E=>({"First Name":E.firstName,"Last Name":E.lastName,Email:E.email||"",Phone:E.phone||"",Company:E.company||"","Job Title":E.jobTitle||"",Type:E.type||""}))),T=new Blob([M],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),F=URL.createObjectURL(T);R.setAttribute("href",F),R.setAttribute("download",`contacts_${new Date().toISOString().split("T")[0]}.csv`),R.style.visibility="hidden",document.body.appendChild(R),R.click(),document.body.removeChild(R),r({title:"Success",description:"Contacts exported successfully"})},[b,r]),w=Pe({mutationFn:async _=>{await Promise.all(_.map(O=>fe("DELETE",`/api/contacts/${O}`)))},onSuccess:(_,O)=>{const M=O.length;i.invalidateQueries({queryKey:[`/api/organizations/${n}/contacts`]}),v(!1),o([]),r({title:"Success",description:`${M} contact(s) deleted successfully`})},onError:_=>{r({title:"Error",description:_.message||"Failed to delete contacts",variant:"destructive"})}}),S=x.useCallback((_,O)=>{_==="assign"?h(!0):_==="export"?N(O):_==="delete"&&v(!0)},[N,h,v]);Q.useEffect(()=>eb("contacts",S),[S]);const k=Pe({mutationFn:async _=>(await fe("POST",`/api/organizations/${n}/contacts`,_)).json(),onSuccess:()=>{i.invalidateQueries({queryKey:[`/api/organizations/${n}/contacts`]}),c(!1),r({title:"Success",description:"Contact created successfully"})},onError:_=>{r({title:"Error",description:_.message,variant:"destructive"})}}),C=Pe({mutationFn:async _=>(await fe("POST",`/api/organizations/${n}/contacts/import`,{contacts:_})).json(),onSuccess:_=>{i.invalidateQueries({queryKey:[`/api/organizations/${n}/contacts`]}),d(!1),r({title:"Import Complete",description:`Created: ${_.created}, Updated: ${_.updated}, Errors: ${_.errors.length}`})},onError:_=>{r({title:"Error",description:_.message,variant:"destructive"})}}),A=Pe({mutationFn:async()=>(await fe("POST",`/api/organizations/${n}/contacts/sync-from-projects`,{})).json(),onSuccess:_=>{i.invalidateQueries({queryKey:[`/api/organizations/${n}/contacts`]}),r({title:"Sync Complete",description:`Created ${_.contactsCreated} new contacts from ${_.stakeholdersProcessed+_.resourcesProcessed} records.`})},onError:_=>{r({title:"Error",description:_.message,variant:"destructive"})}}),D=Pe({mutationFn:async _=>{const O=a.map(M=>fe("POST",`/api/projects/${t}/assign-contact`,{contactId:M.id,..._}));await Promise.all(O)},onSuccess:()=>{h(!1),o([]),r({title:"Success",description:"Contacts assigned to project successfully"})},onError:_=>{r({title:"Error",description:_.message,variant:"destructive"})}}),P=_=>{var M;const O=(M=_.target.files)==null?void 0:M[0];O&&Ap.parse(O,{header:!0,skipEmptyLines:!0,complete:T=>{console.log("Parsed CSV results:",T);const R=T.data.map(F=>{const E={};return Object.keys(F).forEach(B=>{E[B.toLowerCase().replace(/[^a-z0-9]/g,"")]=F[B]}),{firstName:E.firstname||E.first||F["First Name"]||"",lastName:E.lastname||E.last||F["Last Name"]||"",email:E.email||E.mail||F.Email||void 0,phone:E.phone||E.mobile||E.tel||F.Phone||void 0,company:E.company||E.organization||F.Company||void 0,jobTitle:E.jobtitle||E.title||E.role||F["Job Title"]||void 0,type:E.type||F.Type||"other",notes:E.notes||F.Notes||void 0}}).filter(F=>F.firstName||F.lastName||F.email);if(R.length===0){r({title:"Parse Error",description:"No valid contacts found in CSV. Please check column headers.",variant:"destructive"});return}C.mutate(R)},error:T=>{console.error("CSV Parse Error:",T),r({title:"CSV Parse Error",description:T.message,variant:"destructive"})}})};return s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts Directory"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage all organization contacts and assign them to projects."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",onClick:()=>A.mutate(),disabled:A.isPending,children:[s.jsx(Mm,{className:`mr-2 h-4 w-4 ${A.isPending?"animate-spin":""}`}),"Sync from Projects"]}),s.jsxs(zt,{open:u,onOpenChange:d,children:[s.jsx(xE,{asChild:!0,children:s.jsxs(H,{variant:"outline",children:[s.jsx(Rm,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Import Contacts"}),s.jsx(ir,{children:"Upload a CSV file with columns: FirstName, LastName, Email, Phone, Company, JobTitle, Type"})]}),s.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[s.jsx(G,{htmlFor:"csv",children:"CSV File"}),s.jsx(Ce,{id:"csv",type:"file",accept:".csv",onChange:P})]})]})]}),s.jsxs(zt,{open:l,onOpenChange:c,children:[s.jsx(xE,{asChild:!0,children:s.jsxs(H,{children:[s.jsx(Et,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),s.jsxs(Rt,{className:"sm:max-w-[425px]",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:"Add New Contact"})}),s.jsxs("form",{onSubmit:_=>{_.preventDefault();const O=new FormData(_.currentTarget);k.mutate({firstName:O.get("firstName"),lastName:O.get("lastName"),email:O.get("email"),phone:O.get("phone"),company:O.get("company"),jobTitle:O.get("jobTitle"),type:O.get("type")})},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"firstName",children:"First Name"}),s.jsx(Ce,{id:"firstName",name:"firstName",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"lastName",children:"Last Name"}),s.jsx(Ce,{id:"lastName",name:"lastName",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"email",children:"Email"}),s.jsx(Ce,{id:"email",name:"email",type:"email"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"phone",children:"Phone"}),s.jsx(Ce,{id:"phone",name:"phone"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"company",children:"Company"}),s.jsx(Ce,{id:"company",name:"company"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"jobTitle",children:"Job Title"}),s.jsx(Ce,{id:"jobTitle",name:"jobTitle"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"type",children:"Type"}),s.jsxs(ze,{name:"type",defaultValue:"other",children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"client",children:"Client"}),s.jsx(X,{value:"vendor",children:"Vendor"}),s.jsx(X,{value:"consultant",children:"Consultant"}),s.jsx(X,{value:"partner",children:"Partner"}),s.jsx(X,{value:"other",children:"Other"})]})]})]}),s.jsx(H,{type:"submit",className:"w-full",children:"Create Contact"})]})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto px-6 py-4",children:y?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(pt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx("div",{className:"space-y-4",children:s.jsx(od,{columns:j,data:b,searchKey:"name",searchPlaceholder:"Search contacts by name, email, or company...",enableSelection:!0,enableColumnVisibility:!0,enableExport:!0,enableSorting:!0,enableFiltering:!0,enablePagination:!1,maxHeight:"calc(100vh - 400px)",onSelectionChange:o,onExport:N,emptyMessage:"No contacts found",getRowId:_=>_.id.toString()})})}),s.jsx(Bs,{open:p,onOpenChange:v,children:s.jsxs(gs,{children:[s.jsxs(xs,{children:[s.jsx(ys,{children:"Delete Multiple Contacts"}),s.jsxs(bs,{children:["Are you sure you want to delete ",a.length," selected contact(s)? This action cannot be undone.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Contacts to delete:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 max-h-32 overflow-y-auto",children:a.map(_=>s.jsxs("li",{children:[_.firstName," ",_.lastName," ",_.email?`(${_.email})`:""]},_.id))})]})]}),s.jsxs(vs,{children:[s.jsx(ws,{children:"Cancel"}),s.jsx(js,{onClick:()=>{const _=a.map(O=>O.id);w.mutate(_)},className:"bg-destructive text-destructive-foreground",disabled:w.isPending,children:w.isPending?"Deleting...":`Delete ${a.length} Contact(s)`})]})]})}),s.jsx(zt,{open:f,onOpenChange:h,children:s.jsxs(Rt,{children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Assign Contacts to Project"}),s.jsxs(ir,{children:["Add ",a.length," selected contacts to the current project."]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Assign As"}),s.jsxs(ze,{onValueChange:_=>D.mutate({role:_}),children:[s.jsx(Fe,{children:s.jsx(Be,{placeholder:"Select role type..."})}),s.jsxs(Le,{children:[s.jsx(X,{value:"stakeholder",children:"Stakeholder"}),s.jsx(X,{value:"resource",children:"Resource"})]})]})]})})]})}),s.jsx(zt,{open:!!m,onOpenChange:_=>!_&&g(null),children:s.jsxs(Rt,{className:"max-w-2xl",children:[s.jsxs(Bt,{children:[s.jsx(Vt,{children:"Interaction History"}),s.jsxs(ir,{children:["History for ",m==null?void 0:m.firstName," ",m==null?void 0:m.lastName]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Recent Logs"}),s.jsxs(H,{size:"sm",variant:"outline",children:[s.jsx(Et,{className:"mr-2 h-3 w-3"}),"Log Interaction"]})]}),s.jsx(On,{className:"h-[300px] border rounded-md p-4",children:s.jsx("div",{className:"space-y-4",children:s.jsx(qut,{contactId:m==null?void 0:m.id})})})]})]})})]})}function qut({contactId:e}){const{data:t=[]}=je({queryKey:[`/api/contacts/${e}/logs`],enabled:!!e});return e?t.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No interactions logged yet."}):s.jsx("div",{className:"space-y-4",children:t.map(n=>s.jsxs("div",{className:"flex gap-3 items-start text-sm border-b pb-3 last:border-0",children:[s.jsxs("div",{className:"mt-0.5",children:[n.type==="email"&&s.jsx(ji,{className:"h-4 w-4 text-blue-500"}),n.type==="meeting"&&s.jsx(Bn,{className:"h-4 w-4 text-green-500"}),n.type==="call"&&s.jsx(o1,{className:"h-4 w-4 text-yellow-500"})]}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium capitalize",children:n.type}),s.jsx("span",{className:"text-xs text-muted-foreground",children:en(new Date(n.date),"MMM d, yyyy h:mm a")})]}),s.jsx("p",{className:"text-muted-foreground",children:n.content||n.subject})]})]},n.id))}):null}const Uut=[{value:"submitted",label:"Submitted",color:"default"},{value:"under-review",label:"Under Review",color:"secondary"},{value:"approved",label:"Approved",color:"outline"},{value:"rejected",label:"Rejected",color:"destructive"},{value:"implemented",label:"Implemented",color:"outline"}],zP={title:"",description:"",reason:"",status:"submitted",impactAnalysis:"",costImpact:"",scheduleImpact:""};function Wut(){const{selectedProjectId:e}=jt(),{toast:t}=Nt(),[n,r]=x.useState(!1),[i,a]=x.useState(null),[o,l]=x.useState([]),[c,u]=x.useState(zP),[d,f]=x.useState(""),[h,m]=x.useState("list");x.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="new"&&(setTimeout(()=>{u(zP),a(null),r(!0)},100),window.history.replaceState({},"",window.location.pathname))},[]);const{data:g,isLoading:p}=je({queryKey:[`/api/projects/${e}/change-requests/analytics`],enabled:!!e&&h==="analytics",retry:1}),{data:v=[],isLoading:b,error:y,refetch:j}=je({queryKey:[`/api/projects/${e}/change-requests`],enabled:!!e,retry:1}),N=x.useMemo(()=>{if(!d)return v;const T=d.toLowerCase();return v.filter(R=>{var F,E;return R.title.toLowerCase().includes(T)||((F=R.description)==null?void 0:F.toLowerCase().includes(T))||((E=R.code)==null?void 0:E.toLowerCase().includes(T))})},[v,d]),w=Pe({mutationFn:async T=>{if(!e)throw new Error("No project selected");const R={...T,projectId:e,costImpact:T.costImpact?parseFloat(T.costImpact):null,scheduleImpact:T.scheduleImpact?parseInt(T.scheduleImpact):null,impactAnalysis:T.impactAnalysis||null,reason:T.reason||null};await fe("POST","/api/change-requests",R)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/change-requests`]}),r(!1),a(null),C(),t({title:"Success",description:"Change request submitted successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),S=Pe({mutationFn:async({id:T,data:R})=>{const F={...R,costImpact:R.costImpact?parseFloat(R.costImpact):null,scheduleImpact:R.scheduleImpact?parseInt(R.scheduleImpact):null,impactAnalysis:R.impactAnalysis||null,reason:R.reason||null};await fe("PATCH",`/api/change-requests/${T}`,F)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/change-requests`]}),r(!1),a(null),C(),t({title:"Success",description:"Change request updated successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),k=Pe({mutationFn:async T=>{await fe("DELETE",`/api/change-requests/${T}`)},onSuccess:()=>{we.invalidateQueries({queryKey:[`/api/projects/${e}/change-requests`]}),t({title:"Success",description:"Change request deleted successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),C=()=>{u(zP)},A=T=>{T.preventDefault(),i?S.mutate({id:i.id,data:c}):w.mutate(c)},D=T=>{a(T),u({title:T.title,description:T.description||"",reason:T.reason||"",status:T.status||"submitted",impactAnalysis:T.impactAnalysis||"",costImpact:T.costImpact?T.costImpact.toString():"",scheduleImpact:T.scheduleImpact?T.scheduleImpact.toString():""}),r(!0)},P=T=>{window.confirm("Are you sure you want to delete this change request?")&&k.mutate(T)},_=()=>{a(null),C(),r(!0)},O=T=>{switch(T){case"submitted":return"default";case"under-review":return"secondary";case"approved":return"outline";case"rejected":return"destructive";case"implemented":return"outline";default:return"default"}},M=T=>{switch(T){case"approved":return pr;case"rejected":return Im;case"under-review":return bt;default:return eE}};return e?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Change Requests"}),s.jsx("p",{className:"text-muted-foreground",children:"Management of Change (MOC) - Track and manage project change requests"})]}),s.jsxs(H,{onClick:_,"data-testid":"button-add-change-request",children:[s.jsx(eE,{className:"mr-2 h-4 w-4"}),"Submit Change Request"]})]}),s.jsxs(Vr,{value:h,onValueChange:m,children:[s.jsxs(Pr,{children:[s.jsx(tt,{value:"list",children:"Change Requests"}),s.jsx(tt,{value:"analytics",children:"Analytics & Dashboard"})]}),s.jsxs(ht,{value:"list",className:"space-y-4",children:[y&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs(Ft,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Failed to load change requests. ",y.message]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>j(),children:"Retry"})]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Ce,{type:"search",placeholder:"Search change requests...",className:"pl-9",value:d,onChange:T=>f(T.target.value),"data-testid":"input-search-change-requests"})]}),b?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading change requests..."})}):N.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Change Requests Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by submitting a change request"}),s.jsx(H,{onClick:_,children:"Submit Change Request"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px,3fr,1.5fr,1fr,1fr,100px] gap-4 px-4 py-2 text-sm font-medium text-muted-foreground border-b",children:[s.jsx("div",{children:"Code"}),s.jsx("div",{children:"Title"}),s.jsx("div",{children:"Impact"}),s.jsx("div",{children:"Cost"}),s.jsx("div",{children:"Schedule"}),s.jsx("div",{children:"Status"})]}),N.map(T=>{const R=T.status||"submitted",F=M(R);return s.jsx(LM,{id:T.id.toString(),selected:o.includes(T.id),onSelect:E=>{l(B=>E?[...B,T.id]:B.filter(L=>L!==T.id))},children:s.jsxs("div",{className:"grid grid-cols-[80px,3fr,1.5fr,1fr,1fr,100px] gap-4 items-center flex-1",children:[s.jsx("div",{className:"text-sm font-mono text-muted-foreground",children:T.code}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.title}),T.description&&s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:T.description})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:T.impactAnalysis?s.jsx("span",{className:"line-clamp-2",children:T.impactAnalysis}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx("div",{className:"text-sm",children:T.costImpact?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ur,{className:"h-3 w-3"}),parseFloat(T.costImpact.toString()).toLocaleString()]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx("div",{className:"text-sm",children:T.scheduleImpact?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(bn,{className:"h-3 w-3"}),T.scheduleImpact," days"]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ae,{variant:O(R),className:"capitalize",children:[s.jsx(F,{className:"h-3 w-3 mr-1"}),R.replace("-"," ")]}),s.jsxs(_n,{children:[s.jsx(An,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm",children:"..."})}),s.jsxs(Nn,{align:"end",children:[s.jsxs(ct,{onClick:()=>D(T),children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(ct,{onClick:()=>P(T.id),className:"text-destructive",children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})},T.id)})]})]}),s.jsx(zt,{open:n,onOpenChange:r,children:s.jsxs(Rt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Bt,{children:s.jsx(Vt,{children:i?"Edit Change Request":"Submit Change Request"})}),s.jsxs("form",{onSubmit:A,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Change Request Title *"}),s.jsx(Ce,{id:"title",value:c.title,onChange:T=>u({...c,title:T.target.value}),placeholder:"Brief description of the requested change",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description"}),s.jsx(Ht,{id:"description",value:c.description,onChange:T=>u({...c,description:T.target.value}),placeholder:"Detailed description of the change",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"reason",children:"Justification *"}),s.jsx(Ht,{id:"reason",value:c.reason,onChange:T=>u({...c,reason:T.target.value}),placeholder:"Why is this change necessary?",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"costImpact",children:"Cost Impact ($)"}),s.jsx(Ce,{id:"costImpact",type:"number",step:"0.01",value:c.costImpact,onChange:T=>u({...c,costImpact:T.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"scheduleImpact",children:"Schedule Impact (days)"}),s.jsx(Ce,{id:"scheduleImpact",type:"number",value:c.scheduleImpact,onChange:T=>u({...c,scheduleImpact:T.target.value}),placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"impactAnalysis",children:"Impact Assessment"}),s.jsx(Ht,{id:"impactAnalysis",value:c.impactAnalysis,onChange:T=>u({...c,impactAnalysis:T.target.value}),placeholder:"Assessment of overall impact on project scope, quality, resources, etc.",rows:4})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"status",children:"Status"}),s.jsxs(ze,{value:c.status,onValueChange:T=>u({...c,status:T}),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsx(Le,{children:Uut.map(T=>s.jsx(X,{value:T.value,children:T.label},T.value))})]})]})]}),s.jsxs(on,{className:"mt-6",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(H,{type:"submit",disabled:w.isPending||S.isPending,children:[i?"Update":"Submit"," Change Request"]})]})]})]})}),s.jsx(ht,{value:"analytics",className:"space-y-6",children:p?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading analytics..."})}):g?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm font-medium",children:"Total CRs"})}),s.jsx(ce,{children:s.jsx("div",{className:"text-2xl font-bold",children:g.summary.total})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm font-medium",children:"Approved"})}),s.jsx(ce,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.summary.byStatus.approved})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm font-medium",children:"Pending Review"})}),s.jsx(ce,{children:s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g.summary.byStatus.submitted+g.summary.byStatus["under-review"]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm font-medium",children:"Total Cost Impact"})}),s.jsx(ce,{children:s.jsxs("div",{className:"text-2xl font-bold",children:["$",g.summary.totalCostImpact.toLocaleString()]})})]}),s.jsxs(ie,{children:[s.jsx(Ne,{className:"pb-2",children:s.jsx(Se,{className:"text-sm font-medium",children:"Total Schedule Impact"})}),s.jsx(ce,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[g.summary.totalScheduleImpact," days"]})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Approval Rate"}),s.jsx(it,{children:"Overall approval statistics"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm",children:"Approval Rate"}),s.jsxs("span",{className:"text-sm font-bold",children:[g.approvals.approvalRate.toFixed(1),"%"]})]}),s.jsx(fn,{value:g.approvals.approvalRate,className:"h-2"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.approvals.approved}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Approved"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.approvals.rejected}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Rejected"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g.approvals.pending}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})]})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Average Processing Time"}),s.jsx(it,{children:"Time from submission to decision"})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm",children:"Average Approval Time"}),s.jsxs("span",{className:"text-sm font-bold",children:[g.trends.avgApprovalTime," days"]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm",children:"Average Rejection Time"}),s.jsxs("span",{className:"text-sm font-bold",children:[g.trends.avgRejectionTime," days"]})]})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Status Distribution"}),s.jsx(it,{children:"Change requests by status"})]}),s.jsx(ce,{children:s.jsx(af,{width:"100%",height:200,children:s.jsxs(loe,{children:[s.jsx(Nl,{data:[{name:"Approved",value:g.summary.byStatus.approved,color:"#22c55e"},{name:"Rejected",value:g.summary.byStatus.rejected,color:"#ef4444"},{name:"Under Review",value:g.summary.byStatus["under-review"],color:"#eab308"},{name:"Submitted",value:g.summary.byStatus.submitted,color:"#64748b"},{name:"Implemented",value:g.summary.byStatus.implemented,color:"#3b82f6"}],cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:R})=>`${T}: ${(R*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:[{name:"Approved",value:g.summary.byStatus.approved,color:"#22c55e"},{name:"Rejected",value:g.summary.byStatus.rejected,color:"#ef4444"},{name:"Under Review",value:g.summary.byStatus["under-review"],color:"#eab308"},{name:"Submitted",value:g.summary.byStatus.submitted,color:"#64748b"},{name:"Implemented",value:g.summary.byStatus.implemented,color:"#3b82f6"}].map((T,R)=>s.jsx(ug,{fill:T.color},`cell-${R}`))}),s.jsx(Qs,{})]})})})]})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Change Request Trends"}),s.jsx(it,{children:"Monthly submission and approval trends (last 12 months)"})]}),s.jsx(ce,{children:s.jsx(af,{width:"100%",height:300,children:s.jsxs(_st,{data:Object.entries(g.trends.monthly).map(([T,R])=>({month:T,submitted:R.submitted,approved:R.approved,rejected:R.rejected})).sort((T,R)=>T.month.localeCompare(R.month)),children:[s.jsx(Np,{strokeDasharray:"3 3"}),s.jsx(pl,{dataKey:"month"}),s.jsx(gl,{}),s.jsx(Qs,{}),s.jsx(Nu,{}),s.jsx(cl,{type:"monotone",dataKey:"submitted",stackId:"1",stroke:"#64748b",fill:"#64748b",fillOpacity:.6}),s.jsx(cl,{type:"monotone",dataKey:"approved",stackId:"2",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.6}),s.jsx(cl,{type:"monotone",dataKey:"rejected",stackId:"3",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6})]})})})]}),s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Cost Impact by Status"}),s.jsx(it,{children:"Total cost impact broken down by change request status"})]}),s.jsx(ce,{children:s.jsx(af,{width:"100%",height:300,children:s.jsxs(FM,{data:[{status:"Submitted",cost:g.costImpact.byStatus.submitted},{status:"Under Review",cost:g.costImpact.byStatus["under-review"]},{status:"Approved",cost:g.costImpact.byStatus.approved},{status:"Rejected",cost:g.costImpact.byStatus.rejected},{status:"Implemented",cost:g.costImpact.byStatus.implemented}],children:[s.jsx(Np,{strokeDasharray:"3 3"}),s.jsx(pl,{dataKey:"status"}),s.jsx(gl,{}),s.jsx(Qs,{formatter:T=>`$${T.toLocaleString()}`}),s.jsx(Eo,{dataKey:"cost",fill:"#3b82f6"})]})})})]})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"No analytics data available"})})})]})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Please select a project from the dropdown above"})]})})}function Hut(){const{isLoading:e}=zs();yr();const t=Pi(),[n,r]=x.useState("login"),[i,a]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState(""),h=new URLSearchParams(window.location.search),m=h.get("verified")==="true",g=h.get("error")==="google",[p,v]=x.useState(""),[b,y]=x.useState(""),[j,N]=x.useState(""),[w,S]=x.useState(""),[k,C]=x.useState(""),[A,D]=x.useState(""),P=Pe({mutationFn:async E=>(await fe("POST","/api/auth/login",E)).json(),onSuccess:E=>{E!=null&&E.user&&t.setQueryData(["/api/auth/user"],E.user),E.requires2FA?(u(!0),a(null)):window.location.href="/"},onError:E=>{a(E.message||"Login failed")}}),_=Pe({mutationFn:async E=>(await fe("POST","/api/auth/verify-2fa",{code:E})).json(),onSuccess:E=>{E!=null&&E.user&&t.setQueryData(["/api/auth/user"],E.user),window.location.href="/"},onError:E=>{a(E.message||"Invalid 2FA code")}}),O=Pe({mutationFn:async E=>(await fe("POST","/api/auth/register",E)).json(),onSuccess:E=>{l(E.message),r("login"),N(""),S(""),C(""),D("")},onError:E=>{a(E.message||"Registration failed")}}),M=E=>{E.preventDefault(),a(null),P.mutate({email:p,password:b})},T=E=>{E.preventDefault(),a(null),_.mutate(d)},R=E=>{E.preventDefault(),a(null),l(null),O.mutate({email:j,password:w,firstName:k,lastName:A})},F=()=>{window.location.href="/api/auth/google"};return e?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(pt,{className:"h-8 w-8 animate-spin"})}):c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Jd,{className:"h-8 w-8 text-primary-foreground"})})}),s.jsx(Se,{children:"Two-Factor Authentication"}),s.jsx(it,{children:"Enter the 6-digit code from your authenticator app"})]}),s.jsx(ce,{children:s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:i})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"2fa-code",children:"Verification Code"}),s.jsx(Ce,{id:"2fa-code",type:"text",placeholder:"000000",value:d,onChange:E=>f(E.target.value),maxLength:6,className:"text-center text-2xl tracking-widest",autoFocus:!0})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:_.isPending||d.length<6,children:_.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"})," Verifying..."]}):"Verify"}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"You can also use a backup code"})]})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Hi,{className:"h-8 w-8 text-primary-foreground"})})}),s.jsx(Se,{className:"text-3xl",children:"Ganttium"}),s.jsx(it,{children:"EPC Project Management Information Software"})]}),s.jsxs(ce,{className:"space-y-4",children:[(m||o)&&s.jsxs($t,{className:"bg-green-50 border-green-200 text-green-800",children:[s.jsx(pr,{className:"h-4 w-4"}),s.jsx(Ft,{children:m?"Email verified successfully! You can now log in.":o})]}),(i||g)&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:g?"Google sign-in failed. Please try again.":i})]}),s.jsxs(Vr,{value:n,onValueChange:E=>{r(E),a(null)},children:[s.jsxs(Pr,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"login",children:"Sign In"}),s.jsx(tt,{value:"register",children:"Register"})]}),s.jsxs(ht,{value:"login",className:"space-y-4",children:[s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"login-email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(ji,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"login-email",type:"email",placeholder:"you@company.com",value:p,onChange:E=>v(E.target.value),className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"login-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"login-password",type:"password",placeholder:"",value:b,onChange:E=>y(E.target.value),className:"pl-10",required:!0})]})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:P.isPending,children:P.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"})," Signing in..."]}):"Sign In"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),s.jsxs(H,{variant:"outline",className:"w-full",onClick:F,children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),s.jsx("div",{className:"text-center",children:s.jsx(vu,{href:"/forgot-password",children:s.jsx(H,{variant:"link",className:"text-sm text-muted-foreground",children:"Forgot password?"})})})]}),s.jsxs(ht,{value:"register",className:"space-y-4",children:[s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"register-firstName",children:"First Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"register-firstName",type:"text",placeholder:"John",value:k,onChange:E=>C(E.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"register-lastName",children:"Last Name"}),s.jsx(Ce,{id:"register-lastName",type:"text",placeholder:"Doe",value:A,onChange:E=>D(E.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"register-email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(ji,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"register-email",type:"email",placeholder:"you@company.com",value:j,onChange:E=>N(E.target.value),className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"register-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"register-password",type:"password",placeholder:"Min 8 characters",value:w,onChange:E=>S(E.target.value),className:"pl-10",minLength:8,required:!0})]})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:O.isPending,children:O.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"})," Creating account..."]}):"Create Account"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),s.jsxs(H,{variant:"outline",className:"w-full",onClick:F,children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign up with Google"]})]})]})]}),s.jsx(Gp,{className:"justify-center",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})})}function Kut(){const[e,t]=x.useState(""),[n,r]=x.useState(!1),[i,a]=x.useState(null),o=Pe({mutationFn:async c=>(await fe("POST","/api/auth/forgot-password",{email:c})).json(),onSuccess:()=>{r(!0),a(null)},onError:c=>{a(c.message||"Failed to send reset email")}}),l=c=>{c.preventDefault(),a(null),o.mutate(e)};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(pr,{className:"h-8 w-8 text-green-600"})})}),s.jsx(Se,{children:"Check Your Email"}),s.jsxs(it,{children:["If an account exists for ",s.jsx("strong",{children:e}),", you will receive a password reset link shortly."]})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Didn't receive the email? Check your spam folder or try again."}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(H,{variant:"outline",onClick:()=>r(!1),className:"w-full",children:"Try Another Email"}),s.jsx(vu,{href:"/login",children:s.jsxs(H,{variant:"ghost",className:"w-full",children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back to Login"]})})]})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Hi,{className:"h-8 w-8 text-primary-foreground"})})}),s.jsx(Se,{children:"Forgot Password"}),s.jsx(it,{children:"Enter your email address and we'll send you a link to reset your password."})]}),s.jsxs(ce,{className:"space-y-4",children:[i&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:i})]}),s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(ji,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"email",type:"email",placeholder:"you@company.com",value:e,onChange:c=>t(c.target.value),className:"pl-10",required:!0,autoFocus:!0})]})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:o.isPending,children:o.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"})," Sending..."]}):"Send Reset Link"})]})]}),s.jsx(Gp,{className:"justify-center",children:s.jsx(vu,{href:"/login",children:s.jsxs(H,{variant:"ghost",children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back to Login"]})})})]})})}function Gut(){yr();const[e,t]=x.useState(null),[n,r]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(null);x.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("token");m&&t(m)},[]);const d=Pe({mutationFn:async h=>(await fe("POST","/api/auth/reset-password",h)).json(),onSuccess:()=>{l(!0),u(null)},onError:h=>{u(h.message||"Failed to reset password")}}),f=h=>{if(h.preventDefault(),u(null),n!==i){u("Passwords do not match");return}if(n.length<8){u("Password must be at least 8 characters");return}if(!e){u("Invalid reset link");return}d.mutate({token:e,password:n})};return e?o?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(pr,{className:"h-8 w-8 text-green-600"})})}),s.jsx(Se,{children:"Password Reset Successful"}),s.jsx(it,{children:"Your password has been reset successfully. You can now log in with your new password."})]}),s.jsx(ce,{children:s.jsx(vu,{href:"/login",children:s.jsx(H,{className:"w-full",children:"Go to Login"})})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Hi,{className:"h-8 w-8 text-primary-foreground"})})}),s.jsx(Se,{children:"Reset Password"}),s.jsx(it,{children:"Enter your new password below."})]}),s.jsxs(ce,{className:"space-y-4",children:[c&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:c})]}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"password",type:"password",placeholder:"Min 8 characters",value:n,onChange:h=>r(h.target.value),className:"pl-10",minLength:8,required:!0,autoFocus:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"confirmPassword",type:"password",placeholder:"Re-enter password",value:i,onChange:h=>a(h.target.value),className:"pl-10",minLength:8,required:!0})]})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:d.isPending,children:d.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"})," Resetting..."]}):"Reset Password"})]})]}),s.jsx(Gp,{className:"justify-center",children:s.jsx(vu,{href:"/login",children:s.jsxs(H,{variant:"ghost",children:[s.jsx(yu,{className:"mr-2 h-4 w-4"}),"Back to Login"]})})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(bt,{className:"h-8 w-8 text-red-600"})})}),s.jsx(Se,{children:"Invalid Reset Link"}),s.jsx(it,{children:"This password reset link is invalid or has expired."})]}),s.jsx(ce,{children:s.jsx(vu,{href:"/forgot-password",children:s.jsx(H,{className:"w-full",children:"Request New Reset Link"})})})]})})}function Qut(){var b;const{user:e}=zs(),[,t]=yr(),[n,r]=kH("/payment/:action"),i=(r==null?void 0:r.action)||"plans",[a,o]=x.useState(null),[l,c]=x.useState("monthly"),{data:u,isLoading:d}=je({queryKey:["/api/subscription-plans"],queryFn:async()=>(await fe("GET","/api/subscription-plans")).json()}),{data:f}=je({queryKey:["/api/organizations"],queryFn:async()=>(await fe("GET","/api/organizations")).json(),enabled:!!e}),{data:h}=je({queryKey:["/api/organizations/subscription",(b=f==null?void 0:f[0])==null?void 0:b.id],queryFn:async()=>{if(!f||f.length===0)return null;const y=f[0].id;return(await fe("GET",`/api/organizations/${y}/subscription`)).json()},enabled:!!e&&!!f&&f.length>0}),m=Pe({mutationFn:async({planId:y,billingCycle:j})=>(await fe("POST","/api/paypal/create-subscription",{planId:y,billingCycle:j})).json(),onSuccess:y=>{y.approvalUrl&&(window.location.href=y.approvalUrl)}});if(x.useEffect(()=>{new URLSearchParams(window.location.search).get("payment")==="success"&&setTimeout(()=>{t("/")},3e3)},[t]),i==="success")return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsx(ie,{className:"w-full max-w-md",children:s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(pr,{className:"h-8 w-8 text-green-600"})})}),s.jsx(Se,{children:"Payment Successful!"}),s.jsx(it,{children:"Your subscription has been activated. Redirecting..."})]})})});if(i==="cancel")return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(Im,{className:"h-8 w-8 text-red-600"})})}),s.jsx(Se,{children:"Payment Cancelled"}),s.jsx(it,{children:"Your payment was cancelled. You can try again anytime."})]}),s.jsx(ce,{children:s.jsx(H,{onClick:()=>t("/payment/plans"),className:"w-full",children:"View Plans"})})]})});const g=y=>{o(y),m.mutate({planId:y,billingCycle:l})},p=y=>`$${(y/100).toFixed(2)}`,v=h==null?void 0:h.plan;return s.jsx("div",{className:"min-h-screen bg-background p-4 py-12",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Choose Your Plan"}),s.jsx("p",{className:"text-muted-foreground",children:"Select the perfect plan for your organization"})]}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"inline-flex rounded-lg border border-input bg-background p-1",children:[s.jsx("button",{onClick:()=>c("monthly"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l==="monthly"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"Monthly"}),s.jsx("button",{onClick:()=>c("yearly"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l==="yearly"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"Yearly"})]})}),d?s.jsx("div",{className:"flex justify-center",children:s.jsx(pt,{className:"h-8 w-8 animate-spin"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u==null?void 0:u.map(y=>{var S,k;const j=l==="yearly"?y.priceYearly||y.priceMonthly*12:y.priceMonthly,N=(v==null?void 0:v.id)===y.id,w=y.tier==="free";return s.jsxs(ie,{className:`relative ${y.tier==="professional"?"border-primary border-2":""}`,children:[y.tier==="professional"&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx("span",{className:"bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:"Most Popular"})}),s.jsxs(Ne,{children:[s.jsx(Se,{children:y.name}),s.jsx(it,{children:(S=y.features)==null?void 0:S.description}),s.jsxs("div",{className:"mt-4",children:[s.jsx("span",{className:"text-4xl font-bold",children:w?"Free":p(j)}),!w&&s.jsxs("span",{className:"text-muted-foreground",children:["/",l==="yearly"?"year":"month"]})]})]}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx(pr,{className:"h-4 w-4 text-green-500 mr-2"}),y.projectLimit," projects"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(pr,{className:"h-4 w-4 text-green-500 mr-2"}),y.userLimit," users"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(pr,{className:"h-4 w-4 text-green-500 mr-2"}),(k=y.aiTokenLimit)==null?void 0:k.toLocaleString()," AI tokens/month"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(pr,{className:"h-4 w-4 text-green-500 mr-2"}),(y.storageQuotaBytes/1024/1024).toFixed(0),"MB storage"]})]}),s.jsx(H,{className:"w-full",variant:N?"outline":"default",disabled:N||w||m.isPending,onClick:()=>g(y.id),children:N?"Current Plan":w?"Free Forever":m.isPending&&a===y.id?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wK,{className:"mr-2 h-4 w-4"}),"Subscribe with PayPal"]})})]})]},y.id)})}),m.isError&&s.jsx($t,{variant:"destructive",className:"mt-6 max-w-2xl mx-auto",children:s.jsx(Ft,{children:m.error instanceof Error?m.error.message:"Failed to create subscription. Please try again."})})]})})}function Yut(){const{user:e}=zs(),[,t]=yr(),{toast:n}=Nt(),[r,i]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState("bug"),[u,d]=x.useState("medium"),[f,h]=x.useState(""),[m,g]=x.useState(""),[p,v]=x.useState(""),[b,y]=x.useState([]),[j,N]=x.useState(!1),[w]=x.useState(()=>typeof window>"u"?null:{userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,screenWidth:window.screen.width,screenHeight:window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),[S]=x.useState(()=>typeof window>"u"?null:{type:/Mobile|Android|iPhone|iPad/.test(navigator.userAgent)?"mobile":"desktop",screenSize:`${window.screen.width}x${window.screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`}),k=Pe({mutationFn:async M=>(await fe("POST","/api/bug-reports",M)).json(),onSuccess:M=>{n({title:"Report Submitted Successfully",description:`Your report (#${M.id}) has been received. You'll receive an email confirmation shortly.`}),i(""),o(""),c("bug"),d("medium"),h(""),g(""),v(""),y([]),setTimeout(()=>{t("/bug-reports")},2e3)},onError:M=>{n({title:"Failed to Submit Report",description:M.message||"Please try again later.",variant:"destructive"})}}),{data:C}=je({queryKey:["/api/bug-reports"],queryFn:async()=>(await fe("GET","/api/bug-reports")).json(),enabled:!!e}),A=async M=>{var R;const T=(R=M.target.files)==null?void 0:R[0];if(T){if(!T.type.startsWith("image/")){n({title:"Invalid File Type",description:"Please upload an image file.",variant:"destructive"});return}if(T.size>5*1024*1024){n({title:"File Too Large",description:"Please upload an image smaller than 5MB.",variant:"destructive"});return}N(!0);try{const F=new FileReader;F.onloadend=()=>{const E=F.result;y([...b,E]),N(!1)},F.onerror=()=>{n({title:"Upload Failed",description:"Failed to process image.",variant:"destructive"}),N(!1)},F.readAsDataURL(T)}catch{n({title:"Upload Failed",description:"Failed to upload screenshot.",variant:"destructive"}),N(!1)}}},D=M=>{y(b.filter((T,R)=>R!==M))},P=M=>{if(M.preventDefault(),!r.trim()||!a.trim()){n({title:"Validation Error",description:"Title and description are required.",variant:"destructive"});return}if(a.length<50){n({title:"Description Too Short",description:"Please provide at least 50 characters in your description.",variant:"destructive"});return}k.mutate({title:r.trim(),description:a.trim(),category:l,severity:u,stepsToReproduce:f.trim()||void 0,expectedBehavior:m.trim()||void 0,actualBehavior:p.trim()||void 0,screenshots:b.length>0?b:void 0,browserInfo:w,deviceInfo:S})},O={bug:L0,"feature-request":jf,feedback:fa,other:oc}[l];return s.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Report a Bug or Provide Feedback"}),s.jsx("p",{className:"text-muted-foreground",children:"Your feedback helps us improve Ganttium. We take all reports seriously, regardless of your subscription tier."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(ie,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Submit Your Report"}),s.jsx(it,{children:"Please provide as much detail as possible to help us understand and resolve your issue."})]}),s.jsx(ce,{children:s.jsxs("form",{onSubmit:P,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"category",children:"Category *"}),s.jsxs(ze,{value:l,onValueChange:M=>c(M),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"bug",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L0,{className:"h-4 w-4"}),"Bug Report"]})}),s.jsx(X,{value:"feature-request",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jf,{className:"h-4 w-4"}),"Feature Request"]})}),s.jsx(X,{value:"feedback",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"h-4 w-4"}),"General Feedback"]})}),s.jsx(X,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oc,{className:"h-4 w-4"}),"Other"]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"title",children:"Title *"}),s.jsx(Ce,{id:"title",value:r,onChange:M=>i(M.target.value),placeholder:"Brief summary of the issue",minLength:10,maxLength:255,required:!0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.length,"/255 characters (minimum 10)"]})]}),l==="bug"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"severity",children:"Severity"}),s.jsxs(ze,{value:u,onValueChange:M=>d(M),children:[s.jsx(Fe,{children:s.jsx(Be,{})}),s.jsxs(Le,{children:[s.jsx(X,{value:"low",children:"Low - Minor issue, workaround available"}),s.jsx(X,{value:"medium",children:"Medium - Issue affects functionality"}),s.jsx(X,{value:"high",children:"High - Significant impact on workflow"}),s.jsx(X,{value:"critical",children:"Critical - System unusable or data loss risk"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"description",children:"Description *"}),s.jsx(Ht,{id:"description",value:a,onChange:M=>o(M.target.value),placeholder:"Describe the issue in detail...",rows:6,minLength:50,maxLength:1e4,required:!0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.length,"/10,000 characters (minimum 50)"]})]}),l==="bug"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"steps",children:"Steps to Reproduce"}),s.jsx(Ht,{id:"steps",value:f,onChange:M=>h(M.target.value),placeholder:`1. Go to...
2. Click on...
3. See error...`,rows:4})]}),l==="bug"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"expected",children:"Expected Behavior"}),s.jsx(Ht,{id:"expected",value:m,onChange:M=>g(M.target.value),placeholder:"What should happen?",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"actual",children:"Actual Behavior"}),s.jsx(Ht,{id:"actual",value:p,onChange:M=>v(M.target.value),placeholder:"What actually happens?",rows:3})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{children:"Screenshots"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{type:"file",accept:"image/*",onChange:A,disabled:j,className:"cursor-pointer"}),j&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(pt,{className:"h-4 w-4 animate-spin"}),"Processing image..."]}),b.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:b.map((M,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:M,alt:`Screenshot ${T+1}`,className:"w-full h-32 object-cover rounded border"}),s.jsx(H,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>D(T),children:s.jsx(Fn,{className:"h-3 w-3"})})]},T))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload screenshots to help us understand the issue (max 5MB per image)"})]}),s.jsx(H,{type:"submit",className:"w-full",disabled:k.isPending||!r.trim()||a.length<50,children:k.isPending?s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(O,{className:"mr-2 h-4 w-4"}),"Submit Report"]})}),k.isError&&s.jsxs($t,{variant:"destructive",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsx(Ft,{children:k.error instanceof Error?k.error.message:"Failed to submit report. Please try again."})]})]})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-lg",children:"What Happens Next?"})}),s.jsxs(ce,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:s.jsx(pr,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Review Process"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Our team reviews all reports within 2-3 business days"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-2",children:s.jsx(pr,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Equal Treatment"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All reports are taken seriously, regardless of subscription tier"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:s.jsx(pr,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Notifications"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive email updates when your report is resolved"})]})]})]})]}),C&&C.length>0&&s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{className:"text-lg",children:"Your Reports"})}),s.jsx(ce,{children:s.jsxs("div",{className:"space-y-2",children:[C.slice(0,5).map(M=>s.jsxs("div",{className:"p-2 rounded border cursor-pointer hover:bg-muted",onClick:()=>t(`/bug-reports/${M.id}`),children:[s.jsx("p",{className:"text-sm font-medium truncate",children:M.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${M.status==="resolved"?"bg-green-100 text-green-700":M.status==="in-progress"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:M.status}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",M.id]})]})]},M.id)),C.length>0&&s.jsxs(H,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>t("/bug-reports"),children:["View All Reports (",C.length,")"]})]})})]})]})]})]})})}function eV(){const{user:e}=zs(),[,t]=yr(),[n,r]=kH("/bug-reports/:id"),i=r!=null&&r.id?parseInt(r.id,10):null,{data:a=[],isLoading:o,error:l}=je({queryKey:i?["/api/bug-reports",i]:["/api/bug-reports"],queryFn:async()=>{if(i){const f=await fe("GET",`/api/bug-reports/${i}`);if(!f.ok)throw f.status===404?new Error("Report not found"):new Error("Failed to load report");return[await f.json()]}else return(await fe("GET","/api/bug-reports")).json()},enabled:!!e}),c=f=>{const h={pending:"outline",reviewing:"secondary","in-progress":"default",resolved:"default",rejected:"destructive",duplicate:"secondary"},g={pending:bn,reviewing:Eu,"in-progress":bn,resolved:pr,rejected:Im,duplicate:Im}[f]||bt;return s.jsxs(ae,{variant:h[f]||"outline",children:[s.jsx(g,{className:"h-3 w-3 mr-1"}),f]})},u=f=>({bug:L0,"feature-request":jf,feedback:fa,other:oc})[f]||oc,d=f=>{switch(f){case"resolved":return"text-green-600";case"in-progress":return"text-blue-600";case"rejected":return"text-red-600";default:return"text-muted-foreground"}};return o?s.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[s.jsx(Ke,{className:"h-12 w-64"}),s.jsx(Ke,{className:"h-48"}),s.jsx(Ke,{className:"h-48"})]})}):l?s.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx(ie,{children:s.jsx(ce,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bt,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Report"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:l instanceof Error?l.message:"An error occurred while loading the report."}),s.jsx(H,{onClick:()=>t("/bug-reports"),children:"View All Reports"})]})})})})}):s.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:i?`Bug Report #${i}`:"My Bug Reports"}),s.jsx("p",{className:"text-muted-foreground",children:i?"View details of your submitted report":"Track the status of your submitted reports and feedback"})]}),s.jsxs("div",{className:"flex gap-2",children:[i&&s.jsx(H,{variant:"outline",onClick:()=>t("/bug-reports"),children:"Back to All Reports"}),s.jsxs(H,{onClick:()=>t("/bug-report"),children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"New Report"]})]})]}),a.length===0?s.jsx(ie,{children:s.jsx(ce,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Reports Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't submitted any bug reports or feedback yet."}),s.jsxs(H,{onClick:()=>t("/bug-report"),children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Submit Your First Report"]})]})})}):s.jsx("div",{className:"space-y-4",children:a.map(f=>{const h=u(f.category);return s.jsxs(ie,{className:"hover-elevate",children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(h,{className:"h-5 w-5 text-muted-foreground"}),s.jsx(Se,{className:"text-xl",children:f.title})]}),s.jsxs(it,{children:["Report #",f.id,"  ",en(new Date(f.createdAt),"PPpp")]})]}),c(f.status)]})}),s.jsx(ce,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{children:s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap line-clamp-3",children:f.description})}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsx(ae,{variant:"outline",className:"capitalize",children:f.category}),f.severity&&s.jsxs(ae,{variant:"outline",className:"capitalize",children:[f.severity," severity"]}),f.resolvedAt&&s.jsxs("span",{className:"text-muted-foreground",children:["Resolved ",en(new Date(f.resolvedAt),"PP")]})]}),f.resolutionNotes&&s.jsxs($t,{className:d(f.status),children:[s.jsx(pr,{className:"h-4 w-4"}),s.jsxs(Ft,{children:[s.jsx("strong",{children:"Resolution:"})," ",f.resolutionNotes]})]}),f.status==="pending"&&s.jsxs($t,{children:[s.jsx(bn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Your report is pending review. Our team typically responds within 2-3 business days."})]}),f.status==="in-progress"&&s.jsxs($t,{children:[s.jsx(Eu,{className:"h-4 w-4"}),s.jsx(Ft,{children:"Your report is being actively worked on by our team."})]})]})})]},f.id)})})]})})}const Aj=[{id:"getting-started",title:"Getting Started",icon:gme,description:"Learn the basics of Ganttium",content:[{title:"Creating Your First Project",description:"Start managing your EPC projects in minutes",steps:["Click the 'New Project' button in the top navigation","Fill in project details: name, code, start date, and organization","Select your project type (Engineering, Procurement, Construction, or Combined)","Click 'Create Project' to get started"]},{title:"Understanding the Dashboard",description:"Navigate your project workspace efficiently",steps:["The sidebar provides quick access to all project views","Use the top bar to switch between projects and organizations","The main content area shows your selected view (WBS, Gantt, Kanban, etc.)","Use the command palette (Ctrl/Cmd + K) for quick navigation"]},{title:"Setting Up Your Organization",description:"Configure your organization settings",steps:["Go to Settings  Organizations","Add your organization details and logo","Invite team members via email","Configure terminology and labels to match your workflow"]}]},{id:"wbs",title:"Work Breakdown Structure",icon:Is,description:"Master the 5-level WBS system",content:[{title:"Creating a WBS",description:"Build hierarchical project structures",steps:["Navigate to the WBS view","Click 'Add Task' to create your first task","Use drag-and-drop to organize tasks hierarchically","Tasks automatically receive WBS codes (e.g., 1.1.2.3.1)","Create up to 5 levels of hierarchy"],tips:["Start with high-level phases, then break down into detailed tasks","Use consistent naming conventions across your organization","Leverage templates for common project types"]},{title:"Task Properties",description:"Configure task details and dependencies",steps:["Click on any task to open the details panel","Set start and end dates, duration, and effort","Assign resources and set allocation percentages","Add dependencies (Finish-to-Start, Start-to-Start, etc.)","Set task status and progress percentage"]},{title:"WBS Codes",description:"Understanding automatic code generation",steps:["WBS codes are automatically generated based on hierarchy","Format: Level1.Level2.Level3.Level4.Level5","Codes update automatically when tasks are moved","Use codes for reporting and cross-referencing"]}]},{id:"gantt",title:"Gantt Charts",icon:Ka,description:"Visualize and manage project timelines",content:[{title:"Reading the Gantt Chart",description:"Understand timeline visualization",steps:["Tasks appear as horizontal bars on the timeline","Bar length represents task duration","Colors indicate task status (not started, in progress, completed)","Dependencies are shown as connecting lines","Critical path is highlighted automatically"]},{title:"Editing in Gantt View",description:"Make changes directly on the timeline",steps:["Drag task bars to change start dates","Resize bars to adjust duration","Click and drag dependency lines to change relationships","Right-click tasks for context menu options"]},{title:"Critical Path Analysis",description:"Identify project bottlenecks",steps:["Critical path is automatically calculated","Tasks on the critical path are highlighted","Delays on critical path tasks affect project completion","Use this to prioritize resource allocation"]}]},{id:"kanban",title:"Kanban Boards",icon:Br,description:"Agile workflow management",content:[{title:"Using Kanban View",description:"Manage tasks with visual workflow",steps:["Navigate to Kanban view from the sidebar","Tasks are organized in columns by status","Drag tasks between columns to update status","Customize columns to match your workflow"]},{title:"Task Cards",description:"Quick task information at a glance",steps:["Cards show task name, assignee, and due date","Click cards to view full details","Use filters to show specific tasks","Bulk actions available for multiple selections"]}]},{id:"resources",title:"Resource Management",icon:Cn,description:"Assign and track team members",content:[{title:"Assigning Resources",description:"Add team members to tasks",steps:["Open task details panel","Go to 'Resources' tab","Click 'Add Resource' and select team member","Set allocation percentage (0-100%)","Specify effort hours if needed"]},{title:"Resource Utilization",description:"Monitor team workload",steps:["View resource utilization in Analytics  Resources","See allocation across all projects","Identify overallocated resources","Balance workloads to prevent burnout"]},{title:"Resource Groups",description:"Organize resources by role or department",steps:["Go to Resources page","Create resource groups (e.g., 'Engineering Team', 'Procurement')","Assign resources to groups","Use groups for filtering and reporting"]}]},{id:"risks-issues",title:"Risks & Issues",icon:ul,description:"Track and mitigate project risks",content:[{title:"Creating Risk Logs",description:"Document potential project risks",steps:["Navigate to Risks page","Click 'New Risk'","Fill in risk details: description, probability, impact","Set risk level (automatically calculated)","Assign owner and mitigation strategy"]},{title:"Issue Management",description:"Track and resolve project issues",steps:["Go to Issues page","Create new issues as they arise","Link issues to related tasks","Set priority and assign owner","Update status as issues are resolved"]},{title:"Change Requests",description:"Manage project scope changes",steps:["Navigate to Change Requests","Document requested changes","Assess impact on schedule and budget","Approve or reject with comments","Track all changes for audit purposes"]}]},{id:"ai-assistant",title:"AI Assistant",icon:F0,description:"Leverage AI for project insights",content:[{title:"Using the AI Assistant",description:"Get intelligent project assistance",steps:["Click the AI Assistant icon in the sidebar","Type your question or request","AI understands your project context","Get instant answers and suggestions"],tips:["Ask about project status, risks, or recommendations","Request report generation","Get help with task scheduling","Ask for best practices"]},{title:"AI Features",description:"What the AI can help with",steps:["Generate project reports","Suggest task dependencies","Identify potential risks","Optimize resource allocation","Answer questions about your project"]}]},{id:"reports",title:"Reports & Analytics",icon:Sn,description:"Generate insights and reports",content:[{title:"Creating Reports",description:"Generate professional project reports",steps:["Go to Reports page","Select report type (Status, Risk Register, EV Analysis, etc.)","Choose date range and filters","Click 'Generate Report'","Export as PDF or share via email"]},{title:"Earned Value Analysis",description:"Track project performance metrics",steps:["Navigate to Analytics  Earned Value","View Planned Value (PV), Earned Value (EV), Actual Cost (AC)","Monitor CPI and SPI indicators","Identify cost and schedule variances"]},{title:"Custom Dashboards",description:"Create personalized views",steps:["Go to Dashboard  Custom Dashboards","Click 'Create Dashboard'","Add widgets (charts, tables, metrics)","Arrange widgets by dragging","Save and set as default if desired"]}]}];function Xut(){const[e,t]=x.useState(""),[n,r]=x.useState("getting-started");Aj.filter(a=>a.content.some(o=>o.title.toLowerCase().includes(e.toLowerCase())||o.description.toLowerCase().includes(e.toLowerCase())));const i=Aj.find(a=>a.id===n)||Aj[0];return s.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx($0,{className:"h-8 w-8 text-primary"}),s.jsx("h1",{className:"text-4xl font-bold",children:"User Guide"})]}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"Learn how to use Ganttium to manage your EPC projects effectively"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search the guide...",value:e,onChange:a=>t(a.target.value),className:"pl-10"})]})}),s.jsxs(Vr,{value:n,onValueChange:r,className:"space-y-6",children:[s.jsx(Pr,{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 w-full",children:Aj.map(a=>{const o=a.icon;return s.jsxs(tt,{value:a.id,className:"flex items-center gap-2",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden md:inline",children:a.title})]},a.id)})}),s.jsxs(ht,{value:n,className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[(()=>{const a=i.icon;return s.jsx(a,{className:"h-6 w-6 text-primary"})})(),s.jsxs("div",{children:[s.jsx(Se,{children:i.title}),s.jsx(it,{children:i.description})]})]})}),s.jsx(ce,{className:"space-y-6",children:i.content.map((a,o)=>s.jsxs("div",{className:"border-l-4 border-primary pl-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-1",children:a.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),a.steps&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Steps:"}),s.jsx("ol",{className:"space-y-2",children:a.steps.map((l,c)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(ae,{variant:"outline",className:"mt-0.5",children:c+1}),s.jsx("span",{children:l})]},c))})]}),a.tips&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(oc,{className:"h-4 w-4"}),"Tips:"]}),s.jsx("ul",{className:"space-y-1",children:a.tips.map((l,c)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(qa,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),s.jsx("span",{children:l})]},c))})]})]},o))})]}),s.jsxs(ie,{children:[s.jsx(Ne,{children:s.jsx(Se,{children:"Quick Links"})}),s.jsx(ce,{children:s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[s.jsxs("a",{href:"/bug-report",className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oc,{className:"h-4 w-4"}),s.jsx("span",{children:"Report a Bug"})]}),s.jsx(yf,{className:"h-4 w-4"})]}),s.jsxs("a",{href:"/settings",className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d1,{className:"h-4 w-4"}),s.jsx("span",{children:"Settings"})]}),s.jsx(yf,{className:"h-4 w-4"})]})]})})]})]})]})]})})}function Zut(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(ie,{className:"w-full max-w-md mx-4",children:s.jsxs(ce,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(bt,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Jut(){return PRe(),s.jsxs(EH,{children:[s.jsx(rn,{path:"/",component:Qst}),s.jsx(rn,{path:"/wbs",component:Mot}),s.jsx(rn,{path:"/gantt",component:Rot}),s.jsx(rn,{path:"/kanban",component:Fot}),s.jsx(rn,{path:"/calendar",component:zot}),s.jsx(rn,{path:"/stakeholders",component:Flt}),s.jsx(rn,{path:"/raci-matrix",component:Blt}),s.jsx(rn,{path:"/resources",component:Nut}),s.jsx(rn,{path:"/risks",component:Wlt}),s.jsx(rn,{path:"/issues",component:Ylt}),s.jsx(rn,{path:"/change-requests",component:Wut}),s.jsx(rn,{path:"/cost",component:ect}),s.jsx(rn,{path:"/documents",component:kut}),s.jsx(rn,{path:"/analytics",component:Sut}),s.jsx(rn,{path:"/reports",component:Ict}),s.jsx(rn,{path:"/email-templates",component:()=>(window.location.href="/settings?tab=email-templates",null)}),s.jsx(rn,{path:"/ai-assistant",component:Dct}),s.jsx(rn,{path:"/chat",component:But}),s.jsx(rn,{path:"/settings",component:aut}),s.jsx(rn,{path:"/users",component:()=>(window.location.href="/settings?tab=users",null)}),s.jsx(rn,{path:"/pmo/dashboard",component:Eut}),s.jsx(rn,{path:"/pmo/programs",component:Rut}),s.jsx(rn,{path:"/pmo/projects",component:Iut}),s.jsx(rn,{path:"/pmo/contacts",component:Vut}),s.jsx(rn,{path:"/pmo/lessons",component:Fut}),s.jsx(rn,{path:"/pmo/calendar",component:Aut}),s.jsx(rn,{path:"/pmo/inventory",component:Out}),s.jsx(rn,{path:"/admin",component:lut}),s.jsx(rn,{path:"/payment/:action?",component:Qut}),s.jsx(rn,{path:"/bug-report",component:Yut}),s.jsx(rn,{path:"/bug-reports",component:eV}),s.jsx(rn,{path:"/bug-reports/:id",component:eV}),s.jsx(rn,{path:"/user-guide",component:Xut}),s.jsx(rn,{path:"/login",component:()=>s.jsx(Pfe,{to:"/"})}),s.jsx(rn,{component:Zut})]})}function edt(){return s.jsx(bRe,{children:s.jsx(tdt,{})})}function tdt(){const[e,t]=x.useState(!1),{width:n,setWidth:r,isCollapsed:i}=sre();x.useEffect(()=>{const m=g=>{(g.metaKey||g.ctrlKey)&&g.key==="k"&&(g.preventDefault(),t(!0))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]);const a={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"},o=x.useRef(null),l=2,[c,u]=x.useState(n),d=m=>{r(m)},f=()=>{var m;u(n),(m=o.current)==null||m.resize(l)},h=()=>{const m=c||n;setTimeout(()=>{var g;(g=o.current)==null||g.resize(m)},10)};return s.jsx(kve,{children:s.jsx(zOe,{children:s.jsx(xRe,{children:s.jsx(TMe,{children:s.jsxs(yRe,{children:[s.jsx(jve,{style:a,defaultOpen:!1,children:s.jsxs("div",{className:"flex h-screen w-full",children:[s.jsx(_ve,{}),s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden min-w-0",children:[s.jsx(p_e,{}),s.jsx("div",{className:"flex flex-1 overflow-hidden",children:s.jsxs(Jne,{direction:"horizontal",className:"flex flex-1 overflow-hidden",children:[s.jsx(Ew,{defaultSize:70,minSize:55,children:s.jsx("main",{className:"flex-1 h-full overflow-y-auto bg-background pb-14 md:pb-16",children:s.jsx(Jut,{})})}),s.jsx(ere,{withHandle:!0,className:"hidden lg:flex"}),s.jsx(Ew,{ref:o,defaultSize:n,minSize:l,maxSize:40,className:"hidden lg:flex",onResize:d,children:s.jsx(zMe,{className:"h-full",isCollapsed:i,onCollapse:f,onExpand:h})})]})}),s.jsx(NRe,{})]})]})}),s.jsx(Ope,{}),s.jsx(CRe,{}),s.jsx(kRe,{})]})})})})})}function ndt(){const{isAuthenticated:e,isLoading:t}=zs();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):e?s.jsx(edt,{}):s.jsxs(EH,{children:[s.jsx(rn,{path:"/login",component:Hut}),s.jsx(rn,{path:"/forgot-password",component:Kut}),s.jsx(rn,{path:"/reset-password",component:Gut}),s.jsx(rn,{component:VRe})]})}function rdt(){return x.useEffect(()=>{console.warn("Missing Google Analytics Measurement ID: VITE_GA_MEASUREMENT_ID")},[]),s.jsx(Gfe,{client:we,children:s.jsx(Ou,{children:s.jsx(m_e,{children:s.jsx(ERe,{children:s.jsx(ndt,{})})})})})}"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[SW] Service Worker registered:",e.scope),setInterval(()=>{e.update()},60*60*1e3),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New service worker available"),confirm("A new version is available. Reload to update?")&&window.location.reload())})})}).catch(e=>{console.error("[SW] Service Worker registration failed:",e)})}),navigator.serviceWorker.addEventListener("message",e=>{if(!(e.source instanceof ServiceWorker)){console.warn("[SW] Ignored message from non-ServiceWorker source");return}e.data&&e.data.type==="SYNC_COMPLETE"&&console.log("[SW] Background sync completed")}));BP(async()=>{const{initIndexedDB:e,cleanupExpiredCache:t}=await Promise.resolve().then(()=>fhe);return{initIndexedDB:e,cleanupExpiredCache:t}},void 0).then(({initIndexedDB:e,cleanupExpiredCache:t})=>{e().then(()=>{console.log("[IndexedDB] Initialized"),t()}).catch(n=>{console.error("[IndexedDB] Initialization failed:",n)})});gH(document.getElementById("root")).render(s.jsx(rdt,{}));export{lhe as g,che as r,uhe as u};
